"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7835,1072,8691,6310],{17835:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var s=t(65043),n=t(92157),l=t.n(n),o=t(73216),i=t(1177),r=t(84217),d=t(53519),c=t(61072),h=t(14282),p=t(86178),m=t.n(p),u=t(70579);const j=function(e){let{filterOptions:a,defaultOptions:t,updateSharedData:n}=e;const p=(0,o.Zp)(),[j,x]=(0,s.useState)([]),[g,y]=(0,s.useState)([]),[_,f]=(0,s.useState)([]),[v,b]=(0,s.useState)([]),[N]=(0,s.useState)(5),[S,w]=(0,s.useState)(0),[C,k]=(0,s.useState)(1),[A,O]=(0,s.useState)(!1),[T,D]=(0,s.useState)(""),[L,P]=(0,s.useState)(""),[J,F]=(0,s.useState)(""),[I,$]=(0,s.useState)([]),[R,B]=(0,s.useState)("");(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?p("/login"):(E(C,N),H(),M())}),[a]);const E=async(e,s)=>{let n=a.location,l=a.lob,o=a.businessType,i=a.agent,r=a.dateRange,d=t.startdate,c=t.enddate;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):[],l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):[],o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):[],i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):t.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),p=JSON.parse(localStorage.getItem("user")).usertype,m={method:"POST",body:JSON.stringify({page:e,limit:s,location:n,lob:l,business_type:o,newagent:i,dateRange:r,startdate:d,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"646224eab201a6f07b2dff36"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Cold",m).then((e=>e.json())).then((e=>{const a=e.total/s,t=Math.ceil(a);w(t);const n=e.data;x(n)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Cold&dashboardType=salesAdvisorDashboard",m).then((e=>e.json())).then((e=>{const a=e.total/s,t=Math.ceil(a);w(t);const n=e.data;x(n)})).catch((e=>{console.log(e)}))},H=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});a=await a.json(),y(a.data)},z=(C-1)*N,M=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getDocumentChaser",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].name,value:a[n]._id};s.push(e)}$(s)}))},q=e=>{const a=I.find((a=>a.value===e));return a?a.label:""};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{children:(0,u.jsxs)(i.A.Item,{eventKey:"1",children:[(0,u.jsx)(i.A.Header,{children:(0,u.jsx)("div",{className:"card-header new_leads",children:(0,u.jsx)("strong",{children:"Cold Leads"})})}),(0,u.jsxs)(i.A.Body,{style:{padding:"2px"},children:[(0,u.jsxs)("table",{className:"table solid",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"table-info",children:[(0,u.jsx)("th",{scope:"col",children:"Sr"}),(0,u.jsx)("th",{scope:"col",children:"Name"}),(0,u.jsx)("th",{scope:"col",children:"Phone No."}),(0,u.jsx)("th",{scope:"col",children:"Email-ID"}),(0,u.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,u.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,u.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,u.jsx)("th",{scope:"col",children:"Direct Payment"}),(0,u.jsx)("th",{scope:"col",children:"Lead Status"}),(0,u.jsx)("th",{scope:"col",children:"Forward To"}),(0,u.jsx)("th",{scope:"col",children:"Action"})]})}),(0,u.jsx)("tbody",{children:j.length>0?j.map(((e,a)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:z+a+1}),(0,u.jsx)("td",{children:e.name}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?m()(e.assign_salesadvisor_timestamp).fromNow():m()(e.new_lead_timestamp).fromNow()}),(0,u.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:a=>{return t=e._id,s=a.target.checked,void F((e=>({...e,[t]:s})));var t,s},required:!0})}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:a=>{return t=e._id,s=a.target.value,void P((e=>({...e,[t]:s})));var t,s},children:[(0,u.jsx)("option",{value:"",hidden:!0,children:e.lead_status}),g.map(((e,a)=>(0,u.jsx)("option",{value:e.lead_status,children:e.lead_status},a)))]})}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:a=>{return t=e._id,s=a.target.value,void B((e=>({...e,[t]:s})));var t,s},children:[(0,u.jsx)("option",{value:"",hidden:!0,children:void 0==e.forward_to||""==e.forward_to||null==e.forward_to?"Document Chaser":q(e.forward_to)}),I.map(((e,a)=>(0,u.jsx)("option",{value:e.value,children:e.label},a)))]})}),(0,u.jsx)("td",{className:"buttons_icons",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(async e=>{D(e);let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_new_lead_detailsbyid",{method:"post",body:JSON.stringify({ParamValue:e}),headers:{"Content-Type":"application/json"}});a=await a.json(),f(a.data[0]),b(a.data[0].policy_type[0].line_of_business_name),O(!0)})(e._id),children:(0,u.jsx)("i",{className:"fa-solid fa-eye"})})})]},a))):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"12",className:"text-center",children:(0,u.jsx)("strong",{children:"No Records Found"})})})})]}),(0,u.jsxs)("section",{children:[(0,u.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const a=JSON.parse(localStorage.getItem("user"))._id,t="{}"===JSON.stringify(J)?null:J,s="{}"===JSON.stringify(L)?null:L,l=""===R?null:R,o=new Set(Object.keys(t||{}).concat(Object.keys(s||{}),Object.keys(l||{})));for(const i of o){const e=J[i],t=L[i],s=R[i],l={method:"POST",body:JSON.stringify({id:i,direct_payment:e,lead_status:t,forward_to:s,assigningagent:a}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",l).then((e=>e.json())).then((e=>{E(C,N),n(E(C,N))}))}},children:"Save "}),(0,u.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:S,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;k(a+1),E(a+1,N,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,u.jsxs)(r.A,{size:"lg",show:A,onHide:()=>O(!1),children:[(0,u.jsx)(r.A.Header,{closeButton:!0,children:(0,u.jsx)(r.A.Title,{children:"Lead Detail"})}),(0,u.jsx)(r.A.Body,{children:(0,u.jsxs)(d.A,{children:[(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name",children:"Name"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:_.name})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"email",children:"Email"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:_.email})]})})]}),(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:_.phoneno})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:v})]})})]})]})}),(0,u.jsx)(r.A.Footer,{children:(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]})]})}},61072:(e,a,t)=>{t.d(a,{A:()=>d});var s=t(98139),n=t.n(s),l=t(65043),o=t(67852),i=t(70579);const r=l.forwardRef(((e,a)=>{let{bsPrefix:t,className:s,as:l="div",...r}=e;const d=(0,o.oU)(t,"row"),c=(0,o.gy)(),h=(0,o.Jm)(),p=`${d}-cols`,m=[];return c.forEach((e=>{const a=r[e];let t;delete r[e],null!=a&&"object"===typeof a?({cols:t}=a):t=a;const s=e!==h?`-${e}`:"";null!=t&&m.push(`${p}${s}-${t}`)})),(0,i.jsx)(l,{ref:a,...r,className:n()(s,d,...m)})}));r.displayName="Row";const d=r}}]);
//# sourceMappingURL=7835.a2dc3ada.chunk.js.map