"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3948],{73948:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var l=n(65043),s=n(73216),a=n(73023),o=n.n(a),c=n(54168),i=n(70579);const d=()=>{const e=(0,s.Zp)(),[t,n]=(0,l.useState)([]),[a,d]=(0,l.useState)([]),[r,h]=(0,l.useState)({});(0,l.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):m()}),[]);const m=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;n(t)}))},u=(e,t,n)=>{const l=[...a];l[e][n]=t,d(l)};return(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card-header",children:[(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("h4",{className:"card-title",children:"Add TPA"})})}),(0,i.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,i.jsxs)("table",{className:"table table-bordered",style:{width:"auto"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:(0,i.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={name:"",location:t};d([...a,e])},children:"+"})}),(0,i.jsx)("th",{children:"Name"}),(0,i.jsx)("th",{children:"File"}),(0,i.jsx)("th",{children:"Location"})]})}),(0,i.jsx)("tbody",{children:a.map(((e,n)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const t=[...a];t.splice(e,1),d(t)})(n),children:"x"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:e=>((e,t)=>{const{name:n,value:l}=t.target;""===l.trim()?h((e=>({...e,[n]:"This is required"}))):h((e=>({...e,[n]:""})));const s=[...a];s[e][n]=l,d(s)})(n,e),className:"form-control",name:"name",placeholder:"Name",autoComplete:"off",required:!0})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"file",onChange:e=>((e,t)=>{const{name:n,files:l}=t.target,s=[...a];s[e][n]=l[0],d(s)})(n,e),className:"form-control",name:"file",placeholder:"File",autoComplete:"off"})}),(0,i.jsx)("td",{children:(0,i.jsx)(c.default,{style:{overflow:"visible"},options:t,selectedValues:t,displayValue:"location_name",onSelect:e=>u(n,e,"location"),onRemove:e=>u(n,e,"location"),placeholder:"Select Location",showCheckbox:!0,required:!0})})]},n)))})]})}),(0,i.jsx)("div",{className:"card-footer",children:(0,i.jsx)("button",{disabled:!a.length,className:"btn btn-outline-success",onClick:t=>{t.preventDefault();try{if(a.some((e=>""===e.name.trim()||0===e.location.length)))return void o()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"});console.log("data >>>> ",a);for(let t=0;t<a.length;t++){var n;const l=new FormData;l.append("name",a[t].name);const s=null===(n=a[t].location)||void 0===n?void 0:n.map((e=>e._id));l.append("location",null===s||void 0===s?void 0:s.join(",")),l.append("file",a[t].file);fetch("https://insuranceapi-3o5t.onrender.com/api/medicalTPA",{method:"POST",body:l}).then((e=>e.json())).then((e=>{})),t==a.length-1&&(o()({text:"TPA Added Successfully",type:"success",icon:"success",button:!1}),e("/ViewmedicalTPA"),setTimeout((()=>{o().close()}),"1000"))}}catch(l){console.log(l)}},children:"Submit"})})]})})})})})}}}]);
//# sourceMappingURL=3948.2ffd8d2a.chunk.js.map