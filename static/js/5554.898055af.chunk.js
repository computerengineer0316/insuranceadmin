"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5554],{45554:(e,a,n)=>{n.r(a),n.d(a,{default:()=>j});var t=n(65043),o=n(1177),i=n(84217),l=n(14282),s=n(92157),r=n.n(s),d=n(73023),c=n.n(d),m=n(30710),u=n(73216),p=n(13836),h=n(11238),v=n(72450),x=n(70579);const j=()=>{const e=(0,u.Zp)(),[a,n]=(0,t.useState)([]),[s]=(0,t.useState)(10),[d,j]=(0,t.useState)(0),[b,g]=(0,t.useState)(1),[N,y]=(0,t.useState)([]),[f,C]=(0,t.useState)(""),[S,w]=(0,t.useState)(""),[k,_]=(0,t.useState)(!1),[A,T]=(0,t.useState)([]),[P,E]=(0,t.useState)([]),[L,M]=(0,t.useState)([]),[O,B]=(0,t.useState)(!1),[I,R]=(0,t.useState)([]),[D,F]=(0,t.useState)({}),[$,G]=(0,t.useState)(""),[H,z]=(0,t.useState)("");(0,t.useEffect)((()=>{U(b,s),q(),W(),Z()}),[]),(0,t.useEffect)((()=>{U(b,s)}),[f,S]);const V=(0,u.Zp)(),q=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/company_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{y(e.data)}))},U=(e,a)=>{const t={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};fetch(`https://insuranceapi-3o5t.onrender.com/api/getgroupmedicalMemberRequets?page=${e}&limit=${a}&company=${f}&email=${S}`,t).then((e=>e.json())).then((e=>{var a,t;n(e.data.data);const o=(null===(a=e.data)||void 0===a||null===(t=a.totalCount[0])||void 0===t?void 0:t.total)/s,i=Math.ceil(o);j(i)}))},K=(e,a)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/updateGroupMedicalStatus?id=${e}&status=${a}`,{method:"PUT",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200==e.status?(c()("Success",e.message,"success"),U(b,s)):c()("Error",e.message,"error")}))},W=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getActiveMedicalGroupPlan",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{T(e.data),console.log("planList>>>>>>>>>>>>>>>>>>>>>>>>",e.data)}))},Z=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalTPA",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{E(e.data),console.log("setTPADatal>>>>>>>>>>>>>>>>>>>>>>>>",e.data)}))},J=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getNetworksOfPlanratebyTPA?tpaid=${e}&planid=${$}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data;console.log("networkData>>>>>>>>>>>>>>>>>>>>>>>>",a);const n=[];for(let i=0;i<a.length;i++){var t,o;let e=null===(t=a[i])||void 0===t?void 0:t.networks[0];e.policy_number=null===(o=a[i])||void 0===o?void 0:o.policy_name,n.push(e)}console.log("this is network arr >>>>>>> ",n),M(n)})).catch((e=>console.log("error",e)))},Q=(b-1)*s;return(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("h4",{className:"card-title",children:"New Member Requests"})})})}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)("div",{className:"col-md-12 my-1",children:[(0,x.jsx)("a",{className:"btn btn-dark  btn-icon-text m-r-10",href:p,style:{backgroundColor:"green",marginLeft:"4px",float:"right"},download:!0,children:"Download Sample File"}),"\xa0",(0,x.jsx)("button",{className:"btn btn-primary",onClick:()=>(R([]),F({}),M([]),void _(!0)),style:{float:"right"},children:"Add Request"}),(0,x.jsx)("button",{className:"btn btn-primary",onClick:()=>V("/AddMembermanually"),style:{float:"right",marginRight:"10px"},children:"Add Member Manually"})]})}),(0,x.jsx)(o.A,{defaultActiveKey:"0",children:(0,x.jsxs)(o.A.Item,{eventKey:"0",children:[(0,x.jsx)(o.A.Header,{className:"modifyaccordian",children:"Filters "}),(0,x.jsx)(o.A.Body,{children:(0,x.jsx)("div",{className:"card-header",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Sort By Insurance co."})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",value:f,onChange:e=>C(e.target.value),children:[(0,x.jsx)("option",{value:"",children:"-- All --"}),null===N||void 0===N?void 0:N.map(((e,a)=>(0,x.jsx)("option",{value:e._id,children:e.company_name},a)))]})]})})})})]})}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsxs)("div",{className:"table-responsive",children:[(0,x.jsxs)("table",{className:"table table-bordered",children:[(0,x.jsx)("thead",{className:"thead-dark",children:(0,x.jsxs)("tr",{className:"table-info",children:[(0,x.jsx)("th",{children:"Sr No."}),(0,x.jsx)("th",{children:"Company Name"}),(0,x.jsx)("th",{children:"plan Name"}),(0,x.jsx)("th",{children:"HR"}),(0,x.jsx)("th",{children:"TPA"}),(0,x.jsx)("th",{children:"Network"}),(0,x.jsx)("th",{children:"Export Data to Excel"}),(0,x.jsx)("th",{children:"Action"})]})}),(0,x.jsx)("tbody",{children:1==O?(0,x.jsx)("div",{className:"loader-container",children:(0,x.jsx)(m.A,{color:"#000000",loading:O,size:50})}):a&&a.length>0?a.map(((a,n)=>{var t,o,i,l,s;return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:Q+n+1}),(0,x.jsx)("td",{children:null===(t=a.company_id[0])||void 0===t?void 0:t.company_name}),(0,x.jsx)("td",{children:null===(o=a.plan_id[0])||void 0===o?void 0:o.plan_name}),(0,x.jsx)("td",{children:null===(i=a.HRUser[0])||void 0===i?void 0:i.name}),(0,x.jsx)("td",{children:null===(l=a.tpa[0])||void 0===l?void 0:l.name}),(0,x.jsx)("td",{children:null===(s=a.network[0])||void 0===s?void 0:s.name}),(0,x.jsx)("td",{children:(0,x.jsx)("button",{className:"btn btn-success",onClick:()=>{return e=a._id,void fetch(`https://insuranceapi-3o5t.onrender.com/api/groupMedicalHrLeadToExcel?id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{if(200==e.status){const a=e.data;console.log(a);const n="xlsx",t=null===a||void 0===a?void 0:a.map(((e,a)=>({"Sl No.":null===e||void 0===e?void 0:e.SINumber,"First Name ":null===e||void 0===e?void 0:e.firstName,"Middle Name":null===e||void 0===e?void 0:e.middleName,"Last Name":null===e||void 0===e?void 0:e.lastnName,Email:null===e||void 0===e?void 0:e.email,"Mobile Number":null===e||void 0===e?void 0:e.mobileNumber,"Date Of Birth ":null===e||void 0===e?void 0:e.dateOfBirth,Gender:null===e||void 0===e?void 0:e.gender,"Marital Status":null===e||void 0===e?void 0:e.maritalStatus,Relation:null===e||void 0===e?void 0:e.relation,Category:null===e||void 0===e?void 0:e.category,Region:null===e||void 0===e?void 0:e.region,LSB:null===e||void 0===e?void 0:e.LSB,Nationality:null===e||void 0===e?void 0:e.national,"Passport Number":null===e||void 0===e?void 0:e.passportNumber,"Eid Number":null===e||void 0===e?void 0:e.eidNumber,"Uid Number":null===e||void 0===e?void 0:e.uidNumber,"Visa Issued Location":null===e||void 0===e?void 0:e.visaIssuedLocation,"Actual Salary Band":null===e||void 0===e?void 0:e.actualSalaryBand,"Person Commission":null===e||void 0===e?void 0:e.personCommission,"Residential Location":null===e||void 0===e?void 0:e.residentialLocation,"Work Location":null===e||void 0===e?void 0:e.workLocation,Email:null===e||void 0===e?void 0:e.email,"Mobile Number":null===e||void 0===e?void 0:e.mobileNumber,"Photo File Name":null===e||void 0===e?void 0:e.photoFileName,"Sponsor Type ":null===e||void 0===e?void 0:e.sponsorType,"Sponsor Id":null===e||void 0===e?void 0:e.sponsorId,"Sponsor Contact Number":null===e||void 0===e?void 0:e.sponsorContactNumber,"Sponsor Contact Email ":null===e||void 0===e?void 0:e.sponsorContactEmail,Occupation:null===e||void 0===e?void 0:e.occupation,"Addition Effective Date":null===e||void 0===e?void 0:e.AdditionEffectiveDate,"Visa File Number":null===e||void 0===e?void 0:e.visaFileNumber,"Birth Certificate Number":null===e||void 0===e?void 0:e.birthCertificateNumber}))),o={Sheets:{data:h.Wp.json_to_sheet(t)},SheetNames:["data"]},i=h.M9(o,{booktype:"xlsx",type:"array"}),l=new Blob([i],{type:n});v.saveAs(l,"EmployeeData.xlsx")}else c()("Error",e.message,"error")}));var e},children:(0,x.jsx)("i",{className:"fa fa-file-excel","aria-hidden":"true"})})}),(0,x.jsxs)("td",{children:[1==a.status?(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-warning",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&K(a._id,0)},children:"Inprogress"})}):(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&K(a._id,1)},children:"Approved"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-info",onClick:()=>e(`/ViewNewlyAddedMembers?id=${a._id}`),children:"View Members"})})]})]},n)})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"5",children:"No data found"})})})]}),(0,x.jsx)(r(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:d,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{let a=e.selected,n=Math.ceil(a+1);U(n,10)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})}),(0,x.jsxs)(i.A,{size:"lg",show:k,onHide:()=>_(!1),children:[(0,x.jsx)(i.A.Header,{closeButton:!0,children:(0,x.jsx)(i.A.Title,{children:"Add Request"})}),(0,x.jsx)(i.A.Body,{children:(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsx)("div",{className:"card",children:(0,x.jsx)("div",{className:"card-body",children:(0,x.jsxs)("form",{method:"POST",onSubmit:e=>{e.preventDefault(),B(!0),_(!1);const a=new FormData(e.target),n=a.get("company_id"),t=a.get("plan"),o=a.get("tpa");let i=a.get("network_list");i=i.split("-")[0];const l=a.get("policy_number"),r=a.get("file"),d=new FormData;d.append("file",r),d.append("planCompanyId",n),d.append("planId",t),d.append("TPAId",o),d.append("networkListId",i),d.append("policy_number",l);const m={method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:d};fetch("https://insuranceapi-3o5t.onrender.com/api/addBulkGroupMedicalLeadsByHr",m).then((e=>e.json())).then((e=>{console.log("data>>>>>>>>>>>>>",e),201==e.status&&(c()("Success",e.message,"success"),U(b,s),B(!1)),c()("Error",e.message,"error"),B(!1)}))},children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Plan"})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",name:"plan",onChange:e=>(e=>{R([]),M([]),z("");const{name:a,value:n}=e.target;G(n),fetch(`https://insuranceapi-3o5t.onrender.com/api/getRatesOfPlan?planId=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,n=[];for(let o=0;o<a.length;o++){var t;n.push(null===(t=a[o])||void 0===t?void 0:t.TPAs[0])}R(n),F(e.company[0].company_id[0])})).catch((e=>console.log("error",e)))})(e),children:[(0,x.jsx)("option",{value:"",children:"Select Plans"}),null===A||void 0===A?void 0:A.map(((e,a)=>(0,x.jsx)("option",{value:e._id,children:e.plan_name},a)))]})]}),(0,x.jsxs)("div",{className:"col-lg-6",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Insurance Company"})}),(0,x.jsx)("br",{}),(0,x.jsx)("select",{className:"form-control",name:"company_id",children:(0,x.jsx)("option",{value:D._id,children:D.company_name})})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"TPA"})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",name:"tpa",onChange:e=>J(e.target.value),children:[null!==I&&void 0!==I&&I.length?(0,x.jsx)("option",{value:"",children:"Select TPA"}):"",null===I||void 0===I?void 0:I.map(((e,a)=>(0,x.jsx)("option",{value:e._id,children:e.name},a)))]})]})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Network List"})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",name:"network_list",onChange:e=>(e=>{const a=e.split("-")[1];z(a)})(e.target.value),children:[L.length?(0,x.jsx)("option",{value:"",children:"Select Network List"}):"",null===L||void 0===L?void 0:L.map(((e,a)=>(0,x.jsx)("option",{value:e._id+"-"+e.policy_number,children:e.name},a)))]})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Policy Number"})}),(0,x.jsx)("br",{}),(0,x.jsx)("input",{type:"text",className:"form-control",defaultValue:H,name:"policy_number"})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"File"})}),(0,x.jsx)("br",{}),(0,x.jsx)("input",{type:"file",className:"form-control",name:"file"})]})]}),(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,x.jsx)(i.A.Footer,{children:(0,x.jsx)(l.A,{variant:"secondary",onClick:()=>_(!1),children:"Close"})})]})]})]})})})})}},30710:(e,a,n)=>{n.d(a,{A:()=>d});var t=n(65043),o={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function i(e){var a=function(e){if("number"===typeof e)return{value:e,unit:"px"};var a,n=(e.match(/^[0-9.]*/)||"").toString();a=n.includes(".")?parseFloat(n):parseInt(n,10);var t=(e.match(/[^0-9]*$/)||"").toString();return o[t]?{value:a,unit:t}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(a,"px.")),{value:a,unit:"px"})}(e);return"".concat(a.value).concat(a.unit)}var l=function(){return l=Object.assign||function(e){for(var a,n=1,t=arguments.length;n<t;n++)for(var o in a=arguments[n])Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e},l.apply(this,arguments)},s=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)a.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]])}return n},r=function(e,a,n){var t="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return t;var o=document.createElement("style");document.head.appendChild(o);var i=o.sheet,l="\n    @keyframes ".concat(t," {\n      ").concat(a,"\n    }\n  ");return i&&i.insertRule(l,0),t}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");const d=function(e){var a=e.loading,n=void 0===a||a,o=e.color,d=void 0===o?"#000000":o,c=e.speedMultiplier,m=void 0===c?1:c,u=e.cssOverride,p=void 0===u?{}:u,h=e.size,v=void 0===h?35:h,x=s(e,["loading","color","speedMultiplier","cssOverride","size"]),j=l({background:"transparent !important",width:i(v),height:i(v),borderRadius:"100%",border:"2px solid",borderTopColor:d,borderBottomColor:"transparent",borderLeftColor:d,borderRightColor:d,display:"inline-block",animation:"".concat(r," ").concat(.75/m,"s 0s infinite linear"),animationFillMode:"both"},p);return n?t.createElement("span",l({style:j},x)):null}},13836:(e,a,n)=>{e.exports=n.p+"static/media/Member-addition-Sample-File.b9f73d477a9e98cdad90.xlsx"}}]);
//# sourceMappingURL=5554.898055af.chunk.js.map