"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2695],{11462:(e,l,s)=>{s.r(l),s.d(l,{default:()=>b});var a=s(65043),t=s(73216),n=s(49456),o=(s(93204),s(66097),s(61072)),i=s(78602),c=s(84217),r=s(53519),d=s(14282),m=s(54168),h=(s(91033),s(98465),s(1177)),u=(s(12488),s(84596),s(93946),s(92157)),p=s.n(u),j=s(70579);const x=function(e){let{filterOptions:l,defaultOptions:s}=e;const n=(0,t.Zp)(),[o,i]=(0,a.useState)(!1),[m,u]=(0,a.useState)([]),[x,b]=(0,a.useState)(0),[f]=(0,a.useState)(10),[N,y]=(0,a.useState)([]),[v,g]=(0,a.useState)([]),[_,C]=(0,a.useState)([]),[S,k]=(0,a.useState)([]),[A,T]=(0,a.useState)(1),[w,V]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?n("/login"):(E(A,f),M(),P())}),[l]);const E=async(e,a)=>{JSON.parse(localStorage.getItem("user"));let t=l.location,n=l.lob,o=l.businessType,i=l.dateRange,c=s.startdate,r=s.enddate;t=null!=t&&void 0!=t&&Array.isArray(t)&&0!==t.length?t.map((e=>e.value)):s.defaultlocation.map((e=>e.value)),n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):s.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):s.defaultbusinessType.map((e=>e.value));localStorage.getItem("token");const d=JSON.parse(localStorage.getItem("user")).usertype,m={method:"POST",body:JSON.stringify({page:e,limit:a,location:t,lob:n,business_type:o,dateRange:i,startdate:c,enddate:r}),headers:{"Content-Type":"application/json"}};"64622470b201a6f07b2dff22"==d&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getallleads",m).then((e=>e.json())).then((e=>{console.log(e.data,">>>>>>>>>>>>>>>>>>>>>>>>>data");const l=e.total/a,s=Math.ceil(l);b(s);const t=e.data;u(t)})).catch((e=>{console.log(e)}))};console.log(w,">>>>>>>>>>>>>>>item");const M=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getlistMakeMotor",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{y(e.data)}))},P=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const l=e.data;l.length;g(l)}))},O=(A-1)*f;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.A,{defaultActiveKey:"0",flush:!0,children:(0,j.jsxs)(h.A.Item,{eventKey:"0",children:[(0,j.jsx)(h.A.Header,{children:(0,j.jsx)("div",{className:"card-header new_leads",children:(0,j.jsx)("strong",{children:"All Leads"})})}),(0,j.jsxs)(h.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,j.jsxs)("table",{className:"table table-bordered",children:[(0,j.jsx)("thead",{className:"thead-dark",children:(0,j.jsxs)("tr",{className:"table-info",children:[(0,j.jsx)("th",{scope:"col",children:"#"}),(0,j.jsx)("th",{scope:"col",children:"Name"}),(0,j.jsx)("th",{scope:"col",children:"Email"}),(0,j.jsx)("th",{scope:"col",children:"Nationality"}),(0,j.jsx)("th",{scope:"col",children:"Phone No"}),(0,j.jsx)("th",{scope:"col",children:"Line Of Business"}),(0,j.jsx)("th",{scope:"col",children:"Business Type"}),(0,j.jsx)("th",{scope:"col",children:"Policy Type"}),(0,j.jsx)("th",{scope:"col",children:"Car Maker"}),(0,j.jsx)("th",{scope:"col",children:"Car Model"}),(0,j.jsx)("th",{scope:"col",children:"Car Varient"}),(0,j.jsx)("th",{scope:"col",children:"Model Year"}),(0,j.jsx)("th",{scope:"col",children:"Time Stamp"}),(0,j.jsx)("th",{scope:"col",children:"Action"})]})}),(0,j.jsx)("tbody",{children:(null===m||void 0===m?void 0:m.length)>0?m.map(((e,l)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:O+l+1}),(0,j.jsx)("td",{children:e.name}),(0,j.jsx)("td",{children:e.email}),(0,j.jsx)("td",{children:e.nationality}),(0,j.jsx)("td",{children:e.phoneno}),(0,j.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,j.jsx)("td",{children:e.business_type}),(0,j.jsx)("td",{children:e.polcy_type}),(0,j.jsx)("td",{children:e.car_maker}),(0,j.jsx)("td",{children:e.car_model}),(0,j.jsx)("td",{children:e.car_variant}),(0,j.jsx)("td",{children:e.model_year}),(0,j.jsx)("td",{children:e.new_lead_timestamp.slice(0,10)}),(0,j.jsx)("td",{className:"buttons_icons",children:(0,j.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>(e=>{i(!0),V(e)})(e),children:(0,j.jsx)("i",{className:"fa-solid fa-pencil"})})})]},l))):(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:"12",className:"text-center",children:(0,j.jsx)("strong",{children:"No Records Found"})})})})]}),(0,j.jsx)("section",{children:(0,j.jsx)(p(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:x,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const l=e.selected;console.log(l,">>>>>>>>>>>>>>>selectedPage"),T(l+1),E(l+1,f)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})}),(0,j.jsxs)(c.A,{size:"lg",show:o,onHide:()=>i(!1),children:[(0,j.jsx)(c.A.Header,{closeButton:!0,children:(0,j.jsx)(c.A.Title,{children:"Edit Lead details"})}),(0,j.jsx)(c.A.Body,{children:(0,j.jsx)(r.A,{children:(0,j.jsx)("div",{className:"card-body",children:(0,j.jsxs)("form",{action:"/",method:"POST",children:[(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Name"}),(0,j.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"Enter Plan Name",name:"plan_name",autoComplete:"off",defaultValue:w.name})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Email"}),(0,j.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"Enter Plan Name",name:"plan_name",autoComplete:"off",defaultValue:w.email})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Phone No"}),(0,j.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"Enter Plan Name",name:"plan_name",autoComplete:"off",defaultValue:w.phoneno})]})}),(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Plan Label"}),(0,j.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"Enter Plan Label",name:"plan_label",autoComplete:"off",defaultValue:" "})]})}),(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Line Of Buisness"}),(0,j.jsxs)("select",{className:"form-control",name:"make_motor",children:[(0,j.jsx)("option",{value:"",children:"Select Line Of Buisness"}),null===v||void 0===v?void 0:v.map(((e,l)=>(0,j.jsx)("option",{value:e._id,children:e.line_of_business_name},l)))]})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Buisness Type"}),(0,j.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"Enter Plan Name",name:"plan_name",autoComplete:"off",defaultValue:" "})]})}),(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Policy Type"}),(0,j.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"Enter Plan Name",name:"plan_name",autoComplete:"off",defaultValue:" "})]})}),(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Model Year"}),(0,j.jsx)("input",{required:!0,type:"text",name:"car_value",className:"form-control",placeholder:"Enter Car Value",autoComplete:"off",defaultValue:" "})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Car Model"}),(0,j.jsxs)("select",{className:"form-control",name:"make_motor",children:[(0,j.jsx)("option",{value:"",children:"Select Car Model"}),null===N||void 0===N?void 0:N.map(((e,l)=>(0,j.jsx)("option",{value:e._id,children:e.make_motor_name},l)))]})]})}),(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Car Maker"}),(0,j.jsxs)("select",{className:"form-control",name:"make_motor",onChange:e=>{const l=e.target.value;fetch(`https://insuranceapi-3o5t.onrender.com/api/modelmotor/${l}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const l=e.data,s=l.length,a=[];for(let t=0;t<s;t++){const e={label:l[t].motor_model_name,value:l[t]._id};a.push(e)}C(a)}))},children:[(0,j.jsx)("option",{value:"",children:"Select Make Motor"}),null===N||void 0===N?void 0:N.map(((e,l)=>(0,j.jsx)("option",{value:e._id,children:e.make_motor_name},l)))]})]})}),(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Car Varient"}),(0,j.jsxs)("select",{className:"form-control",name:"make_motor",children:[(0,j.jsx)("option",{value:"",children:"Select Make Motor"}),null===N||void 0===N?void 0:N.map(((e,l)=>(0,j.jsx)("option",{value:e._id,children:e.make_motor_name},l)))]})]})})]}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Electric Vehicle"}),(0,j.jsxs)("select",{required:!0,className:"form-control",name:"electric_vehicle",children:[(0,j.jsx)("option",{value:"0",children:"Select"}),(0,j.jsx)("option",{value:"1",children:"Yes"}),(0,j.jsx)("option",{value:"0",children:"No"})]})]})}),(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Vehicle Specification"}),(0,j.jsx)("input",{required:!0,type:"text",name:"min_premium",className:"form-control",placeholder:"Enter Vehicle Specification",autoComplete:"off",defaultValue:""})]})}),(0,j.jsx)("div",{className:"col-md-4",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{children:"Payment Status"}),(0,j.jsx)("input",{required:!0,type:"text",name:"min_premium",className:"form-control",placeholder:"Enter Vehicle Specification",autoComplete:"off",defaultValue:""})]})})]}),(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-12",children:(0,j.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:"Update"})})})]})})})}),(0,j.jsx)(c.A.Footer,{children:(0,j.jsx)(d.A,{variant:"secondary",onClick:()=>i(!1),children:"Close"})})]})]})};s(85704);const b=function(){const e=(0,t.Zp)(),[l,s]=(0,a.useState)([]),[h,u]=(0,a.useState)(),[p,b]=(0,a.useState)([]),[f,N]=(0,a.useState)(),[y,v]=(0,a.useState)([]),[g,_]=(0,a.useState)(),[C,S]=(0,a.useState)([]),[k,A]=(0,a.useState)("daily"),[T,w]=(0,a.useState)(!1),[V,E]=(0,a.useState)(new Date),[M,P]=(0,a.useState)(new Date),[O,L]=(0,a.useState)([]);(0,a.useEffect)((()=>{const l=localStorage.getItem("token");if(null===l||void 0===l||""===l)e("/login");else{const e=JSON.parse(localStorage.getItem("user")).admin_business_type;if(e.length>0){const l=e,s=l.length,a=[];for(let e=0;e<s;e++){let s;s=l[e].type,s=s.split(" ");const t={label:l[e].type,value:s[0]};a.push(t)}v(a)}else{v([{label:"New Business",value:"New"},{label:"Renewal Business",value:"Renewal"}])}B(),R(),q(),J()}}),[]);const B=()=>{const e=JSON.parse(localStorage.getItem("user")).location;if(e.length>0){const l=e,a=l.length,t=[];for(let e=0;e<a;e++){const s={label:l[e].loc_name,value:l[e].loc_id};t.push(s)}s(t)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const l=e.data,a=l.length,t=[];for(let s=0;s<a;s++){const e={label:l[s].location_name,value:l[s]._id};t.push(e)}s(t)}))}},R=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const l=e,s=l.length,a=[];for(let e=0;e<s;e++){const s={label:l[e].lob_name,value:l[e].lob_id};a.push(s)}b(a)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const l=e.data,s=null===l||void 0===l?void 0:l.length,a=[];for(let t=0;t<s;t++){const e={label:l[t].line_of_business_name,value:l[t]._id};a.push(e)}b(a)}))}},q=async e=>{S(e)},F=e=>{A(e)},I={defaultlocation:l,defaultlob:p,defaultbusinessType:y,defaultdateRange:k,startdate:V,enddate:M,userType:C},D=(e,l)=>{switch(e){case"location":u(l);break;case"lob":N(l);break;case"businessType":_(l)}},G={location:h,lob:f,businessType:g,dateRange:k},J=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const l=e.data;console.log(l,"lobdt"),L(l)}))};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("section",{className:"mb-2",children:[(0,j.jsxs)(o.A,{children:[(0,j.jsx)(i.A,{className:"",sm:5,children:(0,j.jsx)("h4",{id:"dashboard",className:"card-title mb-0",children:"Dashboard"})}),(0,j.jsx)(i.A,{sm:7,className:"d-none d-md-block",children:(0,j.jsxs)("div",{className:"float-end me-3",children:[(0,j.jsx)("button",{onClick:()=>F("daily"),className:""+("daily"===k?"btn btn-selected":"btn btn-light"),children:"Daily"}),(0,j.jsx)("button",{onClick:()=>F("weekly"),className:""+("weekly"===k?"btn btn-selected":"btn btn-light"),children:"Weekly"}),(0,j.jsx)("button",{onClick:()=>F("monthly"),className:""+("monthly"===k?"btn btn-selected":"btn btn-light"),children:"Monthly"}),(0,j.jsx)("button",{onClick:()=>F("yearly"),className:""+("yearly"===k?"btn btn-selected":"btn btn-light"),children:"Yearly"}),(0,j.jsx)("button",{onClick:()=>{w(!0),A("customized")},className:""+("customized"===k?"btn btn-selected":"btn btn-light"),children:"Customized"})]})}),(0,j.jsx)(i.A,{className:"mb-3",sm:3,children:(0,j.jsx)("div",{children:I.defaultlocation<2?(0,j.jsx)(m.default,{options:I.defaultlocation,displayValue:"label",selectedValues:I.defaultlocation,showArrow:!1}):(0,j.jsx)(m.default,{options:I.defaultlocation,displayValue:"label",onSelect:e=>D("location",e),onRemove:e=>D("location",e),placeholder:"Select location",selectedValues:h,showArrow:!0})})}),(0,j.jsx)(i.A,{className:"mb-3",sm:3,children:(0,j.jsx)("div",{children:I.defaultbusinessType.length<2?(0,j.jsx)(m.default,{options:I.defaultbusinessType,displayValue:"label",selectedValues:I.defaultbusinessType,showArrow:!1}):(0,j.jsx)(m.default,{options:I.defaultbusinessType,displayValue:"label",onSelect:e=>D("businessType",e),onRemove:e=>D("businessType",e),placeholder:"Select business type",selectedValues:g,showArrow:!0})})}),(0,j.jsx)(i.A,{className:"mb-3",sm:3,children:(0,j.jsx)("div",{children:I.defaultlob.length<2?(0,j.jsx)(m.default,{options:I.defaultlob,displayValue:"label",selectedValues:I.defaultlob,showArrow:!1}):(0,j.jsx)(m.default,{options:I.defaultlob,displayValue:"label",onSelect:e=>D("lob",e),onRemove:e=>D("lob",e),placeholder:"Select line of business",selectedValues:f,showArrow:!0})})})]}),(0,j.jsx)(o.A,{children:(0,j.jsx)(x,{defaultOptions:I,filterOptions:G})})]}),(0,j.jsxs)(c.A,{size:"lg",show:T,onHide:()=>w(!1),children:[(0,j.jsx)(c.A.Header,{closeButton:!0,children:(0,j.jsx)(c.A.Title,{children:"Custom Dates"})}),(0,j.jsx)(c.A.Body,{children:(0,j.jsxs)(r.A,{children:[(0,j.jsxs)(o.A,{children:[(0,j.jsx)("label",{htmlFor:"",children:"From"}),(0,j.jsx)(n.A,{onChange:E,value:V,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]}),(0,j.jsxs)(o.A,{children:[(0,j.jsx)("label",{htmlFor:"",children:"To"}),(0,j.jsx)(n.A,{onChange:P,value:M,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]})]})}),(0,j.jsx)(c.A.Footer,{children:(0,j.jsx)(d.A,{variant:"secondary",onClick:()=>w(!1),children:"Close"})})]})]})}}}]);
//# sourceMappingURL=2695.99021da0.chunk.js.map