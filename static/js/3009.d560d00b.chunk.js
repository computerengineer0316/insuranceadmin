"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3009],{73009:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(65043),n=s(73216),o=s(73023),r=s.n(o),c=s(54168),i=s(70579);const l=()=>{const e=(0,n.Zp)(),[t,s]=(0,a.useState)([]);(0,a.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):o()}),[]);const o=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,n=[];for(let s=0;s<a;s++){const e={label:t[s].location_name,value:t[s]._id};n.push(e)}s(n)}))},[l,d]=(0,a.useState)([]),[h,u]=(0,a.useState)({}),m=(e,t,s)=>{console.log(t,"multiselect value");const a=[...l];a[e][s]=t,d(a)};return(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("h4",{className:"card-title",children:"Add Area Of Registration"})})})}),(0,i.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,i.jsxs)("table",{className:"table table-bordered",style:{width:"auto"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:(0,i.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={area_of_registration_name:"",location:t};d([...l,e])},children:"+"})}),(0,i.jsx)("th",{children:"Area Of Registration Name"}),(0,i.jsx)("th",{children:"Location"})]})}),(0,i.jsx)("tbody",{children:l.map(((e,s)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const t=[...l];t.splice(e,1),d(t)})(s),children:"x"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:e=>((e,t)=>{const{name:s,value:a}=t.target;""===a.trim()?u((e=>({...e,[s]:"This is required"}))):u((e=>({...e,[s]:""})));const n=[...l];n[e][s]=a,d(n)})(s,e),className:"form-control",name:"area_of_registration_name",placeholder:"Area Of Registration Name",autoComplete:"off",required:!0})}),(0,i.jsx)("td",{children:(0,i.jsx)(c.default,{options:t,selectedValues:t,displayValue:"label",onSelect:e=>m(s,e,"location"),onRemove:e=>m(s,e,"location"),placeholder:"Select Location",showCheckbox:!0,required:!0})})]},s)))})]})}),(0,i.jsx)("div",{className:"card-footer",children:(0,i.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{try{if(l.some((e=>""===e.area_of_registration_name||0==e.location.length)))return void r()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning",button:!1});const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};fetch("https://insuranceapi-3o5t.onrender.com/api/add_area_of_registeration",t).then((e=>e.json())).then((t=>{200==t.status?(r()({text:t.message,type:"success",icon:"success",button:!1}),e("/area-of-registration"),setTimeout((()=>{r().close()}),1e3)):(r()({title:"Error!",text:t.message,type:"error",icon:"error",button:!1}),e("/area-of-registration"),setTimeout((()=>{r().close()}),1e3))}))}catch(t){console.log(t)}},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=3009.d560d00b.chunk.js.map