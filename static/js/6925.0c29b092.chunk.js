"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6925],{46925:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(65043),i=s(53519),n=s(84217),r=s(14282),l=s(73216),c=s(92157),o=s.n(c),d=s(73023),m=s.n(d),h=(s(54168),s(86213)),u=s(70579);const x=()=>{var e;const t=(0,l.Zp)(),[s,c]=(0,a.useState)(10),[d,x]=(0,a.useState)(0),[g]=(0,a.useState)(5),[p,j]=(0,a.useState)(1),[v,N]=(0,a.useState)([]),[b,y]=(0,a.useState)(!1),[f,S]=(0,a.useState)(!1),[A,_]=(0,a.useState)([]),[k,w]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)t("/login");else{var s;const e=JSON.parse(localStorage.getItem("user")),t=(null===e||void 0===e||null===(s=e.master_permission)||void 0===s?void 0:s[0])||{};N(t)}D(p,g)}),[]);const C=async(e,t)=>{const s={id:e,status:t};h.A.post("https://insuranceapi-3o5t.onrender.com/api/updatespRatingStatus",s).then((e=>{200==e.status?(y(!1),D(p,g),m()({title:"Wow!",text:e.message,type:"success",icon:"success"}).then((function(){}))):(y(!1),m()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){})))}))},D=(e,t)=>{try{h.A.get(`https://insuranceapi-3o5t.onrender.com/api/getAllspRatings?page=${e}&perPage=${t}`).then((e=>{if(200==e.status){const s=e.data.count/t,a=Math.ceil(s);x(a),_(e.data.data),y(!1)}else y(!1),m()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){}))}))}catch(s){console.log(s.message)}},R=(p-1)*g;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{children:(0,u.jsxs)("div",{className:"card mb-4",children:[(0,u.jsx)("div",{className:"card-header",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsx)("h4",{className:"card-title",children:"S&P Ratings"})}),(0,u.jsx)("div",{className:"col-md-6",children:null!==v&&void 0!==v&&null!==(e=v.sp_rating)&&void 0!==e&&e.includes("create")?(0,u.jsx)("button",{className:"btn btn-primary",style:{float:"right"},onClick:()=>y(!0),children:"Add S&P Ratings"}):""})]})}),(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsxs)("table",{className:"table table-bordered yatchplanss123",children:[(0,u.jsx)("thead",{className:"thead-dark",children:(0,u.jsxs)("tr",{className:"table-info",children:[(0,u.jsx)("th",{scope:"col",children:"#"}),(0,u.jsx)("th",{scope:"col",children:"Rating Symbol"}),(0,u.jsx)("th",{scope:"col",children:"Definition"}),(0,u.jsx)("th",{scope:"col",children:"Action"})]})}),(0,u.jsx)("tbody",{children:(null===A||void 0===A?void 0:A.length)>0?A.map(((e,t)=>{var s,a;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:R+t+1}),(0,u.jsx)("td",{children:e.ratingSymbol}),(0,u.jsx)("td",{className:"text-wrap",children:e.ratingDefinition}),(0,u.jsxs)("td",{children:[(null===v||void 0===v||null===(s=v.sp_rating)||void 0===s?void 0:s.includes("edit"))&&(0,u.jsx)("button",{className:"btn btn-primary",onClick:()=>(e=>{try{h.A.get(`https://insuranceapi-3o5t.onrender.com/api/getSingleSpRating/${e}`).then((e=>{200==e.status?(console.log(e.data.data),w(e.data.data),S(!0)):(y(!1),m()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){})))}))}catch(t){console.log(t.message)}})(e._id),children:"Edit"})," ",(null===v||void 0===v||null===(a=v.sp_rating)||void 0===a?void 0:a.includes("edit"))&&(0,u.jsx)(u.Fragment,{children:1==e.status?(0,u.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&C(e._id,!1)},children:"Deactivate"}):(0,u.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&C(e._id,!0)},children:"Activate"})})]})]},t)})):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"6",children:"No Data Found"})})})]}),(0,u.jsx)(o(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:d,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;j(t+1),D(t+1,g)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})}),(0,u.jsxs)(n.A,{size:"lg",show:b,onHide:()=>y(!1),children:[(0,u.jsx)(n.A.Header,{closeButton:!0,children:(0,u.jsx)(n.A.Title,{children:"Add S&P Rating"})}),(0,u.jsx)(n.A.Body,{children:(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("div",{children:(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),s=t.get("rating_symbol"),a=t.get("definition");console.log(s,a);const i={ratingSymbol:s,ratingDefinition:a};h.A.post("https://insuranceapi-3o5t.onrender.com/api/addspRating",i).then((e=>{201==e.status?(y(!1),m()({title:"Wow!",text:e.message,type:"success",icon:"success"}).then((function(){D(p,g)}))):(y(!1),m()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){})))}))},children:[(0,u.jsxs)("div",{className:"d-flex",children:[(0,u.jsxs)("div",{className:"col-md-3 mx-2",children:[(0,u.jsx)("strong",{children:"Rating Symbol"}),(0,u.jsx)("input",{className:"form-control ",name:"rating_symbol",type:"text",required:!0})]}),(0,u.jsxs)("div",{className:"col-md-6 mx-2",children:[(0,u.jsx)("strong",{children:"Definition"}),(0,u.jsx)("textarea",{className:"form-control ",type:"text",name:"definition",required:!0})]})]}),(0,u.jsx)("div",{children:(0,u.jsx)("button",{className:"btn btn-primary my-2 mx-2",type:"submit",children:"Submit"})})]})})})})})})}),(0,u.jsx)(n.A.Footer,{children:(0,u.jsx)(r.A,{variant:"secondary",onClick:()=>y(!1),children:"Close"})})]}),(0,u.jsxs)(n.A,{size:"lg",show:f,onHide:()=>S(!1),children:[(0,u.jsx)(n.A.Header,{closeButton:!0,children:(0,u.jsx)(n.A.Title,{children:"Edit S&P Rating"})}),(0,u.jsx)(n.A.Body,{children:(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("div",{className:"card-body",children:(0,u.jsxs)("form",{method:"PUT",onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),s=t.get("rating_symbol"),a=t.get("definition"),i={ratingSymbol:s,ratingDefinition:a};console.log(s,a,"update data");const n=k._id;h.A.put(`https://insuranceapi-3o5t.onrender.com/api/UpdateSpRating/?id=${n}`,i).then((e=>{200==e.status?(S(!1),D(p,g),m()({title:"Wow!",text:e.message,type:"success",icon:"success"})):(S(!1),m()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){})))}))},children:[(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"form-group ",children:(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group ",children:[(0,u.jsx)("strong",{children:"Rating Symbol"}),(0,u.jsx)("input",{className:"form-control ",name:"rating_symbol",type:"text",defaultValue:k.ratingSymbol})]})})})}),(0,u.jsx)("div",{className:"row",children:(0,u.jsxs)("div",{className:"col-md-6 mx-1",children:[(0,u.jsx)("strong",{children:"Definition"}),(0,u.jsx)("textarea",{className:"form-control ",type:"text",name:"definition",defaultValue:k.ratingDefinition})]})}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,u.jsx)(n.A.Footer,{children:(0,u.jsx)(r.A,{variant:"secondary",onClick:()=>S(!1),children:"Close"})})]})]})}}}]);
//# sourceMappingURL=6925.0c29b092.chunk.js.map