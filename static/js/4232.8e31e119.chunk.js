"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4232],{84232:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var s=n(65043),o=n(73216),i=n(73023),c=n.n(i),a=n(54168),l=n(70579);const r=()=>{const e=(0,o.Zp)(),[t,n]=(0,s.useState)([]),[i,r]=(0,s.useState)({}),[d,h]=(0,s.useState)([]);(0,s.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):u()}),[]);const u=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=t.length,s=[];for(let o=0;o<n;o++){const e={label:t[o].location_name,value:t[o]._id};s.push(e)}h(s)}))},m=(e,s)=>{const o=[...t];o[s].location=e,n(o)},p=(e,s)=>{const{name:o,value:i}=s.target;""===i.trim()?r((e=>({...e,[o]:"This is required"}))):r((e=>({...e,[o]:""})));const c=[...t];c[e][o]=i,n(c)};return(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12",children:(0,l.jsx)("div",{className:"card",children:(0,l.jsxs)("div",{className:"card-header",children:[(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12",children:(0,l.jsx)("h4",{className:"card-title",children:"Add Additional Conditionnnn"})})}),(0,l.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,l.jsxs)("table",{className:"table table-bordered",style:{width:"auto"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:(0,l.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={feature:"",description:"",location:d};n([...t,e])},children:"+"})}),(0,l.jsx)("th",{children:"Feature"}),(0,l.jsx)("th",{children:"Description"}),(0,l.jsx)("th",{children:"Location"})]})}),(0,l.jsx)("tbody",{children:t.map(((e,s)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const s=[...t];s.splice(e,1),n(s)})(s),children:"x"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>p(s,e),className:"form-control",name:"feature",placeholder:"Additional Condition",autoComplete:"off",required:!0})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>p(s,e),className:"form-control",name:"description",placeholder:"Description",autoComplete:"off",required:!0})}),(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"form-group",children:(0,l.jsx)(a.default,{options:d,selectedValues:d,onSelect:e=>m(e,s),onRemove:e=>m(e,s),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})})})]},s)))})]})}),(0,l.jsx)("div",{className:"card-footer",children:(0,l.jsx)("button",{className:"btn btn-outline-success",onClick:n=>{n.preventDefault();try{if(t.some((e=>""===e.feature.trim()||""===e.description.trim())))return void c()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"});const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("https://insuranceapi-3o5t.onrender.com/api/add_Additional_Underwriting_condition",n).then((e=>e.json())).then((t=>{200==t.status?(c()({text:t.message,type:"success",icon:"success",button:!1}),e("/AdditionalConditions"),setTimeout((()=>{c().close()}),"1000")):(c()({title:"Error!",text:t.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{c().close()}),"1000"))}))}catch(s){console.log(s)}},children:"Submit"})})]})})})})})}}}]);
//# sourceMappingURL=4232.8e31e119.chunk.js.map