"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8770],{68770:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var n=t(65043),i=t(73216),l=t(70579);const c=()=>{const e=(0,i.Zp)(),a=window.location.href,t=new URLSearchParams(a.split("?")[1]).get("id");(0,n.useEffect)((()=>{const a=localStorage.getItem("token");null===a||void 0===a||""===a?e("/login"):_()}),[]);const[c,o]=(0,n.useState)([]),[s,r]=(0,n.useState)([]),[d,h]=(0,n.useState)(""),[p,m]=(0,n.useState)([]),_=async()=>{const e={method:"GET",headers:{"Content-Type":"application/json"}};try{const n=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_nationality",e),i=(await n.json()).data,l=[];for(let e=0;e<i.length;e++)l.push({non_applicable_nationality_id:i[e]._id,non_applicable_nationality_label:i[e].nationality_name});try{const a=await fetch(`https://insuranceapi-3o5t.onrender.com/api/motor_plan_details/${t}`,e),n=(await a.json()).data.non_applicable_nationality;r(n);for(let e=0;e<n.length;e++)for(let a=0;a<l.length;a++)n[e].non_applicable_nationality_id==l[a].non_applicable_nationality_id&&(l[a].itemvalue="checked");o(l),m(l)}catch(a){console.error("Error:",a)}}catch(a){console.error("Error:",a)}},u=e=>{if(""===e.trim())m(p);else{const a=null===e||void 0===e?void 0:e.toLowerCase();m(c.filter((e=>e.non_applicable_nationality_label.toLowerCase().includes(a))))}};return(0,n.useEffect)((()=>{m(p)}),[p,s]),(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)("h4",{children:"Nationality (Plan Non-Applicable)"})}),(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)("a",{href:"/motor-plan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,l.jsx)("div",{className:"row",style:{justifyContent:"end",marginRight:"4px",marginTop:"10px"},children:(0,l.jsx)("div",{className:"col-md-3",children:(0,l.jsx)("input",{className:"form-control",type:"text",defaultValue:d,onChange:e=>(e=>{const a=e.target.value;h(a),u(a)})(e),placeholder:"Search..."})})}),(0,l.jsx)("div",{className:"card-body",children:(0,l.jsxs)("table",{className:"table table-bordered",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{width:"10px"},children:(0,l.jsx)("strong",{children:"Select Nationality"})}),(0,l.jsx)("th",{children:(0,l.jsx)("strong",{children:"Nationality"})})]})}),(0,l.jsx)("tbody",{children:null===p||void 0===p?void 0:p.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"checkboxs",children:(0,l.jsx)("input",{defaultChecked:!!e.itemvalue,className:"form-check-input",type:"checkbox",id:`flexCheckDefault_${e._id}`,onChange:a=>((e,a)=>{const t=[...s];if(1==e.target.checked)a.itemvalue="checked",t.push(a);else if(0==e.target.checked){const e=t.indexOf(a);t.splice(e,1)}r(t)})(a,e)})})}),(0,l.jsx)("td",{children:e.non_applicable_nationality_label})]},e.non_applicable_nationality_id)))})]})}),(0,l.jsx)("div",{className:"card-footer",children:(0,l.jsx)("button",{className:"btn btn-primary",onClick:async e=>{e.preventDefault();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,formData:s})};try{const e=await fetch("https://insuranceapi-3o5t.onrender.com/api/add_non_applicable_nationality",a),n=await e.json();e.ok?window.location.href="/Nonapplicablenationality?id="+t:console.error("Error:",n)}catch(n){console.error("Error:",n)}},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=8770.4162624f.chunk.js.map