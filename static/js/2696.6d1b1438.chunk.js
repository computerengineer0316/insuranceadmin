"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2696,1072,8691,6310],{70706:(e,l,a)=>{a.r(l),a.d(l,{default:()=>v});var n=a(65043),s=a(73216),i=(a(92157),a(73023)),o=a.n(i),t=a(1177),d=a(84217),c=a(53519),r=a(61072),m=a(14282),u=a(93946);const p=a.p+"static/media/Home-plan-sample-sheet.0cef3042d8290b43af24.xlsx";var h=a(70579);const v=()=>{var e,l,a,i;const v=(0,s.Zp)(),[x,j]=(0,n.useState)([]),[b]=(0,n.useState)(10),[g,f]=(0,n.useState)(0),[N,y]=(0,n.useState)(1),[_,C]=(0,n.useState)(!1),[w,S]=(0,n.useState)(""),[k,A]=(0,n.useState)(""),[T,P]=(0,n.useState)(""),[$,E]=(0,n.useState)(!1),[B,H]=(0,n.useState)(""),[D,F]=(0,n.useState)([]),[I,O]=(0,n.useState)([]),[U,L]=(0,n.useState)(""),[G,W]=(0,n.useState)(2),[z,V]=(0,n.useState)(""),[Q,J]=(0,n.useState)([]),[K,M]=(0,n.useState)(""),[R,q]=(0,n.useState)(""),[Z,X]=(0,n.useState)({}),[Y,ee]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)v("/login");else{var l,a;le(N,b),se();const e=JSON.parse(localStorage.getItem("user"));let n=null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.map((e=>e.loc_id)).join(",");q(n);const s=(null===e||void 0===e||null===(a=e.home_permission)||void 0===a?void 0:a[0])||{};F(s),ae()}}),[]),(0,n.useEffect)((()=>{le(N,b),se()}),[U,G,z]);const le=(e,l)=>{j([]);fetch(`https://insuranceapi-3o5t.onrender.com/api/gethomeplan?page=${e}&limit=${l}&name=${U}&status=${G}&companyid=${z}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.totalCount;console.log(a);const n=a/l,s=Math.ceil(n);f(s);const i=e.data;console.log(i),j(i)}))};console.log(x);const ae=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getCompany",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{O(e.data)}))},ne=(e,l)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/updateStatusHomePlan/${e}/${l}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(o()({title:"Success!",text:e.message,icon:"success",button:!1}),se(),setTimeout((()=>{o().close()}),1e3)):o()({title:"Error!",text:e.message,icon:"error",button:"Ok"}).then((()=>{se()}))}))},se=()=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getplansAccordingToCompanies?lob=home&name=${U}&companyId=${z}&status=${G}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const l=e.data;J(l),console.log("Companies home plans >>>>>>>",l)}))};return(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsxs)("div",{className:"card",children:[(0,h.jsx)("div",{className:"card-header",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-4",children:(0,h.jsx)("h4",{className:"card-title",children:"Home Plans"})}),(0,h.jsx)("div",{className:"col-md-8",children:null!==(e=D.home_plan)&&void 0!==e&&e.includes("create")?(0,h.jsx)("a",{href:"/AddHomePlan",className:"btn btn-primary",style:{float:"right"},children:"Add Home Plan"}):""})]})}),(0,h.jsxs)("div",{className:"card-body",children:[(0,h.jsx)("div",{className:"card-header",children:(0,h.jsxs)("div",{className:"col-md-12",style:{textAlign:"right"},children:[null!==(l=D.home_plan)&&void 0!==l&&l.includes("download")?(0,h.jsxs)("a",{className:"btn btn-dark btn-sm btn-icon-text m-r-10",style:{backgroundColor:"green",marginLeft:"4px"},href:p,download:!0,children:[(0,h.jsx)("i",{className:"fa fa-cloud-download","aria-hidden":"true"})," Download Sample File"]}):"",null!==(a=D.home_plan)&&void 0!==a&&a.includes("upload")?(0,h.jsxs)("button",{className:"btn btn-dark btn-sm btn-icon-text m-r-10",style:{backgroundColor:"green",marginLeft:"4px"},onClick:()=>E(!$),children:[(0,h.jsx)("i",{className:"fa fa-file-excel","aria-hidden":"true"})," Upload Excel"]}):"",null!==(i=D.home_plan)&&void 0!==i&&i.includes("export")?(0,h.jsxs)("button",{className:"btn btn-dark btn-sm btn-icon-text m-r-10",style:{backgroundColor:"green",marginLeft:"4px"},onClick:async e=>{},children:[(0,h.jsx)("i",{className:"fa fa-file-excel","aria-hidden":"true"})," Export Data to Excel"]}):""]})}),(0,h.jsx)(t.A,{defaultActiveKey:"0",children:(0,h.jsxs)(t.A.Item,{eventKey:"0",children:[(0,h.jsx)(t.A.Header,{className:"modifyaccordian",children:"Filters "}),(0,h.jsx)(t.A.Body,{children:(0,h.jsx)("div",{className:"card-header",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-lg-3",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Plan Name"})}),(0,h.jsx)("br",{}),(0,h.jsx)("input",{type:"text",className:"form-control",placeholder:"Search Plan",onChange:e=>L(e.target.value)})]}),(0,h.jsxs)("div",{className:"col-lg-3",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Select Insurance co."})}),(0,h.jsx)("br",{}),(0,h.jsxs)("select",{className:"form-control",onChange:e=>V(e.target.value),children:[(0,h.jsx)("option",{value:"",hidden:!0,children:"Select Insurance co."}),(0,h.jsx)("option",{value:"",children:"-- All --"}),I.map(((e,l)=>(0,h.jsx)("option",{value:e._id,children:e.company_name},l)))]})]}),(0,h.jsxs)("div",{className:"col-lg-3",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Select Status"})}),(0,h.jsx)("br",{}),(0,h.jsxs)("select",{className:"form-control",onChange:e=>W(e.target.value),children:[(0,h.jsx)("option",{value:2,children:"-- All --"}),(0,h.jsx)("option",{value:1,children:"Active"}),(0,h.jsx)("option",{value:0,children:"Inactive"})]})]})]})})})]})}),(0,h.jsx)("div",{className:"card-body",children:(0,h.jsx)("div",{className:"table-responsive",children:null===Q||void 0===Q?void 0:Q.map(((e,l)=>{var a,n,s,i;return(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsxs)("h6",{className:"text-danger",children:[" ",(null===e||void 0===e||null===(a=e._id)||void 0===a?void 0:a._id)!=K?(0,h.jsx)("button",{onClick:()=>{var l;return M(null===e||void 0===e||null===(l=e._id)||void 0===l?void 0:l._id)},className:"btn btn-success text-light",children:(0,h.jsx)("i",{className:"fa fa-angle-right"})}):(0,h.jsx)("button",{className:"btn btn-success text-light",onClick:()=>M(""),children:(0,h.jsx)("i",{className:"fa fa-angle-down"})})," ",null===e||void 0===e||null===(n=e._id)||void 0===n?void 0:n.company_name]}),(null===e||void 0===e||null===(s=e._id)||void 0===s?void 0:s._id)==K&&(null===e||void 0===e||null===(i=e.plans)||void 0===i?void 0:i.map(((l,a)=>{var n,s,i,t,d,c,r,m,u,p,v;return(0,h.jsx)("tr",{children:R.includes(null===l||void 0===l?void 0:l.plan_created_by)||R.includes("64116415591c2f02bcddf51e")?(0,h.jsxs)("div",{className:"d-flex my-1",style:{marginLeft:"30px"},children:[(0,h.jsx)("div",{className:"mx-3",children:(0,h.jsx)("button",{className:"btn btn-success btn-sm text-white",children:(0,h.jsx)("i",{className:"fa fa-check"})})}),(0,h.jsxs)("div",{className:" col-md-1 mx-1 my-1",style:{fontWeight:"700",color:"red"},children:[null===l||void 0===l||null===(n=l.plan_name)||void 0===n?void 0:n.slice(0,15),(null===l||void 0===l||null===(s=l.plan_name)||void 0===s?void 0:s.length)>15?"....":""]}),(0,h.jsxs)("div",{className:"col-md-12 table-responsive",children:[(null===(i=D.home_plan)||void 0===i?void 0:i.includes("edit"))&&(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("a",{href:`/EditHomePlan?id=${l._id}`,className:"btn btn-primary",children:"Edit"})})," ",(null===(t=D.home_plan)||void 0===t?void 0:t.includes("delete"))&&(0,h.jsx)(h.Fragment,{children:1===l.status?(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&ne(l._id,0)},children:"Deactivate"})}):(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&ne(l._id,1)},children:"Activate"})})})," ",(null===(d=D.home_plan)||void 0===d?void 0:d.includes("edit"))&&(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("button",{className:"btn btn-success",onClick:()=>{return e=l._id,a=l.policywordings_file,C(!0),S(e),void A(a);var e,a},children:"T & C"})})," ",(null===(c=D.home_plan)||void 0===c?void 0:c.includes("edit"))&&(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("a",{href:`/ViewStandardCover?id=${l._id}&type=home`,className:"btn btn-info",children:"Standard Cover"})})," ",(null===(r=D.home_plan)||void 0===r?void 0:r.includes("edit"))&&(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("a",{href:`/ViewAdditionalCover?id=${l._id}&type=home`,className:"btn btn-warning",children:"Additional Cover"})})," ",(null===(m=D.home_plan)||void 0===m?void 0:m.includes("edit"))&&(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("a",{href:`/HomeCondition?id=${l._id}`,className:"btn btn-dark",children:"Condition"})})," ",(null===(u=D.home_plan)||void 0===u?void 0:u.includes("delete"))&&(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("button",{className:"btn btn-warning",onClick:()=>{var e;window.confirm("Are you sure you wish to deactivate this item?")&&(e=l._id,fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteHomeMaster?id=${e}&type=homeplan`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(o()({text:e.message,icon:"success",button:!1}),se(),setTimeout((()=>{o().close()}),1e3)):o()({title:"Error!",text:e.message,icon:"error",button:"Ok"}).then((()=>{se()}))})))},children:"Delete"})})]})]}):(0,h.jsxs)("div",{className:"d-flex col-md-12 my-1",style:{marginLeft:"30px"},children:[(0,h.jsx)("div",{className:"mx-3",children:(0,h.jsx)("button",{className:"btn btn-success btn-sm text-white",children:(0,h.jsx)("i",{className:"fa fa-check"})})}),(0,h.jsxs)("div",{className:" col-md-3 mx-1 my-1",style:{fontWeight:"700",color:"red"},children:[null===l||void 0===l||null===(p=l.plan_name)||void 0===p?void 0:p.slice(0,15),(null===l||void 0===l||null===(v=l.plan_name)||void 0===v?void 0:v.length)>15?"....":""]}),(0,h.jsx)("div",{className:"col-md-3",children:(0,h.jsx)("button",{className:"btn btn-primary",onClick:()=>{var a;return((e,l)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getlimitedDataOfHomePlan?id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var a,n,s,i,o,t,d,c,r,m,u;console.log(e.data," home plan data");const p=e.data[0],h={insurancecompany:l,plan_name:null===p||void 0===p?void 0:p.plan_name,plan_category:null===p||void 0===p||null===(a=p.plancategories)||void 0===a?void 0:a.plan_category_name,ownershipStatus:null===p||void 0===p?void 0:p.ownershipstatus.home_owner_type,natureofPlan:null===p||void 0===p?void 0:p.natureofplan.nature_of_plan_name,propertytype:null===p||void 0===p||null===(n=p.property_type_id)||void 0===n||null===(s=n.map((e=>e.label)))||void 0===s?void 0:s.join(", "),planType:null===p||void 0===p||null===(i=p.plantype)||void 0===i?void 0:i.home_plan_type,plan_type_id:null===p||void 0===p||null===(o=p.plantype)||void 0===o?void 0:o._id,building_rate:null===p||void 0===p||null===(t=p.building_value_or_topup)||void 0===t||null===(d=t.map((e=>e.rate)))||void 0===d?void 0:d.join(", "),content_rate:null===p||void 0===p||null===(c=p.content_value_or_topup)||void 0===c||null===(r=c.map((e=>e.rate)))||void 0===r?void 0:r.join(", "),personal_rate:null===p||void 0===p||null===(m=p.pbvalue_or_topup)||void 0===m||null===(u=m.map((e=>e.rate)))||void 0===u?void 0:u.join(", ")};X(h)})),ee(!0)})(l._id,null===e||void 0===e||null===(a=e._id)||void 0===a?void 0:a.company_name)},children:"View"})})]})},a)}))),(0,h.jsx)("hr",{})]},l)}))})})]})]})})}),(0,h.jsxs)(d.A,{size:"lg",show:_,onHide:()=>C(!1),children:[(0,h.jsx)(d.A.Header,{closeButton:!0,children:(0,h.jsx)(d.A.Title,{children:"Upload "})}),(0,h.jsx)(d.A.Body,{children:(0,h.jsx)(c.A,{children:(0,h.jsxs)(r.A,{children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"name",children:"Policy Wordings/T&C"}),(0,h.jsx)("input",{type:"file",className:"form-control",id:"file",name:"file",onChange:e=>P(e.target.files[0])})]})}),""==k||null==k||void 0==k||"undefined"==k||0==k.length?"":(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsx)("a",{className:"btn btn-warning",href:`https://insuranceapi-3o5t.onrender.com/uploads/${k}`,style:{position:"relative",top:"23px"},rel:"noreferrer",target:"_blank",children:"view"})})]})})}),(0,h.jsxs)(d.A.Footer,{children:[(0,h.jsx)(m.A,{variant:"primary",onClick:async e=>{e.preventDefault();const l=new FormData;l.append("policywordings_file",T),l.append("id",w);const a={method:"POST",body:l};await fetch("https://insuranceapi-3o5t.onrender.com/api/upload_home_policywordings_file",a).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e))),C(!1),o()({title:"Success!",text:"Policy Wordings File Uploaded Successfully",icon:"success",button:"Ok"})},children:"Upload"}),(0,h.jsx)(m.A,{variant:"secondary",onClick:()=>C(!1),children:"Close"})]})]}),(0,h.jsxs)(u.zS,{alignment:"center",visible:$,onClose:()=>E(!1),children:[(0,h.jsx)(u.E4,{onClose:()=>E(!1),children:(0,h.jsx)(u.lb,{children:"Upload Excel File"})}),(0,h.jsx)(u.Tc,{children:(0,h.jsx)("div",{children:(0,h.jsx)("input",{type:"file",className:"form-control",id:"DHA",defaultValue:"",required:!0,onChange:e=>H(e.target.files[0])})})}),(0,h.jsxs)(u.If,{children:[(0,h.jsx)(u.Q_,{color:"secondary",onClick:()=>E(!1),children:"Close"}),(0,h.jsx)(u.Q_,{color:"primary",onClick:async e=>{e.preventDefault();const l=new FormData;l.append("xlFile",B);let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/addBulkHomePlan",{method:"post",body:l});a=await a.json(),console.log(a),E(!$),200===a.status?o()("Uploaded Succesfully","","success"):o()("Something Went wrong","","failed"),le(N,b)},children:"Upload"})]})]}),(0,h.jsxs)(u.zS,{size:"lg",alignment:"center",visible:Y,onClose:()=>ee(!1),children:[(0,h.jsx)(u.E4,{onClose:()=>ee(!1),children:(0,h.jsx)(u.lb,{children:"Home Plan Details"})}),(0,h.jsx)(u.Tc,{children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Insurance Company Name"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.insurancecompany})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Plan Name"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.plan_name})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Plan Category"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.plan_category})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Ownership Status"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.ownershipStatus})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Nature Of Plan"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.natureofPlan})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Property Type"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.propertytype})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Plan Type"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.planType})]})}),"642279d4fb67d39380fef82d"==(null===Z||void 0===Z?void 0:Z.plan_type_id)?(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Building only"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.building_rate})]})}):"642279f2fb67d39380fef834"==(null===Z||void 0===Z?void 0:Z.plan_type_id)?(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Content"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.content_rate})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Personal Belonging"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.personal_rate})]})})]}):"64227a65fb67d39380fef842"==(null===Z||void 0===Z?void 0:Z.plan_type_id)?(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Building"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.building_rate})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Content"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.content_rate})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"form-group mb-3",children:[(0,h.jsx)("label",{className:"text-danger",children:"Personal Belonging"}),(0,h.jsx)("input",{type:"text",className:"form-control",value:null===Z||void 0===Z?void 0:Z.personal_rate})]})})]}):""]})}),(0,h.jsx)(u.If,{children:(0,h.jsx)(u.Q_,{color:"secondary",onClick:()=>ee(!1),children:"Close"})})]})]})}},61072:(e,l,a)=>{a.d(l,{A:()=>c});var n=a(98139),s=a.n(n),i=a(65043),o=a(67852),t=a(70579);const d=i.forwardRef(((e,l)=>{let{bsPrefix:a,className:n,as:i="div",...d}=e;const c=(0,o.oU)(a,"row"),r=(0,o.gy)(),m=(0,o.Jm)(),u=`${c}-cols`,p=[];return r.forEach((e=>{const l=d[e];let a;delete d[e],null!=l&&"object"===typeof l?({cols:a}=l):a=l;const n=e!==m?`-${e}`:"";null!=a&&p.push(`${u}${n}-${a}`)})),(0,t.jsx)(i,{ref:l,...d,className:s()(n,c,...p)})}));d.displayName="Row";const c=d}}]);
//# sourceMappingURL=2696.6d1b1438.chunk.js.map