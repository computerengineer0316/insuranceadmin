"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8608],{88608:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var o=n(65043),a=n(54168),l=n(70579);const s=function(e){let{rowsData:t,deleteTableRows:n,handleChange:s,handleChange123:i}=e;const[d,r]=(0,o.useState)([]),[c,p]=(0,o.useState)([]),[h,m]=(0,o.useState)([]),[u,_]=(0,o.useState)([]),[x,j]=(0,o.useState)([]),[y,f]=(0,o.useState)([]),[g,b]=(0,o.useState)([]),[v,C]=(0,o.useState)({status:!1,name:"",index:""});(0,o.useEffect)((()=>{P(),T(),E(),S(),w(),V(),N()}),[]);const N=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=t.length,o=[];for(let a=0;a<n;a++){const e={label:t[a].location_name,value:t[a]._id};o.push(e)}b(o)}))},T=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_home_property_type_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=null===t||void 0===t?void 0:t.map(((e,t)=>({label:e.home_property_type,value:e._id})));m(n),console.log(e.data,"property_type_list")}))},P=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/company_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{f(e.data)}))},E=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getPlanCategory",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{r(e.data)}))},S=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNatureOfPlan",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{p(e.data)}))},w=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_home_owner_type_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{_(e.data)}))},V=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/get_home_plan_type?match=true",e).then((e=>e.json())).then((e=>{j(e.data)}))},O=(e,t,n)=>{i(e,t,n)},k=(e,t)=>{const n=e.target.value;/^[A-Za-z,]*$/.test(n)?C({status:!1,name:e.target.name,index:t}):(C({status:!0,name:e.target.name,index:t}),e.target.value=n.replace(/[^a-zA-Z\s,]/g,""))};return t.map(((e,o)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>n(o),children:"x"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"company_id",onChange:e=>s(o,e),children:[(0,l.jsx)("option",{value:"",hidden:!0,children:"Select Company"}),null===y||void 0===y?void 0:y.map(((e,t)=>(0,l.jsx)("option",{value:e._id,children:e.company_name},t)))]})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",className:"form-control",name:"plan_name",onChange:e=>s(o,e),placeholder:"Enter Plan Name"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"plan_category_id",onChange:e=>s(o,e),children:[(0,l.jsx)("option",{value:"",children:"Select Plan Category"}),null===d||void 0===d?void 0:d.map(((e,t)=>(0,l.jsx)("option",{value:e._id,children:e.plan_category_name},t)))]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"nature_of_plan_id",onChange:e=>s(o,e),children:[(0,l.jsx)("option",{value:"",children:"Select Nature Of Plan"}),null===c||void 0===c?void 0:c.map(((e,t)=>(0,l.jsx)("option",{value:e._id,children:e.nature_of_plan_name},t)))]})}),(0,l.jsx)("td",{children:(0,l.jsx)(a.default,{options:h,selectedValues:h,onSelect:e=>O(o,e,"property_type_id"),onRemove:e=>O(o,e,"property_type_id"),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"ownership_status_id",onChange:e=>s(o,e),children:[(0,l.jsx)("option",{value:"",children:"Ownership Status"}),null===u||void 0===u?void 0:u.map(((e,t)=>(0,l.jsx)("option",{value:e._id,children:e.home_owner_type},t)))]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"plan_type_id",onChange:e=>s(o,e),children:[(0,l.jsx)("option",{value:"",children:"Plan Type"}),null===x||void 0===x?void 0:x.map(((e,t)=>(0,l.jsx)("option",{value:e._id,children:e.home_plan_type},t)))]})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279f2fb67d39380fef834"==t[o].plan_type_id,className:"form-control",name:"building_value",onChange:e=>s(o,e),placeholder:"Building Value"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279f2fb67d39380fef834"==t[o].plan_type_id,className:"form-control",name:"building_value_topup",onChange:e=>s(o,e),placeholder:"Enter Building Value topup"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279f2fb67d39380fef834"==t[o].plan_type_id,className:"form-control",name:"bv_rate",onChange:e=>s(o,e),placeholder:"Enter Building Value Rate"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279f2fb67d39380fef834"==t[o].plan_type_id,className:"form-control",name:"bvminmumPrimium",onChange:e=>s(o,e),placeholder:"Enter Building Primium"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279d4fb67d39380fef82d"==t[o].plan_type_id,className:"form-control",name:"content_value",onChange:e=>s(o,e),placeholder:"Enter Content Value"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279d4fb67d39380fef82d"==t[o].plan_type_id,className:"form-control",name:"content_topup",onChange:e=>s(o,e),placeholder:"Enter Content Topup"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279d4fb67d39380fef82d"==t[o].plan_type_id,className:"form-control",name:"cv_rate",onChange:e=>s(o,e),placeholder:"Enter Content Rate"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279d4fb67d39380fef82d"==t[o].plan_type_id,className:"form-control",name:"contentMinmuprimium",onChange:e=>s(o,e),placeholder:"Enter Content Primium"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279d4fb67d39380fef82d"==t[o].plan_type_id,className:"form-control",name:"pbvalue",onChange:e=>s(o,e),placeholder:"Personal Belongings Value"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279d4fb67d39380fef82d"==t[o].plan_type_id,className:"form-control",name:"pbvalue_topup",onChange:e=>s(o,e),placeholder:"Personal Belonging Value topup"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279d4fb67d39380fef82d"==t[o].plan_type_id,className:"form-control",name:"pbv_rate",onChange:e=>s(o,e),placeholder:"Enter Personal Belonging Rate"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",disabled:"642279d4fb67d39380fef82d"==t[o].plan_type_id,className:"form-control",name:"pvminmumPrimium",onChange:e=>s(o,e),placeholder:"Enter Personal Primium"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",className:"form-control",name:"excess",onChange:e=>s(o,e),placeholder:"Enter Excess"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",className:"form-control",name:"no_claim_year",onChange:e=>s(o,e),placeholder:"Enter No Claim Year"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",className:"form-control",name:"no_claim_discount",onChange:e=>s(o,e),placeholder:"Enter No Claim Discount"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(o,e),name:"domestic_helper",className:"form-control",placeholder:"Enter Domestic Helper"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(o,e),name:"domestic_helper_topup",className:"form-control",placeholder:"Enter Domestic Helper Topup"})}),(0,l.jsxs)("td",{children:[(0,l.jsx)("input",{type:"text",onChange:e=>s(o,e),name:"add_op_con_desc",onInput:e=>k(e,o),className:"form-control",placeholder:"Add option condition Description"}),1==v.status&&"add_op_con_desc"==v.name&&v.index==o?(0,l.jsx)("span",{style:{color:"red"},children:"Text Only"}):""]}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(o,e),name:"add_op_con_desc_topup",className:"form-control",placeholder:"Add option condition Description topup"})}),(0,l.jsxs)("td",{children:[(0,l.jsx)("input",{type:"text",onChange:e=>s(o,e),name:"vat_able",onInput:e=>k(e,o),className:"form-control",placeholder:"Enter Vat Able"}),1==v.status&&"vat_able"==v.name&&v.index==o?(0,l.jsx)("span",{style:{color:"red"},children:"Text Only"}):""]}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(o,e),name:"jdv_commision",className:"form-control",placeholder:"Enter JDV Commision"})}),(0,l.jsx)("td",{children:(0,l.jsx)(a.default,{options:g,selectedValues:g,onSelect:e=>O(o,e,"location"),onRemove:e=>O(o,e,"location"),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})})]},o)))};var i=n(73216),d=n(73023),r=n.n(d);const c=function(){const e=(0,i.Zp)(),t={company_id:"Company Name",plan_name:"Plan Name",plan_category_id:"Plan Category",nature_of_plan_id:"Nature Of Plan",property_type_id:"Property Type",ownership_status_id:"Ownership Status",plan_type_id:"Plan Type",jdv_commision:"JDV Commission",location:"Location"};(0,o.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):(u(),m())}),[]);const[n,a]=(0,o.useState)([]),[d,c]=(0,o.useState)([]),[p,h]=(0,o.useState)([]),m=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_home_property_type_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=null===t||void 0===t?void 0:t.map(((e,t)=>({label:e.home_property_type,value:e._id})));h(n),console.log(e.data,"property_type_list")}))},u=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=t.length,o=[];for(let a=0;a<n;a++){const e={label:t[a].location_name,value:t[a]._id};o.push(e)}c(o)}))};return(0,l.jsx)("div",{className:"container mb-5",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)("h4",{className:"card-title",children:"Add Home Plan"})}),(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)("button",{onClick:()=>e(-1),className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,l.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,l.jsxs)("table",{className:"table table-bordered",style:{width:"7500px"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:(0,l.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={company_id:"",plan_name:"",plan_category_id:"",nature_of_plan_id:"",property_type_id:p,add_op_con_desc:"",add_op_con_desc_topup:"",building_value:"",building_value_topup:"",bv_rate:"",content_topup:"",content_value:"",cv_rate:"",domestic_helper:"",domestic_helper_topup:"",excess:"",jdv_commision:"",no_claim_discount:"",no_claim_year:"",ownership_status_id:"",pbvalue:"",pbvalue_topup:"",pbv_rate:"",plan_type_id:"",rate:"",vat_able:"",location:d};a([...n,e])},children:"+"})}),(0,l.jsx)("th",{style:{color:"red"},children:"Company Name"}),(0,l.jsx)("th",{style:{color:"red"},children:"Plan Name"}),(0,l.jsx)("th",{style:{color:"red"},children:"Plan Category"}),(0,l.jsx)("th",{style:{color:"red"},children:"Nature Of Plan"}),(0,l.jsx)("th",{style:{color:"red"},children:"Property Type"}),(0,l.jsx)("th",{style:{color:"red"},children:"Ownership Status"}),(0,l.jsx)("th",{style:{color:"red"},children:"Plan Type"}),(0,l.jsx)("th",{children:"Building Value"}),(0,l.jsx)("th",{children:"Bulding Topup"}),(0,l.jsx)("th",{children:"Building Value Rate %"}),(0,l.jsx)("th",{children:"Building Minmum Primium "}),(0,l.jsx)("th",{children:"Content Value"}),(0,l.jsx)("th",{children:"Content Topup"}),(0,l.jsx)("th",{children:"Content Value Rate %"}),(0,l.jsx)("th",{children:"Content Minmum Primium "}),(0,l.jsx)("th",{children:"Personal Belongings Value"}),(0,l.jsx)("th",{children:"Personal Belongings Topup"}),(0,l.jsx)("th",{children:"Personal Belonging Value Rate %"}),(0,l.jsx)("th",{children:"Personal Minmum Primium "}),(0,l.jsx)("th",{children:"Excess"}),(0,l.jsx)("th",{children:"No Claim Year"}),(0,l.jsx)("th",{children:"No Claim Discount"}),(0,l.jsx)("th",{children:"Domestic Helper"}),(0,l.jsx)("th",{children:"Domestic Helper Topup"}),(0,l.jsx)("th",{children:"Add Option Cond. Description"}),(0,l.jsx)("th",{children:"Add Op. Cond. Desc.Topup"}),(0,l.jsx)("th",{children:"Vat Able"}),(0,l.jsx)("th",{style:{color:"red"},children:"JDV Commission"}),(0,l.jsx)("th",{children:"Location"})]})}),(0,l.jsx)("tbody",{children:(0,l.jsx)(s,{rowsData:n,deleteTableRows:e=>{const t=[...n];t.splice(e,1),a(t)},handleChange:(e,t)=>{const{name:o,value:l}=t.target,s=[...n];s[e][o]=l,a(s)},handleChange123:(e,t,o)=>{const l=[...n];l[e][o]=t,a(l)}})})]})}),(0,l.jsx)("div",{className:"card-footer",children:(0,l.jsx)("button",{className:"btn btn-outline-success",style:{float:"right"},onClick:async()=>{const o=[];if(n.forEach(((e,t)=>{const n=Object.keys(e).filter((t=>{const n=e[t];return("plan_name"==t||"company_id"==t||"plan_category_id"==t||"nature_of_plan_id"==t||"ownership_status_id"==t||"plan_type_id"==t||"jdv_commision"==t||"location"==t||"property_type_id"==t)&&(!n.length||("string"===typeof n&&""===n.trim()?"add_op_con_desc"!=t&&"add_op_con_desc_topup"!=t&&"vat_able"!=t||""!=e.add_op_con_desc&&"add_op_con_desc"!=t:void 0))}));n.length>0&&o.push({index:t,emptyKeys:n})})),o.length>0)o.forEach((e=>{const n=e.emptyKeys[0];console.log(n,"errval"),r()({title:"warning!",text:`${t[n]} is required`,type:"warning",icon:"warning"}).then((function(){return!1}))}));else{const t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({rowsData:n})};await fetch("https://insuranceapi-3o5t.onrender.com/api/addhomeplan",t).then((e=>e.json())).then((t=>{200===t.status?r()({title:"Success!",text:t.message,type:"success",icon:"success"}).then((function(){e("/homeplan")})):r()({title:"Error!",text:t.message,type:"error",icon:"error"}).then((function(){e("/homeplan")}))})).catch((e=>console.log(e)))}},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=8608.57ef3d5a.chunk.js.map