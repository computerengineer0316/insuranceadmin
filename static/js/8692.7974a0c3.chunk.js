"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8692],{48692:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var n=s(54168),a=s(65043),i=s(73216),l=s(73023),c=s.n(l),d=s(70579);const o=()=>{const e=(0,i.Zp)(),[t,s]=(0,a.useState)([]),[l,o]=(0,a.useState)({}),[r,h]=(0,a.useState)([]),u=window.location.href,m=new URLSearchParams(u.split("?")[1]),p=m.get("id"),g=m.get("type");(0,a.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("&")[0].split("=")[1];f(e)}}),[]);const f=async e=>{const t={method:"GET",headers:{"Content-Type":"application/json"}};await fetch("https://insuranceapi-3o5t.onrender.com/api/get_standard_conditions",t).then((e=>e.json())).then((n=>{const a=n.data;fetch(`https://insuranceapi-3o5t.onrender.com/api/single_medical_plan_details/${e}`,t).then((e=>e.json())).then((e=>{const t=e.data.standard_conditions_arr,n=[];for(let s=0;s<a.length;s++)for(let e=0;e<t.length;e++)t[e].itemId==a[s]._id&&(a[s].itemdesc=t[e].itemdesc,a[s].value=t[e].value,a[s].status=t[e].status,a[s].checked="checked",n.push(a[s]));s(a),h(n)}))}))};console.log(t);const x=(e,t)=>{const s=new FormData,n=s.get("description"),a=s.get("value"),i=s.get("status"),{name:l,value:c}=e.target;h((e=>{const s=[...e],d=s.findIndex((e=>e._id===t));return-1!==d?s[d]={...s[d],[l]:c}:s.push({itemId:t,description:n,status:i,value:a}),s}))};console.log(r);return(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"card ",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("h4",{children:"Additional Conditions"})}),(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("a",{href:"/medicalplan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("table",{className:"table table-bordered",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"#"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Feature"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Description"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Status"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Value"})})]})}),(0,d.jsx)("tbody",{children:t.map((e=>{var t;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"checkboxs",children:(0,d.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",defaultChecked:e.checked,onChange:t=>((e,t)=>{const s=[...r];if(console.log(e.target.checked),o({...l,[t._id]:e.target.checked}),!0===e.target.checked)t.checked="checked",s.push(t);else if(!1===e.target.checked){const e=s.indexOf(t);console.log(e),s.splice(e,1)}h(s)})(t,e)})})}),(0,d.jsx)("td",{children:e.feature}),(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"form-group",children:(0,d.jsx)("input",{type:"text",name:"description",className:"form-control",disabled:!l[e._id]&&!e.itemdesc,onChange:t=>x(t,e._id),defaultValue:e.itemdesc?e.itemdesc:e.description})})}),(0,d.jsx)("td",{children:(0,d.jsx)(n.default,{options:[{name:"Yes",id:"true"},{name:"No",id:"false"}],selectedValues:e.status,displayValue:"name",disable:!l[e._id]&&!(null!==e&&void 0!==e&&null!==(t=e.status)&&void 0!==t&&t.length),onSelect:t=>x({target:{name:"status",value:t}},e._id),onRemove:t=>x({target:{name:"status",value:t}},e._id),showArrow:!0})}),(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"form-group",children:(0,d.jsx)("input",{type:"text",name:"value",className:"form-control",disabled:!l[e._id]&&!e.value,onChange:t=>x(t,e._id),defaultValue:e.value})})})]},e._id)}))})]})}),(0,d.jsx)("div",{className:"card-footer",children:(0,d.jsx)("button",{className:"btn btn-primary",onClick:e=>{e.preventDefault(),console.log(p),console.log(g),console.log(r);const t=r.map((e=>e.value.split(",").length)),s=r.map((e=>e.status.length));console.log("numberscount "+typeof t+" "+t),console.log("options "+typeof s+" "+s);const n=JSON.stringify(t)===JSON.stringify(s);if(console.log("isMatch: "+n),!1===n&&JSON.stringify(s)<JSON.stringify(t))return c()("Please select the status for all the values","","warning"),!1;if(!1===n&&JSON.stringify(s)>JSON.stringify(t))return c()("Please select the values for all the status","","warning"),!1;{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:p,type:g,formData:r})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_Standard_underwriting_conditions",e).then((e=>e.json())).then((e=>{window.location.href="/viewStandardConditions?id="+p}))}},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=8692.7974a0c3.chunk.js.map