"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[328],{60328:(e,a,l)=>{l.r(a),l.d(a,{default:()=>r});var o=l(65043),i=l(73216),n=l(73023),t=l.n(n),s=l(54168),d=l(70579);const r=()=>{var e,a,l,n,r,c,m;const u=(0,i.Zp)(),[p,h]=(0,o.useState)(""),[v,g]=(0,o.useState)([]),[j,x]=(0,o.useState)([]),[f,y]=(0,o.useState)([]),[N,b]=(0,o.useState)([]),[_,P]=(0,o.useState)([]),[A,w]=(0,o.useState)([]),[R,T]=(0,o.useState)([]),[C,S]=(0,o.useState)([]),[k,V]=(0,o.useState)(""),[E,O]=(0,o.useState)(""),[I,M]=(0,o.useState)({perioddayRange:"",perioddayRange_topup:""});(0,o.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)u("/login");else{let e=window.location.href;e=e.split("?")[1];let[a,l]=e.split("&");a=a.split("=")[1],l=l.split("=")[1],h(a),V(l),L(),B(),$(),J(a),H(),q()}}),[]);const[D,F]=(0,o.useState)({}),G=e=>{const{name:a,value:l}=e.target;"TPA"===a&&fetch(`https://insuranceapi-3o5t.onrender.com/api/getTpaLinkNetwork?tpaId=${l}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{S(e.data)})).catch((e=>console.log("error",e))),D[a]=l,F(D),console.log("valuelllllllllllllllllllllllrowsData",D)},B=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getPlanCategory",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{g(e.data)}))},$=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{let a=e.data;const l=[];for(let o=0;o<(null===a||void 0===a?void 0:a.length);o++){const e={label:a[o].location_name,value:a[o]._id};l.push(e)}y(l)}))},L=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getAreaOfRegistrations",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{let a=e.data;const l=[];for(let o=0;o<a.length;o++){const e={label:a[o].area_of_registration_name,value:a[o]._id};l.push(e)}x(l)})).catch((e=>console.log("error",e)))},q=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalTPA",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{T(e.data)}))},H=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalNetwork",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{S(e.data)}))},J=e=>{console.log("planRatesDeltails..................................insede");fetch(`https://insuranceapi-3o5t.onrender.com/api/rates_based_on_age_details/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var a,l,o,i,n,t,s,d,r,c,m,u,p,h,v,g,j,x,f,y,N,_,A;b(e.data[0]),console.log("skfjikkoooooooooooooooooooo",e);const R=e.data[0].ageRange,T=[];for(let b=0;b<(null===R||void 0===R?void 0:R.length);b++)T.push(R[b].minAge+"-"+R[b].maxAge);const C=T.join(",");O(C);const S=null===(a=e.data[0])||void 0===a?void 0:a.perioddays,k=[],V=[];for(let b=0;b<(null===S||void 0===S?void 0:S.length);b++)k.push(S[b].min+"-"+S[b].max),V.push(S[b].topup);const E=k.join(","),I=V.join(",");M({perioddayRange:E,perioddayRange_topup:I});let D=null===(l=e.data[0])||void 0===l?void 0:l.locationData,G=[];for(let b=0;b<(null===D||void 0===D?void 0:D.length);b++)G.push({label:D[b].location_name,value:D[b]._id});let B=null===(o=e.data[0])||void 0===o?void 0:o.emirateData,$=[];for(let b=0;b<(null===B||void 0===B?void 0:B.length);b++)$.push({label:B[b].area_of_registration_name,value:B[b]._id});null===(i=e.data[0])||void 0===i||i.primiumArray;w($),P(G);let L={};L.name=null===(n=e.data[0])||void 0===n?void 0:n.name,L.TPA=null===(t=e.data[0])||void 0===t?void 0:t.TPA,L.coPayments=null===(s=e.data[0])||void 0===s?void 0:s.primiumArray,L.network=null===(d=e.data[0])||void 0===d?void 0:d.network,L.emirateId=null===(r=e.data[0])||void 0===r?void 0:r.emirateId,L.planCatagoryId=null===(c=e.data[0])||void 0===c?void 0:c.planCatagoryId,L.locationArray=null===(m=e.data[0])||void 0===m?void 0:m.locationArray,L.ageRagne=null===(u=e.data[0])||void 0===u||null===(p=u.primiumArray)||void 0===p||null===(h=p.map((e=>(null===e||void 0===e?void 0:e.minAge)+"-"+e.maxAge)))||void 0===h?void 0:h.join(","),L.malePrimium=null===(v=e.data[0])||void 0===v||null===(g=v.primiumArray)||void 0===g||null===(j=g.map((e=>null===e||void 0===e?void 0:e.malePre)))||void 0===j?void 0:j.join(","),L.femalePrimium=null===(x=e.data[0])||void 0===x||null===(f=x.primiumArray)||void 0===f||null===(y=f.map((e=>null===e||void 0===e?void 0:e.femalePer)))||void 0===y?void 0:y.join(","),L.femaleMarridePrimiumRagne=null===(N=e.data[0])||void 0===N||null===(_=N.primiumArray)||void 0===_||null===(A=_.map((e=>null===e||void 0===e?void 0:e.marrideFemalePre)))||void 0===A?void 0:A.join(","),F(L)}))};return(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("h4",{className:"card-title",children:"Edit Rates"})}),(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("a",{href:`/ViewRatesBasedOnAge?id=${k}`,className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("form",{action:"/",method:"POST",onSubmit:e=>{e.preventDefault();const a=new FormData(e.target),l=a.get("name"),o=a.get("TPA"),i=a.get("network"),n=a.get("emirateId"),s=a.get("ageRagne"),d=a.get("malePrimium"),r=a.get("femalePrimium"),c=a.get("femaleMarridePrimium"),m=a.get("coPayments"),h=a.get("perioddayRange"),v=a.get("perioddayRange_topup"),g={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l,TPA:o,network:i,emirateId:n,ageRagne:s,malePrimium:d,femalePrimium:r,femaleMarridePrimium:c,coPayments:m,perioddayRange:h,perioddayRange_topup:v,region_id:A,locationArray:_})};fetch(`https://insuranceapi-3o5t.onrender.com/api/update_medicalplan_rates/${p}`,g).then((e=>e.json())).then((e=>{200===e.status?t()({title:"Success!",text:e.message,type:"success",icon:"success"}).then((function(){u("/ViewRatesBasedOnAge?id="+k)})):t()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){u("/ViewRatesBasedOnAge?id="+k)}))}))},children:[(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"name"}),(0,d.jsx)("input",{type:"text",name:"name",className:"form-control",onChange:e=>G(e),placeholder:"Enter Age Range",defaultValue:null===N||void 0===N?void 0:N.name})]})}),(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"TPA"}),(0,d.jsxs)("select",{className:"form-control",name:"TPA",onChange:e=>G(e),children:[(0,d.jsx)("option",{value:"",children:"Select TPA"}),R.map(((e,a)=>(0,d.jsx)("option",{value:e._id,selected:(null===D||void 0===D?void 0:D.TPA)==e._id,children:e.name},a)))]})]})}),(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Networky"}),(0,d.jsxs)("select",{className:"form-control",name:"network",onChange:e=>G(e),children:[(0,d.jsx)("option",{value:"",children:"Select network"}),C.map(((e,a)=>(0,d.jsx)("option",{value:e._id,selected:(null===D||void 0===D?void 0:D.network)==e._id||0==a,children:e.name},a)))]})]})})]}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Age Ragne"}),(0,d.jsx)("input",{type:"text",name:"ageRagne",className:"form-control",onChange:e=>G(e),placeholder:"0-10",defaultValue:E})]})}),(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Emirates Issuing Visa"}),(0,d.jsx)(s.default,{options:j,selectedValues:A,onSelect:e=>w(e),onRemove:e=>w(e),displayValue:"label",placeholder:"Select Emirates Issuing",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,showArrow:!0,style:{chips:{background:"#007bff"}}})]})})]}),(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Co-payments"}),(0,d.jsx)("textarea",{type:"text",name:"coPayments",className:"form-control",onChange:e=>G(e),placeholder:"Enter Co-payments",defaultValue:null===D||void 0===D||null===(e=D.coPayments)||void 0===e||null===(a=e.map((e=>null===e||void 0===e?void 0:e.coPayments)))||void 0===a?void 0:a.join("::")})]})})}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Male Primium"}),(0,d.jsx)("input",{type:"text",name:"malePrimium",className:"form-control",onChange:e=>G(e),placeholder:"5000,5000",defaultValue:null===N||void 0===N||null===(l=N.primiumArray)||void 0===l||null===(n=l.map((e=>null===e||void 0===e?void 0:e.malePre)))||void 0===n?void 0:n.join(",")})]})}),(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Female Primium"}),(0,d.jsx)("input",{type:"text",name:"femalePrimium",className:"form-control",onChange:e=>G(e),placeholder:"5000,5000",defaultValue:null===N||void 0===N||null===(r=N.primiumArray)||void 0===r||null===(c=r.map((e=>null===e||void 0===e?void 0:e.femalePer)))||void 0===c?void 0:c.join(",")})]})}),(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Female(Marride) Primium"}),(0,d.jsx)("input",{type:"text",name:"femaleMarridePrimium",className:"form-control",onChange:e=>G(e),placeholder:"5000,5000",defaultValue:null===N||void 0===N||null===(m=N.primiumArray)||void 0===m?void 0:m.map((e=>null===e||void 0===e?void 0:e.marrideFemalePre)).join(",")})]})})]}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Period Days Range "}),(0,d.jsx)("input",{onChange:e=>G(e),type:"text",name:"perioddayRange",className:"form-control",defaultValue:null===I||void 0===I?void 0:I.perioddayRange,placeholder:"10-20,20-30",required:!0})]})}),(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Topup"}),(0,d.jsx)("input",{onChange:e=>G(e),type:"text",name:"perioddayRange_topup",className:"form-control",defaultValue:null===I||void 0===I?void 0:I.perioddayRange_topup,placeholder:"0,10,20",required:!0})]})}),(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:"Location"}),(0,d.jsx)(s.default,{options:f,selectedValues:_,onSelect:e=>P(e),onRemove:e=>P(e),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,showArrow:!0,style:{chips:{background:"#007bff"}}})]})})]}),(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:"Update"})})})]})})]})})})})}}}]);
//# sourceMappingURL=328.24f3459c.chunk.js.map