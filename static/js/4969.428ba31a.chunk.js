"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4969],{14969:(i,n,e)=>{e.r(n),e.d(n,{default:()=>c});var o=e(65043),d=e(73216),l=e(54168),t=e(70579);const c=()=>{const i=(0,d.Zp)(),[n,e]=(0,o.useState)([]),[c,a]=(0,o.useState)([]),[s,r]=(0,o.useState)({}),[h,v]=(0,o.useState)([]),u=window.location.href,_=new URLSearchParams(u.split("?")[1]).get("id");(0,o.useEffect)((()=>{const n=localStorage.getItem("token");if(null===n||void 0===n||""===n)i("/login");else{const i=window.location.href.split("/")[3].split("?")[1].split("&")[0].split("=")[1];f(i)}}),[]);const f=async i=>{try{const n={method:"GET",headers:{"Content-Type":"application/json"}},e=await fetch("https://insuranceapi-3o5t.onrender.com/api/gethomecondition",n),o=(await e.json()).data;m(o,i)}catch(n){console.error("Error fetching home conditions:",n)}},m=(i,n)=>{try{const o=`https://insuranceapi-3o5t.onrender.com/api/home_plan_details/${n}`;fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}).then((i=>i.json())).then((n=>{const o=n.data.condition_arr;let d=i,l=[],t=[];for(let i=0;i<(null===d||void 0===d?void 0:d.length);i++){let n=!1;for(let e=0;e<(null===o||void 0===o?void 0:o.length);e++){var c,a;if((null===(c=o[e])||void 0===c?void 0:c.condition_id)===(null===(a=d[i])||void 0===a?void 0:a._id)){var s,r,h,u,_,f,m,p;n=!0;let c=null===(s=o[e])||void 0===s||null===(r=s.condition_desc)||void 0===r?void 0:r.map((i=>({label:i,value:i})));l.push({condition_id:null===(h=d[i])||void 0===h?void 0:h._id,condition_label:null===(u=d[i])||void 0===u?void 0:u.home_condition_label,condition_desc:c,condition_value:null===(_=o[e])||void 0===_?void 0:_.condition_value,checked:!0}),t.push({condition_id:null===(f=d[i])||void 0===f?void 0:f._id,condition_label:null===(m=d[i])||void 0===m?void 0:m.home_condition_label,condition_desc:c,condition_value:null===(p=o[e])||void 0===p?void 0:p.condition_value,checked:!0})}}var x,b;if(!1===n)l.push({condition_id:null===(x=d[i])||void 0===x?void 0:x._id,condition_label:null===(b=d[i])||void 0===b?void 0:b.home_condition_label,condition_desc:[],condition_value:"",checked:!1})}e(l),v(t)}))}catch(o){console.error("Error planning home condition details:",o)}},p=(i,o,d)=>{try{if(void 0==(null===h||void 0===h?void 0:h.find((i=>i.condition_label==d)))){let o=null===n||void 0===n?void 0:n.find((i=>i.condition_label==d)),l=null===n||void 0===n?void 0:n.findIndex((i=>i==o)),t=[...n];t[l].condition_desc=i,e(t)}else{let o=null===h||void 0===h?void 0:h.find((i=>i.condition_label==d)),l=null===h||void 0===h?void 0:h.findIndex((i=>i==o)),t=[...h];t[l].condition_desc=i,v(t);let c=null===n||void 0===n?void 0:n.find((i=>i.condition_label==d)),a=null===n||void 0===n?void 0:n.findIndex((i=>i==c)),s=[...n];s[a].condition_desc=i,e(s)}}catch(l){console.log(l,"error in handleInputChange function")}},x=[{label:"Yes",value:"Yes"},{label:"No",value:"No"}];return(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-md-12",children:(0,t.jsxs)("div",{className:"card ",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsx)("h4",{children:"Conditions"})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsx)("a",{href:"/homeplan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("table",{className:"table table-bordered",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:(0,t.jsx)("strong",{children:"#"})}),(0,t.jsx)("th",{children:(0,t.jsx)("strong",{children:"Condition"})}),(0,t.jsx)("th",{children:(0,t.jsx)("strong",{children:"Description"})}),(0,t.jsx)("th",{children:(0,t.jsx)("strong",{children:"Fixed/Percentage/Reffered"})})]})}),(0,t.jsx)("tbody",{children:n.map(((i,o)=>{var d;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("div",{className:"checkboxs",children:(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",defaultChecked:(null===i||void 0===i||null===(d=i.condition_desc)||void 0===d?void 0:d.length)>0,onChange:e=>((i,e,o)=>{if(!0===i.target.checked){let i=null===n||void 0===n?void 0:n.find((i=>i.condition_label===o));i.checked=!0;const e=[...h];null===e||void 0===e||e.push(i),v(e),console.log(i,"selected FoundData")}else{(null===n||void 0===n?void 0:n.find((i=>i.condition_label===o))).checked=!1;const i=[...h],e=null===i||void 0===i?void 0:i.findIndex((i=>i.condition_label===o));null===i||void 0===i||i.splice(e,1),v(i)}})(e,0,i.condition_label)})})}),(0,t.jsx)("td",{children:i.condition_label}),(0,t.jsx)("td",{children:(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)(l.default,{options:x,selectedValues:i.condition_desc?i.condition_desc:[],displayValue:"label",onSelect:n=>p(n,i.condition_id,i.condition_label),onRemove:n=>p(n,i.condition_id,i.condition_label),placeholder:"Select Description",showCheckbox:!0,closeOnSelect:!1,disable:0==i.checked,required:!0,disabled:!i.condition_desc})})}),(0,t.jsx)("td",{children:(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("input",{type:"text",name:"value",className:"form-control",disabled:0==i.checked,onChange:o=>((i,o,d)=>{const{name:l,value:t}=i.target;if(void 0==(null===h||void 0===h?void 0:h.find((i=>i.condition_label==d)))){let i=null===n||void 0===n?void 0:n.find((i=>i.condition_label==d)),o=null===n||void 0===n?void 0:n.findIndex((n=>n==i)),l=[...n];l[o].condition_value=t,e(l)}else{let i=null===h||void 0===h?void 0:h.find((i=>i.condition_label==d)),o=null===h||void 0===h?void 0:h.findIndex((n=>n==i)),l=[...h];l[o].condition_value=t,v(l);let c=null===n||void 0===n?void 0:n.find((i=>i.condition_label==d)),a=null===n||void 0===n?void 0:n.findIndex((i=>i==c)),s=[...n];s[a].condition_value=t,e(s)}})(o,i.condition_id,i.condition_label),defaultValue:i.condition_value?i.condition_value:""})})})]},o)}))})]})}),(0,t.jsx)("div",{className:"card-footer",children:(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{console.log(h,"formData");const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_,formData:h})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_plan_home_condition",i).then((i=>i.json())).then((i=>{window.location.href="/HomeCondition?id="+_}))},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=4969.428ba31a.chunk.js.map