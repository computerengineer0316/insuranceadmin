"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[393],{30393:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(65043),o=s(73216),c=s(73023),n=s.n(c),l=s(35475),r=s(54168),i=s(70579);const d=()=>{const e=(0,o.Zp)(),[t,s]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[h,m]=(0,a.useState)({});(0,a.useEffect)((()=>{u()}),[]);const u=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location").then((e=>e.json())).then((e=>{const t=e.data.map((e=>({label:e.location_name,value:e._id})));d(t)})).catch((e=>console.error("Error fetching locations:",e)))},x=(e,a,o)=>{console.log(a,"multiselect value");const c=[...t];c[e][o]=a,s(c)};return(0,i.jsx)("div",{className:"container mb-5",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)("h4",{className:"card-title",children:"Add Work Location "})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)(l.N_,{to:"/ViewWorkLocation",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,i.jsx)("div",{className:"card-body addmotorplans",children:(0,i.jsxs)("table",{className:"table table-bordered",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:(0,i.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={worklocation:"",location:c};s([...t,e])},children:"+"})}),(0,i.jsx)("th",{children:"Work Location"}),(0,i.jsx)("th",{children:"Location"})]})}),(0,i.jsx)("tbody",{children:t.map(((e,a)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const a=[...t];a.splice(e,1),s(a)})(a),children:"x"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",className:"form-control",name:"worklocation",placeholder:"Enter Sponsor Type",required:!0,onChange:e=>((e,a)=>{const{name:o,value:c}=a.target;""===c.trim()?m((e=>({...e,[o]:"This is required"}))):m((e=>({...e,[o]:""})));const n=[...t];n[e][o]=c,s(n)})(a,e)})}),(0,i.jsx)("td",{children:(0,i.jsx)(r.default,{options:c,selectedValues:c,displayValue:"label",onSelect:e=>x(a,e,"location"),onRemove:e=>x(a,e,"location"),placeholder:"Select Location",showCheckbox:!0,required:!0})})]},a)))})]})}),(0,i.jsx)("div",{className:"card-footer",children:(0,i.jsx)("button",{className:"btn btn-outline-success",style:{float:"right"},onClick:async s=>{s.preventDefault(),console.log("rowsData:",t);if(t.some((e=>""===e.worklocation.trim()||0==e.location)))n()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"});else try{const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},a=await fetch("https://insuranceapi-3o5t.onrender.com/api/addworklocation",s),o=await a.json();200==o.status?(n()({text:o.message,icon:"success"}),e("/ViewWorkLocation")):403==o.status?n()({text:o.message,icon:"warning"}):n()({text:o.message,icon:"error"})}catch(a){console.error("Error:",a)}},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=393.5a0df0ea.chunk.js.map