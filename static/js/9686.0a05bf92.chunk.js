"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9686,1072,8691,6310],{49686:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var t=a(65043),n=a(92157),o=a.n(n),l=a(73216),i=a(1177),r=a(84217),c=a(53519),d=a(61072),h=a(14282),p=a(86178),m=a.n(p),u=a(70579);const j=function(e){let{filterOptions:s,defaultOptions:a,updateSharedData:n}=e;const p=(0,l.Zp)(),[j,x]=(0,t.useState)([]),[g,y]=(0,t.useState)([]),[b,f]=(0,t.useState)([]),[v,_]=(0,t.useState)([]),[N]=(0,t.useState)(5),[k,S]=(0,t.useState)(0),[w,A]=(0,t.useState)(1),[C,L]=(0,t.useState)(!1),[O,T]=(0,t.useState)(""),[D,$]=(0,t.useState)(""),[I,P]=(0,t.useState)(""),[F,J]=(0,t.useState)([]),[B,E]=(0,t.useState)(""),[H,M]=(0,t.useState)(0);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?p("/login"):(Y(w,N),G(),Z())}),[s]);const R=JSON.parse(localStorage.getItem("user")),z=(R.usertype,null===R||void 0===R?void 0:R.location);let U="";z&&z.length>0&&z[0].loc_id&&(U=z[0].loc_id);const Y=async(e,t)=>{let n=s.location,o=s.lob,l=s.businessType,i=s.agent,r=s.dateRange,c=a.startdate,d=a.enddate;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):a.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),p=JSON.parse(localStorage.getItem("user")).usertype,m={method:"POST",body:JSON.stringify({page:e,limit:t,location:n,lob:o,business_type:l,newagent:i,dateRange:r,startdate:c,enddate:d}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"66068569e8f96a29286c956e"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=LostDropped",m).then((e=>e.json())).then((e=>{const s=e.total;M(s);const a=s/t,n=Math.ceil(a);S(n);const o=e.data;x(o)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=LostDropped&dashboardType=producerDashbord",m).then((e=>e.json())).then((e=>{const s=e.total;M(s);const a=s/t,n=Math.ceil(a);S(n);const o=e.data;x(o)})).catch((e=>{console.log(e)}))},G=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let s=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});s=await s.json(),y(s.data)},K=(w-1)*N,Z=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const s=e.data,a=s.length,t=[];for(let n=0;n<a;n++){const e={label:s[n].name,value:s[n]._id};t.push(e)}J(t)}))},[q,Q]=(0,t.useState)({}),[V,W]=(0,t.useState)(!1),[X,ee]=(0,t.useState)("");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{children:(0,u.jsxs)(i.A.Item,{eventKey:"1",children:[(0,u.jsx)(i.A.Header,{children:(0,u.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,u.jsx)("strong",{children:"Dropped & Lost"}),H>0?(0,u.jsx)("div",{className:"dashboardNotify",children:(0,u.jsx)("h6",{children:H})}):""]})}),(0,u.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,u.jsxs)("table",{className:"table table-bordered",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"table-info",children:[(0,u.jsx)("th",{scope:"col",children:"Sr"}),(0,u.jsx)("th",{scope:"col",children:"Name"}),(0,u.jsx)("th",{scope:"col",children:"Phone No."}),(0,u.jsx)("th",{scope:"col",children:"Email-ID"}),(0,u.jsx)("th",{scope:"col",children:"Nationality"}),(0,u.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,u.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,u.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,u.jsx)("th",{scope:"col",children:"Sales Advisor"}),(0,u.jsx)("th",{scope:"col",children:"Producer"}),(0,u.jsx)("th",{scope:"col",children:"Link"}),(0,u.jsx)("th",{scope:"col",children:"Action"})]})}),(0,u.jsx)("tbody",{children:j.length>0?j.map(((e,s)=>{var a,t;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:K+s+1}),(0,u.jsxs)("td",{onClick:()=>(e=>{try{console.log(e),window.open(e,"_blank")}catch(s){console.log(s)}})(e.buisnessEntityCostomerLink),children:[" ",e.name]}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const s=`https://wa.me/${e}`;window.open(s)})(e.phoneno),children:e.phoneno})}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const s=`mailto:${e}`;window.open(s)})(e.email),children:e.email})}),(0,u.jsx)("td",{children:e.nationality}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?m()(e.assign_salesadvisor_timestamp).fromNow():m()(e.new_lead_timestamp).fromNow()}),(0,u.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,u.jsx)("td",{children:""!=e.assigned_agent_info?null===(a=e.assigned_agent_info[0])||void 0===a?void 0:a.name:"-"}),(0,u.jsx)("td",{children:""!=e.producerdetail?null===(t=e.producerdetail[0])||void 0===t?void 0:t.name:"-"}),(0,u.jsx)("td",{className:"buttons_icons1",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(e=>{console.log(e),ee(e),W(!0)})(e.buisnessEntityCostomerLink),children:(0,u.jsx)("i",{className:"fa-solid fa-link"})})}),(0,u.jsx)("td",{className:"buttons_icons1",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>((e,s)=>{"Motor"===s&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===s&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===s&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===s&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===s&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===s&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,e.policy_type[0].line_of_business_name),children:(0,u.jsx)("i",{className:"fa-solid fa-eye"})})})]},s)})):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"12",className:"text-center",children:(0,u.jsx)("strong",{children:"No Records Found"})})})})]}),(0,u.jsxs)("section",{children:[(0,u.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const s=JSON.parse(localStorage.getItem("user"))._id,a="{}"===JSON.stringify(I)?null:I,t="{}"===JSON.stringify(D)?null:D,o=""===B?null:B,l=new Set(Object.keys(a||{}).concat(Object.keys(t||{}),Object.keys(o||{})));for(const i of l){const e=I[i],a=D[i],t=B[i];if("Forward"===a&&(""===t||null===t||void 0===t))return alert("Please select DC agent"),!1;const o={method:"POST",body:JSON.stringify({id:i,direct_payment:e,lead_status:a,forward_to:t,assigningagent:s}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",o).then((e=>e.json())).then((e=>{Y(w,N),n(Y(w,N))}))}},children:"Save "}),(0,u.jsx)(o(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:k,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const s=e.selected;A(s+1),Y(s+1,N,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,u.jsxs)(r.A,{size:"lg",show:C,onHide:()=>L(!1),children:[(0,u.jsx)(r.A.Header,{closeButton:!0,children:(0,u.jsx)(r.A.Title,{children:"Lead Detail"})}),(0,u.jsx)(r.A.Body,{children:(0,u.jsxs)(c.A,{children:[(0,u.jsxs)(d.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name",children:"Name"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:b.name})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"email",children:"Email"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:b.email})]})})]}),(0,u.jsxs)(d.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:b.phoneno})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:v})]})})]})]})}),(0,u.jsx)(r.A.Footer,{children:(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>L(!1),children:"Close"})})]}),(0,u.jsxs)(r.A,{size:"lg",show:V,onHide:()=>W(!1),children:[(0,u.jsx)(r.A.Header,{closeButton:!0,children:(0,u.jsx)(r.A.Title,{children:"Link"})}),(0,u.jsx)(r.A.Body,{children:(0,u.jsx)(c.A,{children:(0,u.jsx)(d.A,{children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name"}),(0,u.jsx)("textarea",{className:"form-control",id:"address",name:"address",value:X,readOnly:!0,children:X&&(0,u.jsx)("a",{href:X,target:"_blank",rel:"noopener noreferrer",children:X})})]})})})})}),(0,u.jsxs)(r.A.Footer,{children:[(0,u.jsx)(h.A,{variant:"primary",onClick:()=>{const e=document.createElement("textarea");e.value=X,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Link copied to clipboard!")},children:"Copy Link"}),(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>W(!1),children:"Close"})]})]})]})}},61072:(e,s,a)=>{a.d(s,{A:()=>c});var t=a(98139),n=a.n(t),o=a(65043),l=a(67852),i=a(70579);const r=o.forwardRef(((e,s)=>{let{bsPrefix:a,className:t,as:o="div",...r}=e;const c=(0,l.oU)(a,"row"),d=(0,l.gy)(),h=(0,l.Jm)(),p=`${c}-cols`,m=[];return d.forEach((e=>{const s=r[e];let a;delete r[e],null!=s&&"object"===typeof s?({cols:a}=s):a=s;const t=e!==h?`-${e}`:"";null!=a&&m.push(`${p}${t}-${a}`)})),(0,i.jsx)(o,{ref:s,...r,className:n()(t,c,...m)})}));r.displayName="Row";const c=r}}]);
//# sourceMappingURL=9686.0a05bf92.chunk.js.map