"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8567],{88567:(e,s,l)=>{l.r(s),l.d(s,{default:()=>m});var n=l(65043),a=l(73216),o=l(73023),t=l.n(o),i=(l(54168),l(77977)),c=l(80726),r=l.n(c),d=l(70579);const m=()=>{const e=(0,a.Zp)(),[s,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[m,h]=(0,n.useState)(""),[p,u]=(0,n.useState)(""),[j,x]=(0,n.useState)(""),[v,g]=(0,n.useState)(""),[b,y]=(0,n.useState)(""),[f,_]=(0,n.useState)([]),[N,T]=(0,n.useState)("");(0,n.useEffect)((()=>{S(),C(),w()}),[]);const S=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{console.log(e);const s=null===e||void 0===e?void 0:e.data,n=null===s||void 0===s?void 0:s.map((e=>({label:null===e||void 0===e?void 0:e.line_of_business_name,value:null===e||void 0===e?void 0:e._id})));l(n)}))},C=async()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_all_policiy_type",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{c(e.data)}))},w=()=>{try{fetch("https://insuranceapi-3o5t.onrender.com/api/getEmailTypes",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{_(e.data)}))}catch(e){console.log("error",e)}};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsx)("div",{className:"card",style:{marginTop:"20px"},children:(0,d.jsx)("div",{className:"card-header",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("h4",{className:"card-title",children:"Add Email Template"})}),(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("a",{href:"/ViewEmailTemplates",className:"btn btn-primary",style:{float:"right"},children:"Back"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("form",{action:"/",method:"POST",children:[(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Subject"})}),(0,d.jsx)("input",{type:"text",className:"form-control",name:"staff_name",placeholder:"Enter Name",autoComplete:"off",required:!0,onChange:e=>h(e.target.value)})]})}),(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Line Of Business"})}),(0,d.jsxs)("select",{className:"form-control",name:"line_of_business",required:!0,onChange:e=>(e=>{const s=e.target.value;console.log("selectedList",s),u(s),g("")})(e),children:[(0,d.jsx)("option",{value:"",hidden:!0,children:"Select Line Of Business"}),s.map(((e,s)=>(0,d.jsx)("option",{value:e.value,children:e.label},s)))]})]})}),(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Business Type "})}),(0,d.jsxs)("select",{className:"form-control",name:"business_type",required:!0,onChange:e=>x(e.target.value),children:[(0,d.jsx)("option",{value:"",hidden:!0,children:"Select Business Type"}),(0,d.jsx)("option",{value:"New",children:"New Business"}),(0,d.jsx)("option",{value:"Renewal",children:"Renewal Business"})]})]})}),"6418643bf42eaf5ba1c9e0ef"==p||"641bf0bbcbfce023c8c76739"==p?(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Plan Type"})}),(0,d.jsxs)("select",{className:"form-control",onChange:e=>g(e.target.value),children:[(0,d.jsx)("option",{value:"",hidden:!0,children:"Select Plan Type"}),null===o||void 0===o?void 0:o.map(((e,s)=>(0,d.jsx)("option",{value:e._id,children:e.policy_type_name},s)))]})]})}):"",(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Type "})}),(0,d.jsxs)("select",{className:"form-control",name:"type",required:!0,onChange:e=>T(e.target.value),children:[(0,d.jsx)("option",{value:"",hidden:!0,children:"Select Type"}),null===f||void 0===f?void 0:f.map(((e,s)=>(0,d.jsx)("option",{value:e._id,children:e.name},s)))]})]})}),(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"form-group mb-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Email"})}),(0,d.jsx)(i.CKEditor,{editor:r(),data:"<p>Dear Valued Customer,</p>",config:{toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","indent","outdent","|","blockQuote","|","undo","redo"]},placeholder:"Start typing here..."},onReady:e=>{console.log("Editor is ready to use!",e)},onChange:(e,s)=>{const l=s.getData();y(l)},onBlur:(e,s)=>{console.log("Blur.",s)},onFocus:(e,s)=>{console.log("Focus.",s)}})]})})]}),(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",style:{textAlign:"right"},children:(0,d.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:async s=>{s.preventDefault();try{console.log("subject",m),console.log("selectedLineOfBusiness",p),console.log("selectedBusinessType",j),console.log("selectedPlanType",v),console.log("email",b);const s=new FormData;s.append("subject",m),s.append("LOB",p),s.append("business_type",j),s.append("plan_type",v),s.append("body",b),s.append("email_type",N);const l={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")||0},body:JSON.stringify({subject:m,LOB:p,business_type:j,plan_type:v,body:b,email_type:N})};await fetch("https://insuranceapi-3o5t.onrender.com/api/addEmailTemplate",l).then((e=>e.json())).then((s=>{console.log("data",s),"201"==s.status?(t()("",s.message,"success"),e("/viewemailtemplates")):t()("",s.message,"error")}))}catch(l){console.log("error",l)}},children:"Save"})})})]})})]})})})})})})})}}}]);
//# sourceMappingURL=8567.abc6af53.chunk.js.map