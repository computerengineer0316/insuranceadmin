"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1344],{62396:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(65043),s=n(73216),i=n(84217),o=n(14282);const c=n.p+"static/media/yacht-condition-sample-sheet.4638bdca125c3e301187.xlsx";var l=n(93946),d=n(72450),r=n(11238),h=n(92157),m=n.n(h),p=n(73023),u=n.n(p),x=n(54168),j=n(70579);const b=()=>{const e=(0,s.Zp)();(0,a.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):(z(y,h),J(),M())}),[]);const[t,n]=(0,a.useState)(""),[h]=(0,a.useState)(10),[p,b]=(0,a.useState)(0),[y,_]=(0,a.useState)(1),[g,N]=(0,a.useState)([]),[f,v]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),[k,w]=(0,a.useState)(!1),[A,T]=(0,a.useState)(""),[E,D]=(0,a.useState)(""),[L,O]=(0,a.useState)(""),[P,F]=(0,a.useState)(""),[Y,B]=(0,a.useState)(null),[U,H]=(0,a.useState)([]),[V,q]=(0,a.useState)([]),z=async(e,t)=>{N([]);const n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};await fetch(`https://insuranceapi-3o5t.onrender.com/api/get_yacht_condition?page=${e}&limit=${t}`,n).then((e=>e.json())).then((e=>{const n=e.total/t,a=Math.ceil(n);b(a),N(e.data)}))},J=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=t.length,a=[];for(let s=0;s<n;s++){const e={label:t[s].location_name,value:t[s]._id};a.push(e)}q(a)}))},R=async(e,t)=>{let n=await fetch("https://insuranceapi-3o5t.onrender.com/api/update_yacht_condition_status",{method:"post",body:JSON.stringify({id:e,yacht_condition_status:t}),headers:{"Content-Type":"application/json"}});n=await n.json(),u()("Updated Succesfully","","success"),z(y,h)},[G,I]=(0,a.useState)([]),M=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_yacht_condition",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{I(e.data)}))};console.log(G);const $=e=>{H(e)},Q=(y-1)*h;return(0,j.jsxs)("div",{className:"container",children:[(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-12",children:(0,j.jsxs)("div",{className:"card ",children:[(0,j.jsx)("div",{className:"card-header",children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsx)("h4",{className:"card-title",children:"Yacht Conditions"})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsx)("button",{className:"btn btn-primary",style:{float:"right"},onClick:()=>{e("/AddYachtConditions")},children:"Add Yacht Condition"})})]})}),(0,j.jsxs)("div",{className:"card-header",style:{textAlign:"right"},children:[(0,j.jsxs)("a",{className:"btn btn-dark btn-sm btn-icon-text m-r-10",style:{backgroundColor:"green",marginRight:"15px"},href:c,download:!0,children:[(0,j.jsx)("i",{className:"fa fa-cloud-download","aria-hidden":"true"})," Download Sample File"]}),(0,j.jsxs)("button",{className:"btn btn-dark btn-sm btn-icon-text m-r-10",style:{backgroundColor:"green",marginRight:"15px"},onClick:()=>v(!f),children:[(0,j.jsx)("i",{className:"fa fa-file-excel","aria-hidden":"true"})," Upload Excel"]}),(0,j.jsxs)("button",{className:"btn btn-dark btn-sm btn-icon-text m-r-10",style:{backgroundColor:"green"},onClick:()=>{const e=G.map(((e,t)=>({yacht_condition_label:e.yacht_condition_label,yacht_condition_description:1==e.yacht_condition_description?"Yes":"No",yacht_condition_location:e.yacht_condition_location.map((e=>e.location_name)).join(", ")}))),t={Sheets:{data:r.Wp.json_to_sheet(e)},SheetNames:["data"]},n=r.M9(t,{booktype:"xlsx",type:"array"}),a=new Blob([n],{type:"xlsx"});d.saveAs(a,"Yacht-Conditions.xlsx")},children:[(0,j.jsx)("i",{className:"fa fa-file-excel","aria-hidden":"true"})," Export Data to excel"]})]}),(0,j.jsx)("div",{className:"card-body",children:(0,j.jsxs)("div",{className:"table-responsive",children:[(0,j.jsxs)("table",{className:"table table-bordered",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:(0,j.jsx)("strong",{children:"#"})}),(0,j.jsx)("th",{children:(0,j.jsx)("strong",{children:"Condition"})}),(0,j.jsx)("th",{children:(0,j.jsx)("strong",{children:"Description"})}),(0,j.jsx)("th",{children:(0,j.jsx)("strong",{children:"Location"})}),(0,j.jsx)("th",{children:(0,j.jsx)("strong",{children:"Status"})})]})}),(0,j.jsx)("tbody",{children:(null===g||void 0===g?void 0:g.length)>0?null===g||void 0===g?void 0:g.map(((e,t)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:Q+t+1}),(0,j.jsx)("td",{children:e.yacht_condition_label}),(0,j.jsx)("td",{children:e.yacht_condition_location.map((e=>e.location_name)).join(", ")}),(0,j.jsxs)("td",{children:[(0,j.jsx)("button",{className:"btn btn-primary",onClick:()=>(async e=>{T(e);const t={method:"post",body:JSON.stringify({ParamValue:e}),headers:{"Content-Type":"application/json"}};let n=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_yacht_conditionbyid",t);n=await n.json();const a=n.data[0];D(a.yacht_condition_label),O(a.yacht_condition_description),F(a.yacht_condition_status);const s=a.yacht_condition_location.map((e=>({label:e.location_name,value:e._id})));B(s),$(s),w(!0)})(e._id),children:"Edit"}),"\xa0\xa0",1===e.yacht_condition_status?(0,j.jsx)("button",{className:"btn btn-danger mr-5",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&R(e._id,0)},children:"Deactivate"}):(0,j.jsx)("button",{className:"btn btn-success mr-5",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&R(e._id,1)},children:"Activate"})," ",(0,j.jsx)("button",{className:"btn btn-warning",onClick:()=>{var t;window.confirm("Are you sure you wish to delete this item?")&&(t=e._id,fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteYachtMaster/?id=${t}&type=yachtconditions`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(u()({text:e.message,icon:"success",button:!1}),z(y,h),setTimeout((()=>{u().close()}),1e3)):(u()({title:"Error!",text:e.message,icon:"error",button:!1}),z(y,h),setTimeout((()=>{u().close()}),1e3))})))},children:"Delete"})]})]},t))):(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:"4",children:"No Data Found"})})})]}),(0,j.jsx)(m(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:p,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;_(t+1),z(t+1,h)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})})]})})}),(0,j.jsxs)(l.zS,{alignment:"center",visible:f,onClose:()=>v(!1),children:[(0,j.jsx)(l.E4,{onClose:()=>v(!1),children:(0,j.jsx)(l.lb,{children:"Upload Excel File"})}),(0,j.jsx)(l.Tc,{children:(0,j.jsx)("div",{children:(0,j.jsx)("input",{type:"file",className:"form-control",onChange:e=>n(e.target.files[0]),required:!0})})}),(0,j.jsxs)(l.If,{children:[(0,j.jsx)(l.Q_,{color:"secondary",onClick:()=>v(!1),children:"Close"}),(0,j.jsx)(l.Q_,{color:"primary",onClick:async e=>{e.preventDefault();const n=new FormData;n.append("file",t);let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/read_yacht_condition_excel",{method:"POST",body:n});a=await a.json(),v(!f),u()("Uploaded Succesfully","","success"),z(y,h)},children:"Upload"})]})]}),(0,j.jsxs)(i.A,{size:"lg",show:C,onHide:()=>S(!1),children:[(0,j.jsx)(i.A.Header,{closeButton:!0,children:(0,j.jsx)(i.A.Title,{children:"Add Yacht Condition"})}),(0,j.jsx)(i.A.Body,{children:(0,j.jsx)("div",{className:"container",children:(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-12",children:(0,j.jsx)("div",{className:"card",children:(0,j.jsx)("div",{className:"card-body",children:(0,j.jsxs)("form",{action:"/",method:"POST",onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),n=t.get("condition_label"),a=t.get("condition_description"),s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yacht_condition_label:n,yacht_condition_description:a})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_yacht_conditions",s).then((e=>e.json())).then((e=>{200===e.status?(S(!1),u()({title:"Success!",text:e.message,type:"success",icon:"success"}).then((function(){z(y,h)}))):(S(!1),u()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){z(y,h)})))}))},children:[(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("strong",{children:"Condition Label"})}),(0,j.jsx)("input",{type:"text",className:"form-control",name:"condition_label",placeholder:"Enter Condition Label",autoComplete:"off",required:!0})]})})}),(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-12",children:(0,j.jsx)("button",{type:"submit",className:"btn btn-primary submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,j.jsx)(i.A.Footer,{children:(0,j.jsx)(o.A,{variant:"secondary",onClick:()=>S(!1),children:"Close"})})]}),(0,j.jsxs)(i.A,{size:"lg",show:k,onHide:()=>w(!1),children:[(0,j.jsx)(i.A.Header,{closeButton:!0,children:(0,j.jsx)(i.A.Title,{children:"Edit Yacht Condition"})}),(0,j.jsx)(i.A.Body,{children:(0,j.jsx)("div",{className:"container",children:(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-12",children:(0,j.jsx)("div",{className:"card",children:(0,j.jsx)("div",{className:"card-body",children:(0,j.jsxs)("form",{action:"/",method:"POST",onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),n=t.get("condition_label"),a=t.get("condition_description"),s=U.map((e=>e.value));if(0===U.length)return u()({title:"warning!",text:"Please Select Location",icon:"warning",button:"OK"}),!1;const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({yacht_condition_label:n,yacht_condition_description:a,ParamValue:A,location:s})};fetch("https://insuranceapi-3o5t.onrender.com/api/update_yacht_condition",i).then((e=>e.json())).then((e=>{200===e.status?(w(!1),u()({title:"Success!",text:e.message,icon:"success",button:"Ok"}).then((()=>{z(y,h)}))):(w(!1),u()({title:"Error!",text:e.message,icon:"error",button:"Ok"}).then((()=>{z(y,h)})))}))},children:[(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("strong",{children:"Condition Label"})}),(0,j.jsx)("input",{type:"text",className:"form-control",name:"condition_label",placeholder:"Enter Condition Label",defaultValue:E,autoComplete:"off",required:!0})]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("strong",{children:"Condition Description"})}),(0,j.jsx)(x.default,{options:V,selectedValues:Y,onSelect:$,onRemove:$,displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]})})]}),(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-12",children:(0,j.jsx)("button",{type:"submit",className:"btn btn-primary submit_all",style:{float:"right"},children:"Update"})})})]})})})})})})}),(0,j.jsx)(i.A.Footer,{children:(0,j.jsx)(o.A,{variant:"secondary",onClick:()=>w(!1),children:"Close"})})]})]})}}}]);
//# sourceMappingURL=1344.903efe03.chunk.js.map