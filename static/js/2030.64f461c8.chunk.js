"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2030],{62030:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var s=n(65043),a=n(73216),i=n(92157),r=n.n(i),c=n(73023),l=n.n(c),o=n(70579);const d=()=>{let e=s.createRef(),t=s.createRef(),n=s.createRef(),i=s.createRef();const c=(0,a.Zp)(),[d,u]=(0,s.useState)([]),[m]=(0,s.useState)(5),[h,b]=(0,s.useState)(0),[p,_]=(0,s.useState)(1),[f,j]=(0,s.useState)(),[x,N]=(0,s.useState)(""),[v,g]=(0,s.useState)(""),[k,y]=(0,s.useState)(""),[S,w]=(0,s.useState)(""),[C,O]=(0,s.useState)([]),[B,T]=(0,s.useState)("");(0,s.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)c("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];j(e),L(p,m),A()}}),[]);const A=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=t.length,s=[];for(let a=0;a<n;a++){const e={label:t[a].line_of_business_name,value:t[a]._id};s.push(e)}O(s)}))},L=(e,t)=>{u([]);const n=window.location.href.split("/")[3].split("?")[1].split("=")[1],s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({business_entity_id:n})};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_business_entity_bank/${e}/${t}`,s).then((e=>e.json())).then((e=>{const n=e.total/t,s=Math.ceil(n);b(s),u(e.data)}))},D=(e,t)=>{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})};fetch(`https://insuranceapi-3o5t.onrender.com/api/update_business_entity_bank_status/${e}`,n).then((e=>e.json())).then((e=>{200===e.status?l()({title:"Success!",text:e.message,icon:"success",button:"Ok"}).then((()=>{L(p,m)})):l()({title:"Error!",text:e.message,icon:"error",button:"Ok"}).then((()=>{L(p,m)}))}))};return(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-12",children:(0,o.jsxs)("div",{className:"card card-default",children:[(0,o.jsx)("div",{className:"card-header justify-content-center",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("h4",{children:"Bank Details"})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("a",{href:"/ViewBusinessEntity",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("form",{action:"/",method:"POST",onSubmit:""!=S?s=>{s.preventDefault();const a=new FormData(s.target),r=a.get("bank_name"),c=a.get("bank_account_number"),o=a.get("iban_number"),d=a.get("line_of_business"),u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_name:r,bank_account_number:c,iban_number:o,line_of_business:d,bank_id:S})};fetch("https://insuranceapi-3o5t.onrender.com/api/update_business_entity_bank",u).then((e=>e.json())).then((s=>{200===s.status?l()({title:"Success!",text:s.message,icon:"success",button:"OK"}).then((function(){e.current.value="",t.current.value="",n.current.value="",i.current.value="",w(""),window.location.reload()})):l()({title:"Error!",text:s.message,icon:"error",button:"OK"}).then((function(){e.current.value="",t.current.value="",n.current.value="",i.current.value="",w(""),window.location.reload()}))}))}:s=>{s.preventDefault();const a=new FormData(s.target),r=a.get("bank_name"),c=a.get("bank_account_number"),o=a.get("iban_number"),d=a.get("line_of_business"),u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_name:r,bank_account_number:c,iban_number:o,line_of_business:d,business_entity_id:f})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_business_entity_bank",u).then((e=>e.json())).then((s=>{200===s.status?l()({title:"Success!",text:s.message,icon:"success",button:"OK"}).then((function(){e.current.value="",t.current.value="",n.current.value="",i.current.value="",window.location.reload()})):l()({title:"Error!",text:s.message,icon:"error",button:"OK"}).then((function(){e.current.value="",t.current.value="",n.current.value="",i.current.value="",window.location.reload()}))}))},children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Bank Name"}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"Bank Name",name:"bank_name",autoComplete:"off",defaultValue:x,ref:e,required:!0})]})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Bank Account Number"}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"Bank Account Number",name:"bank_account_number",autoComplete:"off",defaultValue:v,ref:t,required:!0})]})})]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"IBAN Number"}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"IBAN Number",name:"iban_number",autoComplete:"off",defaultValue:k,ref:n,required:!0})]})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Line Of Business"}),(0,o.jsxs)("select",{className:"form-control",name:"line_of_business",ref:i,required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select Line Of Business"}),C.map(((e,t)=>(0,o.jsx)("option",{value:e.value,selected:B==e.value,children:e.label},t)))]})]})})]}),(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-md-12",children:(0,o.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:""!=S?"Update":"Submit"})})})]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsxs)("div",{className:"col-md-12",children:[(0,o.jsxs)("table",{className:"table table-bordered",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"#"}),(0,o.jsx)("th",{children:"Bank Name"}),(0,o.jsx)("th",{children:"Bank Account Number"}),(0,o.jsx)("th",{children:"IBAN Number"}),(0,o.jsx)("th",{children:"Line Of Business"}),(0,o.jsx)("th",{children:"Action"})]})}),(0,o.jsx)("tbody",{children:d.length>0?d.map(((e,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:t+1}),(0,o.jsx)("td",{children:e.bankname}),(0,o.jsx)("td",{children:e.accountnumber}),(0,o.jsx)("td",{children:e.ibannumber}),(0,o.jsx)("td",{children:e.line_of_business[0].line_of_business_name}),(0,o.jsxs)("td",{children:[(0,o.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>(e=>{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})};fetch("https://insuranceapi-3o5t.onrender.com/api/get_business_entity_bank_details",t).then((e=>e.json())).then((e=>{200===e.status&&(N(e.data.bankname),g(e.data.accountnumber),y(e.data.ibannumber),w(e.data._id),T(e.data.line_of_business_id))}))})(e._id),children:"Edit"}),"\xa0\xa0",1===e.bankstatus?(0,o.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&D(e._id,0)},children:"Deactivate"}):(0,o.jsx)("button",{className:"btn btn-success btn-sm",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&D(e._id,1)},children:"Activate"})]})]},t))):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"5",style:{textAlign:"center"},children:"No Data Found"})})})]}),(0,o.jsx)(r(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:h,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected+1;_(t),L(t,m)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})})})]})})})})}}}]);
//# sourceMappingURL=2030.64f461c8.chunk.js.map