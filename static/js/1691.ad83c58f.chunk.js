"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1691],{91691:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(65043),n=a(73216),o=a(73023),l=a.n(o),c=a(54168),i=a(70579);const r=()=>{const e=(0,n.Zp)(),[t,a]=(0,s.useState)([]),[o,r]=(0,s.useState)([]),[d,h]=(0,s.useState)([]),[m,u]=(0,s.useState)({});(0,s.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):(p(),x())}),[]);const p=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;a(t)}))},x=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/get_area_of_registration",e).then((e=>e.json())).then((e=>{const t=e.data;console.log("data",t),h(t)}))},j=(e,t,a)=>{const s=[...o];s[e][a]=t,r(s)};return(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card-header",children:[(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("h4",{className:"card-title",children:"Add Medical Salary Range"})})}),(0,i.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,i.jsxs)("table",{className:"table table-bordered",style:{width:"auto"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:(0,i.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={salary_range:"",medical_visa_country:"",location:t};r([...o,e])},children:"+"})}),(0,i.jsx)("th",{children:"Salary Range"}),(0,i.jsx)("th",{children:"Emirates Visa"}),(0,i.jsx)("th",{children:"Location"})]})}),(0,i.jsx)("tbody",{children:o.map(((e,a)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const t=[...o];t.splice(e,1),r(t)})(a),children:"x"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:e=>((e,t)=>{const{name:a,value:s}=t.target;""===s.trim()?u((e=>({...e,[a]:"This is required"}))):u((e=>({...e,[a]:""})));const n=[...o];n[e][a]=s,r(n)})(a,e),className:"form-control",name:"salary_range",placeholder:"Medical Salary Range",autoComplete:"off",required:!0})}),(0,i.jsx)("td",{children:(0,i.jsx)(c.default,{style:{overflow:"visible"},options:d,displayValue:"area_of_registration_name",onSelect:e=>j(a,e,"medical_visa_country"),onRemove:e=>j(a,e,"medical_visa_country"),placeholder:"Select Visa Emirate",showCheckbox:!0,required:!0})}),(0,i.jsx)("td",{children:(0,i.jsx)(c.default,{style:{overflow:"visible"},options:t,selectedValues:t,displayValue:"location_name",onSelect:e=>j(a,e,"location"),onRemove:e=>j(a,e,"location"),placeholder:"Select Location",showCheckbox:!0,required:!0})})]},a)))})]})}),(0,i.jsx)("div",{className:"card-footer",children:(0,i.jsx)("button",{disabled:!o.length,className:"btn btn-outline-success",onClick:t=>{t.preventDefault();try{if(o.some((e=>""===e.salary_range.trim()||0===e.location.length)))return void l()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"});const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)};fetch("https://insuranceapi-3o5t.onrender.com/api/add_medical_salary_range",t).then((e=>e.json())).then((t=>{200==t.status?(l()({text:t.message,type:"success",icon:"success",button:!1}),e("/Viewmedicalsalaryange"),setTimeout((()=>{l().close()}),"1000")):(l()({title:"Error!",text:t.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{l().close()}),"1000"))}))}catch(a){console.log(a)}},children:"Submit"})})]})})})})})}}}]);
//# sourceMappingURL=1691.ad83c58f.chunk.js.map