"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7851],{57851:(e,n,a)=>{a.r(n),a.d(n,{default:()=>y});var t=a(65043),s=a(92157),l=a.n(s),o=a(73216),i=a(1177),d=a(84217),r=a(53519),c=a(61072),h=a(78602),u=a(64196),p=a(14282),m=a(86178),x=a.n(m),f=a(73023),g=a.n(f),j=a(30710),v=(a(17103),a(70579));const y=function(e){let{filterOptions:n,defaultOptions:a,updateSharedData:s}=e;const m=(0,o.Zp)(),[f]=(0,t.useState)(5),[y,b]=(0,t.useState)(0),[_,w]=(0,t.useState)(1),[S,N]=(0,t.useState)([]),[A,C]=(0,t.useState)({}),[k,O]=(0,t.useState)(!1),[T,P]=(0,t.useState)([]),[$,I]=(0,t.useState)({}),[D,F]=(0,t.useState)([]),[L,R]=(0,t.useState)([]),[J,E]=(0,t.useState)(""),[U,V]=(0,t.useState)([]),[B,M]=(0,t.useState)([]),[z,H]=(0,t.useState)("Open"),[Y,q]=(0,t.useState)(""),[K,G]=(0,t.useState)(""),[W,Z]=(0,t.useState)(!1),[Q,X]=(0,t.useState)([]),[ee,ne]=(0,t.useState)([]),[ae,te]=(0,t.useState)([]),[se,le]=(0,t.useState)(0);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?m("/login"):(re(_,f),ie(),de(),he())}),[n]);const oe=JSON.parse(localStorage.getItem("user"))._id,ie=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let n=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=documentchaser",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});n=await n.json(),F(n.data)},de=async()=>{await fetch("https://insuranceapi-3o5t.onrender.com/api/get_Reason_Type_list",{method:"get",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{R(e.data)}))},re=async(e,t)=>{var s;Z(!0);let l=n.location,o=n.lob,i=n.businessType,d=n.agent,r=n.dateRange,c=a.startdate,h=a.enddate;l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlob.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((e=>e.value)):a.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),p=JSON.parse(localStorage.getItem("user")),m=p.usertype,x=(null===p||void 0===p||null===(s=p.dashboard_permission[0])||void 0===s||s.dc_dashboard,{method:"POST",body:JSON.stringify({page:e,limit:t,agentid:oe,location:l,lob:o,business_type:i,newagent:d,dateRange:r,startdate:c,enddate:h}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}});"6462250eb201a6f07b2dff3a"!=m&&"646224eab201a6f07b2dff36"!=m&&"646224deb201a6f07b2dff32"!=m&&"64622526b201a6f07b2dff3e"!=m||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?documentType=open&dashboardType=documentsChaserDashbord",x).then((e=>e.json())).then((e=>{const n=e.total;le(n);const a=n/t,s=Math.ceil(a);b(s);const l=e.data;console.log(">>>>>>>>>>>>>>>>>>>>dc leadssss",l),N(l)})).catch((e=>{console.log(e)})).finally((()=>{Z(!1)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?documentType=open&dashboardType=documentsChaserDashbord",x).then((e=>e.json())).then((e=>{const n=e.total;le(n);const a=n/t,s=Math.ceil(a);b(s);const l=e.data;N(l)})).catch((e=>{console.log(e)})).finally((()=>{Z(!1)}))};console.log(S);const ce=(_-1)*f,he=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=policyIssuer",e).then((e=>e.json())).then((e=>{const n=e.data,a=n.length,t=[];for(let s=0;s<a;s++){const e={label:n[s].name,value:n[s]._id};t.push(e)}M(t)}))},ue=(e,n,a)=>{const t=e.target.files[0];let s=[...ae];const l=null===s||void 0===s?void 0:s.some(((e,n)=>e.name==a.name));if(console.log("elementExists: ",l),!0===l){const e=null===s||void 0===s?void 0:s.find((e=>e.name===a.name));let n=null===s||void 0===s?void 0:s.indexOf(e);console.log("foundIndex: ",n),-1===n?s.push({name:null===e||void 0===e?void 0:e.name,status:null===e||void 0===e?void 0:e.status,reason:null===e||void 0===e?void 0:e.reason,file:t,newfile:!0,origionalname:t.name}):s[n]={name:e.name,status:e.status,reason:e.reason,file:t},te(s)}else s.push({name:a.name,status:a.status,reason:a.reason,file:t}),te(s);console.log("||||AllPayload: ",s)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i.A,{defaultActiveKey:"0",flush:!0,children:(0,v.jsxs)(i.A.Item,{eventKey:"0",children:[(0,v.jsx)(i.A.Header,{children:(0,v.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,v.jsx)("strong",{children:"Chasing Documents"}),se>0?(0,v.jsx)("div",{className:"dashboardNotify",children:(0,v.jsx)("h6",{children:se})}):""]})}),(0,v.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,v.jsxs)("table",{className:"table table-bordered",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"table-info",children:[(0,v.jsx)("th",{scope:"col",children:"Sr#"}),(0,v.jsx)("th",{scope:"col",children:"Client Name"}),(0,v.jsx)("th",{scope:"col",children:"Contact Number"}),(0,v.jsx)("th",{scope:"col",children:"Email Address"}),(0,v.jsx)("th",{scope:"col",children:"LOB"}),(0,v.jsx)("th",{scope:"col",children:"Received From"}),(0,v.jsx)("th",{scope:"col",children:"Assign Date & Time"}),(0,v.jsx)("th",{scope:"col",children:"Aging in minutes"}),(0,v.jsx)("th",{scope:"col",children:"Instant Policy"}),(0,v.jsx)("th",{scope:"col",children:"DP"}),(0,v.jsx)("th",{scope:"col",children:"Action"})]})}),(0,v.jsx)("tbody",{children:W?(0,v.jsx)("div",{className:"loader-container",children:(0,v.jsx)(j.A,{color:"#000000",loading:W,size:50})}):(0,v.jsx)(v.Fragment,{children:S.length>0?S.map(((e,n)=>{var a;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:ce+n+1}),(0,v.jsx)("td",{children:(0,v.jsx)("a",{href:"#",onClick:()=>(async e=>{H("Open"),E(e);let n=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_new_lead_detailsbyid",{method:"post",body:JSON.stringify({ParamValue:e}),headers:{"Content-Type":"application/json"}});n=await n.json(),I(n.data);const a=n.data[0].type_of_policy,t=n.data[0].documents;console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>userdocuments",t),V(t);let s=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_Documents_listbyid",{method:"post",body:JSON.stringify({ParamValue:a}),headers:{"Content-Type":"application/json"}});s=await s.json();let l=s.data;for(let o=0;o<l.length;o++){const e=l[o];let n=!1;for(let a=0;a<t.length;a++){const s=t[a];e.document_type===s.name&&(n=!0,l[o].name=e.document_type,l[o].status=s.status,l[o].reason=s.reason,l[o].file=s.file?s.file:"")}!1===n&&(l[o].name=e.document_type,l[o].status="",l[o].reason="",l[o].file="")}P(l),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>> required documents",T),O(!0)})(e._id),children:e.name})}),(0,v.jsx)("td",{children:(0,v.jsx)("a",{href:"#",onClick:()=>(e=>{const n=`https://wa.me/${e}`;window.open(n)})(e.phoneno),children:e.phoneno})}),(0,v.jsx)("td",{children:(0,v.jsx)("a",{href:"#",onClick:()=>(e=>{const n=`mailto:${e}`;window.open(n)})(e.email),children:e.email})}),(0,v.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,v.jsx)("td",{children:null===(a=e.recived_from_data)||void 0===a?void 0:a.map((e=>e.name))}),(0,v.jsx)("td",{children:e.assign_documentchaser_timestamp?new Date(e.assign_documentchaser_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,v.jsx)("td",{children:e.assign_documentchaser_timestamp?x()(e.assign_documentchaser_timestamp).fromNow():x()(e.new_lead_timestamp).fromNow()}),(0,v.jsxs)("td",{children:[0==e.instant_policy?"No":"Yes"," "]}),(0,v.jsx)("td",{children:(0,v.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:n=>{return a=e._id,t=n.target.checked,void C((e=>({...e,[a]:t})));var a,t},required:!0})}),(0,v.jsx)("td",{className:"buttons_icons",children:(0,v.jsx)("button",{className:"btn btn-primary btn-sm ",onClick:()=>{var n,a,t;return a=e._id,"Motor"===(t=null===(n=e.policy_type[0])||void 0===n?void 0:n.line_of_business_name)&&window.open(`/MotorLeaddetails?id=${a}`,"_blank"),"Travel"===t&&window.open(`/TravelLeaddetails?id=${a}`,"_blank"),"Medical"===t&&window.open(`/MedicalLeaddetails?id=${a}`,"_blank"),"Home"===t&&window.open(`/HomeLeaddetails?id=${a}`,"_blank"),void("Yacht"===t&&window.open(`/YachtLeaddetails?id=${a}`,"_blank"))},children:(0,v.jsx)("i",{className:"fa fa-eye"})})})]},n)})):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"12",className:"text-center",children:(0,v.jsx)("strong",{children:"No Records Found"})})})})})]}),(0,v.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:y,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const n=e.selected;w(n+1),re(n+1,f,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})}),(0,v.jsxs)(d.A,{size:"lg",show:k,onHide:()=>O(!1),scrollable:!0,children:[(0,v.jsx)(d.A.Header,{closeButton:!0,style:{backgroundColor:"#0D2F92",color:"#ffff"},children:(0,v.jsx)(d.A.Title,{children:"Verification Window"})}),(0,v.jsxs)(d.A.Body,{children:[(0,v.jsxs)(r.A,{children:[(0,v.jsx)("div",{children:(0,v.jsx)(c.A,{children:(0,v.jsx)(h.A,{lg:12,style:{width:"100%",overflowY:"scroll",height:"300px"},children:(0,v.jsxs)(u.A,{bordered:!0,hover:!0,children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Sr."}),(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"View / Upload"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{children:"Reasons"})]})}),(0,v.jsx)("tbody",{children:T.map(((e,n)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:n+1}),(0,v.jsx)("td",{children:e.document_type}),(0,v.jsx)("td",{children:null!==e&&void 0!==e&&e.file?(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsx)("button",{className:"btn btn-warning ",style:{marginRight:"5px"},onClick:()=>{return n=e.file,void window.open(`https://insuranceapi-3o5t.onrender.com/documents/${n}`);var n},children:"View"},n),(0,v.jsx)("input",{name:e.document_type,type:"file",onChange:n=>ue(n,0,e)})]}):(0,v.jsx)("input",{name:e.document_type,type:"file",onChange:n=>ue(n,0,e)})}),(0,v.jsx)("td",{children:(0,v.jsxs)("select",{name:"lead_status",id:"lead_status",defaultValue:(null===e||void 0===e?void 0:e.status)||"",onChange:n=>((e,n,a)=>{const{value:t}=e.target;let s=[...ae];const l=null===s||void 0===s?void 0:s.some(((e,n)=>e.name===a.name));if(console.log("elementExists: ",l),!0===l){const e=null===s||void 0===s?void 0:s.find((e=>e.name===a.name));console.log("foundElement: ",e);let n=null===s||void 0===s?void 0:s.indexOf(e);-1===n?s.push({name:null===e||void 0===e?void 0:e.name,status:t,reason:null===e||void 0===e?void 0:e.reason,file:null===(null===e||void 0===e?void 0:e.file)?"":null===e||void 0===e?void 0:e.file}):s[n]={name:null===e||void 0===e?void 0:e.name,status:t,reason:null===e||void 0===e?void 0:e.reason,file:null===(null===e||void 0===e?void 0:e.file)?"":null===e||void 0===e?void 0:e.file},te(s)}else s.push({name:a.name,status:t,reason:a.reason,file:null===a.file?"":a.file}),te(s);console.log("||||AllPayload: ",s)})(n,0,e),children:[(0,v.jsx)("option",{hidden:!0,children:"Select"}),D.map(((e,n)=>(0,v.jsx)("option",{value:e.lead_status,children:e.lead_status},n)))]})}),(0,v.jsx)("td",{children:(0,v.jsxs)("select",{name:"reason_type",id:"reason_type",defaultValue:(null===e||void 0===e?void 0:e.reason)||"",onChange:n=>((e,n,a)=>{const{value:t}=e.target;let s=[...ae];if(!0===s.some(((e,n)=>e.name==a.name))){const e=s.find((e=>e.name===a.name));let n=s.indexOf(e);-1===n?s.push({name:null===e||void 0===e?void 0:e.name,status:null===e||void 0===e?void 0:e.status,reason:t,file:null===(null===e||void 0===e?void 0:e.file)?"":null===e||void 0===e?void 0:e.file}):(console.log("foundIndex: ",n),s[n]={name:null===e||void 0===e?void 0:e.name,status:null===e||void 0===e?void 0:e.status,reason:t,file:null===(null===e||void 0===e?void 0:e.file)?"":null===e||void 0===e?void 0:e.file}),te(s)}else s.push({name:a.name,status:a.status,reason:t,file:null===a.file?"":a.file}),te(s);console.log("||||AllPayload: ",s)})(n,0,e),children:[(0,v.jsx)("option",{hidden:!0,children:"Select"}),L.map(((e,n)=>(0,v.jsx)("option",{value:e.reason_type,children:e.reason_type},n)))]})})]},n)))})]})})})}),(0,v.jsx)(c.A,{children:(0,v.jsx)(h.A,{lg:12,children:(0,v.jsx)(p.A,{className:"btn btn-primary mt-3 mb-3",onClick:()=>{const e=new FormData;ae.forEach(((n,a)=>{e.append("file",n.file)})),e.append("id",J),e.append("payload",JSON.stringify(ae)),ae.length>0?fetch("https://insuranceapi-3o5t.onrender.com/api/update_all_documents",{method:"post",body:e}).then((e=>e.json())).then((e=>{200===e.status?(g()("Success!","Updated","success"),O(!1),re(_,f),te([])):g()("Error!","Something went wrong","error")})).catch((e=>{console.error(e)})):alert("No Documents")},children:"Save"})})})]}),(0,v.jsxs)(r.A,{children:[(0,v.jsx)(c.A,{children:(0,v.jsxs)(h.A,{lg:12,children:[(0,v.jsx)("label",{className:"form-label",children:(0,v.jsx)("strong",{children:"Status"})}),(0,v.jsxs)("select",{name:"status",id:"status",className:"form-control",onChange:e=>H(e.target.value),children:[Array.isArray($)&&$.map(((e,n)=>(0,v.jsx)("option",{value:e.dcleadstatus,hidden:!0,children:e.dcleadstatus},n))),(0,v.jsx)("option",{value:"Forward",children:"Forward"}),(0,v.jsx)("option",{value:"Open",children:"Open"}),(0,v.jsx)("option",{value:"Pending",children:"Pending"})]})]})}),(0,v.jsx)(c.A,{children:(0,v.jsx)(h.A,{children:$&&Array.isArray($)?$.map(((e,n)=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{className:"form-label",children:(0,v.jsx)("strong",{children:"Status Updated"})}),(0,v.jsxs)("select",{name:"",id:"",className:"form-control",onChange:e=>q(e.target.value),disabled:"Open"==z||"Pending"==z,children:[(0,v.jsx)("option",{hidden:!0,children:"Policy Issuer"}),B.map(((n,a)=>(0,v.jsx)("option",{value:n.value,selected:e.dcleadforwardto==n.label,children:n.label},a)))]})]}))):(0,v.jsx)("p",{children:"No lead details available."})})}),(0,v.jsx)(c.A,{children:(0,v.jsx)(h.A,{children:$&&Array.isArray($)?$.map(((e,n)=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{className:"form-label",children:(0,v.jsx)("strong",{children:"Reasons"})}),(0,v.jsxs)("select",{name:"reason_type",id:"reason_type",className:"form-control",onChange:e=>G(e.target.value),disabled:"Open"==z||"Forward"==z,children:[(0,v.jsx)("option",{hidden:!0,children:"Select Reason"}),L.map(((n,a)=>(0,v.jsx)("option",{value:n.reason_type,selected:e.dcleadreason==n.reason_type,children:n.reason_type},a)))]})]}))):(0,v.jsx)("p",{children:"No lead details available."})})}),(0,v.jsx)(c.A,{children:(0,v.jsx)(h.A,{children:(0,v.jsx)("button",{className:"btn btn-primary mt-3 mb-3",onClick:async()=>{if("Forward"==z&&""==Y)return void g()({text:"Please select the Policy Issuer",icon:"warning"});if("Pending"==z&&""==K)return void g()({text:"Please select the Reason",icon:"warning"});const e=JSON.parse(localStorage.getItem("user"))._id,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:J,dcleadstatus:z,dcleadforwardto:Y,dcleadreason:K,assigningagent:e})};let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/updatedcverification",n);a=await a.json(),200===a.status&&(g()("Success!","Updated","success"),re(_,f),s(re(_,f)),O(!1))},children:"Submit"})})})]})]}),(0,v.jsx)(d.A.Footer,{children:(0,v.jsx)(p.A,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]})]})}},64196:(e,n,a)=>{a.d(n,{A:()=>d});var t=a(98139),s=a.n(t),l=a(65043),o=a(67852),i=a(70579);const d=l.forwardRef(((e,n)=>{let{bsPrefix:a,className:t,striped:l,bordered:d,borderless:r,hover:c,size:h,variant:u,responsive:p,...m}=e;const x=(0,o.oU)(a,"table"),f=s()(t,x,u&&`${x}-${u}`,h&&`${x}-${h}`,l&&`${x}-${"string"===typeof l?`striped-${l}`:"striped"}`,d&&`${x}-bordered`,r&&`${x}-borderless`,c&&`${x}-hover`),g=(0,i.jsx)("table",{...m,className:f,ref:n});if(p){let e=`${x}-responsive`;return"string"===typeof p&&(e=`${e}-${p}`),(0,i.jsx)("div",{className:e,children:g})}return g}))}}]);
//# sourceMappingURL=7851.572616da.chunk.js.map