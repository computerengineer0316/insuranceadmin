"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3882],{53882:(t,a,e)=>{e.r(a),e.d(a,{default:()=>c});var o=e(93946),n=e(90504),u=e(65043),s=e(73216),d=e(1177),r=e(78602),l=e(70579);const c=function(t){let{filterOptions:a,defaultOptions:e,lobdata:c}=t;const m=(0,s.Zp)();(0,u.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?m("/login"):C()}),[c]);const[h,i]=(0,u.useState)(),C=async()=>{let t=c.map((t=>t.value));const a={method:"POST",body:JSON.stringify({lob:t}),headers:{"Content-Type":"application/json"}};await fetch("https://insuranceapi-3o5t.onrender.com/api/get_new_leads_count",a).then((t=>t.json())).then((t=>{i(t)}))};let p={labels:[],datasets:[]};h&&Array.isArray(h.data)&&(p={labels:h.data.map((t=>t.line_of_business_name)),datasets:h.data.map((t=>({label:t.line_of_business_name,data:[t.total],backgroundColor:"Motor"===t.line_of_business_name?"#0D2F92":"#f87979",hoverBackgroundColor:"Motor"===t.line_of_business_name?"#0D2F92":"#f87979"})))});const[y,b]=(0,u.useState)([]);(0,u.useEffect)((()=>{S()}),[]),(0,u.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?m("/login"):(N(),Ce())}),[a]);const S=()=>{const t=JSON.parse(localStorage.getItem("user")).line_of_business;if(t.length>0){const a=t,e=a.length,o=[];for(let t=0;t<e;t++){const e={label:a[t].lob_name,value:a[t].lob_id};o.push(e)}b(o)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>t.json())).then((t=>{const a=t.data,e=a.length,o=[];for(let n=0;n<e;n++){const t={label:a[n].line_of_business_name,value:a[n]._id};o.push(t)}b(o)}))}},[f,g]=(0,u.useState)(0),[_,v]=(0,u.useState)(0),[j,A]=(0,u.useState)(0),[J,O]=(0,u.useState)(0),[F,M]=(0,u.useState)(0),[T,x]=(0,u.useState)(0),N=async()=>{var t;console.log("inside filterOptions",a),console.log("inside defaultOptions",e);const o=JSON.parse(localStorage.getItem("user"));let n=a.location,u=a.lob,s=a.businessType,d=a.agent,r=a.dateRange,l=e.startdate,c=e.enddate,m=o.assign_staff,h=e.userType;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((t=>t.value)):e.defaultlocation.map((t=>t.value)),u=null!=u&&void 0!=u&&Array.isArray(u)&&0!==u.length?u.map((t=>t.value)):e.defaultlob.map((t=>t.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((t=>t.value)):e.defaultbusinessType.map((t=>t.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((t=>t.value)):e.defaultagent.map((t=>t.value));const i=localStorage.getItem("token"),C=JSON.parse(localStorage.getItem("user")),p=C.usertype;null===C||void 0===C||null===(t=C.dashboard_permission[0])||void 0===t||t.dc_dashboard;console.log("loginusertype",p);const y={method:"POST",body:JSON.stringify({location:n,lob:u,business_type:s,newagent:d,dateRange:r,startdate:l,enddate:c,assign_staff:m,userType:h}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}};"6462250eb201a6f07b2dff3a"!=p&&"646224eab201a6f07b2dff36"!=p&&"646224deb201a6f07b2dff32"!=p&&"64622526b201a6f07b2dff3e"!=p||await fetch("https://insuranceapi-3o5t.onrender.com/api/topLeagentCount",y).then((t=>t.json())).then((t=>{console.log("data",t.data),g(t.data.motorCount),v(t.data.travelCount),A(t.data.homeCount),O(t.data.yatchCount),M(t.data.medicalCount),x(t.data.ortherInsuranceCount)})).catch((t=>{console.log(t)})),"64622470b201a6f07b2dff22"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/topLeagentCount?dashboardType=documentsChaserDashbord",y).then((t=>t.json())).then((t=>{console.log("data",t.data),g(t.data.motorCount),v(t.data.travelCount),A(t.data.homeCount),O(t.data.yatchCount),M(t.data.medicalCount),x(t.data.ortherInsuranceCount)})).catch((t=>{console.log(t)}))},[k,w]=(0,u.useState)(0),[E,I]=(0,u.useState)(0),[B,D]=(0,u.useState)(0),[G,H]=(0,u.useState)(0),[L,R]=(0,u.useState)(0),[P,V]=(0,u.useState)(0),[Y,$]=(0,u.useState)(0),[z,K]=(0,u.useState)(0),[W,U]=(0,u.useState)(0),[Z,q]=(0,u.useState)(0),[Q,X]=(0,u.useState)(0),[tt,at]=(0,u.useState)(0),[et,ot]=(0,u.useState)(0),[nt,ut]=(0,u.useState)(0),[st,dt]=(0,u.useState)(0),[rt,lt]=(0,u.useState)(0),[ct,mt]=(0,u.useState)(0),[ht,it]=(0,u.useState)(0),[Ct,pt]=(0,u.useState)(0),[yt,bt]=(0,u.useState)(0),[St,ft]=(0,u.useState)(0),[gt,_t]=(0,u.useState)(0),[vt,jt]=(0,u.useState)(0),[At,Jt]=(0,u.useState)(0),[Ot,Ft]=(0,u.useState)(0),[Mt,Tt]=(0,u.useState)(0),[xt,Nt]=(0,u.useState)(0),[kt,wt]=(0,u.useState)(0),[Et,It]=(0,u.useState)(0),[Bt,Dt]=(0,u.useState)(0),[Gt,Ht]=(0,u.useState)(0),[Lt,Rt]=(0,u.useState)(0),[Pt,Vt]=(0,u.useState)(0),[Yt,$t]=(0,u.useState)(0),[zt,Kt]=(0,u.useState)(0),[Wt,Ut]=(0,u.useState)(0),[Zt,qt]=(0,u.useState)(0),[Qt,Xt]=(0,u.useState)(0),[ta,aa]=(0,u.useState)(0),[ea,oa]=(0,u.useState)(0),[na,ua]=(0,u.useState)(0),[sa,da]=(0,u.useState)(0),[ra,la]=(0,u.useState)(0),[ca,ma]=(0,u.useState)(0),[ha,ia]=(0,u.useState)(0),[Ca,pa]=(0,u.useState)(0),[ya,ba]=(0,u.useState)(0),[Sa,fa]=(0,u.useState)(0),[ga,_a]=(0,u.useState)(0),[va,ja]=(0,u.useState)(0),[Aa,Ja]=(0,u.useState)(0),[Oa,Fa]=(0,u.useState)(0),[Ma,Ta]=(0,u.useState)(0),[xa,Na]=(0,u.useState)(0),[ka,wa]=(0,u.useState)(0),[Ea,Ia]=(0,u.useState)(0),[Ba,Da]=(0,u.useState)(0),[Ga,Ha]=(0,u.useState)(0),[La,Ra]=(0,u.useState)(0),[Pa,Va]=(0,u.useState)(0),[Ya,$a]=(0,u.useState)(0),[za,Ka]=(0,u.useState)(0),[Wa,Ua]=(0,u.useState)(0),[Za,qa]=(0,u.useState)(0),[Qa,Xa]=(0,u.useState)(0),[te,ae]=(0,u.useState)(0),[ee,oe]=(0,u.useState)(0),[ne,ue]=(0,u.useState)(0),[se,de]=(0,u.useState)(0),[re,le]=(0,u.useState)(0),[ce,me]=(0,u.useState)(0),[he,ie]=(0,u.useState)(0),Ce=async()=>{console.log("inside filterOptions",a),console.log("inside defaultOptions",e);const t=JSON.parse(localStorage.getItem("user"));let o=a.location,n=a.lob,u=a.businessType,s=a.agent,d=a.dateRange,r=e.startdate,l=e.enddate,c=t.assign_staff,m=e.userType;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((t=>t.value)):[],n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((t=>t.value)):[],u=null!=u&&void 0!=u&&Array.isArray(u)&&0!==u.length?u.map((t=>t.value)):[],s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((t=>t.value)):e.defaultagent.map((t=>t.value));const h=localStorage.getItem("token"),i=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",i);const C={method:"POST",body:JSON.stringify({location:o,lob:n,business_type:u,newagent:s,dateRange:d,startdate:r,enddate:l,assign_staff:c,userType:m}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"6462250eb201a6f07b2dff3a"==i&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getAllGraphCount",C).then((t=>t.json())).then((t=>{console.log("data",t.data.sepmotorCount),w(t.data.janmotorCount),I(t.data.febmotorCount),D(t.data.marmotorCount),H(t.data.aprmotorCount),R(t.data.maymotorCount),V(t.data.junmotorCount),$(t.data.julmotorCount),K(t.data.augmotorCount),U(t.data.sepmotorCount),q(t.data.octmotorCount),X(t.data.novmotorCount),at(t.data.decmotorCount),ot(t.data.jantravelCount),ut(t.data.febtravelCount),dt(t.data.martravelCount),lt(t.data.aprtravelCount),mt(t.data.maytravelCount),it(t.data.juntravelCount),pt(t.data.jultravelCount),bt(t.data.augtravelCount),ft(t.data.septravelCount),_t(t.data.octtravelCount),jt(t.data.novtravelCount),Jt(t.data.dectravelCount),Ft(t.data.janhomeCount),Tt(t.data.febhomeCount),Nt(t.data.marhomeCount),wt(t.data.aprhomeCount),It(t.data.mayhomeCount),Dt(t.data.junhomeCount),Ht(t.data.julhomeCount),Rt(t.data.aughomeCount),Vt(t.data.sephomeCount),$t(t.data.octhomeCount),Kt(t.data.novhomeCount),Ut(t.data.dechomeCount),qt(t.data.janmedicalCount),Xt(t.data.febmedicalCount),aa(t.data.marmedicalCount),oa(t.data.aprmedicalCount),ua(t.data.maymedicalCount),da(t.data.junmedicalCount),la(t.data.julmedicalCount),ma(t.data.augmedicalCount),ia(t.data.sepmedicalCount),pa(t.data.octmedicalCount),ba(t.data.novmedicalCount),fa(t.data.decmedicalCount),_a(t.data.janyachtCount),ja(t.data.febyachtCount),Ja(t.data.maryachtCount),Fa(t.data.apryachtCount),Ta(t.data.mayyachtCount),Na(t.data.junyachtCount),wa(t.data.julyachtCount),Ia(t.data.augyachtCount),Da(t.data.sepyachtCount),Ha(t.data.octyachtCount),Ra(t.data.novyachtCount),Va(t.data.decyachtCount),$a(t.data.janotherCount),Ka(t.data.febotherCount),Ua(t.data.marotherCount),qa(t.data.aprotherCount),Xa(t.data.mayotherCount),ae(t.data.junotherCount),oe(t.data.julotherCount),ue(t.data.augotherCount),de(t.data.sepotherCount),le(t.data.octotherCount),me(t.data.novotherCount),ie(t.data.decotherCount)})).catch((t=>{console.log(t)})),"64622470b201a6f07b2dff22"==i&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getAllGraphCount?dashboardType=documentsChaserDashbord",C).then((t=>t.json())).then((t=>{console.log("data",t.data.sepmotorCount),w(t.data.janmotorCount),I(t.data.febmotorCount),D(t.data.marmotorCount),H(t.data.aprmotorCount),R(t.data.maymotorCount),V(t.data.junmotorCount),$(t.data.julmotorCount),K(t.data.augmotorCount),U(t.data.sepmotorCount),q(t.data.octmotorCount),X(t.data.novmotorCount),at(t.data.decmotorCount),ot(t.data.jantravelCount),ut(t.data.febtravelCount),dt(t.data.martravelCount),lt(t.data.aprtravelCount),mt(t.data.maytravelCount),it(t.data.juntravelCount),pt(t.data.jultravelCount),bt(t.data.augtravelCount),ft(t.data.septravelCount),_t(t.data.octtravelCount),jt(t.data.novtravelCount),Jt(t.data.dectravelCount),Ft(t.data.janhomeCount),Tt(t.data.febhomeCount),Nt(t.data.marhomeCount),wt(t.data.aprhomeCount),It(t.data.mayhomeCount),Dt(t.data.junhomeCount),Ht(t.data.julhomeCount),Rt(t.data.aughomeCount),Vt(t.data.sephomeCount),$t(t.data.octhomeCount),Kt(t.data.novhomeCount),Ut(t.data.dechomeCount),qt(t.data.janmedicalCount),Xt(t.data.febmedicalCount),aa(t.data.marmedicalCount),oa(t.data.aprmedicalCount),ua(t.data.maymedicalCount),da(t.data.junmedicalCount),la(t.data.julmedicalCount),ma(t.data.augmedicalCount),ia(t.data.sepmedicalCount),pa(t.data.octmedicalCount),ba(t.data.novmedicalCount),fa(t.data.decmedicalCount),_a(t.data.janyachtCount),ja(t.data.febyachtCount),Ja(t.data.maryachtCount),Fa(t.data.apryachtCount),Ta(t.data.mayyachtCount),Na(t.data.junyachtCount),wa(t.data.julyachtCount),Ia(t.data.augyachtCount),Da(t.data.sepyachtCount),Ha(t.data.octyachtCount),Ra(t.data.novyachtCount),Va(t.data.decyachtCount),$a(t.data.janotherCount),Ka(t.data.febotherCount),Ua(t.data.marotherCount),qa(t.data.aprotherCount),Xa(t.data.mayotherCount),ae(t.data.junotherCount),oe(t.data.julotherCount),ue(t.data.augotherCount),de(t.data.sepotherCount),le(t.data.octotherCount),me(t.data.novotherCount),ie(t.data.decotherCount)})).catch((t=>{console.log(t)}))},pe=[{line_of_business_name:"Motor",monthlydata:[{month:"January",count:k},{month:"February",count:E},{month:"March",count:B},{month:"April",count:G},{month:"May",count:L},{month:"June",count:P},{month:"July",count:Y},{month:"August",count:z},{month:"September",count:W},{month:"October",count:Z},{month:"November",count:Q},{month:"December",count:tt}]},{line_of_business_name:"Travel",monthlydata:[{month:"January",count:et},{month:"February",count:nt},{month:"March",count:st},{month:"April",count:rt},{month:"May",count:ct},{month:"June",count:ht},{month:"July",count:Ct},{month:"August",count:yt},{month:"September",count:St},{month:"October",count:gt},{month:"November",count:vt},{month:"December",count:At}]},{line_of_business_name:"Home",monthlydata:[{month:"January",count:Ot},{month:"February",count:Mt},{month:"March",count:xt},{month:"April",count:kt},{month:"May",count:Et},{month:"June",count:Bt},{month:"July",count:Gt},{month:"August",count:Lt},{month:"September",count:Pt},{month:"October",count:Yt},{month:"November",count:zt},{month:"December",count:Wt}]},{line_of_business_name:"Medical",monthlydata:[{month:"January",count:Zt},{month:"February",count:Qt},{month:"March",count:ta},{month:"April",count:ea},{month:"May",count:na},{month:"June",count:sa},{month:"July",count:ra},{month:"August",count:ca},{month:"September",count:ha},{month:"October",count:Ca},{month:"November",count:ya},{month:"December",count:Sa}]},{line_of_business_name:"Yacht",monthlydata:[{month:"January",count:ga},{month:"February",count:va},{month:"March",count:Aa},{month:"April",count:Oa},{month:"May",count:Ma},{month:"June",count:xa},{month:"July",count:ka},{month:"August",count:Ea},{month:"September",count:Ba},{month:"October",count:Ga},{month:"November",count:La},{month:"December",count:Pa}]},{line_of_business_name:"Other Insurance",monthlydata:[{month:"January",count:Ya},{month:"February",count:za},{month:"March",count:Wa},{month:"April",count:Za},{month:"May",count:Qa},{month:"June",count:te},{month:"July",count:ee},{month:"August",count:ne},{month:"September",count:se},{month:"October",count:re},{month:"November",count:ce},{month:"December",count:he}]}];let ye={labels:[],datasets:[]};return ye={labels:Array.from(new Set(pe.flatMap((t=>t.monthlydata.map((t=>t.month)))))),datasets:pe.map((t=>({label:t.line_of_business_name,backgroundColor:"Motor"===t.line_of_business_name?"#FF6384":"Travel"===t.line_of_business_name?"#007500":"Home"===t.line_of_business_name?"#FFCE56":"Medical"===t.line_of_business_name?"#36A2EB":"Yacht"===t.line_of_business_name?"#5742f5":"#da42f5",data:t.monthlydata.map((t=>t.count))})))},(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(d.A,{children:(0,l.jsxs)(d.A.Item,{eventKey:"1",children:[(0,l.jsx)(d.A.Header,{children:(0,l.jsx)("div",{className:"card-header new_leads",children:(0,l.jsx)("strong",{children:"Graphical View "})})}),(0,l.jsx)(d.A.Body,{style:{padding:"2px"},children:(0,l.jsx)(o.E$,{className:"mb-4",children:(0,l.jsxs)(o.sK,{children:[(0,l.jsx)(o.UF,{lg:8,children:(0,l.jsxs)(o.E$,{className:"mb-4",children:[(0,l.jsx)(o.V0,{children:"Bar Chart"}),(0,l.jsx)(o.W6,{children:(0,l.jsx)(n.BB,{data:ye})})]})}),(0,l.jsx)(r.A,{className:"",lg:4,children:(0,l.jsxs)(o.E$,{className:"mb-4",children:[(0,l.jsx)(o.V0,{children:"Total Leads"}),(0,l.jsx)(o.W6,{children:(0,l.jsx)(n.kp,{data:{labels:["Motor","Travel","Home","Medical","Yacht","Other LOB"],datasets:[{data:[f,_,j,F,J,T],backgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"],hoverBackgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"]}]}})})]})})]})})})]})})})}}}]);
//# sourceMappingURL=3882.da5ac348.chunk.js.map