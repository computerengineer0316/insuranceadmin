"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3219],{73219:(e,o,l)=>{l.r(o),l.d(o,{default:()=>d});var a=l(65043),n=l(73216),s=l(73023),i=l.n(s),r=l(54168),t=l(70579);const d=()=>{let e={plan_type_id:"Plan Type",region_id:"Region",cover_type_id:"Cover Type",no_of_days:"Number Of Days",travel_premium:"Travel Premium",price_name:"Price Name",age:"Age",age_topup:"Age topup",no_of_child:"Number Of Children",no_of_children_topup:"Children Topup",no_of_spouse:"Number Of Spouse",no_of_spouse_topup:"Spouse Topup"};const o=(0,n.Zp)(),[l,s]=(0,a.useState)(""),[d,c]=(0,a.useState)([]),[p,m]=(0,a.useState)([]),[u,_]=(0,a.useState)([]),[h,f]=(0,a.useState)([{plan_type_id:"",region_id:"",cover_type_id:"",price_name:"",no_of_days:"",travel_premium:"",age:"",age_topup:"",no_of_child:"",no_of_children_topup:"",no_of_spouse:"",no_of_spouse_topup:""}]);(0,a.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)o("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];s(e),g(),j(),y()}}),[]);const v=(e,o)=>{const{name:l,value:a}=o.target,n=[...h];n[e][l]=a,f(n)},x=(e,o,l)=>{const a=[...h];a[e][l]=o,f(a)},g=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/travelplantype",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{c(e.data),console.log(e.data)}))},j=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/travelregion",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const o=e.data.map(((e,o)=>({label:e.travel_region,value:e._id})));m(o)}))},y=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/travelcovertype",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{_(e.data)}))};return(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-md-12",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsx)("h4",{className:"card-title",children:"Add Plan Price"})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsx)("a",{href:`/ViewPlanPrice?id=${l}`,className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("button",{className:"btn btn-outline-success my-1",onClick:()=>{const e=h[h.length-1],o={plan_type_id:null===e||void 0===e?void 0:e.plan_type_id,region_id:null===e||void 0===e?void 0:e.region_id,cover_type_id:null===e||void 0===e?void 0:e.cover_type_id,no_of_days:null===e||void 0===e?void 0:e.no_of_days,travel_premium:null===e||void 0===e?void 0:e.travel_premium,price_name:null===e||void 0===e?void 0:e.price_name,age:null===e||void 0===e?void 0:e.age,age_topup:null===e||void 0===e?void 0:e.age_topup,no_of_child:null===e||void 0===e?void 0:e.no_of_child,no_of_children_topup:null===e||void 0===e?void 0:e.no_of_children_topup,no_of_spouse:null===e||void 0===e?void 0:e.no_of_spouse,no_of_spouse_topup:null===e||void 0===e?void 0:e.no_of_spouse_topup};f([...h,o])},children:"+"}),null===h||void 0===h?void 0:h.map(((e,o)=>(0,t.jsxs)("div",{className:"row mb-3",children:[(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Plan Type"}),(0,t.jsxs)("select",{className:"form-control",required:!0,onChange:e=>v(o,e),defaultValue:h[o].plan_type_id,name:"plan_type_id",children:[(0,t.jsx)("option",{value:"",hidden:!0,children:"Select Plan Type"}),d.map(((e,o)=>(0,t.jsx)("option",{value:e._id,children:e.travel_plan_type},o)))]})]})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Region"}),(0,t.jsx)(r.default,{options:p,selectedValues:h[o].region_id,onSelect:e=>x(o,e,"region_id"),onRemove:e=>x(o,e,"region_id"),displayValue:"label",placeholder:"Select Region",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,showArrow:!0,style:{chips:{background:"#007bff"}}})]})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Cover Type"}),(0,t.jsxs)("select",{name:"cover_type_id",onChange:e=>v(o,e),defaultValue:h[o].cover_type_id,className:"form-control",required:!0,children:[(0,t.jsx)("option",{value:"",hidden:!0,children:"Select Cover Type"}),u.map(((e,o)=>(0,t.jsx)("option",{value:e._id,children:e.travel_cover_type?e.travel_cover_type:""},o)))]})]})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Price Name"}),(0,t.jsx)("input",{onChange:e=>v(o,e),type:"text",name:"price_name",className:"form-control",defaultValue:h[o].price_name,placeholder:"Enter Price Name",required:!0})]})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Number Of Days"}),(0,t.jsx)("input",{onChange:e=>v(o,e),defaultValue:h[o].no_of_days,type:"text",name:"no_of_days",className:"form-control",placeholder:"Enter Number Of Days",required:!0})]})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Travel Premium"}),(0,t.jsx)("input",{onChange:e=>v(o,e),defaultValue:h[o].travel_premium,type:"text",name:"travel_premium",className:"form-control",placeholder:"Travel Premium",required:!0})]})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Age"}),(0,t.jsx)("input",{onChange:e=>v(o,e),defaultValue:h[o].age,type:"text",name:"age",className:"form-control",placeholder:"Enter Age",required:!0})]})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Fixed/Percentage/Reffered"}),(0,t.jsx)("input",{onChange:e=>v(o,e),defaultValue:h[o].age_topup,type:"text",name:"age_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered",required:!0})]})}),"641d700e2e8acf350eaab204"==(null===e||void 0===e?void 0:e.plan_type_id)?(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Number Of Child"}),(0,t.jsx)("input",{onChange:e=>v(o,e),defaultValue:h[o].no_of_child,type:"text",name:"no_of_child",className:"form-control",placeholder:"Enter Number Of Child",required:!0})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Fixed/Percentage/Reffered"}),(0,t.jsx)("input",{onChange:e=>v(o,e),defaultValue:h[o].no_of_children_topup,type:"text",name:"no_of_children_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered",required:!0})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Number Of Spouse"}),(0,t.jsx)("input",{onChange:e=>v(o,e),defaultValue:h[o].no_of_spouse,type:"text",name:"no_of_spouse",className:"form-control",placeholder:"Enter Number Of Spouse",required:!0})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"form-group mb-3",children:[(0,t.jsx)("label",{children:"Fixed/Percentage/Reffered"}),(0,t.jsx)("input",{onChange:e=>v(o,e),defaultValue:h[o].no_of_spouse_topup,type:"text",name:"no_of_spouse_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered",required:!0})]})})]}):"",(0,t.jsx)("div",{className:"col-md-12 my-2",children:(0,t.jsx)("div",{className:"btn btn-outline-danger",style:{float:"right"},onClick:()=>(e=>{const o=[...h];o.splice(e,1),f(o)})(o),children:"x"})}),(0,t.jsx)("hr",{style:{borderTop:"2px solid #111"}})]},o))),(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-md-12",children:(0,t.jsx)("button",{onClick:()=>(()=>{console.log("rowsData>>",h);const a=[];if(h.forEach(((e,o)=>{const l=Object.keys(e).filter((o=>{const l=e[o];return"string"===typeof l&&""===l.trim()&&("age_topup"===o?""!==e.age:"no_of_child"!==o&&"no_of_spouse"!==o&&"no_of_children_topup"!==o&&"no_of_spouse_topup"!==o||"641d700e2e8acf350eaab204"==e.plan_type_id)}));l.length>0&&a.push({index:o,emptyKeys:l})})),a.length>0)a.forEach((o=>{const l=o.emptyKeys[0];i()({title:"warning!",text:`${e[l]} is required`,type:"warning",icon:"warning"}).then((function(){return!1}))}));else{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)};fetch(`https://insuranceapi-3o5t.onrender.com/api/addtravelplanprice?id=${l}`,e).then((e=>e.json())).then((e=>{200===e.status?(i()({title:"Success!",text:e.message,type:"success",icon:"success",button:!1}),setTimeout((()=>{i().close(),o("/ViewPlanPrice?id="+l)}),1e3)):(i()({title:"Error!",text:e.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{i().close(),o("/ViewPlanPrice?id="+l)}),1e3))}))}})(),className:"btn btn-primary mt-2",style:{float:"right"},children:"Submit"})})})]})]})})})})}}}]);
//# sourceMappingURL=3219.741355c2.chunk.js.map