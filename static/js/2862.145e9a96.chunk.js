"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2862],{32862:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var t=s(65043),n=s(92157),o=s.n(n),i=s(73216),l=s(1177),d=(s(86178),s(73023),s(70579));const r=function(e){let{filterOptions:a,defaultOptions:s}=e;const n=(0,i.Zp)(),[r,c]=(0,t.useState)([]),[p,h]=(0,t.useState)([]),[u,f]=(0,t.useState)([]),[_,m]=(0,t.useState)([]),[g]=(0,t.useState)(5),[x,j]=(0,t.useState)(0),[y,b]=(0,t.useState)(1),[v,N]=(0,t.useState)(!1),[w,k]=(0,t.useState)([]),[S,A]=(0,t.useState)(""),[C,L]=(0,t.useState)(""),[T,P]=(0,t.useState)(0);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?n("/login"):M(y,g)}),[a]);const M=async(e,t)=>{const n=JSON.parse(localStorage.getItem("user"));let o=a.location,i=a.lob,l=a.businessType,d=a.agent,r=a.dateRange,p=s.startdate,h=s.enddate,u=n.assign_staff,f=s.userType,_=s.selectedSupervisor;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):s.defaultlocation.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):s.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):s.defaultbusinessType.map((e=>e.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((e=>e.value)):s.defaultagent.map((e=>e.value));const m=localStorage.getItem("token"),g=JSON.parse(localStorage.getItem("user")).usertype,x={method:"POST",body:JSON.stringify({page:e,limit:t,location:o,lob:i,business_type:l,newagent:d,dateRange:r,startdate:p,enddate:h,assign_staff:u,userType:f,selectedSupervisor:_}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+m}};"6462250eb201a6f07b2dff3a"!=g&&"646224eab201a6f07b2dff36"!=g&&"646224deb201a6f07b2dff32"!=g&&"64622526b201a6f07b2dff3e"!=g||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?assignType=closedBusiness&dashboardType=supervisorDashboard",x).then((e=>e.json())).then((e=>{const a=e.total;P(a);const s=a/t,n=Math.ceil(s);j(n);const o=e.data;c(o)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==g&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?assignType=closedBusiness&dashboardType=supervisorDashboard",x).then((e=>e.json())).then((e=>{const a=e.total;P(a);const s=a/t,n=Math.ceil(s);j(n);const o=e.data;c(o)})).catch((e=>{console.log(e)}))};console.log(r);const I=(y-1)*g;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(l.A,{children:(0,d.jsxs)(l.A.Item,{eventKey:"1",children:[(0,d.jsx)(l.A.Header,{children:(0,d.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,d.jsx)("strong",{children:"Closed Business"}),T>0?(0,d.jsx)("div",{className:"dashboardNotify",children:(0,d.jsx)("h6",{children:T})}):""]})}),(0,d.jsxs)(l.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,d.jsxs)("table",{className:"table table-bordered",children:[(0,d.jsx)("thead",{className:"thead-dark",children:(0,d.jsxs)("tr",{className:"table-info",children:[(0,d.jsx)("th",{scope:"col",children:"Sr#"}),(0,d.jsx)("th",{scope:"col",children:"Name"}),(0,d.jsx)("th",{scope:"col",children:"Phone No."}),(0,d.jsx)("th",{scope:"col",children:"Email-ID"}),(0,d.jsx)("th",{scope:"col",children:"Nationality"}),(0,d.jsx)("th",{scope:"col",children:"Assigned Agent"}),(0,d.jsx)("th",{scope:"col",children:"Assigned Agent Type"}),(0,d.jsx)("th",{scope:"col",children:"Policy Type"}),(0,d.jsx)("th",{scope:"col",children:"Reasons"}),(0,d.jsx)("th",{scope:"col",children:"LMP Pol.No."}),(0,d.jsx)("th",{scope:"col",children:"Policy No."}),(0,d.jsx)("th",{scope:"col",children:"Premium"}),(0,d.jsx)("th",{scope:"col",children:"Action"})]})}),(0,d.jsx)("tbody",{children:r.length>0?r.map(((e,a)=>{var s,t,n,o,i,l;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:I+a+1}),(0,d.jsx)("td",{children:e.name}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,d.jsx)("td",{children:e.nationality}),(0,d.jsx)("td",{children:""!=e.assigned_agent_info?""!=e.forward_to_info?""!=e.dc_forward_to_info?(null===(s=e.dc_forward_to_info[0])||void 0===s?void 0:s.name)||"-":(null===(t=e.forward_to_info[0])||void 0===t?void 0:t.name)||"-":(null===(n=e.assigned_agent_info[0])||void 0===n?void 0:n.name)||"-":"-"}),(0,d.jsx)("td",{children:""!=e.assigned_type_info?""!=e.forward_to_type_info?""!=e.dcforward_to_type_info?(null===(o=e.dcforward_to_type_info[0])||void 0===o?void 0:o.usertype)||"-":(null===(i=e.forward_to_type_info[0])||void 0===i?void 0:i.usertype)||"-":(null===(l=e.assigned_agent_info[0])||void 0===l?void 0:l.usertype)||"-":"-"}),(0,d.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,d.jsx)("td",{children:"Reason"}),(0,d.jsx)("td",{children:e.lead_id}),(0,d.jsx)("td",{children:"#5678"}),(0,d.jsx)("td",{children:e.final_price?"AED "+e.final_price:e.finalPriceRefferd}),(0,d.jsx)("td",{className:"buttons_icons",children:(0,d.jsx)("button",{className:"btn btn-primary btn-sm ",onClick:()=>{var a,s,t;return s=e._id,"Motor"===(t=null===(a=e.policy_type[0])||void 0===a?void 0:a.line_of_business_name)&&window.open(`/MotorLeaddetails?id=${s}`,"_blank"),"Travel"===t&&window.open(`/MotorLeaddetails?id=${s}`,"_blank"),"Medical"===t&&window.open(`/MotorLeaddetails?id=${s}`,"_blank"),"Home"===t&&window.open(`/MotorLeaddetails?id=${s}`,"_blank"),void("Yacht"===t&&window.open(`/MotorLeaddetails?id=${s}`,"_blank"))},children:(0,d.jsx)("i",{className:"fa fa-eye"})})})]},a)})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"12",className:"text-center",children:(0,d.jsx)("strong",{children:"No Records Found"})})})})]}),(0,d.jsx)("section",{children:(0,d.jsx)(o(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:x,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;b(a+1),M(a+1,g,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})})})}}}]);
//# sourceMappingURL=2862.145e9a96.chunk.js.map