"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7248],{28949:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(65043),n=s(73216),i=s(92157),l=s.n(i),o=s(73023),c=s.n(o);s.p;var r=s(93946),d=s(70579);const m=()=>{const e=(0,n.Zp)(),[t,s]=(0,a.useState)([]),[i]=(0,a.useState)(10),[o,m]=(0,a.useState)(0),[h,u]=(0,a.useState)(1),[p,x]=(0,a.useState)(""),[g,j]=(0,a.useState)(!1),[v,b]=(0,a.useState)(""),[y,N]=(0,a.useState)([]);(0,a.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{var s;const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];x(e),console.log(e,">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>mediclal plan id"),_(h,i,e);const t=JSON.parse(localStorage.getItem("user")),a=(null===t||void 0===t||null===(s=t.medical_permission)||void 0===s?void 0:s[0])||{};N(a)}}),[]);const _=(e,t,a)=>{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e,perPage:t,medical_plan_id:a})};fetch("https://insuranceapi-3o5t.onrender.com/api/get_rates_based_on_age",n).then((e=>e.json())).then((e=>{var a,n;const i=null===(a=e.data[0])||void 0===a||null===(n=a.count[0])||void 0===n?void 0:n.total;console.log(e,">>>>>>>>>>>>>>>>data");const l=i/t,o=Math.ceil(l);m(o),s(e.data[0].data),console.log(e.data,">>>>>>>>>>data.data")}))},f=(e,t)=>{try{console.log("staus,,,,,,,,,,,,,,,,,,,,",{status:t,id:e});const s={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:+t})};fetch(`https://insuranceapi-3o5t.onrender.com/api/update_medicalplan_rates_status/${e}`,s).then((e=>e.json())).then((e=>{200===e.status?(c()({title:"Success!",text:e.message,type:"success",icon:"success",button:!1}),_(h,i,p),setTimeout((()=>{c().close()}),2e3)):(c()({title:"Error!",text:e.message,type:"error",icon:"error",button:!1}),_(h,i,p),setTimeout((()=>{c().close()}),2e3))}))}catch(s){}},C=(h-1)*i;return(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsx)("h4",{className:"card-title",children:"Add Medical Rates Based On Age"})}),(0,d.jsxs)("div",{className:"col-md-8",children:[(0,d.jsx)("a",{href:`/AddMedicalRatesBasedOnAge?id=${p}`,className:"btn btn-primary",style:{float:"right"},children:"Add Plan Rates Based On Age"}),(0,d.jsx)("a",{href:"/medicalplan",className:"btn btn-primary",style:{float:"right",marginRight:"4px"},children:"Back"})]})]})}),(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsxs)("table",{className:"table table-bordered",children:[(0,d.jsx)("thead",{className:"thead-dark",children:(0,d.jsxs)("tr",{className:"table-info",children:[(0,d.jsx)("th",{children:"Sr No."}),(0,d.jsx)("th",{children:"name"}),(0,d.jsx)("th",{children:"TPA"}),(0,d.jsx)("th",{children:"Network"}),(0,d.jsx)("th",{children:"Location"}),(0,d.jsx)("th",{children:"Action"})]})}),(0,d.jsx)("tbody",{children:t.map(((e,t)=>{var s,a,n,l;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:C+t+1}),(0,d.jsx)("td",{children:e.name}),(0,d.jsx)("td",{children:null===(s=e.TPAs[0])||void 0===s?void 0:s.name}),(0,d.jsx)("td",{children:null===(a=e.networks[0])||void 0===a?void 0:a.name}),(0,d.jsx)("td",{children:null===(n=e.locationData)||void 0===n?void 0:n.map((e=>e.location_name?e.location_name:"")).join(",")}),(0,d.jsxs)("td",{children:[(0,d.jsx)("a",{href:`/EditMedicalRatesBasedOnAge?id=${e._id}&planId=${p}`,className:"btn btn-success mx-1",children:"Edit"}),(null===(l=y.plan_condition)||void 0===l?void 0:l.includes("delete"))&&(0,d.jsxs)(d.Fragment,{children:[1==e.status?(0,d.jsx)("button",{className:"btn btn-danger mx-1",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&f(e._id,0)},children:"Deactivate"}):(0,d.jsx)("button",{className:"btn btn-success mx-1",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&f(e._id,1)},children:"Activate"}),(0,d.jsx)("button",{className:"btn btn-warning mx-1",onClick:()=>{window.confirm("Are you sure you wish to delete this item?")&&(e=>{try{fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteMedicalMaster?id=${e}&type=rateCondition`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(c()({title:"Success!",text:e.message,type:"success",icon:"success",button:!1}),_(h,i,p),setTimeout((()=>{c().close()}),2e3)):(c()({title:"Error!",text:e.message,type:"error",icon:"error",button:!1}),_(h,i,p),setTimeout((()=>{c().close()}),2e3))}))}catch(t){console.log(t)}})(e._id)},children:"Delete"})]})]})]},t)}))})]}),(0,d.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:o,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;u(t+1),_(t+1,i,p)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})})}),(0,d.jsxs)(r.zS,{alignment:"center",visible:g,onClose:()=>j(!1),children:[(0,d.jsx)(r.E4,{onClose:()=>j(!1),children:(0,d.jsx)(r.lb,{children:"Upload Excel File"})}),(0,d.jsx)(r.Tc,{children:(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"file",className:"form-control",id:"DHA",defaultValue:"",required:!0,onChange:e=>b(e.target.files[0])})})}),(0,d.jsxs)(r.If,{children:[(0,d.jsx)(r.Q_,{color:"secondary",onClick:()=>j(!1),children:"Close"}),(0,d.jsx)(r.Q_,{color:"primary",onClick:async e=>{e.preventDefault();const t=new FormData;t.append("file",v);let s=await fetch("https://insuranceapi-3o5t.onrender.com/api/read_medical_plan_type_excel ",{method:"post",body:t});s=await s.json(),200===s.status?(j(!g),c()({text:s.message,type:"success",icon:"success",button:!1}),_(h,i,p),setTimeout((()=>{c().close()}),1e3)):(j(!g),c()({title:"Error!",text:s.message,type:"error",icon:"error",button:"ok"}),_(h,i,p),setTimeout((()=>{c().close()}),1e3))},href:"/Viewtraveltype",children:"Upload"})]})]})]})}}}]);
//# sourceMappingURL=7248.6a3926d6.chunk.js.map