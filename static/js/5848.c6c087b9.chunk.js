"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5848],{75848:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var n=t(54168),a=t(65043),l=t(84217),i=t(14282),o=t(92157),c=t.n(o),r=t(73023),d=t.n(r),h=t(70579);const u=()=>{var e;const[s]=(0,a.useState)(10),[t,o]=(0,a.useState)(0),[r,u]=(0,a.useState)(1),[m,p]=(0,a.useState)(!1),[j,x]=(0,a.useState)([]),[v,b]=(0,a.useState)([]),[g,f]=(0,a.useState)([]),[N,y]=(0,a.useState)(!1),[_,w]=(0,a.useState)({}),[C,S]=(0,a.useState)([]),[T,k]=(0,a.useState)([]),[A,D]=(0,a.useState)([]),[B]=(0,a.useState)([{name:"New",Value:"New"},{name:"Renewal",Value:"Renewal"}]),[L,E]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=localStorage.getItem("token");null==e||void 0==e||""==e?window.location="/login":(V(r,s),R(),P(),O())}),[]);const P=async()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getActiveGroupMedicalClaimType",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const s=e.data;console.log(s,"claim Type"),S(s)}))},R=async()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const s=e.data,t=[];for(let n=0;n<s.length;n++)t.push({label:s[n].location_name,value:s[n]._id});x(t)}))},O=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const s=e,t=s.length,n=[];for(let e=0;e<t;e++){const t={label:s[e].lob_name,value:s[e].lob_id};n.push(t)}k(n)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const s=e.data,t=s.length,n=[];for(let a=0;a<t;a++){const e={label:s[a].line_of_business_name,value:s[a]._id};n.push(e)}k(n)}))}},V=async(e,s)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getProducerDiscount?page=${e}&limit=${s}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{f(e.data),console.log(e.data,">>>> discount data")}))},q=(e,t)=>{const n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})};fetch(`https://insuranceapi-3o5t.onrender.com/api/updateProducerDiscount?id=${e}`,n).then((e=>e.json())).then((e=>{201==e.status?(d()("Success",e.message,"success"),V(r,s)):d()("Error",e.message,"error")}))};return(0,h.jsx)("div",{className:"container",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsxs)("div",{className:"card",children:[(0,h.jsx)("div",{className:"card-header",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md-4",children:(0,h.jsx)("h4",{children:"Producer Commission"})}),(0,h.jsx)("div",{className:"col-md-8",children:(0,h.jsx)("button",{className:"btn btn-primary",onClick:()=>p(!0),style:{float:"right"},children:"Add Commission"})})]})}),(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("div",{className:"table-responsive",children:[(0,h.jsxs)("table",{className:"table table-bordered",children:[(0,h.jsx)("thead",{className:"thead-dark",children:(0,h.jsxs)("tr",{className:"table-info",children:[(0,h.jsx)("th",{children:"Sr No."}),(0,h.jsx)("th",{children:"Location"}),(0,h.jsx)("th",{children:"Description"}),(0,h.jsx)("th",{children:"Rate"}),(0,h.jsx)("th",{children:"LOB"}),(0,h.jsx)("th",{children:"Action"})]})}),(0,h.jsx)("tbody",{children:null!==g&&void 0!==g&&g.length?null===g||void 0===g?void 0:g.map(((e,t)=>{var n,a;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:t+1}),(0,h.jsx)("td",{children:null===(n=e.location[0])||void 0===n?void 0:n.location_name}),(0,h.jsx)("td",{children:e.description}),(0,h.jsx)("td",{children:e.rate}),(0,h.jsx)("td",{children:null===(a=e.line_of_business)||void 0===a?void 0:a.map((e=>e.line_of_business_name)).join(", ")}),(0,h.jsxs)("td",{children:[(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("button",{className:"btn btn-info",onClick:()=>{return s=e._id,void fetch(`https://insuranceapi-3o5t.onrender.com/api/getProducerDiscountById?id=${s}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var s,t;const n=e.data;console.log(n,"edit data>>>>"),w(n[0]);const a=null===(s=n[0])||void 0===s||null===(t=s.line_of_business)||void 0===t?void 0:t.map((e=>({label:e.line_of_business_name,value:e._id})));b(a),y(!0)}));var s},children:"Edit"})}),"\xa0\xa0",1==e.status?(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&q(e._id,0)},children:"Deactivate"})}):(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&q(e._id,1)},children:"Activate"})}),"\xa0\xa0",(0,h.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,h.jsx)("button",{className:"btn btn-warning",onClick:()=>{var t;window.confirm("Are you sure you wish to delete this item?")&&(t=e._id,fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteMasterData?id=${t}&type=producerDiscount`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200==e.status?(d()("Success",e.message,"success"),V(r,s)):d()("Error",e.message,"error")})))},children:"Delete"})})]})]},t)})):(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:"5",children:"No Data Found"})})})]}),(0,h.jsx)(c(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:t,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;u(t+1),V(t+1,s)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})}),(0,h.jsxs)(l.A,{size:"lg",show:m,onHide:()=>p(!1),children:[(0,h.jsx)(l.A.Header,{closeButton:!0,children:(0,h.jsx)(l.A.Title,{children:"Add Producer Commission"})}),(0,h.jsx)(l.A.Body,{children:(0,h.jsx)("div",{className:"container",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("form",{method:"POST",onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),n=t.get("description"),a=t.get("location"),l=t.get("pd_rate"),i=t.get("business_type"),o=t.get("effective_date");if(l.split(",").length!=A.length)return d()({text:"Number of Rates and selected LOBs must be equal",icon:"warning"}),!1;const c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:n,location:a,lob:A,rate:l,discount_type:i,effective_date:o})};fetch("https://insuranceapi-3o5t.onrender.com/api/addProducerDiscount",c).then((e=>e.json())).then((e=>{201==e.status?(p(!1),d()({type:"Success",message:e.message,icon:"success",button:!1}),setTimeout((()=>{V(r,s),d().close()}),1e3)):(p(!1),d()({type:"Error",message:e.message,icon:"error",button:!1}),setTimeout((()=>{V(r,s),d().close()}),1e3))}))},children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-lg-4",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Location"})}),(0,h.jsx)("br",{}),(0,h.jsxs)("select",{className:"form-control",name:"location",children:[(0,h.jsx)("option",{value:"",children:"Select Location"}),null===j||void 0===j?void 0:j.map(((e,s)=>(0,h.jsx)("option",{value:e.value,children:e.label},s)))]})]}),(0,h.jsxs)("div",{className:"col-lg-4",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Description"})}),(0,h.jsx)("br",{}),(0,h.jsx)("input",{type:"text",className:"form-control",placeholder:"Add Description",name:"description"})]}),(0,h.jsxs)("div",{className:"col-lg-4",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Business Type"})}),(0,h.jsx)("br",{}),(0,h.jsxs)("select",{className:"form-control",name:"business_type",children:[(0,h.jsx)("option",{value:"",children:"Select Business Type"}),(0,h.jsx)("option",{value:"New",children:"New"}),(0,h.jsx)("option",{value:"Renewal",children:"Renewal"})]})]})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-lg-4",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Line Of Business"})}),(0,h.jsx)("br",{}),(0,h.jsx)(n.default,{options:T,displayValue:"label",onSelect:D,onRemove:D,placeholder:"Select line of business",showArrow:!0,showCheckbox:!0,required:!0})]}),(0,h.jsx)("div",{className:"col-md-4",children:(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Rate(%)"})}),(0,h.jsx)("br",{}),(0,h.jsx)("input",{type:"text",className:"form-control",name:"pd_rate",placeholder:"Rate",autoComplete:"off",required:!0})]})}),(0,h.jsx)("div",{className:"col-md-4",children:(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Effective Date"})}),(0,h.jsx)("input",{type:"date",className:"form-control",name:"effective_date"})]})})]}),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,h.jsx)(l.A.Footer,{children:(0,h.jsx)(i.A,{variant:"secondary",onClick:()=>p(!1),children:"Close"})})]}),(0,h.jsxs)(l.A,{size:"lg",show:N,onHide:()=>y(!1),children:[(0,h.jsx)(l.A.Header,{closeButton:!0,children:(0,h.jsx)(l.A.Title,{children:"Edit Producer Commission"})}),(0,h.jsx)(l.A.Body,{children:(0,h.jsx)("div",{className:"container",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("form",{method:"POST",onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target),n=t.get("description"),a=t.get("location"),l=t.get("pd_rate"),i=t.get("discount_type"),o=t.get("effective_date");if(l.split(",").length!=v.length)return d()({text:"Number of Rates and selected LOBs must be equal",icon:"warning"}),!1;const c={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:n,location:a,rate:l,lob:v,discount_type:i,effective_date:o})};fetch(`https://insuranceapi-3o5t.onrender.com/api/updateProducerDiscount?id=${null===_||void 0===_?void 0:_._id}`,c).then((e=>e.json())).then((e=>{201==e.status?(y(!1),d()({type:"Success",message:e.message,icon:"success",button:!1}),setTimeout((()=>{V(r,s),d().close()}),1e3)):(y(!1),d()({type:"Error",message:e.message,icon:"error",button:!1}),setTimeout((()=>{V(r,s),d().close()}),1e3))}))},children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-lg-4",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Location"})}),(0,h.jsx)("br",{}),(0,h.jsxs)("select",{className:"form-control",defaultValue:null===_||void 0===_?void 0:_.location,name:"location",children:[(0,h.jsx)("option",{value:"",children:"Select Location"}),null===j||void 0===j?void 0:j.map(((e,s)=>(0,h.jsx)("option",{value:e.value,children:e.label},s)))]})]}),(0,h.jsxs)("div",{className:"col-lg-4",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Description"})}),(0,h.jsx)("br",{}),(0,h.jsx)("input",{type:"text",className:"form-control",name:"description",defaultValue:null===_||void 0===_?void 0:_.description})]}),(0,h.jsxs)("div",{className:"col-lg-4",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Business Type"})}),(0,h.jsx)("br",{}),(0,h.jsxs)("select",{className:"form-control",defaultValue:null===_||void 0===_?void 0:_.discount_type,name:"discount_type",children:[(0,h.jsx)("option",{value:"",children:"Select Business Type"}),(0,h.jsx)("option",{value:"New",children:"New"}),(0,h.jsx)("option",{value:"Renewal",children:"Renewal"})]})]})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-lg-4",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Line Of Business"})}),(0,h.jsx)("br",{}),(0,h.jsx)(n.default,{options:T,displayValue:"label",selectedValues:v,onSelect:b,onRemove:b,placeholder:"Select line of business",showArrow:!0,showCheckbox:!0,required:!0})]}),(0,h.jsx)("div",{className:"col-md-4",children:(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Rate(%)"})}),(0,h.jsx)("br",{}),(0,h.jsx)("input",{type:"text",className:"form-control",name:"pd_rate",defaultValue:null===_||void 0===_?void 0:_.rate,placeholder:"Rate",autoComplete:"off",required:!0})]})}),(0,h.jsx)("div",{className:"col-md-4",children:(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:(0,h.jsx)("strong",{children:"Effective Date"})}),(0,h.jsx)("input",{defaultValue:null===_||void 0===_||null===(e=_.effective_date)||void 0===e?void 0:e.slice(0,10),type:"date",className:"form-control",name:"effective_date"})]})})]}),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,h.jsx)(l.A.Footer,{children:(0,h.jsx)(i.A,{variant:"secondary",onClick:()=>y(!1),children:"Close"})})]})]})})})})}}}]);
//# sourceMappingURL=5848.c6c087b9.chunk.js.map