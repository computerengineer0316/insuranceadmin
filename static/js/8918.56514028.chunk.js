"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8918],{18918:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});var s=o(65043),n=o(73216),a=o(73023),l=o.n(a),r=o(54168),c=o(70579);const i=()=>{const e=(0,n.Zp)(),[t,o]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[h,u]=(0,s.useState)({});(0,s.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):(p(),j())}),[]);const p=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getlistMakeMotor",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{o(e.data)}))},j=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;i(t)}))},x=(e,t)=>{const{name:o,value:s}=t.target;""===s.trim()?u((e=>({...e,[o]:"This is required"}))):u((e=>({...e,[o]:""})));const n=[...d];n[e][o]=s,m(n)},_=(e,t,o)=>{const s=[...d];s[e][o]=t,m(s)};return(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsx)("div",{className:"card",children:(0,c.jsxs)("div",{className:"card-header",children:[(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsx)("h4",{className:"card-title",children:"Add Model Motor"})})}),(0,c.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,c.jsxs)("table",{className:"table table-bordered",style:{width:"auto"},children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:(0,c.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={motor_model_name:"",make_motor:"",location:a};m([...d,e])},children:"+"})}),(0,c.jsx)("th",{children:"Model Motor Name"}),(0,c.jsx)("th",{children:"Make Motor"}),(0,c.jsx)("th",{children:"Make Motor Location"})]})}),(0,c.jsx)("tbody",{children:d.map(((e,o)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const t=[...d];t.splice(e,1),m(t)})(o),children:"x"})}),(0,c.jsx)("td",{children:(0,c.jsx)("input",{type:"text",onChange:e=>x(o,e),className:"form-control",name:"motor_model_name",placeholder:"Model Motor Name",autoComplete:"off",required:!0})}),(0,c.jsx)("td",{children:(0,c.jsxs)("select",{className:"form-control",onChange:e=>x(o,e),name:"make_motor",required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select Make Motor"}),t.map(((e,t)=>(0,c.jsx)("option",{value:e._id,children:e.make_motor_name},t)))]})}),(0,c.jsx)("td",{children:(0,c.jsx)(r.default,{style:{overflow:"visible"},options:a,selectedValues:a,displayValue:"location_name",onSelect:e=>_(o,e,"location"),onRemove:e=>_(o,e,"location"),placeholder:"Select Location",showCheckbox:!0,required:!0})})]},o)))})]})}),(0,c.jsx)("div",{className:"card-footer",children:(0,c.jsx)("button",{className:"btn btn-outline-success",onClick:t=>{t.preventDefault();try{if(d.some((e=>""===e.motor_model_name.trim()||!e.make_motor||0===e.location.length)))return void l()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"});const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)};fetch("https://insuranceapi-3o5t.onrender.com/api/addModelMotor",t).then((e=>e.json())).then((t=>{200==t.status?(l()({text:t.message,type:"success",icon:"success",button:!1}),e("/motor-model"),setTimeout((()=>{l().close()}),"1000")):(l()({title:"Error!",text:t.message,type:"error",icon:"error",button:!1}),e("/motor-model/AddModelMotor"),setTimeout((()=>{l().close()}),"1000"))}))}catch(o){console.log(o)}},children:"Submit"})})]})})})})})}}}]);
//# sourceMappingURL=8918.56514028.chunk.js.map