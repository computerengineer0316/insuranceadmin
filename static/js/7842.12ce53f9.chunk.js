"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7842],{87842:(e,a,s)=>{s.r(a),s.d(a,{default:()=>j});var l=s(65043),t=s(73216),n=s(92157),i=s.n(n),r=s(73023),o=s.n(r),c=s(1177),d=s(84217),h=s(14282),m=s(93946),p=(s(15287),s(13836)),u=s(87960),x=s(70579);const j=()=>{const e=(0,t.Zp)(),[a,s]=(0,l.useState)([]),[n]=(0,l.useState)(10),[r,j]=(0,l.useState)(0),[b,g]=(0,l.useState)(1),[v,N]=(0,l.useState)(!1),[y,f]=(0,l.useState)(""),[w,C]=(0,l.useState)(1),[_,S]=(0,l.useState)(!1),[A,k]=(0,l.useState)(""),[D,P]=(0,l.useState)([]),[T,M]=(0,l.useState)(""),[$,E]=(0,l.useState)(""),[L,B]=(0,l.useState)([]),[I,F]=(0,l.useState)(""),[G,R]=(0,l.useState)(""),[q,V]=(0,l.useState)([]),[z,O]=(0,l.useState)(!1),[H,U]=(0,l.useState)([]),[K,J]=(0,l.useState)([]),[Q,Z]=(0,l.useState)([]),[W,X]=(0,l.useState)([]),[Y,ee]=(0,l.useState)({}),[ae,se]=(0,l.useState)(""),[le,te]=(0,l.useState)(""),[ne,ie]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{var s;re(b,n);const e=JSON.parse(localStorage.getItem("user")),a=(null===e||void 0===e||null===(s=e.motor_permission)||void 0===s?void 0:s[0])||{};P(a),oe(),he()}}),[]),(0,l.useEffect)((()=>{re(b,n)}),[T,w,$,I,G]);const re=(e,a)=>{ie(!0);fetch(`https://insuranceapi-3o5t.onrender.com/api/getgroupmedicalplan?page=${e}&perPage=${a}&status=${w}&company_id=${$}&plan_name=${T}&startDate=${I}&endDate=${G}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const l=e.data;s(l),console.log(e,">>>>>>>>>>>>>>>>> data");const t=e.totalCount/a,n=Math.ceil(t);j(n),ie(!1)}))},oe=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getCompany",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{B(e.data)}))},ce=(e,a)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/updatestatusGroupMedicalPlan/${e}/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?o()({title:"Success!",text:e.message,icon:"success",button:!1}):o()({title:"Error!",text:e.message,icon:"error",button:!1}),re(b,n),setTimeout((()=>{o().close()}),1e3)}))},de=(b-1)*n,he=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getActiveMedicalGroupPlan",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{U(e.data),console.log("planList>>>>>>>>>>>>>>>>>>>>>>>>",e.data)}))};return(0,l.useEffect)((()=>{0==z&&te("")}),[z]),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("h4",{className:"card-title",children:"Group Medical Plans"})}),(0,x.jsx)("div",{className:"col-md-8",children:(0,x.jsx)("a",{href:"/AddGroupMedicalPlans",className:"btn btn-primary",style:{float:"right"},children:"Add Group Medical Plan"})})]})}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsxs)("div",{className:"col-md-12",style:{textAlign:"right",color:"white"},children:[(0,x.jsx)("a",{className:"btn btn-info",style:{color:"white"},onClick:()=>e("/AddMembermanually"),children:"Add Manually"})," ",(0,x.jsx)("a",{className:"btn btn-success",style:{color:"white"},href:p,children:"Download Form"})," ",(0,x.jsx)("a",{className:"btn btn-dark",style:{color:"white"},onClick:()=>(X([]),ee({}),Z([]),void O(!0)),children:"Upload Form"})]})}),(0,x.jsx)(c.A,{defaultActiveKey:"0",children:(0,x.jsxs)(c.A.Item,{eventKey:"0",children:[(0,x.jsx)(c.A.Header,{className:"modifyaccordian",children:"Filters "}),(0,x.jsx)(c.A.Body,{children:(0,x.jsxs)("div",{className:"card-header",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Filter by Insurance co."})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",value:$,onChange:e=>E(e.target.value),children:[(0,x.jsx)("option",{value:"",children:"-- All --"}),null===L||void 0===L?void 0:L.map(((e,a)=>(0,x.jsx)("option",{value:e._id,children:e.company_name},a)))]})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Filter by Customer Name"})}),(0,x.jsx)("br",{}),(0,x.jsx)("input",{type:"text",className:"form-control",placeholder:"Search Plan",onChange:e=>M(e.target.value)})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Filter by Start Date"})}),(0,x.jsx)("br",{}),(0,x.jsx)("input",{type:"date",className:"form-control",onChange:e=>F(e.target.value)})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Filter by End Date"})}),(0,x.jsx)("br",{}),(0,x.jsx)("input",{type:"date",className:"form-control",onChange:e=>R(e.target.value)})]})]}),(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Filter by Status"})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",value:w,onChange:e=>C(e.target.value),children:[(0,x.jsx)("option",{value:1,children:"Active"}),(0,x.jsx)("option",{value:0,children:"Inactive"})]})]})})]})})]})}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsxs)("div",{className:"table-responsive",children:[ne?(0,x.jsx)("div",{className:"row d-flex justify-content-center",children:(0,x.jsx)(u.ul,{visible:!0,height:"80",width:"80",ariaLabel:"color-ring-loading",wrapperStyle:{},wrapperClass:"color-ring-wrapper",colors:["#e70808","#003399","#e70808","#e70808","#fff"]})}):"",(0,x.jsxs)("table",{className:"table table-bordered",children:[(0,x.jsx)("thead",{className:"thead-dark",children:(0,x.jsxs)("tr",{className:"table-info",children:[(0,x.jsx)("th",{children:"Sr No."}),(0,x.jsx)("th",{children:"Company Name"}),(0,x.jsx)("th",{children:"Customer Name"}),(0,x.jsx)("th",{children:"Policy Issue Date"}),(0,x.jsx)("th",{children:"Policy Expiry Date"}),(0,x.jsx)("th",{children:"Action"})]})}),(0,x.jsx)("tbody",{children:a&&a.length>0?a.map(((a,s)=>{var l,t,i;return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:de+s+1}),(0,x.jsx)("td",{children:null===(l=a.companyData[0])||void 0===l?void 0:l.company_name}),(0,x.jsx)("td",{className:1==a.status?"text-success":"text-danger",children:a.plan_name}),(0,x.jsx)("td",{children:null===(t=a.from_date)||void 0===t?void 0:t.slice(0,10)}),(0,x.jsx)("td",{children:null===(i=a.to_date)||void 0===i?void 0:i.slice(0,10)}),(0,x.jsxs)("td",{children:[(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/EditGroupMedicalPlans?id=${a._id}`,className:"btn btn-primary",children:"Edit"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/ViewGroupMedicalPlanPrice?id=${a._id}`,className:"btn btn-secondary",children:"Add TPA/Network"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{onClick:()=>{var s;return e(`/ViewActiveMembers?id=${null===(s=a.companyData[0])||void 0===s?void 0:s._id}&plan=${a._id}`)},className:"btn btn-info",children:"Active Members"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{onClick:()=>{var s;return e(`/AdditionMemberList?id=${null===(s=a.companyData[0])||void 0===s?void 0:s._id}&plan=${a._id}`)},className:"btn btn-success",children:"Addition Member List"})}),"\xa0\xa0",(0,x.jsxs)("div",{className:"btn-group",style:{position:"relative"},role:"group","aria-label":"Basic example",children:[a.newData>0?(0,x.jsx)("div",{className:a.newData<10?"bg-danger px-2":"bg-danger px-1",style:{position:"absolute",color:"white",borderRadius:"50%",zIndex:"5",top:"-8px",right:"-5px"},children:a.newData}):"",(0,x.jsx)("button",{onClick:()=>e(`/ViewNewlyAddedMembers?id=${a._id}&type=newlyAdded`),className:"btn btn-primary",children:"Adding Request List"})]}),"\xa0\xa0",(0,x.jsxs)("div",{className:"btn-group",style:{position:"relative"},role:"group","aria-label":"Basic example",children:[a.deleteRequesData>0?(0,x.jsx)("div",{className:a.deleteRequesData<10?"bg-danger px-2":"bg-danger px-1",style:{position:"absolute",color:"white",borderRadius:"50%",zIndex:"5",top:"-8px",right:"-5px"},children:a.deleteRequesData>=100?"99+":a.deleteRequesData}):"",(0,x.jsx)("button",{onClick:()=>e(`/ViewNewlyAddedMembers?id=${a._id}&type=deletedRequest`),className:"btn btn-warning",children:"Deletion Request List"})]}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{onClick:()=>{var s;return e(`/ViewDeletedMembers?id=${null===(s=a.companyData[0])||void 0===s?void 0:s._id}&plan=${a._id}`)},className:"btn btn-secondary",children:"Deleted Members"})}),"\xa0\xa0",1==a.status?(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&ce(a._id,0)},children:"Deactivate"})}):(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&ce(a._id,1)},children:"Activate"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-danger",onClick:()=>{var e;window.confirm("Are you sure you wish to delete this item?")&&(e=a._id,fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteGroupMedicalMaster?id=${e}&type=groupMedicalPlan`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(o()({text:e.message,icon:"success",button:!1}),re(b,n),setTimeout((()=>{o().close()}),1e3)):(o()({title:"Error!",text:e.message,icon:"error",button:!1}),re(b,n),setTimeout((()=>{o().close()}),1e3))})))},children:"Delete"})})]})]},s)})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"5",children:"No data found"})})})]}),(0,x.jsx)(i(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:r,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const a=e.selected;g(a+1),re(a+1,n)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})})]})]})})}),(0,x.jsxs)(d.A,{size:"lg",show:z,onHide:()=>O(!1),children:[(0,x.jsx)(d.A.Header,{closeButton:!0,children:(0,x.jsx)(d.A.Title,{children:"Add Request"})}),(0,x.jsx)(d.A.Body,{children:(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsx)("div",{className:"card",children:(0,x.jsx)("div",{className:"card-body",children:(0,x.jsxs)("form",{method:"POST",onSubmit:e=>{e.preventDefault(),ie(!0),O(!1);const a=new FormData(e.target),s=a.get("company_id"),l=a.get("plan"),t=a.get("tpa");let i=a.get("network_list");i=i.split("-")[0];const r=a.get("policy_number"),c=a.get("file"),d=new FormData;d.append("file",c),d.append("planCompanyId",s),d.append("planId",l),d.append("TPAId",t),d.append("networkListId",i),d.append("policy_number",r),console.log("data>>>>>>>>>>>>>",Array.from(d));const h={method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:d};fetch("https://insuranceapi-3o5t.onrender.com/api/addBulkGroupMedicalLeadsByAdmin",h).then((e=>e.json())).then((e=>{console.log("data>>>>>>>>>>>>>",e),201==e.status?(o()("Success",e.message,"success"),re(b,n),ie(!1)):(o()("Error",e.message,"error"),re(b,n),ie(!1))}))},children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Plan"})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",name:"plan",onChange:e=>(e=>{X([]),Z([]),te("");const{name:a,value:s}=e.target;se(s),fetch(`https://insuranceapi-3o5t.onrender.com/api/getRatesOfPlan?planId=${s}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,s=[];for(let t=0;t<a.length;t++){var l;s.push(null===(l=a[t])||void 0===l?void 0:l.TPAs[0])}X(s),ee(e.company[0].company_id[0])})).catch((e=>console.log("error",e)))})(e),children:[(0,x.jsx)("option",{value:"",children:"Select Plans"}),null===H||void 0===H?void 0:H.map(((e,a)=>(0,x.jsx)("option",{value:e._id,children:e.plan_name},a)))]})]}),(0,x.jsxs)("div",{className:"col-lg-6",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Insurance Company"})}),(0,x.jsx)("br",{}),(0,x.jsx)("select",{className:"form-control",name:"company_id",children:(0,x.jsx)("option",{value:Y._id,children:Y.company_name})})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"TPA"})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",name:"tpa",onChange:e=>{return a=e.target.value,void fetch(`https://insuranceapi-3o5t.onrender.com/api/getNetworksOfPlanratebyTPA?tpaid=${a}&planid=${ae}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data;console.log("networkData>>>>>>>>>>>>>>>>>>>>>>>>",a);const s=[];for(let n=0;n<a.length;n++){var l,t;let e=null===(l=a[n])||void 0===l?void 0:l.networks[0];e.policy_number=null===(t=a[n])||void 0===t?void 0:t.policy_name,s.push(e)}console.log("this is network arr >>>>>>> ",s),Z(s)})).catch((e=>console.log("error",e)));var a},children:[null!==W&&void 0!==W&&W.length?(0,x.jsx)("option",{value:"",children:"Select TPA"}):"",null===W||void 0===W?void 0:W.map(((e,a)=>(0,x.jsx)("option",{value:e._id,children:e.name},a)))]})]})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Network List"})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",name:"network_list",onChange:e=>(e=>{const a=e.split("-")[1];te(a)})(e.target.value),children:[Q.length?(0,x.jsx)("option",{value:"",children:"Select Network List"}):"",null===Q||void 0===Q?void 0:Q.map(((e,a)=>(0,x.jsx)("option",{value:e._id+"-"+e.policy_number,children:e.name},a)))]})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Policy Number"})}),(0,x.jsx)("br",{}),(0,x.jsx)("input",{type:"text",className:"form-control",defaultValue:le,name:"policy_number"})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"File"})}),(0,x.jsx)("br",{}),(0,x.jsx)("input",{type:"file",className:"form-control",name:"file"})]})]}),(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,x.jsx)(d.A.Footer,{children:(0,x.jsx)(h.A,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]}),(0,x.jsxs)(m.zS,{alignment:"center",visible:_,onClose:()=>S(!1),children:[(0,x.jsx)(m.E4,{onClose:()=>S(!1),children:(0,x.jsx)(m.lb,{children:"Upload Excel File"})}),(0,x.jsx)(m.Tc,{children:(0,x.jsx)("div",{children:(0,x.jsx)("input",{type:"file",className:"form-control",id:"DHA",defaultValue:"",required:!0,onChange:e=>k(e.target.files[0])})})}),(0,x.jsx)(m.If,{children:(0,x.jsx)(m.Q_,{color:"secondary",onClick:()=>S(!1),children:"Close"})})]})]})}},15287:(e,a,s)=>{e.exports=s.p+"static/media/Medical-Plan-sample-sheet.be4b40f05faf4166d533.xlsx"},13836:(e,a,s)=>{e.exports=s.p+"static/media/Member-addition-Sample-File.b9f73d477a9e98cdad90.xlsx"}}]);
//# sourceMappingURL=7842.12ce53f9.chunk.js.map