"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2889],{2889:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var s=n(65043),o=n(73216),c=n(73023),a=n.n(c),i=n(54168),l=n(70579);const r=()=>{const e=(0,o.Zp)(),[t,n]=(0,s.useState)([]),[c,r]=(0,s.useState)([]),[d,h]=(0,s.useState)({});(0,s.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):u()}),[]);const u=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;n(t)}))},m=(e,t,n)=>{const s=[...c];s[e][n]=t,r(s)};return(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12",children:(0,l.jsx)("div",{className:"card",children:(0,l.jsxs)("div",{className:"card-header",children:[(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12",children:(0,l.jsx)("h4",{className:"card-title",children:"Add Medical Visa Type"})})}),(0,l.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,l.jsxs)("table",{className:"table table-bordered",style:{width:"auto"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:(0,l.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={plan_condition:"",location:t};r([...c,e])},children:"+"})}),(0,l.jsx)("th",{children:"Plan Condition"}),(0,l.jsx)("th",{children:"Location"})]})}),(0,l.jsx)("tbody",{children:c.map(((e,n)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const t=[...c];t.splice(e,1),r(t)})(n),children:"x"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>((e,t)=>{const{name:n,value:s}=t.target;""===s.trim()?h((e=>({...e,[n]:"This is required"}))):h((e=>({...e,[n]:""})));const o=[...c];o[e][n]=s,r(o)})(n,e),className:"form-control",name:"plan_condition",placeholder:"Medical Plan Condition",autoComplete:"off",required:!0})}),(0,l.jsx)("td",{children:(0,l.jsx)(i.default,{style:{overflow:"visible"},options:t,selectedValues:t,displayValue:"location_name",onSelect:e=>m(n,e,"location"),onRemove:e=>m(n,e,"location"),placeholder:"Select Location",showCheckbox:!0,required:!0})})]},n)))})]})}),(0,l.jsx)("div",{className:"card-footer",children:(0,l.jsx)("button",{disabled:!c.length,className:"btn btn-outline-success",onClick:t=>{t.preventDefault();try{if(c.some((e=>""===e.plan_condition.trim()||0===e.location.length)))return void a()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"});const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};fetch("https://insuranceapi-3o5t.onrender.com/api/add_medical_plan_condition",t).then((e=>e.json())).then((t=>{200==t.status?(a()({text:t.message,type:"success",icon:"success",button:!1}),e("/Viewmedicalplancondition"),setTimeout((()=>{a().close()}),"1000")):(a()({title:"Error!",text:t.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{a().close()}),"1000"))}))}catch(n){console.log(n)}},children:"Submit"})})]})})})})})}}}]);
//# sourceMappingURL=2889.bc9864da.chunk.js.map