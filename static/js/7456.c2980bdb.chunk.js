"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7456],{37456:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});var l=o(65043),n=o(73216),d=(o(73023),o(70579));const a=()=>{const e=(0,n.Zp)(),[t,o]=(0,l.useState)([]),[a,i]=(0,l.useState)(!0),[s,c]=(0,l.useState)([]),[r,h]=(0,l.useState)([]),[m,p]=(0,l.useState)([]),[u,_]=(0,l.useState)([]),x=window.location.href,j=new URLSearchParams(x.split("?")[1]).get("id");(0,l.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];p(e),v(e)}}),[a]);const v=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/motor_plan_details/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{const o=t.data,l=null===o||void 0===o?void 0:o.company_id;_(l),f(l,e)}))},f=(e,t)=>{const l={method:"GET",headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/getlistBlackListedVehicle/${e}`,l).then((e=>e.json())).then((e=>{const n=e.data;console.log(n,">>>>>>>>>   >>>>>list"),h(n),fetch(`https://insuranceapi-3o5t.onrender.com/api/motor_plan_details/${t}`,l).then((e=>e.json())).then((e=>{const t=e.data.black_listed_vehicle;console.log(t,">>>>>>>>>>>>>>motorplandetails");const l=[];for(let o=0;o<n.length;o++)for(let e=0;e<t.length;e++){let d=n[o].motor_model_detail;t[e].variantId==d._id&&(n[o].checked=!0,n[o].topup=t[e].topup,l.push({variantId:t[e].variantId,topup:t[e].topup}))}console.log(n,">>>>>>>>>>>>>>list"),o(n),c(l)}))}))};return(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"card ",children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("h4",{children:"Black Listed Vehicle"})}),(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("a",{href:"/motor-plan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]}),(0,d.jsx)("div",{className:"row ",children:(0,d.jsxs)("div",{className:"checkboxs col-md-4",children:[(0,d.jsx)("input",{className:"form-check-input mx-2 mt-2",type:"checkbox",id:"flexCheckDefaul",onChange:e=>(e=>{if(!0===e.target.checked){const e=[],t=[];for(let o=0;o<r.length;o++){r[o].checked=!0,t.push(r[o]);let l=r[o].motor_model_detail;e.push({variantId:l._id,topup:""})}c(e),o(t)}else if(!1===e.target.checked){let e=document.getElementsByName("flexCheckDefault");for(let o=0;o<e.length;o++)e[o].checked=!1;const t={method:"GET",headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/getlistBlackListedVehicle/${u}`,t).then((e=>e.json())).then((e=>{const l=e.data;h(l),fetch(`https://insuranceapi-3o5t.onrender.com/api/motor_plan_details/${m}`,t).then((e=>e.json())).then((e=>{const t=e.data.black_listed_vehicle,n=[];for(let o=0;o<l.length;o++)for(let e=0;e<t.length;e++){let d=l[o].motor_model_detail;t[e].variantId==d._id&&(l[o].topup=t[e].topup,n.push({variantId:t[e].variantId,topup:t[e].topup}))}o(l),c([])}))}))}})(e)}),(0,d.jsx)("label",{children:(0,d.jsx)("h5",{children:"Tick"})})]})})]}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("table",{className:"table table-bordered",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"#"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Start Year"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Make Motor"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Model Motor"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Motor Model Details"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Body Type"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Cylinder"})}),(0,d.jsx)("th",{children:(0,d.jsx)("strong",{children:"Value"})})]})}),(0,d.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((e=>{var t,o,l,n,a,i;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"checkboxs",children:(0,d.jsx)("input",{className:"form-check-input",type:"checkbox",name:"flexCheckDefault",defaultChecked:e.checked,onChange:t=>((e,t)=>{const o=[...s];if(!0===e.target.checked)t.checked=!0,o.push({variantId:t.motor_model_detail._id,topup:""});else if(!1===e.target.checked){let e=t.motor_model_detail,l=o.find((t=>t.variantId===e._id));const n=o.indexOf(l);console.log(n),o.splice(n,1)}c(o)})(t,e)})})}),(0,d.jsx)("td",{children:null===(t=e.motor_model_detail)||void 0===t?void 0:t.motor_model_detail_start_year}),(0,d.jsx)("td",{children:null===(o=e.make_motor)||void 0===o?void 0:o.make_motor_name}),(0,d.jsx)("td",{children:null===(l=e.model_motor)||void 0===l?void 0:l.motor_model_name}),(0,d.jsx)("td",{children:null===(n=e.motor_model_detail)||void 0===n?void 0:n.motor_model_detail_name}),(0,d.jsx)("td",{children:null===(a=e.body_type)||void 0===a?void 0:a.body_type_name}),(0,d.jsx)("td",{children:null===(i=e.motor_model_detail)||void 0===i?void 0:i.motor_model_detail_cylinder}),(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"form-group",children:(0,d.jsx)("input",{type:"text",name:"topup",className:"form-control",disabled:!0!==e.checked,onChange:t=>((e,t)=>{const o=(new FormData).get("topup"),{name:l,value:n}=e.target;c((e=>{const d=[...e];console.log(d,">>>>>>>>>>>>>>> new data");const a=d.findIndex((e=>e.variantId===t._id));return-1!==a?d[a]={...d[a],[l]:n}:d.push({variantId:t._id,topup:o}),d}))})(t,e.motor_model_detail),defaultValue:e.topup?e.topup:""})})})]},e._id)}))})]})}),(0,d.jsx)("div",{className:"card-footer",children:(0,d.jsx)("button",{className:"btn btn-primary",onClick:()=>{console.log(s,">>>>>>>>>>>>>>> submit data");const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:j,blackListArr:s})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_black_listed_Vehicle",e).then((e=>e.json())).then((e=>{window.location.href="/blacklistvehicle?id="+j}))},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=7456.c2980bdb.chunk.js.map