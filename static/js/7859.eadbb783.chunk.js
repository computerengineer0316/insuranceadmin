"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7859],{57859:(e,a,l)=>{l.r(a),l.d(a,{default:()=>d});var s=l(54168),o=l(65043),n=l(73216),i=l(73023),t=l.n(i),r=l(70579);const d=()=>{const e=(0,n.Zp)(),[a,l]=(0,o.useState)(""),[i,d]=(0,o.useState)([]),[c,m]=(0,o.useState)([]),[h,u]=(0,o.useState)([]),[p,x]=(0,o.useState)([]),[j,v]=(0,o.useState)([]),[g,f]=(0,o.useState)([{name:"",TPA:"",coPayments:"",perioddayRange:"",perioddayRange_topup:"",coPayments:"",emirateId:"",network:"",medical_plan_id:a,ageRagne:"",malePrimium:"",femalePrimium:"",femaleMarridePrimium:"",locationArray:h}]);(0,o.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];l(e),C(),b(),P(),w(),T()}}),[]);const N=(e,l)=>{const{name:s,value:o}=l.target;"TPA"==s&&_(o,e);const n=[...g];n[e][s]=o,n[e].medical_plan_id=a,f(n)},y=(e,a,l)=>{const s=[...g];s[e][l]=a,f(s)},b=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getPlanCategory",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{d(e.data)}))},P=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{let a=e.data;const l=[];for(let o=0;o<(null===a||void 0===a?void 0:a.length);o++){const e={label:a[o].location_name,value:a[o]._id};l.push(e)}const s=[...g];s[0].locationArray=l,f(s),u(l)}))},_=(e,a)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getTpaLinkNetwork?tpaId=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{v(e.data);const l=[...g];l[a].network=e.data[0]._id,f(l)})).catch((e=>console.log("error",e)))},w=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalTPA",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{x(e.data),console.log("setTPADatal>>>>>>>>>>>>>>>>>>>>>>>>",e.data)}))},T=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalNetwork",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{v(e.data),console.log("networkDatasetTPADatalllllllllllllllllllllllll",e.data)}))},C=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getAreaOfRegistrations",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{let a=e.data;const l=[];for(let s=0;s<a.length;s++){const e={label:a[s].area_of_registration_name,value:a[s]._id};l.push(e)}m(l)})).catch((e=>console.log("error",e)))};return(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("h4",{className:"card-title",children:"Add Rates Based On Age"})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("a",{href:`/ViewRatesBasedOnAge?id=${a}`,className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("button",{className:"btn btn-outline-success my-1",onClick:()=>{const e=g[g.length-1],a={name:null===e||void 0===e?void 0:e.name,TPA:null===e||void 0===e?void 0:e.TPA,perioddayRange:null===e||void 0===e?void 0:e.perioddayRange,perioddayRange_topup:null===e||void 0===e?void 0:e.perioddayRange_topup,emirateId:null===e||void 0===e?void 0:e.emirateId,coPayments:null===e||void 0===e?void 0:e.coPayments,network:null===e||void 0===e?void 0:e.network,medical_plan_id:null===e||void 0===e?void 0:e.medical_plan_id,ageRagne:null===e||void 0===e?void 0:e.ageRagne,malePrimium:null===e||void 0===e?void 0:e.malePrimium,femalePrimium:null===e||void 0===e?void 0:e.femalePrimium,femaleMarridePrimium:null===e||void 0===e?void 0:e.femaleMarridePrimium,locationArray:null===e||void 0===e?void 0:e.locationArray};f([...g,a])},children:"+"}),null===g||void 0===g?void 0:g.map(((e,a)=>(0,r.jsxs)("div",{className:"row mb-3",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"name"}),(0,r.jsx)("input",{onChange:e=>N(a,e),type:"text",name:"name",className:"form-control",defaultValue:g[a].name,placeholder:"Enter ",required:!0})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"TPA"}),(0,r.jsxs)("select",{required:!0,className:"form-control",onChange:e=>N(a,e),name:"TPA",defaultValue:g[a].TPA,children:[(0,r.jsx)("option",{value:"",children:"Select TPA"}),p.map(((e,a)=>(0,r.jsx)("option",{value:e._id,children:e.name},a)))]})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Network"}),(0,r.jsxs)("select",{required:!0,className:"form-control",onChange:e=>N(a,e),name:"network",defaultValue:g[a].network,children:[(0,r.jsx)("option",{value:"",children:"Select network"}),j.map(((e,a)=>(0,r.jsx)("option",{selected:0===a,value:e._id,children:e.name},a)))]})]})})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Age Ragne"}),(0,r.jsx)("input",{onChange:e=>N(a,e),type:"text",name:"ageRagne",className:"form-control",defaultValue:g[a].ageRagne,placeholder:"0-10,11-20",required:!0})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Emirates Issuing Visa"}),(0,r.jsx)(s.default,{options:c,selectedValues:g[a].emirateId,onSelect:e=>y(a,e,"emirateId"),onRemove:e=>y(a,e,"emirateId"),displayValue:"label",placeholder:"Select Region",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,showArrow:!0,style:{chips:{background:"#007bff"}}})]})})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Co-Payment"}),(0,r.jsx)("textarea",{onChange:e=>N(a,e),type:"text",name:"coPayments",className:"form-control",defaultValue:g[a].coPayments,placeholder:"Enter Co-Payment",required:!0})]})})}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Male Primium"}),(0,r.jsx)("input",{onChange:e=>N(a,e),type:"text",name:"malePrimium",className:"form-control",defaultValue:g[a].malePrimium,placeholder:"5000,6000",required:!0})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Female Primium"}),(0,r.jsx)("input",{onChange:e=>N(a,e),type:"text",name:"femalePrimium",className:"form-control",defaultValue:g[a].femalePrimium,placeholder:"5000,6000",required:!0})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Female(Marride) Primium"}),(0,r.jsx)("input",{onChange:e=>N(a,e),type:"text",name:"femaleMarridePrimium",className:"form-control",defaultValue:g[a].femaleMarridePrimium,placeholder:"5000,6000",required:!0})]})})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Period Days Range "}),(0,r.jsx)("input",{onChange:e=>N(a,e),type:"text",name:"perioddayRange",className:"form-control",defaultValue:g[a].perioddayRange,placeholder:"10-20,20-30"})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Topup"}),(0,r.jsx)("input",{onChange:e=>N(a,e),type:"text",name:"perioddayRange_topup",className:"form-control",defaultValue:g[a].perioddayRange_topup,placeholder:"0,10,20"})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Location"}),(0,r.jsx)(s.default,{options:h,selectedValues:h,onSelect:e=>y(a,e,"locationArray"),onRemove:e=>y(a,e,"locationArray"),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,showArrow:!0,style:{chips:{background:"#007bff"}}})]})})]}),(0,r.jsx)("div",{className:"col-md-12 my-2",children:(0,r.jsx)("div",{className:"btn btn-outline-danger",style:{float:"right"},onClick:()=>(e=>{const a=[...g];a.splice(e,1),f(a)})(a),children:"x"})}),(0,r.jsx)("hr",{style:{borderTop:"2px solid #111"}})]},a))),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("button",{onClick:()=>(async()=>{var l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)};fetch("https://insuranceapi-3o5t.onrender.com/api/add_rates_based_on_age",l).then((e=>e.json())).then((l=>{let s=l;201==s.status?(t()({title:"Success!",text:s.message,type:"success",icon:"success",button:!1}),setTimeout((()=>{t().close(),e(`/ViewRatesBasedOnAge?id=${a}`)}),1e3)):(t()({title:"Error!",text:s.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{t().close()}),1e3))})).catch((e=>console.log("error",e)))})(),className:"btn btn-primary mt-2",style:{float:"right"},children:"Submit"})})})]})]})})})})}}}]);
//# sourceMappingURL=7859.eadbb783.chunk.js.map