"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5935],{15935:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(65043),s=n(73216),o=n(30064),i=n.n(o),l=n(54168),d=n(84217),c=n(64196),r=n(14282),m=n(73023),h=n.n(m),p=n(70579);const u=()=>{const e=(0,s.Zp)(),[t,n]=(0,a.useState)([]),[o,m]=(0,a.useState)([]),[u,f]=(0,a.useState)(""),[j,x]=(0,a.useState)({}),[v,_]=(0,a.useState)([]),[y,N]=(0,a.useState)([]),[g,b]=(0,a.useState)([]),[w,S]=(0,a.useState)([]),[C,T]=(0,a.useState)({from_date:"",to_date:""}),[k,$]=(0,a.useState)([]),[G,E]=(0,a.useState)(!1),[D,V]=(0,a.useState)([]),[P,A]=(0,a.useState)(!1),[M,O]=(0,a.useState)([]);(0,a.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];f(e),q(e),L(),I(),U(),B(),F()}}),[]);const B=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalNetwork",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{S(e.data)}))},F=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalTPA",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;$(t)}))},U=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalNetworkList",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{_(e.data)}))},I=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=[];for(let a=0;a<t.length;a++)n.push({label:t[a].location_name,value:t[a]._id});m(n)}))},L=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/company_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{n(e.data)}))},q=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/group_medical_plan_by_id?id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var t,n,a,s,o;const i=null===(t=e.data[0])||void 0===t?void 0:t.line_of_business_id,l=null===(n=e.data[0])||void 0===n?void 0:n.documents;var d;d=l,fetch(`https://insuranceapi-3o5t.onrender.com/api/getGroupMedicalDocuments?lob=${i}&category=issued policy`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;if(d){for(let e=0;e<t.length;e++){const n=t[e];let a=!1;for(let s=0;s<d.length;s++){const o=d[s];n.document_type===o.name&&(a=!0,t[e].name=n.document_type,t[e].file=o.file?o.file:"")}!1===a&&(t[e].name=n.document_type,t[e].file="")}V(t)}else{for(let e=0;e<t.length;e++)t[e].name=t.document_type;V(t)}})),x(e.data[0]),T({from_date:null===(a=e.data[0].from_date)||void 0===a?void 0:a.slice(0,10),to_date:null===(s=e.data[0].to_date)||void 0===s?void 0:s.slice(0,10)});const c=[],r=null===(o=e.data[0])||void 0===o?void 0:o.locations;for(let m=0;m<r.length;m++)c.push({label:r[m].location_name,value:r[m]._id});N(c)}))};return(0,p.jsxs)("div",{className:"container",children:[(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsxs)("div",{className:"card",style:{marginTop:"20px"},children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsx)("h4",{className:"card-title",children:"Edit Group Medical Plan"})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsx)("button",{onClick:()=>e("/ViewGroupMedicalPlans"),className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,p.jsx)("div",{className:"card-body",children:(0,p.jsxs)("form",{action:"/",method:"POST",onSubmit:t=>{t.preventDefault();const n=new FormData(t.target),a=n.get("tpa"),s=n.get("company_id"),o=n.get("network"),l=n.get("plan_name"),d=n.get("from_date"),c=n.get("to_date");console.log({tpa:a,company_id:s,network:o,plan_name:l,from_date:d,to_date:c,changedLoc:y});const r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan_name:l,company_id:s,location:y,from_date:d,to_date:c})};fetch(`https://insuranceapi-3o5t.onrender.com/api/update_group_medical_plan?id=${u}`,r).then((e=>e.json())).then((t=>{200===t.status?i().fire({title:"Success",text:t.message,icon:"success",confirmButtonText:"Ok"}).then((t=>{t.isConfirmed&&e("/ViewGroupMedicalPlans")})):i().fire({title:"Error!",text:t.message,icon:"error",confirmButtonText:"Ok"}).then((t=>{t.isConfirmed&&e("/ViewGroupMedicalPlans")}))}))},children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group mb-3",children:[(0,p.jsx)("label",{children:"Customer Name"}),(0,p.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"Enter Plan Name",name:"plan_name",autoComplete:"off",defaultValue:null===j||void 0===j?void 0:j.plan_name})]})}),(0,p.jsx)("div",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group mb-3",children:[(0,p.jsx)("label",{children:"Insurance Company Name"}),(0,p.jsxs)("select",{required:!0,className:"form-control",name:"company_id",children:[(0,p.jsx)("option",{hidden:!0,value:"",children:"Select Insurance Company"}),t.map(((e,t)=>(0,p.jsx)("option",{value:e._id,selected:j.company_id==e._id,children:e.company_name},t)))]})]})}),(0,p.jsx)("div",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group mb-3",children:[(0,p.jsx)("label",{children:"From Date"}),(0,p.jsx)("input",{type:"date",className:"form-control",name:"from_date",defaultValue:C.from_date})]})})]}),(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsx)("div",{className:"form-group mb-3",children:(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group mb-3",children:[(0,p.jsx)("label",{children:"To Date"}),(0,p.jsx)("input",{className:"form-control",type:"date",name:"to_date",defaultValue:C.to_date})]})})})})}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group mb-3",children:[(0,p.jsx)("label",{children:"Location"}),(0,p.jsx)(l.default,{options:o,selectedValues:y,onSelect:e=>N(e),onRemove:e=>N(e),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsx)("div",{className:"btn btn-warning",onClick:()=>A(!0),children:"View Documents"})})]}),(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:"Update"})})})]})})]})})}),(0,p.jsxs)(d.A,{size:"lg",show:P,onHide:()=>A(!1),children:[(0,p.jsx)(d.A.Header,{closeButton:!0,children:(0,p.jsx)(d.A.Title,{children:"Documents"})}),(0,p.jsx)(d.A.Body,{children:(0,p.jsx)("div",{className:"container",children:(0,p.jsx)("div",{className:"row",children:(0,p.jsxs)("div",{className:"col-md-12",children:[(0,p.jsxs)(c.A,{bordered:!0,hover:!0,children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Sr."}),(0,p.jsx)("th",{children:"Name"}),(0,p.jsx)("th",{children:"View / Upload"})]})}),(0,p.jsx)("tbody",{children:null===D||void 0===D?void 0:D.map(((e,t)=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:t+1}),(0,p.jsx)("td",{children:e.document_type}),(0,p.jsx)("td",{children:(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)("input",{className:"mx-2",name:e.document_type,type:"file",onChange:t=>((e,t,n)=>{const a=e.target.files[0];let s=[...M];if(!0===(null===s||void 0===s?void 0:s.some(((e,t)=>e.name==n.document_type)))){const e=null===s||void 0===s?void 0:s.find((e=>e.name===n.document_type));let t=null===s||void 0===s?void 0:s.indexOf(e);console.log("foundIndex: ",t),-1===t?s.push({name:null===e||void 0===e?void 0:e.name,file:a,newfile:!0,origionalname:a.name}):s[t]={name:e.name,file:a},O(s)}else s.push({name:n.document_type,file:a}),O(s)})(t,0,e)}),null!==e&&void 0!==e&&e.file?(0,p.jsx)("button",{className:"btn btn-warning mx-5",style:{marginRight:"5px"},onClick:()=>{return t=e.file,void window.open(`https://insuranceapi-3o5t.onrender.com/GroupClaimDocuments/${t}`);var t},children:"View"},t):""]})})]},t)))})]}),(0,p.jsx)("button",{onClick:()=>(()=>{A(!1);const e=new FormData;M.forEach(((t,n)=>{e.append("file",t.file)})),e.append("id",u),e.append("payload",JSON.stringify(M)),M.length?fetch("https://insuranceapi-3o5t.onrender.com/api/uploadGroupMedicalPlanDocs",{method:"post",body:e}).then((e=>e.json())).then((e=>{200===e.status?(h()("Success!","Updated","success"),E(!1),O([]),q(u)):h()("Error!","Something went wrong","error")})).catch((e=>{console.error(e)})):alert("No Documents")})(),className:"btn btn-primary my-2",children:"Submit"})]})})})}),(0,p.jsx)(d.A.Footer,{children:(0,p.jsx)(r.A,{variant:"secondary",onClick:()=>A(!1),children:"Close"})})]})]})}},64196:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(98139),s=n.n(a),o=n(65043),i=n(67852),l=n(70579);const d=o.forwardRef(((e,t)=>{let{bsPrefix:n,className:a,striped:o,bordered:d,borderless:c,hover:r,size:m,variant:h,responsive:p,...u}=e;const f=(0,i.oU)(n,"table"),j=s()(a,f,h&&`${f}-${h}`,m&&`${f}-${m}`,o&&`${f}-${"string"===typeof o?`striped-${o}`:"striped"}`,d&&`${f}-bordered`,c&&`${f}-borderless`,r&&`${f}-hover`),x=(0,l.jsx)("table",{...u,className:j,ref:t});if(p){let e=`${f}-responsive`;return"string"===typeof p&&(e=`${e}-${p}`),(0,l.jsx)("div",{className:e,children:x})}return x}))}}]);
//# sourceMappingURL=5935.83276880.chunk.js.map