"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1374],{21374:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var s=i(65043),n=i(73216),a=i(70579);const c=()=>{const e=(0,n.Zp)(),[t,i]=(0,s.useState)([]),[c,d]=(0,s.useState)({}),[l,r]=(0,s.useState)([]),o=window.location.href,h=new URLSearchParams(o.split("?")[1]).get("id");(0,s.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("&")[0].split("=")[1];m(e)}}),[]);const m=async e=>{await fetch("https://insuranceapi-3o5t.onrender.com/api/get_medical_benefits",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{const i=t.data,s=i.length;for(let n=0;n<s;n++)p(i[n],e)}))},p=(e,t)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/single_medical_plan_details/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{const s=t.data.medical_benefits,n=s.length;for(let i=0;i<n;i++)s[i].itemId==e._id&&(e.itemdesc=s[i].itemdesc,e.value=s[i].value);i((t=>[...t,e]))}))},f=(e,t)=>{console.log(t);const{name:i,value:s}=e.target;r((e=>{const n=[...e],a=n.findIndex((e=>e.itemId===t));return-1!==a?n[a]={...n[a],[i]:s}:n.push({itemId:t,[i]:s}),n}))};return(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-md-12",children:(0,a.jsxs)("div",{className:"card ",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-md-6",children:(0,a.jsx)("h4",{children:"Medical Benefits"})}),(0,a.jsx)("div",{className:"col-md-6",children:(0,a.jsx)("a",{href:"/medicalplan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("table",{className:"table table-bordered",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:(0,a.jsx)("strong",{children:"#"})}),(0,a.jsx)("th",{children:(0,a.jsx)("strong",{children:"Feature"})}),(0,a.jsx)("th",{children:(0,a.jsx)("strong",{children:"Description"})}),(0,a.jsx)("th",{children:(0,a.jsx)("strong",{children:"value"})})]})}),(0,a.jsx)("tbody",{children:t.map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"checkboxs",children:(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",defaultChecked:e.itemdesc&&e.value,onChange:()=>{return i=e._id,d((e=>({...e,[i]:!e[i]}))),void r((e=>{const s=[...e],n=s.findIndex((e=>e.itemId===i));if(-1!==n)s[n]={...s[n],checked:!s[n].checked};else{const e={itemId:i,checked:!0,benefit:"",itemdesc:"",value:""},n=t.find((e=>e._id===i));n&&(e.benefit=n.table_benefit,e.itemdesc=n.table_benefit_description),s.push(e)}return s}));var i}})})}),(0,a.jsx)("td",{children:e.table_benefit}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"text",name:"description",className:"form-control",disabled:!c[e._id]&&!e.itemdesc,onChange:t=>f(t,e._id),defaultValue:e.itemdesc?e.itemdesc:e.table_benefit_description})})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"text",name:"value",className:"form-control",disabled:!c[e._id]&&!e.value,onChange:t=>f(t,e._id),defaultValue:e.value})})})]},e._id)))})]})}),(0,a.jsx)("div",{className:"card-footer",children:(0,a.jsx)("button",{className:"btn btn-primary",onClick:()=>{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h,type:"medical",formData:l})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_medical_benefits",e).then((e=>e.json())).then((e=>{window.location.href="/viewMedicalBenefits?id="+h}))},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=1374.757f51dc.chunk.js.map