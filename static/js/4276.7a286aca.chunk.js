"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4276],{54276:(e,l,s)=>{s.r(l),s.d(l,{default:()=>u});var t=s(65043),n=s(73216),a=s(30064),o=s.n(a),i=s(77977),d=s(80726),c=s.n(d),r=s(70579);const u=()=>{const e=(0,n.Zp)(),[l,s]=(0,t.useState)([]),[a,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)([]),[v,j]=(0,t.useState)(""),[x,g]=(0,t.useState)(""),[f,b]=(0,t.useState)(""),[y,_]=(0,t.useState)([]),[N,T]=(0,t.useState)([]),[S,E]=(0,t.useState)("");(0,t.useEffect)((()=>{const l=localStorage.getItem("token");if(null===l||void 0===l||""===l)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];B(e),w(),C(),k()}}),[]);const w=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{console.log(e);const l=null===e||void 0===e?void 0:e.data,s=null===l||void 0===l?void 0:l.map((e=>({label:null===e||void 0===e?void 0:e.line_of_business_name,value:null===e||void 0===e?void 0:e._id})));p(s)}))},C=async()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_all_policiy_type",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{_(e.data)}))},B=async e=>{try{const l={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")||0}};await fetch(`https://insuranceapi-3o5t.onrender.com/api/getEmailTemplate/${e}`,l).then((e=>e.json())).then((e=>{var l,t,n,a,o,i,c,r;console.log(e),s(null===e||void 0===e?void 0:e.data),d(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.subject),m(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.body),j(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.LOB)||void 0===a?void 0:a._id),g(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.business_type),b(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(c=i.plan_type)||void 0===c?void 0:c._id),E(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.email_type)}))}catch(l){console.log(l)}},k=()=>{try{fetch("https://insuranceapi-3o5t.onrender.com/api/getEmailTypes",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{T(e.data)}))}catch(e){console.log("error",e)}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("div",{className:"card",style:{marginTop:"20px"},children:(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("h4",{className:"card-title",children:"Edit Email Template"})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("a",{href:"/ViewEmailTemplates",className:"btn btn-primary",style:{float:"right"},children:"Back"})}),(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("form",{action:"/",method:"POST",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:(0,r.jsx)("strong",{children:"Subject"})}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"staff_name",placeholder:"Enter Name",autoComplete:"off",required:!0,value:a,onChange:e=>d(e.target.value)})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:(0,r.jsx)("strong",{children:"Line Of Business"})}),(0,r.jsxs)("select",{className:"form-control",name:"line_of_business",required:!0,onChange:e=>(e=>{const l=e.target.value;console.log("selectedList",l),j(l),b("")})(e),defaultValue:v,children:[(0,r.jsx)("option",{value:"",hidden:!0,children:"Select Line Of Business"}),h.map(((e,l)=>(0,r.jsx)("option",{value:e.value,selected:e.value==v,children:e.label},l)))]})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:(0,r.jsx)("strong",{children:"Business Type "})}),(0,r.jsxs)("select",{className:"form-control",name:"business_type",required:!0,onChange:e=>g(e.target.value),value:x,children:[(0,r.jsx)("option",{value:"",hidden:!0,children:"Select Business Type"}),(0,r.jsx)("option",{value:"NEW",children:"New Business"}),(0,r.jsx)("option",{value:"RENEWAL",children:"Renewal Business"})]})]})}),"6418643bf42eaf5ba1c9e0ef"==v||"641bf0bbcbfce023c8c76739"==v?(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:(0,r.jsx)("strong",{children:"Plan Type"})}),(0,r.jsxs)("select",{className:"form-control",onChange:e=>b(e.target.value),children:[(0,r.jsx)("option",{value:"",hidden:!0,children:"Select Plan Type"}),null===y||void 0===y?void 0:y.map(((e,l)=>(0,r.jsx)("option",{value:e._id,selected:e._id==f,children:null===e||void 0===e?void 0:e.policy_type_name},l)))]})]})}):"",(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:(0,r.jsx)("strong",{children:"Type "})}),(0,r.jsxs)("select",{className:"form-control",name:"type",required:!0,onChange:e=>E(e.target.value),children:[(0,r.jsx)("option",{value:"",hidden:!0,children:"Select Type"}),null===N||void 0===N?void 0:N.map(((e,l)=>(0,r.jsx)("option",{value:e._id,selected:(null===e||void 0===e?void 0:e._id)==S,children:e.name},l)))]})]})}),(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:(0,r.jsx)("strong",{children:"Email"})}),(0,r.jsx)(i.CKEditor,{editor:c(),data:u,config:{toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","indent","outdent","|","blockQuote","|","undo","redo"]},placeholder:"Start typing here..."},onReady:e=>{console.log("Editor is ready to use!",e)},onChange:(e,l)=>{const s=l.getData();m(s)},onBlur:(e,l)=>{console.log("Blur.",l)},onFocus:(e,l)=>{console.log("Focus.",l)}})]})})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",style:{textAlign:"right"},children:(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:async l=>{l.preventDefault();const s=window.location.href.split("/")[3].split("?")[1].split("=")[1],t={subject:a,body:u,LOB:v,business_type:x,plan_type:f,email_type:S};console.log(t);const n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")||0},body:JSON.stringify(t)};await fetch(`https://insuranceapi-3o5t.onrender.com/api/updateEmailTemplate/${s}`,n).then((async e=>({status:e.status,data:await e.json()}))).then((l=>{console.log(l),200==l.status?o().fire({title:"Success",text:l.message,icon:"success",confirmButtonText:"OK"}).then((()=>{e("/ViewEmailTemplates")})):o().fire({title:"Error",text:l.message,icon:"error",confirmButtonText:"OK"})}))},children:"Save"})})})]})})]})})})})})})})}}}]);
//# sourceMappingURL=4276.7a286aca.chunk.js.map