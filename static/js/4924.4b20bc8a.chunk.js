"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4924,2875],{4829:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var l=s(65043),a=s(73216),n=(s(93946),s(61072)),o=s(78602),i=s(84217),r=s(53519),c=s(14282),d=s(49456),u=(s(93204),s(66097),s(90504),s(54168)),h=(s(82768),s(91033),s(98465),s(72875)),g=s(3605),p=s(70579);const m=function(){const e=(0,a.Zp)(),[t,s]=(0,l.useState)([]),[m,b]=(0,l.useState)(),[x,f]=(0,l.useState)([]),[v,y]=(0,l.useState)(),[j,S]=(0,l.useState)([]),[A,N]=(0,l.useState)(),[_,w]=(0,l.useState)([]),[C,k]=(0,l.useState)([]),[T,U]=(0,l.useState)([]),[F,O]=(0,l.useState)(),[I,V]=(0,l.useState)("daily"),[D,P]=(0,l.useState)(!1),[W,R]=(0,l.useState)(new Date),[E,J]=(0,l.useState)(new Date);(0,l.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=JSON.parse(localStorage.getItem("user")).admin_business_type;if(e.length>0){const t=e,s=t.length,l=[];for(let e=0;e<s;e++){let s;s=t[e].type,s=s.split(" ");const a={label:t[e].type,value:s[0]};l.push(a)}S(l)}else{S([{label:"New Business",value:"New"},{label:"Renewal Business",value:"Renewal"}])}L(),z(),B()}}),[]),(0,l.useEffect)((()=>{G()}),[_]);const L=()=>{const e=JSON.parse(localStorage.getItem("user")).location;if(e.length>0){const t=e,l=t.length,a=[];for(let e=0;e<l;e++){const s={label:t[e].loc_name,value:t[e].loc_id};a.push(s)}s(a)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,l=t.length,a=[];for(let s=0;s<l;s++){const e={label:t[s].location_name,value:t[s]._id};a.push(e)}s(a)}))}},z=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const t=e,s=t.length,l=[];for(let e=0;e<s;e++){const s={label:t[e].lob_name,value:t[e].lob_id};l.push(s)}f(l)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,s=t.length,l=[];for(let a=0;a<s;a++){const e={label:t[a].line_of_business_name,value:t[a]._id};l.push(e)}f(l)}))}},B=async e=>{w(e)};console.log(_);const M=JSON.parse(localStorage.getItem("user")).usertype,G=()=>{const e=JSON.parse(localStorage.getItem("user"))._id;if("646224deb201a6f07b2dff32"===M)fetch(`https://insuranceapi-3o5t.onrender.com/api/getStaffDetailsbyid/${e}`).then((e=>e.json())).then((e=>{if("salesAdvisor"==_){const t=e.data[0].assignSalesAdvisor;if(!(void 0!=t&&t.length>0))return k([]),"No Options Available";{const e=t.length,s=[];for(let l=0;l<e;l++){const e={label:t[l].name,value:t[l]._id};s.push(e)}k(s)}}else if("documentChaser"==_){const t=e.data[0].assignDacumentChaser;if(!(void 0!=t&&t.length>0))return k([]),"No Options Available";{const e=t.length,s=[];for(let l=0;l<e;l++){const e={label:t[l].name,value:t[l]._id};s.push(e)}k(s)}}else{if("policyIssuer"!=_)return k([]),"No Options Available";{const t=e.data[0].assignPolicyIssuer;if(!(void 0!=t&&t.length>0))return k([]),"No Options Available";{const e=t.length,s=[];for(let l=0;l<e;l++){const e={label:t[l].name,value:t[l]._id};s.push(e)}k(s)}}}}));else if("64622470b201a6f07b2dff22"===M){const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=supervisor",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const t=e.data,s=null===t||void 0===t?void 0:t.length,l=[];for(let a=0;a<s;a++){const e={label:t[a].name,value:t[a]._id};l.push(e)}k(l)}))}else k([])};console.log("agent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",C);const H=e=>{V(e)},Z={defaultlocation:t,defaultlob:x,defaultbusinessType:j,defaultagent:C,defaultdateRange:I,startdate:W,enddate:E,userType:_},Y=(e,t)=>{switch(e){case"location":b(t);break;case"lob":y(t);break;case"businessType":N(t);break;case"agent":O(t)}},$={location:m,lob:v,businessType:A,agent:F,dateRange:I};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("section",{className:"mb-2",children:(0,p.jsxs)(n.A,{children:[(0,p.jsx)(o.A,{className:"",sm:5,children:(0,p.jsx)("h4",{id:"dashboard",className:"card-title mb-0",children:"Dashboard"})}),(0,p.jsx)(o.A,{sm:7,className:"d-none d-md-block",children:(0,p.jsxs)("div",{className:"float-end me-3",children:[(0,p.jsx)("button",{onClick:()=>H("daily"),className:""+("daily"===I?"btn btn-selected":"btn btn-light"),children:"Daily"}),(0,p.jsx)("button",{onClick:()=>H("weekly"),className:""+("weekly"===I?"btn btn-selected":"btn btn-light"),children:"Weekly"}),(0,p.jsx)("button",{onClick:()=>H("monthly"),className:""+("monthly"===I?"btn btn-selected":"btn btn-light"),children:"Monthly"}),(0,p.jsx)("button",{onClick:()=>H("yearly"),className:""+("yearly"===I?"btn btn-selected":"btn btn-light"),children:"Yearly"}),(0,p.jsx)("button",{onClick:()=>{P(!0),V("customized")},className:""+("customized"===I?"btn btn-selected":"btn btn-light"),children:"Customized"})]})}),(0,p.jsx)(o.A,{className:"mb-3",sm:3,children:(0,p.jsx)("div",{children:Z.defaultlocation.length<2?(0,p.jsx)(u.default,{options:Z.defaultlocation,displayValue:"label",selectedValues:Z.defaultlocation,showArrow:!0}):(0,p.jsx)(u.default,{options:Z.defaultlocation,displayValue:"label",onSelect:e=>Y("location",e),onRemove:e=>Y("location",e),placeholder:"Select location",selectedValues:m,showArrow:!0})})}),(0,p.jsx)(o.A,{className:"mb-3",sm:3,children:(0,p.jsx)("div",{children:Z.defaultbusinessType.length<2?(0,p.jsx)(u.default,{options:Z.defaultbusinessType,displayValue:"label",selectedValues:Z.defaultbusinessType,showArrow:!0}):(0,p.jsx)(u.default,{options:Z.defaultbusinessType,displayValue:"label",onSelect:e=>Y("businessType",e),onRemove:e=>Y("businessType",e),placeholder:"Select business type",selectedValues:A,showArrow:!0})})}),(0,p.jsx)(o.A,{className:"mb-3",sm:3,children:(0,p.jsx)("div",{children:Z.defaultlob.length<2?(0,p.jsx)(u.default,{options:Z.defaultlob,displayValue:"label",selectedValues:Z.defaultlob,showArrow:!0}):(0,p.jsx)(u.default,{options:Z.defaultlob,displayValue:"label",onSelect:e=>Y("lob",e),onRemove:e=>Y("lob",e),placeholder:"Select line of business",selectedValues:v,showArrow:!0})})}),(0,p.jsx)(o.A,{className:"mb-3",sm:3,children:(0,p.jsx)("div",{children:Z.defaultagent.length<2?(0,p.jsx)(u.default,{options:Z.defaultagent,displayValue:"label",selectedValues:Z.defaultagent,showArrow:!0}):(0,p.jsx)(u.default,{options:Z.defaultagent,displayValue:"label",onSelect:e=>Y("agent",e),onRemove:e=>Y("agent",e),placeholder:"Select Agents",selectedValues:F,showArrow:!0})})})]})}),(0,p.jsx)("section",{className:"mb-3",children:(0,p.jsx)(h.default,{defaultOptions:Z,filterOptions:$})}),(0,p.jsx)("section",{className:"tables",children:(0,p.jsx)(g.default,{defaultOptions:Z,filterOptions:$})}),(0,p.jsxs)(i.A,{size:"lg",show:D,onHide:()=>P(!1),children:[(0,p.jsx)(i.A.Header,{closeButton:!0,children:(0,p.jsx)(i.A.Title,{children:"Custom Dates"})}),(0,p.jsx)(i.A.Body,{children:(0,p.jsxs)(r.A,{children:[(0,p.jsxs)(n.A,{children:[(0,p.jsx)("label",{htmlFor:"",children:"From"}),(0,p.jsx)(d.A,{onChange:R,value:W,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]}),(0,p.jsxs)(n.A,{children:[(0,p.jsx)("label",{htmlFor:"",children:"To"}),(0,p.jsx)(d.A,{onChange:J,value:E,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]})]})}),(0,p.jsx)(i.A.Footer,{children:(0,p.jsx)(c.A,{variant:"secondary",onClick:()=>P(!1),children:"Close"})})]})]})}},72875:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var l=s(65043),a=s(73216),n=s(12488),o=(s(84596),s(93946)),i=s(70579);const r=function(e){let{filterOptions:t,defaultOptions:s}=e;const r=(0,a.Zp)(),[c,d]=(0,l.useState)(0),[u,h]=(0,l.useState)(0),[g,p]=(0,l.useState)(0),[m,b]=(0,l.useState)(0),[x,f]=(0,l.useState)(0),[v,y]=(0,l.useState)(0),[j,S]=(0,l.useState)(0),[A,N]=(0,l.useState)(0);(0,l.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?r("/login"):_()}),[t]);const _=async()=>{const e=JSON.parse(localStorage.getItem("user"));let l=t.location,a=t.lob,n=t.businessType,o=t.agent,i=t.dateRange,r=s.startdate,c=s.enddate,u=e.assign_staff,g=s.userType;l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):[],a=null!=a&&void 0!=a&&Array.isArray(a)&&0!==a.length?a.map((e=>e.value)):[],n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):[],o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):s.defaultagent.map((e=>e.value));const m=localStorage.getItem("token"),x=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",x);const v={method:"POST",body:JSON.stringify({location:l,lob:a,business_type:n,newagent:o,dateRange:i,startdate:r,enddate:c,assign_staff:u,userType:g}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+m}};await fetch("https://insuranceapi-3o5t.onrender.com/api/SuperAdmintopLeagentCount",v).then((e=>e.json())).then((e=>{console.log("data",e.data),d(e.data.totalCount),h(e.data.closeLeadCount),p(e.data.totalPremiumEarned),b(e.data.closingRatio),f(e.data.lostCount),y(e.data.supevisorPendingCount),S(e.data.dacumentsChaserPendingCount),N(e.data.policyIssuerPendingCount)})).catch((e=>{console.log(e)}))};return console.log("totalcount",c),console.log("closeLeadCount",u),console.log("totalPremiumEarned",g),console.log("closingRatio",m),console.log("lost",x),console.log("pending",v),console.log("pendingWithDC",j),console.log("pendingWithPI",A),(0,i.jsx)("div",{children:(0,i.jsxs)(n.default,{className:"carousel_abcds",margin:30,swipeable:!1,draggable:!0,showDots:!0,responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:6},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:[(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Assigned Leads",value:null!=c?c.toString():"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Closed",value:null!=u?u.toString():"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Premium earned",value:null!=g?function(e){if(null!==e){const t=parseFloat(e.toString().replace(/,/g,""));return isNaN(t)?"":t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:!0})}return""}(g):"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Income Earned",value:"46"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Top Agent",value:"SA"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Closing ratio",value:null!=m?(null===m||void 0===m?void 0:m.toString())+"%":"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Pending",value:null!=v?null===v||void 0===v?void 0:v.toString():"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{width:36,className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Lost",value:null!=x?null===x||void 0===x?void 0:x.toString():"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Pending with DC",value:null!=j?null===j||void 0===j?void 0:j.toString():"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{width:36,className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Pending with PI",value:null!=A?null===A||void 0===A?void 0:A.toString():"0"})})]})})}}}]);
//# sourceMappingURL=4924.4b20bc8a.chunk.js.map