"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5721],{35721:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var a=n(65043),s=n(73216),i=n(92157),r=n.n(i),c=n(73023),l=n.n(c),o=n(70579);const d=()=>{let e=a.createRef(),t=a.createRef(),n=a.createRef(),i=a.createRef(),c=a.createRef();const d=(0,s.Zp)(),[u,m]=(0,a.useState)([]),[h]=(0,a.useState)(5),[b,p]=(0,a.useState)(0),[f,x]=(0,a.useState)(1),[j,_]=(0,a.useState)(""),[N,v]=(0,a.useState)(""),[g,k]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[S,C]=(0,a.useState)(""),[O,B]=(0,a.useState)(""),[T,A]=(0,a.useState)([]),[D,L]=(0,a.useState)("");(0,a.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)d("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];_(e),E(f,h),P()}}),[]);const P=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=t.length,a=[];for(let s=0;s<n;s++){const e={label:t[s].line_of_business_name,value:t[s]._id};a.push(e)}A(a)}))},E=(e,t)=>{m([]);const n=window.location.href.split("/")[3].split("?")[1].split("=")[1],a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:n})};fetch(`https://insuranceapi-3o5t.onrender.com/api/getBank/${e}/${t}`,a).then((e=>e.json())).then((e=>{const n=e.total/t,a=Math.ceil(n);p(a),m(e.data)}))},R=(e,t)=>{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})};fetch(`https://insuranceapi-3o5t.onrender.com/api/update_bank_status/${e}`,n).then((e=>e.json())).then((e=>{200===e.status?l()({title:"Success!",text:e.message,icon:"success",button:"Ok"}).then((()=>{E(f,h)})):l()({title:"Error!",text:e.message,icon:"error",button:"Ok"}).then((()=>{E(f,h)}))}))};return(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-12",children:(0,o.jsxs)("div",{className:"card card-default",children:[(0,o.jsx)("div",{className:"card-header justify-content-center",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("h4",{children:"Bank Details"})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("a",{href:"/insurance-company",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("form",{action:"/",method:"POST",onSubmit:""!=O?a=>{a.preventDefault();const s=new FormData(a.target),r=s.get("bank_name"),o=s.get("bank_account_number"),d=s.get("iban_number"),u=s.get("swift_code"),m=s.get("line_of_business"),h={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_name:r,bank_account_number:o,iban_number:d,swift_code:u,line_of_business:m,bank_id:O})};fetch("https://insuranceapi-3o5t.onrender.com/api/updateBank",h).then((e=>e.json())).then((a=>{200===a.status?l()({title:"Success!",text:a.message,icon:"success",button:"OK"}).then((function(){e.current.value="",t.current.value="",n.current.value="",i.current.value="",c.current.value="",B(""),window.location.reload()})):l()({title:"Error!",text:a.message,icon:"error",button:"OK"}).then((function(){e.current.value="",t.current.value="",n.current.value="",i.current.value="",c.current.value="",B(""),window.location.reload()}))}))}:a=>{a.preventDefault();const s=new FormData(a.target),r=s.get("bank_name"),o=s.get("bank_account_number"),d=s.get("iban_number"),u=s.get("swift_code"),m=s.get("line_of_business"),h={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bank_name:r,bank_account_number:o,iban_number:d,swift_code:u,line_of_business:m,company_id:j})};fetch("https://insuranceapi-3o5t.onrender.com/api/addBank",h).then((e=>e.json())).then((a=>{200===a.status?l()({title:"Success!",text:a.message,icon:"success",button:"OK"}).then((function(){e.current.value="",t.current.value="",n.current.value="",i.current.value="",c.current.value="",window.location.reload()})):l()({title:"Error!",text:a.message,icon:"error",button:"OK"}).then((function(){e.current.value="",t.current.value="",n.current.value="",i.current.value="",c.current.value="",window.location.reload()}))}))},children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Bank Name"}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"Bank Name",name:"bank_name",autoComplete:"off",defaultValue:N,ref:e,required:!0})]})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Bank Account Number"}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"Bank Account Number",name:"bank_account_number",autoComplete:"off",defaultValue:g,ref:t,required:!0})]})})]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"IBAN Number"}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"IBAN Number",name:"iban_number",autoComplete:"off",defaultValue:y,ref:n,required:!0})]})}),(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Swift Code"}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"Swift Code",name:"swift_code",autoComplete:"off",defaultValue:S,ref:c,required:!0})]})}),(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Line Of Business"}),(0,o.jsxs)("select",{className:"form-control",name:"line_of_business",ref:i,required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select Line Of Business"}),T.map(((e,t)=>(0,o.jsx)("option",{value:e.value,selected:D==e.value,children:e.label},t)))]})]})})]}),(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-md-12",children:(0,o.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:""!=O?"Update":"Submit"})})})]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsxs)("div",{className:"col-md-12",children:[(0,o.jsxs)("table",{className:"table table-bordered",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"#"}),(0,o.jsx)("th",{children:"Bank Name"}),(0,o.jsx)("th",{children:"Bank Account Number"}),(0,o.jsx)("th",{children:"IBAN Number"}),(0,o.jsx)("th",{children:"Swift Code"}),(0,o.jsx)("th",{children:"Line Of Business"}),(0,o.jsx)("th",{children:"Action"})]})}),(0,o.jsx)("tbody",{children:u.length>0?u.map(((e,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:t+1}),(0,o.jsx)("td",{children:e.bankname}),(0,o.jsx)("td",{children:e.accountnumber}),(0,o.jsx)("td",{children:e.ibannumber}),(0,o.jsx)("td",{children:e.swiftcode}),(0,o.jsx)("td",{children:e.line_of_business[0].line_of_business_name}),(0,o.jsxs)("td",{children:[(0,o.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>(e=>{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})};fetch("https://insuranceapi-3o5t.onrender.com/api/getBankDetailsbyid",t).then((e=>e.json())).then((e=>{200===e.status&&(console.log(e.data),v(e.data.bankname),k(e.data.accountnumber),w(e.data.ibannumber),C(e.data.swiftcode),B(e.data._id),L(e.data.line_of_business_id))}))})(e._id),children:"Edit"}),"\xa0\xa0",1===e.bankstatus?(0,o.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&R(e._id,0)},children:"Deactivate"}):(0,o.jsx)("button",{className:"btn btn-success btn-sm",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&R(e._id,1)},children:"Activate"})]})]},t))):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"5",style:{textAlign:"center"},children:"No Data Found"})})})]}),(0,o.jsx)(r(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:b,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected+1;x(t),E(t,h)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})})})]})})})})}}}]);
//# sourceMappingURL=5721.06b87081.chunk.js.map