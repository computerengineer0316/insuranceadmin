"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1765],{10492:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var n=s(65043),a=s(73216),l=s(93946),o=s(61072),i=s(78602),d=(s(93204),s(66097),s(90504)),r=s(54168),c=(s(82768),s(91033),s(98465),s(68651)),u=s(70579);const h=function(e){let{filterOptions:t,defaultOptions:s}=e;const r=(0,a.Zp)();(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?r("/login"):m()}),[t]);const[c,h]=(0,n.useState)({}),m=async()=>{const e=JSON.parse(localStorage.getItem("user"));let n=t.location,a=t.lob,l=t.businessType,o=t.agent,i=t.dateRange,d=s.startdate,r=s.enddate,c=e.assign_staff,u=s.userType,m=s.selectedSupervisor;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):s.defaultlocation.map((e=>e.value)),a=null!=a&&void 0!=a&&Array.isArray(a)&&0!==a.length?a.map((e=>e.value)):s.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):s.defaultbusinessType.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):s.defaultagent.map((e=>e.value));const p=localStorage.getItem("token"),g=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",g);const f={method:"POST",body:JSON.stringify({location:n,lob:a,business_type:l,newagent:o,dateRange:i,startdate:d,enddate:r,assign_staff:c,userType:null!=u?u:"supervisor",selectedSupervisor:m}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+p}};"650029a2df69a4033408903d"==g&&await fetch("https://insuranceapi-3o5t.onrender.com/api/businessDashboard",f).then((e=>e.json())).then((e=>{console.log("data",e.data)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==g&&await fetch("https://insuranceapi-3o5t.onrender.com/api/businessDashboard",f).then((e=>e.json())).then((e=>{console.log("data>>>><><><><><>> now",e.data),h(e.data)})).catch((e=>{console.log(e)}))};return(0,u.jsxs)("div",{children:[(0,u.jsxs)(o.A,{children:[(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Total Leads"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.kp,{data:{labels:["Motor","Travel","Individual Medical","Other LOB"],datasets:[{data:[c.motorCount,c.travelCount,c.homeCount,c.medicalCount,c.yatchCount,c.ortherInsuranceCount],backgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"],hoverBackgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"]}]}})})]})}),(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Closed Leads"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.kp,{data:{labels:["Motor","Travel","Individual Medical","Other LOB"],datasets:[{data:[c.closeMotorCount,c.closeMotorCount,c.closeHomeCount,c.closeMedicalCount,c.closeYatchCount,c.closeOrtherInsuranceCount],backgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"],hoverBackgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"]}]}})})]})}),(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Pending Leads"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.kp,{data:{labels:["Motor","Travel","Individual Medical","Other LOB"],datasets:[{data:[c.pendingMotorCount,c.pendingTravelCount,c.pendingHomeCount,c.pendingMYedicalCount,c.pendingYatchCount,c.pendingOrtherInsuranceCount],backgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"],hoverBackgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"]}]}})})]})})]}),(0,u.jsxs)(o.A,{children:[(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Total Leads"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.BB,{options:{scales:{x:{title:{display:!0,text:"Hours"}},y:{title:{display:!0,text:"No. of Leads"}}}},data:{labels:["Before 8","8","9","10","11","12","1","2","3","4","5","6","After 6"],datasets:[{label:"No. of Leads",backgroundColor:"#f87979",data:[c.sevencount,c.eightcount,c.ninecount,c.tencount,c.elevencount,c.twelvecount,c.thirteencount,c.fourteencount,c.fifteencount,c.sixteencount,c.seventeencount,c.eighteencount,c.nineteencount]}]}})})]})}),(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Closed Leads"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.BB,{options:{scales:{x:{title:{display:!0,text:"Hours"}},y:{title:{display:!0,text:"No. of Leads"}}}},data:{labels:["Before 8","8","9","10","11","12","1","2","3","4","5","6","After 6"],datasets:[{label:"No. of Leads",backgroundColor:"#f87979",data:[c.closedsevenCount,c.closedeightCount,c.closednineCount,c.closedtenCount,c.closedelevenCount,c.closedtwelveCount,c.closedthirteenCount,c.closedfourteenCount,c.closedfifteenCount,c.closedsixteenCount,c.closedseventeenCount,c.closedeighteenCount,c.closednineteenCount]}]},labels:"months"})})]})}),(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Pending Leads"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.BB,{options:{scales:{x:{title:{display:!0,text:"Hours"}},y:{title:{display:!0,text:"No. of Leads"}}}},data:{labels:["Before 8","8","9","10","11","12","1","2","3","4","5","6","After 6"],datasets:[{label:"No. of Leads",backgroundColor:"#f87979",data:[c.pendingsevenCount,c.pendingeightCount,c.pendingnineCount,c.pendingtenCount,c.pendingelevenCount,c.pendingtwelveCount,c.pendingthirteenCount,c.pendingfourteenCount,c.pendingfifteenCount,c.pendingsixteenCount,c.pendingseventeenCount,c.pendingeighteenCount,c.pendingninteenCount]}]},labels:"months"})})]})})]}),(0,u.jsxs)(o.A,{children:[(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Classification of Total Leads"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.BB,{options:{scales:{x:{title:{display:!0,text:"Classification"}},y:{title:{display:!0,text:"No. of Leads"}}}},data:{labels:["Hot","Warm","Cold"],datasets:[{label:"No. of Leads",backgroundColor:"#1848A4",data:[c.hotleadsCount,c.warmleadsCount,c.coldleadsCount]}]},labels:"months"})})]})}),(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Booked Premium"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.BB,{options:{scales:{x:{title:{display:!0,text:"Hours"}},y:{title:{display:!0,text:"Amount in AED 0,000"}}}},data:{labels:["Before 8","8","9","10","11","12","1","2","3","4","5","6","After 6"],datasets:[{label:"Booked Premium",backgroundColor:"#1848A4",data:[c.totalsevenPremium,c.totaleightPremium,c.totalninePremium,c.totaltenPremium,c.totalelevenPremium,c.totaltwelvePremium,c.totalthirteenPremium,c.totalfourteenPremium,c.totalfifteenPremium,c.totalsixteenPremium,c.totalseventeenPremium,c.totaleighteenPremium,c.totalninteenPremium]}]},labels:"months"})})]})}),(0,u.jsx)(i.A,{className:"",lg:4,children:(0,u.jsxs)(l.E$,{className:"mb-4",children:[(0,u.jsx)(l.V0,{children:"Earned Commission"}),(0,u.jsx)(l.W6,{children:(0,u.jsx)(d.BB,{options:{scales:{x:{title:{display:!0,text:"Hours"}},y:{title:{display:!0,text:"Amount in AED 0,000"}}}},data:{labels:["Before 8","8","9","10","11","12","1","2","3","4","5","6","After 6"],datasets:[{label:"Earned Commission",backgroundColor:"#1848A4",data:[c.totalsevenEarnedCommission,c.totaleightEarnedCommission,c.totalnineEarnedCommission,c.totaltenEarnedCommission,c.totalelevenEarnedCommission,c.totaltwelveEarnedCommission,c.totalthirteenEarnedCommission,c.totalfourteenEarnedCommission,c.totalfifteenEarnedCommission,c.totalsixteenEarnedCommission,c.totalseventeenEarnedCommission,c.totaleighteenEarnedCommission,c.totalnineteenEarnedCommission]}]},labels:"months"})})]})})]}),(0,u.jsx)(o.A,{children:(0,u.jsx)(i.A,{className:"",lg:4})})]})};const m=function(){const e=(0,a.Zp)(),[t,s]=(0,n.useState)([]),[l,d]=(0,n.useState)(),[m,p]=(0,n.useState)([]),[g,f]=(0,n.useState)(),[b,x]=(0,n.useState)([]),[v,j]=(0,n.useState)(),[C,y]=(0,n.useState)([]),[A,N]=(0,n.useState)([]),[S,E]=(0,n.useState)([]),[_,k]=(0,n.useState)([]),[B,w]=(0,n.useState)([]),[T,O]=(0,n.useState)(),[F,I]=(0,n.useState)("daily"),[P,V]=(0,n.useState)(!1),[L,M]=(0,n.useState)(new Date),[D,W]=(0,n.useState)(new Date);(0,n.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=JSON.parse(localStorage.getItem("user")).admin_business_type;if(e.length>0){const t=e,s=t.length,n=[];for(let e=0;e<s;e++){let s;s=t[e].type,s=s.split(" ");const a={label:t[e].type,value:s[0]};n.push(a)}x(n)}else{x([{label:"New Business",value:"New"},{label:"Renewal Business",value:"Renewal"}])}R(),$(),H(),z()}}),[]),(0,n.useEffect)((()=>{J()}),[C]);const R=()=>{const e=JSON.parse(localStorage.getItem("user")).location;if(e.length>0){const t=e,n=t.length,a=[];for(let e=0;e<n;e++){const s={label:t[e].loc_name,value:t[e].loc_id};a.push(s)}s(a)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=t.length,a=[];for(let s=0;s<n;s++){const e={label:t[s].location_name,value:t[s]._id};a.push(e)}s(a)}))}},$=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const t=e,s=t.length,n=[];for(let e=0;e<s;e++){const s={label:t[e].lob_name,value:t[e].lob_id};n.push(s)}p(n)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,s=t.length,n=[];for(let a=0;a<s;a++){const e={label:t[a].line_of_business_name,value:t[a]._id};n.push(e)}p(n)}))}};(0,n.useEffect)((()=>{H()}),[_]);const H=async e=>{y(e)};console.log(C),JSON.parse(localStorage.getItem("user")).usertype;const J=()=>{const e=JSON.parse(localStorage.getItem("user")),t=_||e._id;fetch(`https://insuranceapi-3o5t.onrender.com/api/getStaffDetailsbyid/${t}`).then((e=>e.json())).then((e=>{if("salesAdvisor"==C){var t;const s=null===e||void 0===e||null===(t=e.data[0])||void 0===t?void 0:t.assignSalesAdvisor;if(!(void 0!=s&&s.length>0))return N([]),"No Options Available";{const e=s.length,t=[];for(let n=0;n<e;n++){const e={label:s[n].name,value:s[n]._id};t.push(e)}N(t)}}else if("documentChaser"==C){const t=null===e||void 0===e?void 0:e.data[0].assignDacumentChaser;if(!(void 0!=t&&t.length>0))return N([]),"No Options Available";{const e=t.length,s=[];for(let n=0;n<e;n++){const e={label:t[n].name,value:t[n]._id};s.push(e)}N(s)}}else{if("policyIssuer"!=C)return N([]),"No Options Available";{const t=null===e||void 0===e?void 0:e.data[0].assignPolicyIssuer;if(!(void 0!=t&&t.length>0))return N([]),"No Options Available";{const e=t.length,s=[];for(let n=0;n<e;n++){const e={label:t[n].name,value:t[n]._id};s.push(e)}N(s)}}}}))},z=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=supervisor",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data),E(e.data)}))},U=e=>{I(e)},Y={defaultlocation:t,defaultlob:m,defaultbusinessType:b,defaultagent:A,defaultdateRange:F,startdate:L,enddate:D,userType:C,selectedSupervisor:_},G=(e,t)=>{switch(e){case"location":d(t);break;case"lob":f(t);break;case"businessType":j(t);break;case"agent":O(t)}},Z={location:l,lob:g,businessType:v,agent:T,dateRange:F};return console.log("selectedSupervisor>>>>>>>>>>>>>>>>>>>>",_),console.log("agenttype>>>>>>>>>>>>>>>>>>>>",C),console.log("selectedAgent>>>>>>>>>>>>>>>>>>>>",T),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("section",{className:"mb-2",children:(0,u.jsxs)(o.A,{children:[(0,u.jsx)(i.A,{className:"",sm:5,children:(0,u.jsx)("h4",{id:"dashboard",className:"card-title mb-0",children:"Dashboard"})}),(0,u.jsx)(i.A,{sm:7,className:"d-none d-md-block",children:(0,u.jsxs)("div",{className:"float-end me-3",children:[(0,u.jsx)("button",{onClick:()=>U("daily"),className:""+("daily"===F?"btn btn-selected":"btn btn-light"),children:"Daily"}),(0,u.jsx)("button",{onClick:()=>U("weekly"),className:""+("weekly"===F?"btn btn-selected":"btn btn-light"),children:"Weekly"}),(0,u.jsx)("button",{onClick:()=>U("monthly"),className:""+("monthly"===F?"btn btn-selected":"btn btn-light"),children:"Monthly"}),(0,u.jsx)("button",{onClick:()=>U("yearly"),className:""+("yearly"===F?"btn btn-selected":"btn btn-light"),children:"Yearly"}),(0,u.jsx)("button",{onClick:()=>{V(!0),I("customized")},className:""+("customized"===F?"btn btn-selected":"btn btn-light"),children:"Customized"})]})}),(0,u.jsx)(i.A,{className:"mb-3",sm:3,children:(0,u.jsx)("div",{children:(0,u.jsx)(r.default,{options:Y.defaultlocation,displayValue:"label",onSelect:e=>G("location",e),onRemove:e=>G("location",e),placeholder:"Select location",selectedValues:l,showArrow:!0})})}),(0,u.jsx)(i.A,{className:"mb-3",sm:3,children:(0,u.jsx)("div",{children:(0,u.jsx)(r.default,{options:Y.defaultbusinessType,displayValue:"label",onSelect:e=>G("businessType",e),onRemove:e=>G("businessType",e),placeholder:"Select business type",selectedValues:v,showArrow:!0})})}),(0,u.jsx)(i.A,{className:"mb-3",sm:3,children:(0,u.jsx)("div",{children:(0,u.jsx)(r.default,{options:Y.defaultlob,displayValue:"label",onSelect:e=>G("lob",e),onRemove:e=>G("lob",e),placeholder:"Select line of business",selectedValues:g,showArrow:!0})})}),(0,u.jsx)(i.A,{className:"mb-3",sm:3,children:(0,u.jsx)("div",{children:(0,u.jsxs)("select",{className:"form-control transparentclass",onChange:e=>(e=>{const t=""==e?[]:Array.isArray(e)?e:[e];console.log("supervisorArray>>>>>>>>>>>>>>>>>>>>",t),k(t),y("")})(e.target.value),children:[(0,u.jsx)("option",{hidden:!0,children:"Select Supervisor"}),(0,u.jsx)("option",{value:"",children:"All"}),null===S||void 0===S?void 0:S.map(((e,t)=>(0,u.jsx)("option",{value:e._id,children:e.name},t)))]})})}),(0,u.jsx)(i.A,{className:"mb-3",sm:3,children:(0,u.jsx)("div",{children:(0,u.jsxs)("select",{className:"form-control transparentclass",onChange:e=>H(e.target.value),value:C,placeholder:"Select User Type",children:[(0,u.jsx)("option",{hidden:!0,children:"Select User Type"}),(0,u.jsx)("option",{value:[],children:"All"}),(0,u.jsx)("option",{value:"salesAdvisor",children:"Sales Advisor"}),(0,u.jsx)("option",{value:"documentChaser",children:"Document Chaser"}),(0,u.jsx)("option",{value:"policyIssuer",children:"Policy Issuer"})]})})}),(0,u.jsx)(i.A,{className:"mb-3",sm:3,children:(0,u.jsx)("div",{children:Y.defaultagent.length<2?(0,u.jsx)(r.default,{options:Y.defaultagent,displayValue:"label",selectedValues:Y.defaultagent,showArrow:!1}):(0,u.jsx)(r.default,{options:Y.defaultagent,displayValue:"label",onSelect:e=>G("agent",e),onRemove:e=>G("agent",e),placeholder:"Select Agents",selectedValues:T,showArrow:!0})})})]})}),(0,u.jsx)("section",{className:"mb-3",children:(0,u.jsx)(c.A,{defaultOptions:Y,filterOptions:Z})}),(0,u.jsx)("section",{className:"mb-3",children:(0,u.jsx)(h,{defaultOptions:Y,filterOptions:Z})})]})}}}]);
//# sourceMappingURL=1765.c81fb7ca.chunk.js.map