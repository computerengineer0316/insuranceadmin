"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8105],{68105:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var a=s(65043),o=s(73216),n=s(30064),l=s.n(n),c=s(54168),i=s(70579);const r=()=>{(0,a.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];y(e),_(e),f()}}),[]);const e=(0,o.Zp)(),[t,s]=(0,a.useState)([]),[n,r]=(0,a.useState)(null),[d,h]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[u,y]=(0,a.useState)(""),f=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,o=[];for(let s=0;s<a;s++){const e={label:t[s].location_name,value:t[s]._id};o.push(e)}s(o)}))},_=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/get_body_type_details/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;h(t.body_type_name);const s=t.body_type_location.split(","),a=s.length,o=[];for(let n=0;n<a;n++){const e={method:"GET",headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_location_by_id/${s[n]}`,e).then((e=>e.json())).then((e=>{o.push(e.data.location_name);if(o.length===a){const e=o.join(",").split(","),t=e.length,a=[];for(let o=0;o<t;o++){const t={label:e[o],value:s[o]};a.push(t)}r(a)}}))}m(t.body_type_status)}))},j=e=>{r(e)};return(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsx)("h4",{className:"card-title",children:"Edit Body Type"})}),(0,i.jsx)("div",{className:"card-body",children:(0,i.jsxs)("form",{action:"/",method:"POST",onSubmit:t=>{t.preventDefault();const s=new FormData(t.target),a=s.get("body_type_name"),o=n,c=o.length,i=[];for(let e=0;e<c;e++)i.push(o[e].value);const r=s.get("status"),d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body_type_name:a,body_type_location:i.toString(),body_type_status:r,body_type_id:u})};fetch("https://insuranceapi-3o5t.onrender.com/api/update_body_type",d).then((e=>e.json())).then((t=>{200===t.status?l().fire({title:"Success!",text:t.message,icon:"success",confirmButtonText:"Ok"}).then((t=>{t.isConfirmed&&e("/body-type")})):l().fire({title:"Error!",text:t.message,icon:"error",confirmButtonText:"Ok"}).then((t=>{t.isConfirmed&&e("/body-type")}))}))},children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Body Type Name"}),(0,i.jsx)("input",{type:"text",className:"form-control",placeholder:"Body Type Name",name:"body_type_name",autoComplete:"off",defaultValue:d,required:!0})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Location"}),(0,i.jsx)(c.default,{options:t,selectedValues:n,onSelect:j,onRemove:j,displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]})})]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Status"}),(0,i.jsxs)("select",{className:"form-control",name:"status",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select Status"}),(0,i.jsx)("option",{value:"1",selected:1==p,children:"Active"}),(0,i.jsx)("option",{value:"0",selected:0==p,children:"Inactive"})]})]})})}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:"Update"})})})]})})]})})})})}}}]);
//# sourceMappingURL=8105.51fc0a3c.chunk.js.map