"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1496],{61496:(e,a,l)=>{l.r(a),l.d(a,{default:()=>r});var n=l(65043),o=l(54168),t=l(73216),s=l(73023),i=l.n(s),c=l(70579);const r=()=>{const e=(0,t.Zp)(),[a,l]=(0,n.useState)(""),[s,r]=(0,n.useState)([]),[d,h]=(0,n.useState)([]),[m,p]=(0,n.useState)([]),[u,j]=(0,n.useState)([]),[v,x]=(0,n.useState)([{policy_name:"",TPA:"",network:"",planCatagoryId:"",medical_plan_id:a,locationArray:d}]);(0,n.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];l(e),N(),f(),b(),w()}}),[]);const y=(e,l)=>{const{name:n,value:o}=l.target;"TPA"==n&&_(o,e);const t=[...v];t[e][n]=o,t[e].medical_plan_id=a,x(t)},g=(e,a,l)=>{const n=[...v];n[e][l]=a,x(n)},N=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getGroupMedicalCategory",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{r(e.data)}))},f=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{let a=e.data;const l=[];for(let o=0;o<(null===a||void 0===a?void 0:a.length);o++){const e={label:a[o].location_name,value:a[o]._id};l.push(e)}const n=[...v];n[0].locationArray=l,x(n),h(l)}))},_=(e,a)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getTpaLinkNetwork?tpaId=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{let l=[...v];l[a].network=e.data[0]._id,x(l)})).catch((e=>console.log("error",e)))},b=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalTPA",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{p(e.data)}))},w=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalNetwork",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{j(e.data)}))};return(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsxs)("div",{className:"card",children:[(0,c.jsx)("div",{className:"card-header",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("h4",{className:"card-title",children:"Add TPA/Network"})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("a",{href:`/ViewGroupMedicalPlanPrice?id=${a}`,className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("button",{className:"btn btn-outline-success my-1",onClick:()=>{const e=v[v.length-1],a={policy_name:null===e||void 0===e?void 0:e.policy_name,TPA:null===e||void 0===e?void 0:e.TPA,network:null===e||void 0===e?void 0:e.network,planCatagoryId:null===e||void 0===e?void 0:e.planCatagoryId,medical_plan_id:null===e||void 0===e?void 0:e.medical_plan_id,locationArray:null===e||void 0===e?void 0:e.locationArray};x([...v,a])},children:"+"}),null===v||void 0===v?void 0:v.map(((e,a)=>(0,c.jsxs)("div",{className:"row mb-3",children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Policy Name"}),(0,c.jsx)("input",{onChange:e=>y(a,e),type:"text",name:"policy_name",className:"form-control",defaultValue:v[a].policy_name,placeholder:"Enter ",required:!0})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Plan Category"}),(0,c.jsxs)("select",{required:!0,className:"form-control",onChange:e=>y(a,e),name:"planCatagoryId",defaultValue:v[a].planCatagoryId,children:[(0,c.jsx)("option",{hidden:!0,value:"",children:"Select Plan Category"}),s.map(((e,a)=>(0,c.jsx)("option",{value:e._id,children:e.category_name},a)))]})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"TPA"}),(0,c.jsxs)("select",{required:!0,className:"form-control",onChange:e=>y(a,e),name:"TPA",defaultValue:v[a].TPA,children:[(0,c.jsx)("option",{hidden:!0,value:"",children:"Select TPA"}),m.map(((e,a)=>(0,c.jsx)("option",{value:e._id,children:e.name},a)))]})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Network"}),(0,c.jsxs)("select",{required:!0,className:"form-control",onChange:e=>y(a,e),name:"network",defaultValue:v[a].network,children:[(0,c.jsx)("option",{hidden:!0,value:"",children:"Select network"}),u.map(((e,a)=>(0,c.jsx)("option",{selected:0===a,value:e._id,children:e.name},a)))]})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Location"}),(0,c.jsx)(o.default,{options:d,selectedValues:d,onSelect:e=>g(a,e,"locationArray"),onRemove:e=>g(a,e,"locationArray"),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,showArrow:!0,style:{chips:{background:"#007bff"}}})]})})]}),(0,c.jsx)("div",{className:"col-md-12 my-2",children:(0,c.jsx)("div",{className:"btn btn-outline-danger",style:{float:"right"},onClick:()=>(e=>{const a=[...v];a.splice(e,1),x(a)})(a),children:"x"})}),(0,c.jsx)("hr",{style:{borderTop:"2px solid #111"}})]},a))),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsx)("button",{disabled:!v.length,onClick:()=>(async()=>{var l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)};fetch("https://insuranceapi-3o5t.onrender.com/api/add_Group_Medical_Plan_rates",l).then((e=>e.json())).then((l=>{let n=l;201==n.status?(i()({title:"Success!",text:n.message,type:"success",icon:"success",button:!1}),setTimeout((()=>{i().close(),e(`/ViewGroupMedicalPlanPrice?id=${a}`)}),1e3)):(i()({title:"Error!",text:n.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{i().close()}),1e3))})).catch((e=>console.log("error",e)))})(),className:"btn btn-primary mt-2",style:{float:"right"},children:"Submit"})})})]})]})})})})}}}]);
//# sourceMappingURL=1496.b5c3e5cf.chunk.js.map