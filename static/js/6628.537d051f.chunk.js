"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6628,1072,8602,6221,8691,8203,3364,983,584,8126,6310],{46628:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var n=s(65043),i=s(1177),o=s(53519),l=s(61072),a=s(78602),d=s(64196),r=s(92157),c=s.n(r),h=s(73216),m=s(84217),u=s(14282),p=s(73023),v=s.n(p),x=s(72450),j=s(11238),b=s(87960),N=s(70579);const f=()=>{var e;const t=(0,h.Zp)(),[s,r]=(0,n.useState)([]),[p]=(0,n.useState)(10),[f,y]=(0,n.useState)(0),[g,C]=(0,n.useState)(1),[A,S]=(0,n.useState)(""),[k,w]=(0,n.useState)([]),[$,T]=(0,n.useState)(""),[_,E]=(0,n.useState)([]),[B,D]=(0,n.useState)([]),[L,M]=(0,n.useState)(""),[P,I]=(0,n.useState)(""),[R,U]=(0,n.useState)(""),[F,G]=(0,n.useState)(""),[H,q]=(0,n.useState)([]),[z,O]=(0,n.useState)(!1),[V,J]=(0,n.useState)([]),[K,W]=(0,n.useState)([]),[Y,Z]=(0,n.useState)(!1),[Q,X]=(0,n.useState)(""),[ee,te]=(0,n.useState)(""),[se,ne]=(0,n.useState)(""),[ie,oe]=(0,n.useState)(""),[le,ae]=(0,n.useState)(!1),[de,re]=(0,n.useState)(""),[ce,he]=(0,n.useState)({}),[me,ue]=(0,n.useState)([]),[pe,ve]=(0,n.useState)(!1);(0,n.useEffect)((()=>{var e,t;const s=window.location.href.split("?")[1].split("&"),n=null===(e=s[0])||void 0===e?void 0:e.split("=")[1],i=null===(t=s[1])||void 0===t?void 0:t.split("=")[1];G(n),re(i),xe(n),ye(g,p,n,i),fe(),be(),je(),ge()}),[]),(0,n.useEffect)((()=>{var e,t;const s=window.location.href.split("?")[1].split("&"),n=null===(e=s[0])||void 0===e?void 0:e.split("=")[1],i=null===(t=s[1])||void 0===t?void 0:t.split("=")[1];ye(g,p,n,i)}),[A,$,L,P,R]);const xe=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/GetPlanAndCompanyName?id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{he(e.data[0])}))},je=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalNetwork",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;D(t)}))},be=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/activeMedicalTPA",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;E(t)}))},Ne=()=>{Z(!1),X("")},fe=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/company_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{w(e.data)}))},ye=(e,t,s,n)=>{ve(!0);const i={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};fetch(`https://insuranceapi-3o5t.onrender.com/api/getAdminHrUserLeads?page=${e}&limit=${t}&leadType=${n}&company=${A}&email=${$}&tpa=${L}&network=${P}&policyNumber=${R}&planId=${s}`,i).then((e=>e.json())).then((e=>{r(e.data);const t=e.total/p,s=Math.ceil(t);y(s),ve(!1)}))},ge=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getGroupMedicalDocuments?category=new",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{J(e.data),console.log(e.data,"this is doc list")}))},Ce=(g-1)*p;return(0,N.jsx)("div",{className:"container",children:(0,N.jsx)("div",{className:"row",children:(0,N.jsx)("div",{className:"col-md-12",children:(0,N.jsxs)("div",{className:"card",children:[(0,N.jsxs)("div",{className:"card-header",children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsx)("h4",{className:"card-title",children:"newlyAdded"==de?"Member Requests":"Delete Requests"})}),(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsx)("button",{disabled:!(H.length>0),className:"btn btn-danger text-white",onClick:()=>(()=>{const e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({approvedBy:F,leadId:H})};fetch("https://insuranceapi-3o5t.onrender.com/api/approvedGroupMedicalMember",e).then((e=>e.json())).then((e=>{201===e.status?(v()("Members Added Successfully",{icon:"success",button:!1}),q([]),ue([]),ye(g,p,F,de),setTimeout((()=>{v().close()}),1e3)):(v()("Something went wrong",{icon:"error",button:!1}),setTimeout((()=>{v().close()}),1e3))}))})(),children:"newlyAdded"==de?"Add Members":"Delete Members"})}),(0,N.jsxs)("div",{className:"col-md-4",children:[(0,N.jsx)("button",{className:"btn btn-primary mx-2",onClick:()=>t("/ViewGroupMedicalPlans"),style:{float:"right"},children:"Back"}),(0,N.jsx)("button",{disabled:!(H.length>0),className:"btn btn-success text-white",style:{float:"right"},onClick:()=>(()=>{const e=me.map(((e,t)=>({"Sl No.":null===e||void 0===e?void 0:e.SINumber,"First Name":null===e||void 0===e?void 0:e.firstName,"Middle Name":null===e||void 0===e?void 0:e.middleName,"Last Name":null===e||void 0===e?void 0:e.lastnName,"Employee Number":null===e||void 0===e?void 0:e.employeeNumber,"Date Of Birth":null===e||void 0===e?void 0:e.dateOfBirth,Gender:null===e||void 0===e?void 0:e.gender,"Marital Status":null===e||void 0===e?void 0:e.maritalStatus,Relation:null===e||void 0===e?void 0:e.relation,Category:null===e||void 0===e?void 0:e.category,Region:null===e||void 0===e?void 0:e.regino,LSB:null===e||void 0===e?void 0:e.LSB,Nationality:null===e||void 0===e?void 0:e.nationality,"Passport Number":null===e||void 0===e?void 0:e.passportNumber,"Eid Number":null===e||void 0===e?void 0:e.EidNumber,"Uid Number":null===e||void 0===e?void 0:e.UidNumber,"Visa Issued Location":null===e||void 0===e?void 0:e.visaIssuedLocation,"Actual Salary Band":null===e||void 0===e?void 0:e.actualSalryBand,"Person Commission":null===e||void 0===e?void 0:e.personCommission,"Residential Location":null===e||void 0===e?void 0:e.residentialLocation,"Work Location":null===e||void 0===e?void 0:e.workLocation,"Mobile Number":null===e||void 0===e?void 0:e.phoneno,Email:null===e||void 0===e?void 0:e.email,"Photo File Name":null===e||void 0===e?void 0:e.photoFileName,"Sponsor Type":null===e||void 0===e?void 0:e.sponsorType,"Sponsor Id":null===e||void 0===e?void 0:e.sponsorId,"Sponsor Contact Number":null===e||void 0===e?void 0:e.sponsorContactNumber,"Sponsor Contact Email":null===e||void 0===e?void 0:e.sponsorContactEmail,Occupation:null===e||void 0===e?void 0:e.occupation,"Additional Effective Date":null===e||void 0===e?void 0:e.AdditionEffectiveDate,"Visa File Number":null===e||void 0===e?void 0:e.visaFileNumber,"Birth Certeficate Number":null===e||void 0===e?void 0:e.birthCertificateNumber}))),t={Sheets:{data:j.Wp.json_to_sheet(e)},SheetNames:["data"]},s=j.M9(t,{booktype:"xlsx",type:"array"}),n=new Blob([s],{type:"xlsx"});x.saveAs(n,"MemberList.xlsx"),null===H||void 0===H||H.map(((e,t)=>{document.getElementById(e).checked=!1})),ue([]),q([])})(),children:"Export to Excel"})]})]}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("label",{children:(0,N.jsxs)("h6",{children:[(0,N.jsx)("strong",{children:"Company Name "}),": ",null===ce||void 0===ce||null===(e=ce.companyData)||void 0===e?void 0:e.company_name]})}),(0,N.jsx)("label",{children:(0,N.jsxs)("h6",{children:[(0,N.jsx)("strong",{children:"Customer Name "}),": ",null===ce||void 0===ce?void 0:ce.plan_name]})})]})]}),(0,N.jsxs)("div",{className:"card-body",children:[(0,N.jsx)(i.A,{defaultActiveKey:"0",children:(0,N.jsxs)(i.A.Item,{eventKey:"0",children:[(0,N.jsx)(i.A.Header,{className:"modifyaccordian",children:"Filters "}),(0,N.jsx)(i.A.Body,{children:(0,N.jsx)("div",{className:"card-header",children:(0,N.jsxs)("div",{className:"row",children:[(0,N.jsxs)("div",{className:"col-lg-3",children:[(0,N.jsx)("label",{children:(0,N.jsx)("strong",{children:"Filter By TPA"})}),(0,N.jsx)("br",{}),(0,N.jsxs)("select",{className:"form-control",onChange:e=>M(e.target.value),children:[(0,N.jsx)("option",{value:"",children:"-- All --"}),null===_||void 0===_?void 0:_.map(((e,t)=>(0,N.jsx)("option",{value:e._id,children:e.name},t)))]})]}),(0,N.jsxs)("div",{className:"col-lg-3",children:[(0,N.jsx)("label",{children:(0,N.jsx)("strong",{children:"Filter By Network"})}),(0,N.jsx)("br",{}),(0,N.jsxs)("select",{className:"form-control",onChange:e=>I(e.target.value),children:[(0,N.jsx)("option",{value:"",children:"-- All --"}),null===B||void 0===B?void 0:B.map(((e,t)=>(0,N.jsx)("option",{value:e._id,children:e.name},t)))]})]}),(0,N.jsxs)("div",{className:"col-lg-3",children:[(0,N.jsx)("label",{children:(0,N.jsx)("strong",{children:"Filter By Policy Number"})}),(0,N.jsx)("br",{}),(0,N.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter policy Number",onChange:e=>U(e.target.value)})]})]})})})]})}),(0,N.jsx)("div",{className:"card-body",children:(0,N.jsxs)("div",{className:"table-responsive",children:[pe?(0,N.jsx)("div",{className:"row d-flex justify-content-center",children:(0,N.jsx)(b.ul,{visible:!0,height:"80",width:"80",ariaLabel:"color-ring-loading",wrapperStyle:{},wrapperClass:"color-ring-wrapper",colors:["#e70808","#003399","#e70808","#e70808","#fff"]})}):"",(0,N.jsx)("div",{className:"radio-square m-2",children:(0,N.jsxs)("td",{children:[(0,N.jsx)("label",{children:(0,N.jsx)("strong",{children:"Select All"})}),(0,N.jsx)("input",{className:"form-check-input mx-2",onClick:e=>(e=>{if(1==e.target.checked){const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};fetch(`https://insuranceapi-3o5t.onrender.com/api/getAdminHrUserLeads?leadType=${de}&company=${A}&email=${$}&tpa=${L}&network=${P}&policyNumber=${R}&planId=${F}`,e).then((e=>e.json())).then((e=>{var t;const n=null===(t=e.data)||void 0===t?void 0:t.map((e=>e._id));q(n),null===n||void 0===n||n.map(((e,t)=>{if(null===s||void 0===s?void 0:s.find((t=>t._id==e))){const t=document.getElementById(e);t.checked=!0,console.log(t)}}))}))}else null===H||void 0===H||H.map(((e,t)=>{if(null===s||void 0===s?void 0:s.find((t=>t._id==e))){const t=document.getElementById(e);t.checked=!1,console.log(t)}})),q([])})(e),type:"checkbox",name:"selectall"})]})}),(0,N.jsxs)("table",{className:"table table-bordered",children:[(0,N.jsx)("thead",{className:"thead-dark",children:(0,N.jsxs)("tr",{className:"table-info",children:[(0,N.jsx)("th",{children:"No."}),(0,N.jsx)("th",{children:"Tick"}),(0,N.jsx)("th",{children:"Request Type"}),(0,N.jsx)("th",{children:"Name"}),(0,N.jsx)("th",{children:"Email ID"}),(0,N.jsx)("th",{children:"Phone No."}),(0,N.jsx)("th",{children:"HR"}),(0,N.jsx)("th",{children:"Request Date"}),(0,N.jsx)("th",{children:"Action"})]})}),(0,N.jsx)("tbody",{children:s&&s.length>0?null===s||void 0===s?void 0:s.map(((e,n)=>{var i,o;return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:Ce+n+1}),(0,N.jsx)("td",{children:(0,N.jsx)("div",{className:"checkboxs",children:(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",id:e._id,defaultChecked:!(null===H||void 0===H||!H.includes(e._id)),onChange:t=>((e,t)=>{const n=[...H],i=[...me];if(!0===e.target.checked){n.push(t);const e=s.find((e=>e._id==t));i.push(e)}else if(!1===e.target.checked){const e=n.indexOf(t),o=s.find((e=>e._id==t)),l=i.indexOf(o);n.splice(e,1),i.splice(l,1)}q(n),ue(i)})(t,e._id)})})},e._id),(0,N.jsx)("td",{children:"Newly Added"==e.requestType?"New":"DeLete Request"==e.requestType?"Delete":"-"}),(0,N.jsx)("td",{children:e.firstName&&e.middleName&&e.lastnName?e.firstName+" "+e.middleName+" "+e.lastnName:"-"}),(0,N.jsx)("td",{children:e.email}),(0,N.jsx)("td",{children:e.phoneno}),(0,N.jsx)("td",{children:null===(i=e.HRUser[0])||void 0===i?void 0:i.name}),(0,N.jsx)("td",{children:e.sentToJdvDate&&""!=e.sentToJdvDate?null===(o=e.sentToJdvDate)||void 0===o?void 0:o.slice(0,10):"-"}),(0,N.jsxs)("td",{children:[(0,N.jsx)("button",{className:"btn btn-info mx-1",onClick:()=>((e,t)=>{ne(t);const s=[];if(V.map(((e,t)=>{s.push({name:e.document_type,file:!1})})),e&&e.length>0)for(let n=0;n<s.length;n++)for(let t=0;t<e.length;t++)if(s[n].name==e[t].name){s[n].file=e[t].file;break}W(s),O(!0)})(e.documents,e._id),children:"Documents"}),(0,N.jsx)("button",{className:"btn btn-warning mx-1",onClick:()=>t(`/MemberDetails?id=${e._id}`),children:"View"}),(0,N.jsx)("button",{className:"btn btn-primary mx-1",onClick:()=>t(`/EditMemberDetails?id=${e._id}`),children:"Edit"}),(0,N.jsx)("button",{className:"btn btn-danger mx-1",onClick:()=>{window.confirm("Are you sure you wish to delete this item?")&&(e=>{try{fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteSingleLeadBYId?id=${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200==e.status?(v()({title:"Success!",text:e.message,type:"success",icon:"success",button:!1}),ye(g,p,F,de),setTimeout((()=>{v().close()}),2e3)):(v()({title:"Error!",text:e.message,type:"error",icon:"error",button:!1}),ye(g,p,F,de),setTimeout((()=>{v().close()}),2e3))}))}catch(t){console.log(t)}})(e._id)},children:"Delete"})]})]},n)})):(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"5",children:"No data found"})})})]}),(0,N.jsx)(c(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:f,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;C(t+1),ye(t+1,p,F,de)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})}),(0,N.jsxs)(m.A,{size:"md",show:Y,onHide:()=>Ne(),children:[(0,N.jsx)(m.A.Header,{closeButton:!0,children:(0,N.jsx)(m.A.Title,{children:"Upload Document"})}),(0,N.jsx)(m.A.Body,{children:(0,N.jsx)(o.A,{children:(0,N.jsx)("div",{children:(0,N.jsx)(l.A,{children:(0,N.jsx)("input",{type:"file",onChange:e=>X(e.target.files[0])})})})})}),(0,N.jsxs)(m.A.Footer,{children:[Q?(0,N.jsx)(u.A,{variant:"primary",onClick:()=>(()=>{const e=new FormData;e.append("file",Q),e.append("name",ee),console.log(Q,ee,"this is form data");const t={method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:e};fetch(`https://insuranceapi-3o5t.onrender.com/api/updateGroupMedicalDoccument?id=${se}`,t).then((e=>e.json())).then((e=>{200===e.status?(v()({text:"Document Uploaded Successfully",type:"success",icon:"success",button:!1}),ye(g,p,F,de),Z(!1),O(!1),setTimeout((()=>{v().close()}),1e3)):(v()({text:"Something went wrong",type:"success",icon:"error",button:!1}),Z(!1),O(!1),setTimeout((()=>{v().close()}),1e3))}))})(),children:"Update"}):null,(0,N.jsx)(u.A,{variant:"danger",onClick:()=>Ne(),children:"Close"})]})]}),(0,N.jsxs)(m.A,{size:"lg",show:z,onHide:()=>O(!1),children:[(0,N.jsx)(m.A.Header,{closeButton:!0,children:(0,N.jsx)(m.A.Title,{children:"Upload Member Documents"})}),(0,N.jsx)(m.A.Body,{children:(0,N.jsx)(o.A,{children:(0,N.jsx)("div",{children:(0,N.jsx)(l.A,{children:(0,N.jsx)(a.A,{lg:12,style:{width:"100%",overflowY:"scroll",height:"300px"},children:(0,N.jsxs)(d.A,{bordered:!0,hover:!0,children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{children:"Sr."}),(0,N.jsx)("th",{children:"Document Name"}),(0,N.jsx)("th",{children:"View / Upload"})]})}),(0,N.jsx)("tbody",{children:K.map(((e,t)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:t+1}),(0,N.jsx)("td",{children:e.name}),(0,N.jsxs)("td",{children:[0!=(null===e||void 0===e?void 0:e.file)?(0,N.jsx)("button",{className:"btn btn-warning ",onClick:()=>(e=>{oe(e),ae(!0)})(e.file),children:"View"},t):"",(0,N.jsx)("button",{className:"btn-primary border-primary text-primary mx-2",style:{float:"right"},onClick:()=>{return t=e.name,te(t),void Z(!0);var t},children:"Upload"})]})]},t)))})]})})})})})}),(0,N.jsx)(m.A.Footer,{children:(0,N.jsx)(u.A,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]}),(0,N.jsxs)(m.A,{size:"lg",show:le,onHide:()=>ae(!1),children:[(0,N.jsx)(m.A.Header,{closeButton:!0,children:(0,N.jsx)(m.A.Title,{children:"View Document"})}),(0,N.jsx)(m.A.Body,{children:(0,N.jsx)(o.A,{children:(0,N.jsx)("div",{children:(0,N.jsx)(l.A,{children:(0,N.jsx)(a.A,{lg:12,children:(0,N.jsx)("img",{src:`https://insuranceapi-3o5t.onrender.com/documents/${ie}`,alt:"file",style:{width:"100%",height:"100%"}})})})})})}),(0,N.jsx)(m.A.Footer,{children:(0,N.jsx)(u.A,{variant:"secondary",onClick:()=>ae(!1),children:"Close"})})]})]})]})})})})}},78602:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(98139),i=s.n(n),o=s(65043),l=s(67852),a=s(70579);const d=o.forwardRef(((e,t)=>{const[{className:s,...n},{as:o="div",bsPrefix:d,spans:r}]=function(e){let{as:t,bsPrefix:s,className:n,...o}=e;s=(0,l.oU)(s,"col");const a=(0,l.gy)(),d=(0,l.Jm)(),r=[],c=[];return a.forEach((e=>{const t=o[e];let n,i,l;delete o[e],"object"===typeof t&&null!=t?({span:n,offset:i,order:l}=t):n=t;const a=e!==d?`-${e}`:"";n&&r.push(!0===n?`${s}${a}`:`${s}${a}-${n}`),null!=l&&c.push(`order${a}-${l}`),null!=i&&c.push(`offset${a}-${i}`)})),[{...o,className:i()(n,...r,...c)},{as:t,bsPrefix:s,spans:r}]}(e);return(0,a.jsx)(o,{...n,ref:t,className:i()(s,!r.length&&d)})}));d.displayName="Col";const r=d},61072:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(98139),i=s.n(n),o=s(65043),l=s(67852),a=s(70579);const d=o.forwardRef(((e,t)=>{let{bsPrefix:s,className:n,as:o="div",...d}=e;const r=(0,l.oU)(s,"row"),c=(0,l.gy)(),h=(0,l.Jm)(),m=`${r}-cols`,u=[];return c.forEach((e=>{const t=d[e];let s;delete d[e],null!=t&&"object"===typeof t?({cols:s}=t):s=t;const n=e!==h?`-${e}`:"";null!=s&&u.push(`${m}${n}-${s}`)})),(0,a.jsx)(o,{ref:t,...d,className:i()(n,r,...u)})}));d.displayName="Row";const r=d},64196:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(98139),i=s.n(n),o=s(65043),l=s(67852),a=s(70579);const d=o.forwardRef(((e,t)=>{let{bsPrefix:s,className:n,striped:o,bordered:d,borderless:r,hover:c,size:h,variant:m,responsive:u,...p}=e;const v=(0,l.oU)(s,"table"),x=i()(n,v,m&&`${v}-${m}`,h&&`${v}-${h}`,o&&`${v}-${"string"===typeof o?`striped-${o}`:"striped"}`,d&&`${v}-bordered`,r&&`${v}-borderless`,c&&`${v}-hover`),j=(0,a.jsx)("table",{...p,className:x,ref:t});if(u){let e=`${v}-responsive`;return"string"===typeof u&&(e=`${e}-${u}`),(0,a.jsx)("div",{className:e,children:j})}return j}))}}]);
//# sourceMappingURL=6628.537d051f.chunk.js.map