"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7740],{17740:(e,t,l)=>{l.r(t),l.d(t,{default:()=>d});var n=l(65043),s=l(73216),c=l(73023),a=l.n(c),o=l(70579);const d=()=>{const e=(0,s.Zp)(),[t,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[i,r]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[u,m]=(0,n.useState)([]),[j,x]=(0,n.useState)([]),f=window.location.href,g=new URLSearchParams(f.split("?")[1]).get("id");(0,n.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("&")[0].split("=")[1];m(e)}}),[c]),(0,n.useEffect)((()=>{v()}),[u]),console.log(u,">>>>>>>>>>>>>>planid");const v=()=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/yacht_plan_details/${u}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;console.log(t,">>>>>>>>>>>>>>result");const l=null===t||void 0===t?void 0:t.company_id;x(l),_(l)}))},_=e=>{console.log(e,">>>>>>>>>>>>>>company_id"),console.log(u,">>>>>>>>>>>>>>planid");const t={method:"GET",headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/getBlacklistYatch?id=${e}`,t).then((e=>e.json())).then((e=>{const n=e.data;console.log(n,">>>>>>>>>   >>>>>list"),p(n),fetch(`https://insuranceapi-3o5t.onrender.com/api/yacht_plan_details/${u}`,t).then((e=>e.json())).then((e=>{console.log(e,">>>>>>>>>>>>>>data");const t=e.data.black_listed_Yacht;console.log(t,">>>>>>>>>>>>>>motorplandetails");const s=[];for(let l=0;l<n.length;l++)for(let e=0;e<t.length;e++){let c=n[l].blackListYatch;t[e].modelId==c._id&&(n[l].checked=!0,n[l].topup=t[e].topup,s.push({modelId:t[e].modelId,topup:t[e].topup}))}console.log(n,">>>>>>>>>>>>>>list"),l(n),r(s)}))}))};return(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-md-12",children:(0,o.jsxs)("div",{className:"card ",children:[(0,o.jsx)("div",{className:"card-header",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("h4",{children:"Black Listed Vehicle"})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("a",{href:"/yachtplan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("table",{className:"table table-bordered",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,o.jsx)("strong",{children:"#"})}),(0,o.jsx)("th",{children:(0,o.jsx)("strong",{children:"Start Year"})}),(0,o.jsx)("th",{children:(0,o.jsx)("strong",{children:"Make Yacht"})}),(0,o.jsx)("th",{children:(0,o.jsx)("strong",{children:"Model Yacht"})}),(0,o.jsx)("th",{children:(0,o.jsx)("strong",{children:"Body Type"})}),(0,o.jsx)("th",{children:(0,o.jsx)("strong",{children:"Engine"})}),(0,o.jsx)("th",{children:(0,o.jsx)("strong",{children:"Value"})})]})}),(0,o.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((e=>{var t,l,n,s,c;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("div",{className:"checkboxs",children:(0,o.jsx)("input",{className:"form-check-input",type:"checkbox",name:"flexCheckDefault",defaultChecked:e.checked,onChange:t=>((e,t)=>{const l=[...i];if(!0===e.target.checked)t.checked=!0,l.push({modelId:t.blackListYatch._id,topup:""});else if(!1===e.target.checked){t.checked=!1;const e=l.findIndex((e=>e.modelId===t.blackListYatch._id));-1!==e&&l.splice(e,1)}r(l)})(t,e)})})}),(0,o.jsx)("td",{children:null===e||void 0===e||null===(t=e.blackListYatch)||void 0===t?void 0:t.start_year}),(0,o.jsx)("td",{children:null===e||void 0===e||null===(l=e.yachtmakes[0])||void 0===l?void 0:l.name}),(0,o.jsx)("td",{children:null===e||void 0===e||null===(n=e.blackListYatch)||void 0===n?void 0:n.name}),(0,o.jsx)("td",{children:null===e||void 0===e||null===(s=e.yatch_body_type_lists[0])||void 0===s?void 0:s.yacht_body_type}),(0,o.jsx)("td",{children:null===e||void 0===e||null===(c=e.blackListYatch)||void 0===c?void 0:c.engine}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{className:"form-group",children:(0,o.jsx)("input",{type:"text",name:"topup",className:"form-control",disabled:!0!==e.checked,onChange:t=>((e,t)=>{const l=(new FormData).get("topup"),{name:n,value:s}=e.target;r((e=>{const c=[...e];console.log(c,">>>>>>>>>>>>>>> new data");const a=c.findIndex((e=>e.modelId===t._id));return-1!==a?c[a]={...c[a],[n]:s}:c.push({modelId:t._id,topup:l}),c}))})(t,e.blackListYatch),defaultValue:e.topup?e.topup:""})})})]},e._id)}))})]})}),(0,o.jsx)("div",{className:"card-footer",children:(0,o.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(console.log(i,">>>>>>>>>>>>>>> submit data"),i.map((e=>""===e.topup||0===e.topup)).includes(!0))return a()("Please fill the value for all fields",{icon:"warning"}),!1;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g,blackListArr:i})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_black_listed_Yacht",e).then((e=>e.json())).then((e=>{window.location.href="/BlacklistYacht?id="+g,console.log(e,">>>>>>>>>>>>>>>data")}))},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=7740.c5ea100e.chunk.js.map