"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8775],{68775:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var t=s(65043),l=s(73216),o=s(73023),r=s.n(o),n=s(54168),i=s(70579);const c=()=>{const e=(0,l.Zp)(),[a]=(0,t.useState)(15),[s,o]=(0,t.useState)(0),[c,d]=(0,t.useState)(1),[m,h]=(0,t.useState)([]),[u,p]=(0,t.useState)([]);(0,t.useEffect)((()=>{f()}),[]);const f=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{console.log(e);const a=null===e||void 0===e?void 0:e.data,s=null===a||void 0===a?void 0:a.map((e=>({label:null===e||void 0===e?void 0:e.line_of_business_name,value:null===e||void 0===e?void 0:e._id})));h(s)}))},j=async(e,a)=>{const s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")||0}};await fetch(`https://insuranceapi-3o5t.onrender.com/api/getRequestForUserCreate?page=${e}&limit=${a}`,s).then((e=>e.json())).then((e=>{console.log(e.data);const s=e.total/a,t=Math.ceil(s);o(t);let l=0;const r=e.data;console.log(r.filter((e=>0==e.agentApprovalStatus))),l=null===r||void 0===r?void 0:r.length,console.log(l),localStorage.setItem("request",l)}))};return(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("div",{className:"card",style:{marginTop:"20px"},children:(0,i.jsx)("div",{className:"card-header",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)("h4",{className:"card-title",children:"Add User"})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)("a",{href:"/insurancecompanydashboard",className:"btn btn-primary",style:{float:"right"},children:"Back"})}),(0,i.jsx)("div",{className:"card-body",children:(0,i.jsxs)("form",{action:"/",method:"POST",onSubmit:async s=>{s.preventDefault();const t=new FormData(s.target),l=t.get("staff_name"),o=t.get("staff_email"),n=t.get("staff_mobile"),i=t.get("date_of_birth"),d=u;console.log(l,o,n,i,d);const m={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")||0},body:JSON.stringify({name:l,email:o,mobile:n,date_of_brith:i,line_of_business:d})};fetch("https://insuranceapi-3o5t.onrender.com/api/requestForUserCreate",m).then((e=>e.json())).then((s=>{console.log(s),201==s.status?(r()("Success","User Added Successfully","success"),e("/insurancecompanydashboard"),console.log(s.data),j(c,a)):r()("Error","Failed to Add User","error")}))},children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Name"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"staff_name",placeholder:"Enter Name",autoComplete:"off",required:!0})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Email"}),(0,i.jsx)("input",{type:"email",className:"form-control",name:"staff_email",placeholder:"Enter Email",autoComplete:"off",required:!0})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Mobile"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"staff_mobile",placeholder:"Enter Mobile",autoComplete:"off",required:!0})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"D.O.B "}),(0,i.jsx)("input",{type:"date",className:"form-control",name:"date_of_birth",format:"dd-mm-yyyy",placeholder:"Select Date Of Birth",autoComplete:"off",required:!0})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Line Of Business "}),(0,i.jsx)(n.default,{options:m,displayValue:"label",onSelect:p,onRemove:p,placeholder:"Select LOB",showCheckbox:!0,showArrow:!0})]})})]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",style:{textAlign:"right"},children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})})})]})})]})})})})})})}}}]);
//# sourceMappingURL=8775.ad860b63.chunk.js.map