"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[211,1072,8691,6310],{70211:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var n=t(65043),s=t(92157),o=t.n(s),l=t(73216),r=t(1177),i=t(84217),d=t(53519),c=t(61072),h=t(14282),p=t(86178),m=t.n(p),u=t(30710),x=t(70579);const j=function(e){var a;let{filterOptions:t,defaultOptions:s,updateSharedData:p}=e;const j=(0,l.Zp)(),[v,f]=(0,n.useState)([]),[g,y]=(0,n.useState)([]),[b,_]=(0,n.useState)([]),[N,w]=(0,n.useState)([]),[k]=(0,n.useState)(5),[S,C]=(0,n.useState)(0),[A,O]=(0,n.useState)(1),[L,T]=(0,n.useState)(!1),[F,D]=(0,n.useState)(""),[I,P]=(0,n.useState)(""),[$,E]=(0,n.useState)(""),[B,H]=(0,n.useState)([]),[J,R]=(0,n.useState)(""),[M,z]=(0,n.useState)(!1),[U,Y]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?j("/login"):(Z(A,k),Q(),W())}),[t]);const q=JSON.parse(localStorage.getItem("user")),G=(q.usertype,null===q||void 0===q?void 0:q.location);null===q||void 0===q||null===(a=q.dashboard_permission[0])||void 0===a||a.sa_dashboard;let K="";G&&G.length>0&&G[0].loc_id&&(K=G[0].loc_id);const Z=async(e,a)=>{try{z(!0);let n=t.location,o=t.lob,l=t.businessType,r=t.agent,i=t.dateRange,d=s.startdate,c=s.enddate;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):s.defaultlocation.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):s.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):s.defaultbusinessType.map((e=>e.value)),r=null!=r&&void 0!=r&&Array.isArray(r)&&0!==r.length?r.map((e=>e.value)):s.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),p=JSON.parse(localStorage.getItem("user")).usertype,m={method:"POST",body:JSON.stringify({page:e,limit:a,location:n,lob:o,business_type:l,newagent:r,dateRange:i,startdate:d,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"6462250eb201a6f07b2dff3a"!=p&&"646224eab201a6f07b2dff36"!=p&&"646224deb201a6f07b2dff32"!=p&&"64622526b201a6f07b2dff3e"!=p||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Hot&dashboardType=salesAdvisorDashboard",m).then((e=>e.json())).then((e=>{const t=e.total;Y(t);const n=t/a,s=Math.ceil(n);C(s);const o=e.data;f(o)})).catch((e=>{console.log(e)})).finally((()=>{z(!1)})),"64622470b201a6f07b2dff22"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Hot&dashboardType=salesAdvisorDashboard",m).then((e=>e.json())).then((e=>{const t=e.total;Y(t);const n=t/a,s=Math.ceil(n);C(s);const o=e.data;f(o)})).catch((e=>{console.log(e)})).finally((()=>{z(!1)}))}catch(n){console.log(n)}},Q=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});a=await a.json(),y(a.data)},V=(A-1)*k,W=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,n=[];for(let s=0;s<t;s++){const e={label:a[s].name,value:a[s]._id};n.push(e)}H(n)}))},X=e=>{const a=B.find((a=>a.value===e));return a?a.label:""},[ee,ae]=(0,n.useState)({}),[te,ne]=(0,n.useState)(!1),[se,oe]=(0,n.useState)("");return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.A,{children:(0,x.jsxs)(r.A.Item,{eventKey:"1",children:[(0,x.jsx)(r.A.Header,{children:(0,x.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,x.jsx)("strong",{children:"Hot Leads"}),U>0?(0,x.jsx)("div",{className:"dashboardNotify",children:(0,x.jsx)("h6",{children:U})}):""]})}),(0,x.jsxs)(r.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,x.jsxs)("table",{className:"table table-bordered",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"table-info",children:[(0,x.jsx)("th",{scope:"col",children:"Sr"}),(0,x.jsx)("th",{scope:"col",children:"Name"}),(0,x.jsx)("th",{scope:"col",children:"Phone No."}),(0,x.jsx)("th",{scope:"col",children:"Email-ID"}),(0,x.jsx)("th",{scope:"col",children:"Nationality"}),(0,x.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,x.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,x.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,x.jsx)("th",{scope:"col",children:"Link"}),(0,x.jsx)("th",{scope:"col",children:"DP"}),(0,x.jsx)("th",{scope:"col",children:"Lead Status"}),(0,x.jsx)("th",{scope:"col",children:"Forward To"}),(0,x.jsx)("th",{scope:"col",children:"Action"})]})}),(0,x.jsx)("tbody",{children:M?(0,x.jsx)("div",{className:"loader-container",children:(0,x.jsx)(u.A,{color:"#000000",loading:M,size:50})}):(0,x.jsx)(x.Fragment,{children:v.length>0?v.map(((e,a)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:V+a+1}),(0,x.jsxs)("td",{onClick:()=>(e=>{try{console.log(e),window.open(e,"_blank")}catch(a){console.log(a)}})(e.buisnessEntityCostomerLink),children:[" ",e.name]}),(0,x.jsx)("td",{children:(0,x.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,x.jsx)("td",{children:(0,x.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,x.jsx)("td",{children:e.nationality}),(0,x.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,x.jsx)("td",{children:e.assign_salesadvisor_timestamp?m()(e.assign_salesadvisor_timestamp).fromNow():m()(e.new_lead_timestamp).fromNow()}),(0,x.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,x.jsx)("td",{className:"buttons_icons",children:(0,x.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(e=>{console.log(e),oe(e),ne(!0)})(e.buisnessEntityCostomerLink),children:(0,x.jsx)("i",{className:"fa-solid fa-link"})})}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:a=>{return t=e._id,n=a.target.checked,void E((e=>({...e,[t]:n})));var t,n},required:!0})}),(0,x.jsx)("td",{children:(0,x.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:a=>((e,a)=>{"Forward"!=a&&(R(""),document.getElementById(e).value="");P((t=>({...t,[e]:a}))),ae((t=>({...t,[e]:a})))})(e._id,a.target.value),children:[(0,x.jsx)("option",{value:"",hidden:!0,children:e.lead_status}),g.map(((e,a)=>(0,x.jsx)("option",{value:e.lead_status,children:e.lead_status},a)))]})}),(0,x.jsx)("td",{children:(0,x.jsxs)("select",{name:"lead_status",id:e._id,onChange:a=>{return t=e._id,n=a.target.value,void R((e=>({...e,[t]:n})));var t,n},disabled:"Forward"!==ee[e._id],children:[(0,x.jsx)("option",{value:"",hidden:!0,children:void 0==e.forward_to||""==e.forward_to||null==e.forward_to?"Document Chaser":X(e.forward_to)}),B.map(((e,a)=>(0,x.jsx)("option",{value:e.value,children:e.label},a)))]})}),(0,x.jsx)("td",{className:"buttons_icons",children:(0,x.jsx)("button",{className:"btn btn-primary btn-sm ",onClick:()=>{var a;return((e,a)=>{"Motor"===a&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===a&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===a&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===a&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===a&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===a&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,null===(a=e.policy_type[0])||void 0===a?void 0:a.line_of_business_name)},children:(0,x.jsx)("i",{className:"fa fa-eye"})})})]},a))):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"12",className:"text-center",children:(0,x.jsx)("strong",{children:"No Records Found"})})})})})]}),(0,x.jsxs)("section",{children:[(0,x.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const a=JSON.parse(localStorage.getItem("user"))._id,t="{}"===JSON.stringify($)?null:$,n="{}"===JSON.stringify(I)?null:I,s=""===J?null:J,o=new Set(Object.keys(t||{}).concat(Object.keys(n||{}),Object.keys(s||{})));for(const l of o){const e=$[l],t=I[l],n=J[l];if("Forward"===t&&(""===n||null===n||void 0===n))return alert("Please select DC agent"),!1;const s={method:"POST",body:JSON.stringify({id:l,direct_payment:e,lead_status:t,forward_to:n,assigningagent:a}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",s).then((e=>e.json())).then((e=>{Z(A,k),p(Z(A,k))}))}},children:"Save "}),(0,x.jsx)(o(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:S,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;O(a+1),Z(a+1,k,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,x.jsxs)(i.A,{size:"lg",show:L,onHide:()=>T(!1),children:[(0,x.jsx)(i.A.Header,{closeButton:!0,children:(0,x.jsx)(i.A.Title,{children:"Lead Detail"})}),(0,x.jsx)(i.A.Body,{children:(0,x.jsxs)(d.A,{children:[(0,x.jsxs)(c.A,{children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"name",children:"Name"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:b.name})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"email",children:"Email"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:b.email})]})})]}),(0,x.jsxs)(c.A,{children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:b.phoneno})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:N})]})})]})]})}),(0,x.jsx)(i.A.Footer,{children:(0,x.jsx)(h.A,{variant:"secondary",onClick:()=>T(!1),children:"Close"})})]}),(0,x.jsxs)(i.A,{size:"lg",show:te,onHide:()=>ne(!1),children:[(0,x.jsx)(i.A.Header,{closeButton:!0,children:(0,x.jsx)(i.A.Title,{children:"Link"})}),(0,x.jsx)(i.A.Body,{children:(0,x.jsx)(d.A,{children:(0,x.jsx)(c.A,{children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"name"}),(0,x.jsx)("textarea",{className:"form-control",id:"address",name:"address",value:se,readOnly:!0,children:se&&(0,x.jsx)("a",{href:se,target:"_blank",rel:"noopener noreferrer",children:se})})]})})})})}),(0,x.jsxs)(i.A.Footer,{children:[(0,x.jsx)(h.A,{variant:"primary",onClick:()=>{const e=document.createElement("textarea");e.value=se,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Link copied to clipboard!")},children:"Copy Link"}),(0,x.jsx)(h.A,{variant:"secondary",onClick:()=>ne(!1),children:"Close"})]})]})]})}},61072:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(98139),s=t.n(n),o=t(65043),l=t(67852),r=t(70579);const i=o.forwardRef(((e,a)=>{let{bsPrefix:t,className:n,as:o="div",...i}=e;const d=(0,l.oU)(t,"row"),c=(0,l.gy)(),h=(0,l.Jm)(),p=`${d}-cols`,m=[];return c.forEach((e=>{const a=i[e];let t;delete i[e],null!=a&&"object"===typeof a?({cols:t}=a):t=a;const n=e!==h?`-${e}`:"";null!=t&&m.push(`${p}${n}-${t}`)})),(0,r.jsx)(o,{ref:a,...i,className:s()(n,d,...m)})}));i.displayName="Row";const d=i},30710:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(65043),s={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function o(e){var a=function(e){if("number"===typeof e)return{value:e,unit:"px"};var a,t=(e.match(/^[0-9.]*/)||"").toString();a=t.includes(".")?parseFloat(t):parseInt(t,10);var n=(e.match(/[^0-9]*$/)||"").toString();return s[n]?{value:a,unit:n}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(a,"px.")),{value:a,unit:"px"})}(e);return"".concat(a.value).concat(a.unit)}var l=function(){return l=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++)for(var s in a=arguments[t])Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);return e},l.apply(this,arguments)},r=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)a.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]])}return t},i=function(e,a,t){var n="react-spinners-".concat(e,"-").concat(t);if("undefined"==typeof window||!window.document)return n;var s=document.createElement("style");document.head.appendChild(s);var o=s.sheet,l="\n    @keyframes ".concat(n," {\n      ").concat(a,"\n    }\n  ");return o&&o.insertRule(l,0),n}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");const d=function(e){var a=e.loading,t=void 0===a||a,s=e.color,d=void 0===s?"#000000":s,c=e.speedMultiplier,h=void 0===c?1:c,p=e.cssOverride,m=void 0===p?{}:p,u=e.size,x=void 0===u?35:u,j=r(e,["loading","color","speedMultiplier","cssOverride","size"]),v=l({background:"transparent !important",width:o(x),height:o(x),borderRadius:"100%",border:"2px solid",borderTopColor:d,borderBottomColor:"transparent",borderLeftColor:d,borderRightColor:d,display:"inline-block",animation:"".concat(i," ").concat(.75/h,"s 0s infinite linear"),animationFillMode:"both"},m);return t?n.createElement("span",l({style:v},j)):null}}}]);
//# sourceMappingURL=211.5efcc968.chunk.js.map