"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3707],{83707:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var l=s(65043),o=s(73216),n=s(73023),t=s.n(n),i=s(54168),c=s(70579);const r=()=>{const e=(0,o.Zp)(),[a,s]=(0,l.useState)(""),[n,r]=(0,l.useState)(""),[d,m]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[u,f]=(0,l.useState)(""),[x,y]=(0,l.useState)([]),[_,j]=(0,l.useState)([]),[g,N]=(0,l.useState)(""),[b,v]=(0,l.useState)(null),[S,C]=(0,l.useState)([]),[w,k]=(0,l.useState)(""),[E,T]=(0,l.useState)(""),[F,V]=(0,l.useState)(""),[D,L]=(0,l.useState)(""),[O,q]=(0,l.useState)(""),[A,B]=(0,l.useState)(""),[P,G]=(0,l.useState)("");(0,l.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];N(e),I(e),Y(),H()}}),[]);const H=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,s=a.length,l=[];for(let o=0;o<s;o++){const e={label:a[o].location_name,value:a[o]._id};l.push(e)}y(l)}))},Y=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,s=a.length,l=[];for(let o=0;o<s;o++){const e={label:a[o].line_of_business_name,value:a[o]._id};l.push(e)}j(l)}))},I=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getCompanyDetailsbyid/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{if(200===e.status){const l=e.data;var a;if(s(l.company_name),r(l.company_body),m(l.company_email_id),h(l.company_address),f(l.company_phone_no),l.default_time&&G(l.default_time),l.company_logo||k(l.company_logo[0].filename),l.company_dha_format||T(l.company_dha_format[0].filename),l.company_medical_application||V(l.company_medical_application[0].filename),l.company_salary_declaration||L(l.company_salary_declaration[0].filename),l.company_kyc_form||q(l.company_kyc_form[0].filename),!l.company_terms_condition)B(null===(a=l.company_terms_conditions[0])||void 0===a?void 0:a.filename);const o=l.company_location.split(","),n=o.length,t=[];for(let e=0;e<n;e++){const a={method:"GET",headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_location_by_id/${o[e]}`,a).then((e=>e.json())).then((e=>{t.push(e.data.location_name);if(t.length===n){const e=t.join(",").split(","),a=e.length,s=[];for(let l=0;l<a;l++){const a={label:e[l],value:o[l]};s.push(a)}C(s)}}))}const i=l.company_line_of_business_id.split(","),c=i.length,d=[];for(let e=0;e<c;e++){const a={method:"GET",headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_by_id/${i[e]}`,a).then((e=>e.json())).then((e=>{d.push(e.data[0].line_of_business_name);if(d.length===c){const e=d.join(",").split(","),a=e.length,s=[];for(let l=0;l<a;l++){const a={label:e[l],value:i[l]};s.push(a)}v(s),console.log(s,"line_of_business_name_arr_obj")}}))}}}))},K=e=>{C(e)},M=e=>{v(e)};return console.log(A),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsxs)("div",{className:"card",children:[(0,c.jsx)("div",{className:"card-header",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("h4",{className:"card-title",children:"Edit Company"})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("a",{href:"/insurance-company",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("form",{action:"/",method:"POST",onSubmit:a=>{a.preventDefault();const s=new FormData(a.target),l=s.get("company_name"),o=s.get("body"),n=s.get("email_id"),i=s.get("phone_no"),c=s.get("address"),r=s.get("default_time");if(null==S)return t()({title:"Error!",text:"Please Select Location",type:"error",icon:"error"}),!1;if(null==b)return t()({title:"Error!",text:"Please Select Line Of Business",type:"error",icon:"error"}),!1;const d=b,m=d.length,p=[];for(let e=0;e<m;e++)p.push(d[e].value);const h=S,u=h.length,f=[];for(let e=0;e<u;e++)f.push(h[e].value);const x=new FormData;x.append("company_name",l),x.append("company_body",o),x.append("company_email_id",n),x.append("company_phone_no",i),x.append("company_address",c),x.append("company_logo",w),x.append("company_dha_format",E),x.append("company_medical_application",F),x.append("company_salary_declaration",D),x.append("company_kyc_form",O),x.append("line_of_business_id",p.toString()),x.append("company_location",f.toString()),x.append("company_id",g),x.append("company_terms_conditions",A),x.append("default_time",r);fetch("https://insuranceapi-3o5t.onrender.com/api/updateCompany",{method:"POST",body:x}).then((e=>e.json())).then((a=>{200===a.status?t()({title:"Success!",text:a.message,type:"success",icon:"success"}).then((function(){e("/insurance-company")})):t()({title:"Error!",text:a.message,type:"error",icon:"error"}).then((function(){e("/insurance-company")}))}))},children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Company Name"}),(0,c.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter Company Name",name:"company_name",defaultValue:a,autoComplete:"off",required:!0})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Body"}),(0,c.jsx)("textarea",{className:"form-control",placeholder:"Enter Body",name:"body",defaultValue:n})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Email Id"}),(0,c.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter Email Id",name:"email_id",defaultValue:d,autoComplete:"off",required:!0})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Address"}),(0,c.jsx)("textarea",{className:"form-control",placeholder:"Enter Address",name:"address",defaultValue:p})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Phone No"}),(0,c.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter Phone No",name:"phone_no",defaultValue:u,autoComplete:"off",required:!0})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Location"}),(0,c.jsx)(i.default,{options:x,selectedValues:S,onSelect:K,onRemove:K,displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Company Logo"}),(0,c.jsx)("input",{type:"file",className:"form-control",name:"company_logo",accept:".png, .gif, .jpg, .jpeg",onChange:e=>k(e.target.files[0])}),w?(0,c.jsx)("img",{src:"https://insuranceapi-3o5t.onrender.com/uploads/"+w,alt:"Company Logo",className:"img-fluid"}):null]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Line Of Business"}),(0,c.jsx)(i.default,{options:_,selectedValues:b,onSelect:M,onRemove:M,displayValue:"label",placeholder:"Select Line Of Business",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",style:{position:"relative"},children:[(0,c.jsx)("label",{className:"form-label",children:"DHA Format Census List"}),(0,c.jsx)("input",{type:"file",style:{width:"90%"},className:"form-control",name:"dha_format",onChange:e=>T(e.target.files[0]),accept:".xlsx, .csv, .doc, .docx, .pdf"}),E?(0,c.jsx)("span",{style:{position:"absolute",right:"0px",padding:"10px",top:"26px"},children:(0,c.jsx)("a",{href:"https://insuranceapi-3o5t.onrender.com/uploads/"+E,target:"_blank",rel:"noreferrer",title:"View DHA Format Census List",children:(0,c.jsx)("i",{className:"fa fa-eye"})})}):null]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",style:{position:"relative"},children:[(0,c.jsx)("label",{className:"form-label",children:"Medical Application Form"}),(0,c.jsx)("input",{type:"file",style:{width:"90%"},className:"form-control",name:"medical_application",onChange:e=>V(e.target.files[0]),accept:".xlsx, .csv, .doc, .docx, .pdf"}),F?(0,c.jsx)("span",{style:{position:"absolute",right:"0px",padding:"10px",top:"26px"},children:(0,c.jsx)("a",{href:"https://insuranceapi-3o5t.onrender.com/uploads/"+F,target:"_blank",rel:"noreferrer",title:"View Medical Application Form",children:(0,c.jsx)("i",{className:"fa fa-eye"})})}):null]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",style:{position:"relative"},children:[(0,c.jsx)("label",{className:"form-label",children:"Salary Declaration Form"}),(0,c.jsx)("input",{type:"file",style:{width:"90%"},className:"form-control",name:"salary_declaration",onChange:e=>L(e.target.files[0]),accept:".xlsx, .csv, .doc, .docx, .pdf"}),D?(0,c.jsx)("span",{style:{position:"absolute",right:"0px",padding:"10px",top:"26px"},children:(0,c.jsx)("a",{href:"https://insuranceapi-3o5t.onrender.com/uploads/"+D,target:"_blank",rel:"noreferrer",title:"View Salary Declaration Form",children:(0,c.jsx)("i",{className:"fa fa-eye"})})}):null]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",style:{position:"relative"},children:[(0,c.jsx)("label",{className:"form-label",children:"KYC Form"}),(0,c.jsx)("input",{type:"file",style:{width:"90%"},className:"form-control",name:"kyc_form",onChange:e=>q(e.target.files[0]),accept:".xlsx, .csv, .doc, .docx, .pdf"}),O?(0,c.jsx)("span",{style:{position:"absolute",right:"0px",padding:"10px",top:"26px"},children:(0,c.jsx)("a",{href:"https://insuranceapi-3o5t.onrender.com/uploads/"+O,target:"_blank",rel:"noreferrer",title:"View KYC Form",children:(0,c.jsx)("i",{className:"fa fa-eye"})})}):null]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",style:{position:"relative"},children:[(0,c.jsx)("label",{className:"form-label",children:"Terms & Condition"}),(0,c.jsx)("input",{type:"file",style:{width:"90%"},className:"form-control",name:"kyc_form",onChange:e=>B(e.target.files[0]),accept:".xlsx, .csv, .doc, .docx, .pdf"}),A?(0,c.jsx)("span",{style:{position:"absolute",right:"0px",padding:"10px",top:"26px"},children:(0,c.jsx)("a",{href:"https://insuranceapi-3o5t.onrender.com/uploads/"+A,target:"_blank",rel:"noreferrer",title:"View KYC Form",children:(0,c.jsx)("i",{className:"fa fa-eye"})})}):null]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"default Time"}),(0,c.jsxs)("select",{className:"form-control",name:"default_time",required:!0,children:[(0,c.jsx)("option",{value:"",hidden:!0,children:"Select Defalut Time"}),(0,c.jsx)("option",{selected:"daily"==P,value:"daily",children:"Daily"}),(0,c.jsx)("option",{selected:"weekly"==P,value:"weekly",children:"Weekly"}),(0,c.jsx)("option",{selected:"monthly"==P,value:"monthly",children:"Monthly"}),(0,c.jsx)("option",{selected:"yearly"==P,value:"yearly",children:"Yearly"})]})]})})]}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:"Update"})})})]})})]})})})})})}}}]);
//# sourceMappingURL=3707.9f0debef.chunk.js.map