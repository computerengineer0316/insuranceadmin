"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2269],{92269:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(65043),n=a(73216),o=a(73023),l=a.n(o),i=a(92157),c=a.n(i),d=(a(54168),a(70579));const r=()=>{const e=(0,n.Zp)(),[t,a]=(0,s.useState)([]),[o]=(0,s.useState)(10),[i,r]=(0,s.useState)(0),[h,m]=(0,s.useState)(1),[p,u]=(0,s.useState)(!1),[x,j]=(0,s.useState)(""),[g,v]=(0,s.useState)([]),[_,y]=(0,s.useState)([]),[b,k]=(0,s.useState)([]),[N,f]=(0,s.useState)([]),[S,C]=(0,s.useState)(""),[T,M]=(0,s.useState)([]),[O,L]=(0,s.useState)(""),[P,w]=(0,s.useState)(""),[F,I]=(0,s.useState)(""),[$,A]=(0,s.useState)([]),[B,E]=(0,s.useState)([]);(0,s.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];j(e),J(e),D()}}),[]),(0,s.useEffect)((()=>{V(),J(x)}),[F,P,O]);const J=e=>{try{fetch(`https://insuranceapi-3o5t.onrender.com/api/getCompanyDetailsbyid/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;C(t.company_name),a(t.blackListVehicle),z(t.blackListVehicle,h,o)}))}catch(t){console.log(t)}},D=()=>{const e={method:"POST",body:JSON.stringify({make:"Make"}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/getblacklistedvehicle",e).then((e=>e.json())).then((e=>{const t=e.data;v(t)}))},V=()=>e=>{const t=e.target.value,a={method:"POST",body:JSON.stringify({makeId:[t]}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/getblacklistedvehicle",a).then((e=>e.json())).then((e=>{console.log(e.data,"data.data");const t=e.data.map((e=>({label:e.motor_model_name,value:e._id})));console.log(t,"motormodeldt"),y(t);const a=t.map((e=>e.value)),s={method:"POST",body:JSON.stringify({modelId:a}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/getblacklistedvehicle",s).then((e=>e.json())).then((e=>{console.log(e.data,"data.data");const t=e.data.map((e=>({label:e.motor_model_detail_name,value:e._id})));console.log(t,"motormodeldt"),f(t)}))}))},z=(e,t,a)=>{M([]);const s={method:"POST",body:JSON.stringify({makeId:F,modelId:P}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_Motor_model_details?page=${t}&limit=${a}&name=${O}`,s).then((e=>e.json())).then((e=>{console.log(e);const t=e.total/a,s=Math.ceil(t);r(s);const n=e.data;M(n)}))};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsxs)("div",{className:"col-md-4",children:[(0,d.jsx)("h4",{className:"card-title",children:"Black Listed Vehicle"}),(0,d.jsx)("span",{style:{border:"2px solid gray",borderRadius:"8px",backgroundColor:"gray",color:"#FFFFFF",fontSize:"20px",padding:"4px"},children:S})]}),(0,d.jsxs)("div",{className:"col-md-8",style:{textAlign:"right"},children:[(0,d.jsx)("a",{href:"/insurance-company",className:"btn btn-primary",children:"Back"}),"\xa0\xa0"]})]})}),(0,d.jsx)("div",{className:"card-header",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsxs)("div",{className:"col-lg-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Select Make"})}),(0,d.jsx)("br",{}),(0,d.jsxs)("select",{className:"form-control",value:F,onChange:e=>((e,t)=>{try{if(I(e.target.value),""===t)return void w("");fetch(`https://insuranceapi-3o5t.onrender.com/api/modelmotor/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;y(t),console.log(t,">>>>>>list model motor")}))}catch(a){console.log(a)}})(e,e.target.value),children:[(0,d.jsx)("option",{value:"",children:"-- All --"}),g.map(((e,t)=>(0,d.jsx)("option",{value:e._id,children:e.make_motor_name},t)))]})]}),(0,d.jsxs)("div",{className:"col-lg-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Select Model"})}),(0,d.jsx)("br",{}),(0,d.jsxs)("select",{value:P,className:"form-control",onChange:e=>w(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"-- All --"}),void 0!==F&&F.length>0&&_.map((e=>(0,d.jsx)("option",{value:e._id,children:e.motor_model_name},e._id)))]})]}),(0,d.jsxs)("div",{className:"col-lg-3",children:[(0,d.jsx)("label",{children:(0,d.jsx)("strong",{children:"Search"})}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{type:"text",className:"form-control",placeholder:"Search",onChange:e=>L(e.target.value)})]}),(0,d.jsx)("div",{className:"col-md-3",style:{textAlign:"right"},children:(0,d.jsx)("button",{className:"btn btn-primary",onClick:()=>(()=>{const e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/addCompanyBlackList?companyId=${x}`,e).then((e=>e.json())).then((e=>{200==e.status?(u(!1),l()({title:"Success!",text:e.message,type:"success",icon:"success"}).then((function(){}))):(u(!1),l()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){})))}))})(),children:"Submit"})})]})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("div",{className:"table-responsive",children:[(0,d.jsxs)("table",{className:"table table-bordered",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"#"}),(0,d.jsx)("th",{children:"Start Year"}),(0,d.jsx)("th",{children:"Make Motor"}),(0,d.jsx)("th",{children:"Model Motor"}),(0,d.jsx)("th",{children:"Motor Model Details"}),(0,d.jsx)("th",{children:"Body Type"}),(0,d.jsx)("th",{children:"Cylinder"})]})}),(0,d.jsx)("tbody",{children:null===T||void 0===T?void 0:T.map(((e,s)=>{var n,o,l;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"checkboxs",children:(0,d.jsx)("input",{className:"form-check-input",type:"checkbox",id:e._id,defaultChecked:null===t||void 0===t?void 0:t.includes(e._id),onChange:s=>((e,s)=>{const n=[...$],o=[...t];if(!0===e.target.checked)o.push(s._id),a(o);else if(!1===e.target.checked){const e=n.indexOf(s);n.splice(e,1);let t=o.indexOf(s._id);o.splice(t,1),a(o)}})(s,e)})})}),(0,d.jsx)("td",{children:e.motor_model_detail_start_year}),(0,d.jsx)("td",{children:null===(n=e.makeMotor)||void 0===n?void 0:n.make_motor_name}),(0,d.jsx)("td",{children:null===(o=e.motor_model[0])||void 0===o?void 0:o.motor_model_name}),(0,d.jsx)("td",{children:e.motor_model_detail_name}),(0,d.jsx)("td",{children:null===(l=e.body_type)||void 0===l?void 0:l.body_type_name}),(0,d.jsx)("td",{children:e.motor_model_detail_cylinder})]},e._id)}))})]}),(0,d.jsx)(c(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:i,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;m(t+1),z("",t+1,o)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})}),(0,d.jsx)("div",{className:"card-footer"})]})})})})})}}}]);
//# sourceMappingURL=2269.404c7789.chunk.js.map