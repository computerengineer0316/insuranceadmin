"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7103],{89494:(e,a,t)=>{t.d(a,{A:()=>s});var n=t(65043),o=t(70579);const s=function(e){let{userType:a,sendData:t,sendUsertype:s,lob:i}=e;const[r,l]=(0,n.useState)([]),[d,c]=(0,n.useState)(""),p=a,h=JSON.parse(localStorage.getItem("user"));return console.log("usertype data>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",h),(0,n.useEffect)((()=>{"64622470b201a6f07b2dff22"==(null===h||void 0===h?void 0:h.usertype)?fetch("https://insuranceapi-3o5t.onrender.com/api/adminlist",{method:"POST",body:JSON.stringify({usertype:p,lob:i}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{Array.isArray(e.data)?(console.log(e.data,"admins data >>>>>>>>>>>>>>>>>>>>>>>>>>> "),l(e.data)):console.error("Invalid data format for admins:",e)})).catch((e=>{console.error("Error fetching admins:",e)})):"646224deb201a6f07b2dff32"!=(null===h||void 0===h?void 0:h.usertype)&&"6462250eb201a6f07b2dff3a"!=(null===h||void 0===h?void 0:h.usertype)&&"646224eab201a6f07b2dff36"!=(null===h||void 0===h?void 0:h.usertype)&&"646224deb201a6f07b2dff32"!=(null===h||void 0===h?void 0:h.usertype)&&"64622526b201a6f07b2dff3e"!=(null===h||void 0===h?void 0:h.usertype)||fetch("https://insuranceapi-3o5t.onrender.com/api/get_assigned_staff",{method:"POST",body:JSON.stringify({usertype:p,lob:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>e.json())).then((e=>{if(Array.isArray(e.data)){let a=e.data,t=[];for(let e=0;e<a.length;e++)t.push(a[e].filteredSA);console.log(e.data,"supervisor assigined staff data >>>>>>>>>>>>>>||||||||||||||||||||||||>>>>>>>>>>>>>>> "),l(t)}else console.error("Invalid data format for admins:",e)})).catch((e=>{console.error("Error fetching admins:",e)}))}),[a]),console.log("admins>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",r),(0,o.jsxs)("select",{onChange:e=>{c(e.target.value),t(e.target.value),s(p)},children:[(0,o.jsx)("option",{hidden:!0,children:"select"}),r.map((e=>(0,o.jsx)("option",{value:e._id,children:e.name},e._id)))]})}},17103:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var n=t(65043),o=t(92157),s=t.n(o),i=t(73216),r=t(1177),l=t(84217),d=t(53519),c=t(61072),p=t(14282),h=t(86178),u=t.n(h),m=t(89494),f=t(30710),g=t(70579);const v=function(e){let{filterOptions:a,defaultOptions:t}=e;const o=(0,i.Zp)(),[h,v]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[x,j]=(0,n.useState)([]),[_]=(0,n.useState)(5),[w,N]=(0,n.useState)(0),[S,A]=(0,n.useState)(1),[k,C]=(0,n.useState)(!1),[O,T]=(0,n.useState)(""),[L,I]=(0,n.useState)(""),[P,D]=(0,n.useState)(!1),[E,F]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?o("/login"):M(S,_)}),[a]);const M=async(e,n)=>{D(!0);const o=JSON.parse(localStorage.getItem("user"));let s=a.location,i=a.lob,r=a.businessType,l=a.agent,d=a.dateRange,c=t.startdate,p=t.enddate,h=o.assign_staff,u=t.userType,m=t.selectedSupervisor;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):t.defaultlocation.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):t.defaultlob.map((e=>e.value)),r=null!=r&&void 0!=r&&Array.isArray(r)&&0!==r.length?r.map((e=>e.value)):t.defaultbusinessType.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):t.defaultagent.map((e=>e.value));const f=localStorage.getItem("token"),g=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",g);const b={method:"POST",body:JSON.stringify({page:e,limit:n,location:s,lob:i,business_type:r,newagent:l,dateRange:d,startdate:c,enddate:p,assign_staff:h,userType:u,selectedSupervisor:m}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f}};"6462250eb201a6f07b2dff3a"!=g&&"646224eab201a6f07b2dff36"!=g&&"646224deb201a6f07b2dff32"!=g&&"64622526b201a6f07b2dff3e"!=g||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?assignType=newLeads&dashboardType=supervisorDashboard",b).then((e=>e.json())).then((e=>{const a=e.total;F(a);const t=a/n,o=Math.ceil(t);N(o);const s=e.data;v(s),console.log("get list",s)})).catch((e=>{console.log(e)})).finally((()=>{D(!1)})),"64622470b201a6f07b2dff22"==g&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?assignType=newLeads&dashboardType=supervisorDashboard",b).then((e=>e.json())).then((e=>{const a=e.total;F(a);const t=a/n,o=Math.ceil(t);N(o);const s=e.data;v(s),console.log("get list",s)})).catch((e=>{console.log(e)})).finally((()=>{D(!1)}))},R=(S-1)*_,$=e=>{T(e)},B=e=>{I(e)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.A,{defaultActiveKey:"0",flush:!0,children:(0,g.jsxs)(r.A.Item,{eventKey:"0",children:[(0,g.jsx)(r.A.Header,{children:(0,g.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,g.jsx)("strong",{children:"Leads: Assigned/Unassigned "}),E>0?(0,g.jsx)("div",{className:"dashboardNotify",children:(0,g.jsx)("h6",{children:E})}):""]})}),(0,g.jsxs)(r.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,g.jsxs)("table",{className:"table table-bordered",children:[(0,g.jsx)("thead",{className:"thead-dark",children:(0,g.jsxs)("tr",{className:"table-info",children:[(0,g.jsx)("th",{scope:"col",children:"Sr"}),(0,g.jsx)("th",{scope:"col",children:"Name"}),(0,g.jsx)("th",{scope:"col",children:"Phone No."}),(0,g.jsx)("th",{scope:"col",children:"Email-ID"}),(0,g.jsx)("th",{scope:"col",children:"Nationality"}),(0,g.jsx)("th",{scope:"col",children:"Assigned Agent"}),(0,g.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,g.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,g.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,g.jsx)("th",{scope:"col",children:"Premium"}),(0,g.jsx)("th",{scope:"col",children:"Reassign"}),(0,g.jsx)("th",{scope:"col",children:"Action"})]})}),(0,g.jsx)("tbody",{children:P?(0,g.jsx)("div",{className:"loader-container",children:(0,g.jsx)(f.A,{color:"#ED1C24",loading:P,size:50})}):(0,g.jsx)(g.Fragment,{children:h.length>0?h.map(((e,a)=>{var t,n,o,s,i,r,l,d,c;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:R+a+1}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{try{console.log("item",e),window.open(e.buisnessEntityCostomerLink,"_blank")}catch(a){console.log(a)}})(e),children:e.name})}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,g.jsx)("td",{children:e.nationality}),(0,g.jsx)("td",{children:""!=e.assigned_agent_info?""!=e.forward_to_info?""!=e.dc_forward_to_info?(null===(t=e.dc_forward_to_info[0])||void 0===t?void 0:t.name)||"-":(null===(n=e.forward_to_info[0])||void 0===n?void 0:n.name)||"-":(null===(o=e.assigned_agent_info[0])||void 0===o?void 0:o.name)||"-":"-"}),(0,g.jsx)("td",{children:new Date(e.new_lead_timestamp).toString()}),(0,g.jsx)("td",{children:u()(e.new_lead_timestamp).fromNow()}),(0,g.jsx)("td",{children:Array.isArray(e.policy_type)&&e.policy_type.length>0?e.policy_type[0].line_of_business_name:"-"}),(0,g.jsx)("td",{children:e.final_price}),(0,g.jsx)("td",{children:(0,g.jsx)(m.A,{userType:""!=e.assigned_agent_info?""!=e.forward_to_info?""!=e.dc_forward_to_info?null===(s=e.dcforward_to_type_info)||void 0===s||null===(i=s[0])||void 0===i?void 0:i._id:null===(r=e.forward_to_type_info)||void 0===r||null===(l=r[0])||void 0===l?void 0:l._id:null===(d=e.assigned_type_info)||void 0===d||null===(c=d[0])||void 0===c?void 0:c._id:"646224eab201a6f07b2dff36",leadid:e._id,sendData:$,sendUsertype:B,lob:e.type_of_policy})}),(0,g.jsxs)("td",{className:"buttons_icons",children:[(0,g.jsx)("button",{className:"btn btn-primary btn-sm ",onClick:()=>{var a,t,n;return t=e._id,"Motor"===(n=null===(a=e.policy_type[0])||void 0===a?void 0:a.line_of_business_name)&&window.open(`/MotorLeaddetails?id=${t}`,"_blank"),"Travel"===n&&window.open(`/TravelLeaddetails?id=${t}`,"_blank"),"Medical"===n&&window.open(`/MedicalLeaddetails?id=${t}`,"_blank"),"Home"===n&&window.open(`/HomeLeaddetails?id=${t}`,"_blank"),"Yacht"===n&&window.open(`/YachtLeaddetails?id=${t}`,"_blank"),void("Other Insurance"===n&&window.open(`/OtherInsuranceLeaddetails?id=${t}`,"_blank"))},children:(0,g.jsx)("i",{className:"fa fa-eye"})}),(0,g.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(async e=>{const a=JSON.parse(localStorage.getItem("user")),t=localStorage.getItem("token"),n=a.usertype;let o=a._id;const s={method:"POST",body:JSON.stringify({agentid:O,id:e,usertype:L,login_user_id:o}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}};"6462250eb201a6f07b2dff3a"!=n&&"646224eab201a6f07b2dff36"!=n&&"646224deb201a6f07b2dff32"!=n&&"64622526b201a6f07b2dff3e"!=n||await fetch("https://insuranceapi-3o5t.onrender.com/api/reassigned_agent?dashboardType=MultiSupervisorDashboard",s).then((e=>e.json())).then((e=>{200==e.status&&(alert(e.message),M(S,_))})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==n&&await fetch("https://insuranceapi-3o5t.onrender.com/api/reassigned_agent?dashboardType=supervisorDashboard",s).then((e=>e.json())).then((e=>{200==e.status&&(alert(e.message),M(S,_))})).catch((e=>{console.log(e)}))})(e._id),children:"Update"})]})]},a)})):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"12",className:"text-center",children:(0,g.jsx)("strong",{children:"No Records Found"})})})})})]}),(0,g.jsx)("section",{children:(0,g.jsx)(s(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:w,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;A(a+1),M(a+1,_,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})}),(0,g.jsxs)(l.A,{size:"lg",show:k,onHide:()=>C(!1),children:[(0,g.jsx)(l.A.Header,{closeButton:!0,children:(0,g.jsx)(l.A.Title,{children:"Lead Detail"})}),(0,g.jsx)(l.A.Body,{children:(0,g.jsxs)(d.A,{children:[(0,g.jsxs)(c.A,{children:[(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"name",children:"Name"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:b.name})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"email",children:"Email"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:b.email})]})})]}),(0,g.jsxs)(c.A,{children:[(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:b.phoneno})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:x})]})})]})]})}),(0,g.jsx)(l.A.Footer,{children:(0,g.jsx)(p.A,{variant:"secondary",onClick:()=>C(!1),children:"Close"})})]})]})}},30710:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(65043),o={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function s(e){var a=function(e){if("number"===typeof e)return{value:e,unit:"px"};var a,t=(e.match(/^[0-9.]*/)||"").toString();a=t.includes(".")?parseFloat(t):parseInt(t,10);var n=(e.match(/[^0-9]*$/)||"").toString();return o[n]?{value:a,unit:n}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(a,"px.")),{value:a,unit:"px"})}(e);return"".concat(a.value).concat(a.unit)}var i=function(){return i=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++)for(var o in a=arguments[t])Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e},i.apply(this,arguments)},r=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)a.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t},l=function(e,a,t){var n="react-spinners-".concat(e,"-").concat(t);if("undefined"==typeof window||!window.document)return n;var o=document.createElement("style");document.head.appendChild(o);var s=o.sheet,i="\n    @keyframes ".concat(n," {\n      ").concat(a,"\n    }\n  ");return s&&s.insertRule(i,0),n}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");const d=function(e){var a=e.loading,t=void 0===a||a,o=e.color,d=void 0===o?"#000000":o,c=e.speedMultiplier,p=void 0===c?1:c,h=e.cssOverride,u=void 0===h?{}:h,m=e.size,f=void 0===m?35:m,g=r(e,["loading","color","speedMultiplier","cssOverride","size"]),v=i({background:"transparent !important",width:s(f),height:s(f),borderRadius:"100%",border:"2px solid",borderTopColor:d,borderBottomColor:"transparent",borderLeftColor:d,borderRightColor:d,display:"inline-block",animation:"".concat(l," ").concat(.75/p,"s 0s infinite linear"),animationFillMode:"both"},u);return t?n.createElement("span",i({style:v},g)):null}}}]);
//# sourceMappingURL=7103.e74a747d.chunk.js.map