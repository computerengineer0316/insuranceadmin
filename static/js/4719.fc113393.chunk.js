"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4719],{84719:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(65043),n=t(73216),i=t(92157),r=t.n(i),c=t(73023),l=t.n(c),o=t(70579);const d=()=>{const e=(0,n.Zp)(),[a,t]=(0,s.useState)([]),[i]=(0,s.useState)(10),[c,d]=(0,s.useState)(1),[h,p]=(0,s.useState)(1),[m,u]=(0,s.useState)("");(0,s.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];u(e),j(h,i,e)}}),[]);const j=(e,a,s)=>{t([]);const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e,perPage:a,travel_plan_id:s})};fetch("https://insuranceapi-3o5t.onrender.com/api/travelplanprice",n).then((e=>e.json())).then((e=>{const s=e.total,n=s/a,i=Math.ceil(n);d(i),console.log("price total>>>>>>>>>>>>>>",s),t(e.data)}))},x=(e,a)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/UpdateTravelPlanPriceStatus?id=${e}&status=${a}`,{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(l()("Success!",e.message,{icon:"success"}),j(h,i,m)):l()("Error !",e.message,{icon:"error"})}))},g=(h-1)*i;return(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-md-12",children:(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"card-header",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsx)("h4",{className:"card-title",children:"Plan Price"})}),(0,o.jsxs)("div",{className:"col-md-8",children:[(0,o.jsx)("a",{href:`/AddPlanPrice?id=${m}`,className:"btn btn-primary",style:{float:"right"},children:"Add Plan Price"}),(0,o.jsx)("a",{href:"/travel-plan",className:"btn btn-primary",style:{float:"right",marginRight:"4px"},children:"Back"})]})]})}),(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsxs)("table",{className:"table table-bordered",children:[(0,o.jsx)("thead",{className:"thead-dark",children:(0,o.jsxs)("tr",{className:"table-info",children:[(0,o.jsx)("th",{children:"Sr No."}),(0,o.jsx)("th",{children:"Price Name"}),(0,o.jsx)("th",{children:"Plan Type"}),(0,o.jsx)("th",{children:"Region"}),(0,o.jsx)("th",{children:"Cover Type"}),(0,o.jsx)("th",{children:"Action"})]})}),(0,o.jsx)("tbody",{children:a.length>0?a.map(((e,a)=>{var t;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:g+a+1}),(0,o.jsx)("td",{children:e.price_name}),(0,o.jsx)("td",{children:e.plan_type[0].travel_plan_type}),(0,o.jsx)("td",{children:e.regions.map((e=>e.travel_region)).join(", ")}),(0,o.jsx)("td",{children:null===(t=e.cover_type[0])||void 0===t?void 0:t.travel_cover_type}),(0,o.jsxs)("td",{children:[(0,o.jsx)("a",{href:`/EditPlanPrice?id=${e._id}`,className:"btn btn-primary mx-1",children:"Edit"}),!0===e.status?(0,o.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&x(e._id,!1)},children:"Deactivate"}):(0,o.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&x(e._id,!0)},children:"Activate"}),(0,o.jsx)("button",{className:"btn btn-warning mx-1",onClick:()=>{var a;window.confirm("Are you sure you wish to delete this item?")&&(a=e._id,fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteplanprice?id=${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(l()("Poof! Your plan price has been deleted!",{icon:"success",button:!1}),j(h,i,m),setTimeout((()=>{l().close()}),1e3)):(l()("Oops! Something went wrong.",{icon:"error",button:!1}),j(h,i,m),setTimeout((()=>{l().close()}),1e3))})))},children:"Delete"})]})]},a)})):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"5",className:"text-center",children:"No Data Found"})})})]}),(0,o.jsx)(r(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:c,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const a=e.selected;p(a+1),j(a+1,i,m)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})})})})}}}]);
//# sourceMappingURL=4719.fc113393.chunk.js.map