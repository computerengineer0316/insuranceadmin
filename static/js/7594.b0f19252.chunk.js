"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7594,1072,8691,6310],{67594:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var n=a(65043),s=a(92157),o=a.n(s),l=a(73216),r=a(1177),i=a(84217),c=a(53519),d=a(61072),p=a(14282),h=a(86178),m=a.n(h),u=a(30710),g=a(70579);const j=function(e){let{filterOptions:t,defaultOptions:a,updateSharedData:s}=e;const h=(0,l.Zp)(),[j,x]=(0,n.useState)([]),[f,v]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[_,N]=(0,n.useState)([]),[w]=(0,n.useState)(5),[S,C]=(0,n.useState)(0),[k,O]=(0,n.useState)(1),[A,T]=(0,n.useState)(!1),[P,D]=(0,n.useState)(""),[L,F]=(0,n.useState)(""),[I,J]=(0,n.useState)(""),[R,E]=(0,n.useState)([]),[$,B]=(0,n.useState)(""),[H,z]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?h("/login"):(M(k,w),q(),K())}),[t]);const M=async(e,n)=>{z(!0);let s=t.location,o=t.lob,l=t.businessType,r=t.agent,i=t.dateRange,c=a.startdate,d=a.enddate;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):[],o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):[],l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):[],r=null!=r&&void 0!=r&&Array.isArray(r)&&0!==r.length?r.map((e=>e.value)):a.defaultagent.map((e=>e.value));const p=localStorage.getItem("token"),h=JSON.parse(localStorage.getItem("user")).usertype,m={method:"POST",body:JSON.stringify({page:e,limit:n,location:s,lob:o,business_type:l,newagent:r,dateRange:i,startdate:c,enddate:d}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+p}};"646224eab201a6f07b2dff36"==h&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Hot",m).then((e=>e.json())).then((e=>{const t=e.total/n,a=Math.ceil(t);C(a);const s=e.data;x(s)})).catch((e=>{console.log(e)})).finally((()=>{z(!1)})),"64622470b201a6f07b2dff22"==h&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Hot&dashboardType=salesAdvisorDashboard",m).then((e=>e.json())).then((e=>{const t=e.total/n,a=Math.ceil(t);C(a);const s=e.data;x(s)})).catch((e=>{console.log(e)})).finally((()=>{z(!1)}))},q=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let t=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});t=await t.json(),v(t.data)},G=(k-1)*w,K=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getDocumentChaser",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,n=[];for(let s=0;s<a;s++){const e={label:t[s].name,value:t[s]._id};n.push(e)}E(n)}))},U=e=>{const t=R.find((t=>t.value===e));return t?t.label:""};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.A,{children:(0,g.jsxs)(r.A.Item,{eventKey:"1",children:[(0,g.jsx)(r.A.Header,{children:(0,g.jsx)("div",{className:"card-header new_leads",children:(0,g.jsx)("strong",{children:"Hot Leads"})})}),(0,g.jsxs)(r.A.Body,{style:{padding:"2px"},children:[(0,g.jsxs)("table",{className:"table solid",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"table-info",children:[(0,g.jsx)("th",{scope:"col",children:"Sr"}),(0,g.jsx)("th",{scope:"col",children:"Name"}),(0,g.jsx)("th",{scope:"col",children:"Phone No."}),(0,g.jsx)("th",{scope:"col",children:"Email-ID"}),(0,g.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,g.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,g.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,g.jsx)("th",{scope:"col",children:"Direct Payment"}),(0,g.jsx)("th",{scope:"col",children:"Lead Status"}),(0,g.jsx)("th",{scope:"col",children:"Forward To"}),(0,g.jsx)("th",{scope:"col",children:"Action"})]})}),(0,g.jsx)("tbody",{children:H?(0,g.jsx)("div",{className:"loader-container",children:(0,g.jsx)(u.A,{color:"#000000",loading:H,size:50})}):(0,g.jsx)(g.Fragment,{children:j.length>0?j.map(((e,t)=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:G+t+1}),(0,g.jsx)("td",{children:e.name}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`https://wa.me/${e}`;window.open(t)})(e.phoneno),children:e.phoneno})}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`mailto:${e}`;window.open(t)})(e.email),children:e.email})}),(0,g.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,g.jsx)("td",{children:e.assign_salesadvisor_timestamp?m()(e.assign_salesadvisor_timestamp).fromNow():m()(e.new_lead_timestamp).fromNow()}),(0,g.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:t=>{return a=e._id,n=t.target.checked,void J((e=>({...e,[a]:n})));var a,n},required:!0})}),(0,g.jsx)("td",{children:(0,g.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:t=>{return a=e._id,n=t.target.value,void F((e=>({...e,[a]:n})));var a,n},children:[(0,g.jsx)("option",{value:"",hidden:!0,children:e.lead_status}),f.map(((e,t)=>(0,g.jsx)("option",{value:e.lead_status,children:e.lead_status},t)))]})}),(0,g.jsx)("td",{children:(0,g.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:t=>{return a=e._id,n=t.target.value,void B((e=>({...e,[a]:n})));var a,n},children:[(0,g.jsx)("option",{value:"",hidden:!0,children:void 0==e.forward_to||""==e.forward_to||null==e.forward_to?"Document Chaser":U(e.forward_to)}),R.map(((e,t)=>(0,g.jsx)("option",{value:e.value,children:e.label},t)))]})}),(0,g.jsx)("td",{className:"buttons_icons",children:(0,g.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(async e=>{D(e);let t=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_new_lead_detailsbyid",{method:"post",body:JSON.stringify({ParamValue:e}),headers:{"Content-Type":"application/json"}});t=await t.json(),b(t.data[0]),N(t.data[0].policy_type[0].line_of_business_name),T(!0)})(e._id),children:(0,g.jsx)("i",{className:"fa-solid fa-eye"})})})]},t))):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"12",className:"text-center",children:(0,g.jsx)("strong",{children:"No Records Found"})})})})})]}),(0,g.jsxs)("section",{children:[(0,g.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user"))._id,a="{}"===JSON.stringify(I)?null:I,n="{}"===JSON.stringify(L)?null:L,o=""===$?null:$,l=new Set(Object.keys(a||{}).concat(Object.keys(n||{}),Object.keys(o||{})));for(const r of l){const e=I[r],a=L[r],n=$[r],o={method:"POST",body:JSON.stringify({id:r,direct_payment:e,lead_status:a,forward_to:n,assigningagent:t}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",o).then((e=>e.json())).then((e=>{M(k,w),s(M(k,w))}))}},children:"Save "}),(0,g.jsx)(o(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:S,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const t=e.selected;O(t+1),M(t+1,w,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,g.jsxs)(i.A,{size:"lg",show:A,onHide:()=>T(!1),children:[(0,g.jsx)(i.A.Header,{closeButton:!0,children:(0,g.jsx)(i.A.Title,{children:"Lead Detail"})}),(0,g.jsx)(i.A.Body,{children:(0,g.jsxs)(c.A,{children:[(0,g.jsxs)(d.A,{children:[(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"name",children:"Name"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:y.name})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"email",children:"Email"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:y.email})]})})]}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:y.phoneno})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:_})]})})]})]})}),(0,g.jsx)(i.A.Footer,{children:(0,g.jsx)(p.A,{variant:"secondary",onClick:()=>T(!1),children:"Close"})})]})]})}},61072:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(98139),s=a.n(n),o=a(65043),l=a(67852),r=a(70579);const i=o.forwardRef(((e,t)=>{let{bsPrefix:a,className:n,as:o="div",...i}=e;const c=(0,l.oU)(a,"row"),d=(0,l.gy)(),p=(0,l.Jm)(),h=`${c}-cols`,m=[];return d.forEach((e=>{const t=i[e];let a;delete i[e],null!=t&&"object"===typeof t?({cols:a}=t):a=t;const n=e!==p?`-${e}`:"";null!=a&&m.push(`${h}${n}-${a}`)})),(0,r.jsx)(o,{ref:t,...i,className:s()(n,c,...m)})}));i.displayName="Row";const c=i},30710:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(65043),s={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function o(e){var t=function(e){if("number"===typeof e)return{value:e,unit:"px"};var t,a=(e.match(/^[0-9.]*/)||"").toString();t=a.includes(".")?parseFloat(a):parseInt(a,10);var n=(e.match(/[^0-9]*$/)||"").toString();return s[n]?{value:t,unit:n}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}(e);return"".concat(t.value).concat(t.unit)}var l=function(){return l=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},l.apply(this,arguments)},r=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a},i=function(e,t,a){var n="react-spinners-".concat(e,"-").concat(a);if("undefined"==typeof window||!window.document)return n;var s=document.createElement("style");document.head.appendChild(s);var o=s.sheet,l="\n    @keyframes ".concat(n," {\n      ").concat(t,"\n    }\n  ");return o&&o.insertRule(l,0),n}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");const c=function(e){var t=e.loading,a=void 0===t||t,s=e.color,c=void 0===s?"#000000":s,d=e.speedMultiplier,p=void 0===d?1:d,h=e.cssOverride,m=void 0===h?{}:h,u=e.size,g=void 0===u?35:u,j=r(e,["loading","color","speedMultiplier","cssOverride","size"]),x=l({background:"transparent !important",width:o(g),height:o(g),borderRadius:"100%",border:"2px solid",borderTopColor:c,borderBottomColor:"transparent",borderLeftColor:c,borderRightColor:c,display:"inline-block",animation:"".concat(i," ").concat(.75/p,"s 0s infinite linear"),animationFillMode:"both"},m);return a?n.createElement("span",l({style:x},j)):null}}}]);
//# sourceMappingURL=7594.b0f19252.chunk.js.map