{"version":3,"file":"static/js/2586.4444cc1d.chunk.js","mappings":"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","sources":["views/plan/Additional-cover/ViewAdditionalCover.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst ViewAdditionalCover = () => {\n    const navigate = useNavigate();\n    const [additionalcover, setAdditionalcover] = useState([]);\n    const [enabledRows, setEnabledRows] = useState({});\n    const [formData, setFormData] = useState([]);\n    const [planName, setPlanName] = useState('')\n    const [planType, setPlanType] = useState('')\n    const [company_name, setCompanyName] = useState('')\n    const customURL = window.location.href;\n    const params = new URLSearchParams(customURL.split('?')[1]);\n    const ParamValue = params.get('id');\n    const ParamType = params.get('type');\n\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token === null || token === undefined || token === '') {\n            navigate('/login')\n        }\n        else {\n            const url = window.location.href;\n            const url1 = url.split(\"/\")[3];\n            const url2 = url1.split(\"?\")[1];\n            const url3 = url2.split(\"&\");\n            const id = url3[0].split(\"=\")[1];\n            const type = url3[1].split(\"=\")[1];\n            getadditonalcover(id, type);\n            setPlanType(type)\n        }\n    }, []);\n\n    const handleCheckboxChange = (e, cover) => {\n        const stateValue = [...formData]\n        console.log(stateValue, \">>>>before values\")\n\n        if (e.target.checked === true) {\n            cover['checked'] = 'checked';\n            stateValue.push(cover)\n        } else if (e.target.checked === false) {\n\n            const indx = stateValue.indexOf(cover)\n            console.log(indx)\n            stateValue.splice(indx, 1)\n        }\n        setFormData(stateValue)\n        console.log(stateValue, \">>>>updated values\")\n    };\n\n    const getadditonalcover = async (id, type) => {\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        };\n        await fetch(`https://insuranceapi-3o5t.onrender.com/api/get_additional_cover/${id}/${type}`, requestOptions)\n            .then(response => response.json())\n            .then(data => {\n                const additionalcover = data.data;\n                const addcoverlen = additionalcover.length;\n\n\n                const requestOption = {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                };\n                let url = '';\n                if (type == 'motor') {\n                    url = `https://insuranceapi-3o5t.onrender.com/api/motor_plan_details/${id}`;\n                }\n                if (type == 'travel') {\n                    url = `https://insuranceapi-3o5t.onrender.com/api/travel_plan_details/${id}`;\n                }\n                if (type == 'yacht') {\n                    url = `https://insuranceapi-3o5t.onrender.com/api/yacht_plan_details/${id}`;\n                }\n                if (type == 'home') {\n                    url = `https://insuranceapi-3o5t.onrender.com/api/home_plan_details/${id}`;\n                }\n                if (type == 'medical') {\n                    url = `https://insuranceapi-3o5t.onrender.com/api/single_medical_plan_details/${id}`;\n                }\n                fetch(url, requestOption)\n                    .then(response => response.json())\n                    .then(data => {\n                        const motorplandetails = data.data.additional_cover_arr;\n                        setPlanName(data.data.plan_name)\n                        setCompanyName(data.company_name)\n                        console.log(motorplandetails, \"additional cover array\")\n                        const coverdata = [];\n                        for (let i = 0; i < addcoverlen; i++) {\n                            for (let j = 0; j < motorplandetails.length; j++) {\n                                if (additionalcover[i]._id == motorplandetails[j].additional_cover_id) {\n                                    coverdata.push(additionalcover[i])\n                                    additionalcover[i]['checked'] = 'checked';\n                                    additionalcover[i]['value'] = motorplandetails[j].additional_cover_value;\n                                    additionalcover[i]['additional_cover_description'] = motorplandetails[j].additional_cover_desc;\n                                }\n                                console.log(additionalcover)\n                            }\n                        }\n                        setAdditionalcover(additionalcover)\n                        setFormData(coverdata)\n                    });\n            });\n    }\n\n    const handleInputChange = (e, _id) => {\n\n        const { name, value } = e.target;\n        setFormData((prevData) => {\n            const newData = [...prevData];\n            const existingDataIndex = newData.findIndex((item) => item._id === _id);\n            if (existingDataIndex !== -1) {\n                newData[existingDataIndex] = {\n                    ...newData[existingDataIndex],\n                    [name]: value,\n                };\n            }\n            else {\n                newData.push({\n                    _id,\n                    [name]: value,\n                });\n            }\n            return newData;\n        });\n    };\n\n    const handleSubmit = () => {\n        console.log(formData, \"submit data\")\n\n        for (var i = 0; i < formData.length; i++) {\n            if (formData[i].checked == \"checked\" && (formData[i].additional_cover_description === undefined || formData[i].additional_cover_description === '')) {\n                alert(\"Please enter a description for data \" + (formData[i].additional_cover_label));\n                return false;\n            }\n        }\n\n        // for (var i = 0; i < formData.length; i++) {\n        //     if (formData[i].checked == \"checked\" && (formData[i].value === undefined || formData[i].value === '')) {\n        //         alert(\"Please enter a value for data \" + (i + 1));\n        //         return false;\n        //     }\n        // }\n\n\n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ id: ParamValue, type: ParamType, formData: formData }),\n        };\n        fetch(`https://insuranceapi-3o5t.onrender.com/api/add_plan_additional_cover`, requestOptions)\n            .then(response => response.json())\n            .then(data => {\n                navigate(-1)\n                // window.location.href = '/ViewAdditionalCover?id='+ParamValue+'&type='+ParamType;\n            });\n    };\n\n    return (\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col-md-12\">\n                    <div className=\"card \">\n                        <div className=\"card-header\">\n                            <div className='row'>\n                                <div className='col-md-6'>\n                                    <h4>Additional Covers</h4>\n                                    {\n                                        planType == 'travel' ?\n                                            <>\n                                                <h5>Plan Name : {planName}</h5>\n                                                <h5>Company Name : {company_name}</h5>\n                                            </>\n                                            : ''\n                                    }\n                                </div>\n                                <div className='col-md-6'>\n                                    <button onClick={() => navigate(-1)} className=\"btn btn-primary\" style={{ float: 'right' }}>Back</button>\n\n                                    {/* { ParamType == 'motor' ? <a href=\"/motor-plan\" className=\"btn btn-primary\" style={{float:'right'}}>Back</a> \n                                    : ParamType == 'travel' ?  <a href=\"/travel-plan\" className=\"btn btn-primary\" style={{float:'right'}}>Back</a>\n                                    : ParamType == 'home' ?  <a href=\"/homeplan\" className=\"btn btn-primary\" style={{float:'right'}}>Back</a>\n                                    : ParamType == 'yacht' ?  <a href=\"/yachtplan\" className=\"btn btn-primary\" style={{float:'right'}}>Back</a>\n                                    : ParamType == 'medical' ?  <a href=\"/medicalplan\" className=\"btn btn-primary\" style={{float:'right'}}>Back</a> \n                                    : '' } */}\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"card-body\">\n                            <table className=\"table table-bordered\">\n                                <thead>\n                                    <tr>\n                                        <th><strong>#</strong></th>\n                                        <th><strong>Additional Cover Label</strong></th>\n                                        <th><strong>Description</strong></th>\n                                        <th><strong>Fixed/Percentage/Reffered</strong></th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {additionalcover.map((item) => (\n                                        <tr key={item._id}>\n                                            <td>\n                                                <div className=\"checkboxs\">\n                                                    <input\n                                                        className=\"form-check-input\"\n                                                        type=\"checkbox\"\n                                                        id=\"flexCheckDefault\"\n                                                        defaultChecked={item.checked}\n                                                        onChange={(e) => handleCheckboxChange(e, item)}\n                                                    />\n                                                </div>\n                                            </td>\n                                            <td>{item.additional_cover_label}</td>\n                                            <td>\n                                                <div className=\"form-group\">\n                                                    <input\n                                                        type=\"text\"\n                                                        name=\"additional_cover_description\"\n                                                        className=\"form-control\"\n                                                        disabled={!item.checked}\n                                                        onChange={(e) => handleInputChange(e, item._id)}\n                                                        defaultValue={item.additional_cover_description}\n                                                    />\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <div className=\"form-group\">\n                                                    <input\n                                                        type=\"text\"\n                                                        name=\"value\"\n                                                        className=\"form-control\"\n                                                        disabled={!item.checked}\n                                                        onChange={(e) => handleInputChange(e, item._id)}\n                                                        defaultValue={item.value}\n                                                    />\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                        <div className=\"card-footer\">\n                            <button className='btn btn-primary' onClick={handleSubmit} style={{ float: 'right' }}>Submit</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ViewAdditionalCover;"],"names":["ViewAdditionalCover","navigate","useNavigate","additionalcover","setAdditionalcover","useState","enabledRows","setEnabledRows","formData","setFormData","planName","setPlanName","planType","setPlanType","company_name","setCompanyName","customURL","window","location","href","params","URLSearchParams","split","ParamValue","get","ParamType","useEffect","token","localStorage","getItem","undefined","url3","id","type","getadditonalcover","async","fetch","method","headers","then","response","json","data","addcoverlen","length","url","motorplandetails","additional_cover_arr","plan_name","console","log","coverdata","i","j","_id","additional_cover_id","push","additional_cover_value","additional_cover_desc","handleInputChange","e","name","value","target","prevData","newData","existingDataIndex","findIndex","item","_jsx","className","children","_jsxs","_Fragment","onClick","style","float","map","defaultChecked","checked","onChange","handleCheckboxChange","cover","stateValue","indx","indexOf","splice","additional_cover_label","disabled","defaultValue","additional_cover_description","handleSubmit","alert","requestOptions","body","JSON","stringify"],"sourceRoot":""}