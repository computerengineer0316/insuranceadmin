"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6612],{56612:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(65043),s=a(73216),l=a(73023),o=a.n(l),c=a(54168),r=a(70579);const i=()=>{const e=(0,s.Zp)(),[t,a]=(0,n.useState)([]),[l,i]=(0,n.useState)(null),[d,h]=(0,n.useState)([]),[m,u]=(0,n.useState)({});(0,n.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):p()}),[]);const p=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,n=t.length,s=[];for(let a=0;a<n;a++){const e={label:t[a].location_name,value:t[a]._id};s.push(e)}a(s)}))},x=(e,t,a)=>{const n=[...d];n[e][a]=t,h(n)};return(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("h4",{className:"card-title",children:"Add Yacht Make"})})})}),(0,r.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,r.jsxs)("table",{className:"table table-bordered",style:{width:"auto"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:(0,r.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={make_name:"",location:t};h([...d,e])},children:"+"})}),(0,r.jsx)("th",{children:"Make Name"}),(0,r.jsx)("th",{children:"Make Logo"}),(0,r.jsx)("th",{children:"Make Location"})]})}),(0,r.jsx)("tbody",{children:d.map(((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const t=[...d];t.splice(e,1),h(t)})(a),children:"x"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>((e,t)=>{const{name:a,value:n}=t.target;""===n.trim()?u((e=>({...e,[a]:"This is required"}))):u((e=>({...e,[a]:""})));const s=[...d];s[e][a]=n,h(s)})(a,e),className:"form-control",name:"make_name",placeholder:"Make Name",autoComplete:"off",required:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"file",onChange:e=>{return t=a,n=e.target.files[0],void(d[t].logo=n);var t,n},className:"form-control",name:"yacht_make_logo",placeholder:"yacht make logo",autoComplete:"off",required:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)(c.default,{options:t,selectedValues:t,displayValue:"label",onSelect:e=>x(a,e,"location"),onRemove:e=>x(a,e,"location"),placeholder:"Select Location",showCheckbox:!0,closeOnSelect:!1,required:!0})})]},a)))})]})}),(0,r.jsx)("div",{className:"card-footer",children:(0,r.jsx)("button",{className:"btn btn-outline-success",onClick:t=>{t.preventDefault();try{if(d.some((e=>""===e.make_name.trim()||!e.location)))return o()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"}),!1;{let t=d.length-1;for(let a=0;a<d.length;a++){const n=d[a].location,s=[],l=new FormData;for(let e=0;e<n.length;e++)s.push(n[e].value);l.append("file",d[a].logo),l.append("location",s),l.append("make_name",d[a].make_name),l.append("index",a),t==a&&l.append("last","last");fetch("https://insuranceapi-3o5t.onrender.com/api/AddYachtMake",{method:"POST",body:l}).then((e=>e.json())).then((t=>{200==t.status?(o()({text:t.message,type:"success",icon:"success",button:!1}),setTimeout((()=>{o().close(),e("/ViewYachtMake")}),1e3)):200!=t.status&&(o()({title:"Error!",text:t.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{o().close(),e("/ViewYachtMake")}),1e3))}))}}}catch(a){console.log(a)}},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=6612.3c4451ca.chunk.js.map