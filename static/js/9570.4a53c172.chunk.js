"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9570],{79570:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(65043),i=s(73216),n=s(92157),o=s.n(n),l=s(73023),c=s.n(l),r=s(93946),d=s(70579);const m=()=>{const e=(0,i.Zp)(),[t,s]=(0,a.useState)([]),[n]=(0,a.useState)(10),[l,m]=(0,a.useState)(0),[h,u]=(0,a.useState)(1),[p,x]=(0,a.useState)(""),[j,g]=(0,a.useState)(!1),[v,b]=(0,a.useState)(""),[y,N]=(0,a.useState)([]);(0,a.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{var s;const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];x(e),_(h,n,e);const t=JSON.parse(localStorage.getItem("user")),a=(null===t||void 0===t||null===(s=t.medical_permission)||void 0===s?void 0:s[0])||{};N(a)}}),[]);const _=(e,t,a)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/get_group_medical_rates?page=${e}&limit=${t}&id=${a}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var a;const i=null===(a=e.data[0])||void 0===a?void 0:a.total;console.log(e,">>>>>>>>>>>>>>>>data");const n=i/t,o=Math.ceil(n);m(o),s(e.data[0].data),console.log(e.data,">>>>>>>>>>data.data")}))},f=(e,t)=>{try{console.log("staus,,,,,,,,,,,,,,,,,,,,",{status:t,id:e});const s={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:+t})};fetch(`https://insuranceapi-3o5t.onrender.com/api/update_group_medical_planRates_status/${e}`,s).then((e=>e.json())).then((e=>{200===e.status?(c()({title:"Success!",text:e.message,type:"success",icon:"success",button:!1}),_(h,n,p),setTimeout((()=>{c().close()}),2e3)):(c()({title:"Error!",text:e.message,type:"error",icon:"error",button:!1}),_(h,n,p),setTimeout((()=>{c().close()}),2e3))}))}catch(s){}},k=(h-1)*n;return(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-4",children:(0,d.jsx)("h4",{className:"card-title",children:"TPA/Network"})}),(0,d.jsxs)("div",{className:"col-md-8",children:[(0,d.jsx)("a",{href:`/AddGroupMedicalPlanRates?id=${p}`,className:"btn btn-primary",style:{float:"right"},children:"Add TPA/Network"}),(0,d.jsx)("a",{href:"/ViewGroupMedicalPlans",className:"btn btn-primary",style:{float:"right",marginRight:"4px"},children:"Back"})]})]})}),(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsxs)("table",{className:"table table-bordered",children:[(0,d.jsx)("thead",{className:"thead-dark",children:(0,d.jsxs)("tr",{className:"table-info",children:[(0,d.jsx)("th",{children:"Sr No."}),(0,d.jsx)("th",{children:"name"}),(0,d.jsx)("th",{children:"TPA"}),(0,d.jsx)("th",{children:"Network"}),(0,d.jsx)("th",{children:"Location"}),(0,d.jsx)("th",{children:"Action"})]})}),(0,d.jsx)("tbody",{children:t.map(((e,t)=>{var s,a,i,o;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:k+t+1}),(0,d.jsx)("td",{children:e.policy_name}),(0,d.jsx)("td",{children:null===(s=e.TPAs[0])||void 0===s?void 0:s.name}),(0,d.jsx)("td",{children:null===(a=e.networks[0])||void 0===a?void 0:a.name}),(0,d.jsx)("td",{children:null===(i=e.locationData)||void 0===i?void 0:i.map((e=>e.location_name?e.location_name:"")).join(",")}),(0,d.jsxs)("td",{children:[(0,d.jsx)("a",{href:`/EditGroupMedicalPlanPrice?id=${e._id}&planId=${p}`,className:"btn btn-success mx-1",children:"Edit"}),(null===(o=y.plan_condition)||void 0===o?void 0:o.includes("delete"))&&(0,d.jsxs)(d.Fragment,{children:[1==e.status?(0,d.jsx)("button",{className:"btn btn-danger mx-1",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&f(e._id,0)},children:"Deactivate"}):(0,d.jsx)("button",{className:"btn btn-success mx-1",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&f(e._id,1)},children:"Activate"}),(0,d.jsx)("button",{className:"btn btn-warning mx-1",onClick:()=>{window.confirm("Are you sure you wish to delete this item?")&&(e=>{try{fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteGroupMedicalMaster?id=${e}&type=groupmedicalPlanRates`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200==e.status?(c()({title:"Success!",text:e.message,type:"success",icon:"success",button:!1}),_(h,n,p),setTimeout((()=>{c().close()}),2e3)):(c()({title:"Error!",text:e.message,type:"error",icon:"error",button:!1}),_(h,n,p),setTimeout((()=>{c().close()}),2e3))}))}catch(t){console.log(t)}})(e._id)},children:"Delete"})]})]})]},t)}))})]}),(0,d.jsx)(o(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:l,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;u(t+1),_(t+1,n,p)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})})}),(0,d.jsxs)(r.zS,{alignment:"center",visible:j,onClose:()=>g(!1),children:[(0,d.jsx)(r.E4,{onClose:()=>g(!1),children:(0,d.jsx)(r.lb,{children:"Upload Excel File"})}),(0,d.jsx)(r.Tc,{children:(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"file",className:"form-control",id:"DHA",defaultValue:"",required:!0,onChange:e=>b(e.target.files[0])})})}),(0,d.jsxs)(r.If,{children:[(0,d.jsx)(r.Q_,{color:"secondary",onClick:()=>g(!1),children:"Close"}),(0,d.jsx)(r.Q_,{color:"primary",onClick:async e=>{e.preventDefault();const t=new FormData;t.append("file",v);let s=await fetch("https://insuranceapi-3o5t.onrender.com/api/read_medical_plan_type_excel ",{method:"post",body:t});s=await s.json(),200===s.status?(g(!j),c()({text:s.message,type:"success",icon:"success",button:!1}),_(h,n,p),setTimeout((()=>{c().close()}),1e3)):(g(!j),c()({title:"Error!",text:s.message,type:"error",icon:"error",button:"ok"}),_(h,n,p),setTimeout((()=>{c().close()}),1e3))},href:"/Viewtraveltype",children:"Upload"})]})]})]})}}}]);
//# sourceMappingURL=9570.4a53c172.chunk.js.map