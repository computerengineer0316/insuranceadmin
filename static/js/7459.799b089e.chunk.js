"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7459],{17459:(e,a,n)=>{n.r(a),n.d(a,{default:()=>r});var t=n(65043),o=n(54168),l=n(70579);const s=function(e){let{rowsData:a,deleteTableRows:n,handleChange:s,handleChange123:i}=e;const[c,d]=(0,t.useState)([]),[r,p]=(0,t.useState)([]),[h,m]=(0,t.useState)([]),[_,u]=(0,t.useState)([]),[x,j]=(0,t.useState)([]),[y,g]=(0,t.useState)([]),[f,N]=(0,t.useState)([]),[C,b]=(0,t.useState)([]),[v,T]=(0,t.useState)([]),[S,R]=(0,t.useState)({status:!1,name:"",index:""});(0,t.useEffect)((()=>{E(),q(),w(),k(),A(),O(),M(),D(),P()}),[]);const P=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,n=a.length,t=[];for(let o=0;o<n;o++){const e={label:a[o].location_name,value:a[o]._id};t.push(e)}T(t)}))},w=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getMedicalPlanTypeList",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{g(e.data)}))},E=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getPlanCategory",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{d(e.data)}))},q=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNatureOfPlan",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{p(e.data)}))},k=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getmedicalVisaCountry",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{m(e.data)}))},A=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getMedicalPlanCondition",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{u(e.data)}))},O=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNationality",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{j(e.data)}))},M=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getMedicalSalaryRange",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{N(e.data)}))},V=(e,a,n)=>{i(e,a,n)},D=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/company_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{b(e.data)}))},G=(e,a)=>{const n=e.target.value;/^[A-Za-z,]*$/.test(n)?R({status:!1,name:e.target.name,index:a}):(R({status:!0,name:e.target.name,index:a}),e.target.value=n.replace(/[^a-zA-Z\s,]/g,""))};return a.map(((e,a)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>n(a),children:"x"})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",className:"form-control",name:"plan_name",onChange:e=>s(a,e),placeholder:"Enter Plan Name"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"company_id",onChange:e=>s(a,e),children:[(0,l.jsx)("option",{value:"",children:"Select Company"}),C.map(((e,a)=>(0,l.jsx)("option",{value:e._id,children:e.company_name},a)))]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"plan_category_id",onChange:e=>s(a,e),children:[(0,l.jsx)("option",{value:"",children:"Select Plan Category"}),c.map(((e,a)=>(0,l.jsx)("option",{value:e._id,children:e.plan_category_name},a)))]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"nature_of_plan_id",onChange:e=>s(a,e),children:[(0,l.jsx)("option",{value:"",children:"Select Nature Of Plan"}),r.map(((e,a)=>(0,l.jsx)("option",{value:e._id,children:e.nature_of_plan_name},a)))]})}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{className:"form-control",name:"medical_plan_type",onChange:e=>s(a,e),children:[(0,l.jsx)("option",{value:"",children:"Medical Plan Type"}),y.map(((e,a)=>(0,l.jsx)("option",{value:e._id,children:e.medical_plan_type},a)))]})}),(0,l.jsx)("td",{children:(0,l.jsx)(o.default,{className:"form-control",options:_,onSelect:e=>V(a,e,"medical_plan_condition"),onRemove:e=>V(a,e,"medical_plan_condition"),displayValue:"medical_plan_condition",showCheckbox:!0})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(a,e),name:"medical_plan_condition_topup",className:"form-control",placeholder:"Add Plan Condition topup"})}),(0,l.jsx)("td",{children:(0,l.jsx)(o.default,{className:"form-control",options:x,onSelect:e=>V(a,e,"nationality_name"),onRemove:e=>V(a,e,"nationality_name"),displayValue:"nationality_name",showCheckbox:!0})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(a,e),name:"nationality_topup",className:"form-control",placeholder:"Add Nationality topup"})}),(0,l.jsx)("td",{children:(0,l.jsx)(o.default,{className:"form-control",options:f,onSelect:e=>V(a,e,"medical_salary_range"),onRemove:e=>V(a,e,"medical_salary_range"),displayValue:"medical_salary_range",showCheckbox:!0})}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(a,e),name:"salary_range_topup",className:"form-control",placeholder:"Add Medical Salary Range topup"})}),(0,l.jsxs)("td",{children:[(0,l.jsx)("input",{type:"text",onChange:e=>s(a,e),name:"add_op_con_desc",onInput:e=>G(e,a),className:"form-control",placeholder:"Add option condition Description"}),1==S.status&&"add_op_con_desc"==S.name&&S.index==a?(0,l.jsx)("span",{style:{color:"red"},children:"Text Only"}):""]}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(a,e),name:"add_op_con_desc_topup",className:"form-control",placeholder:"Add option condition Description topup"})}),(0,l.jsxs)("td",{children:[(0,l.jsx)("input",{type:"text",onChange:e=>s(a,e),name:"vat_able",onInput:e=>G(e,a),className:"form-control",placeholder:"Enter Vat Able"}),1==S.status&&"vat_able"==S.name&&S.index==a?(0,l.jsx)("span",{style:{color:"red"},children:"Text Only"}):""]}),(0,l.jsx)("td",{children:(0,l.jsx)("input",{type:"text",onChange:e=>s(a,e),name:"jdv_comm",className:"form-control",placeholder:"Enter JDV Commision"})}),(0,l.jsx)("td",{children:(0,l.jsx)(o.default,{options:v,selectedValues:v,onSelect:e=>V(a,e,"location"),onRemove:e=>V(a,e,"location"),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})})]},a)))};var i=n(73216),c=n(73023),d=n.n(c);const r=()=>{const e=(0,i.Zp)();(0,t.useEffect)((()=>{const a=localStorage.getItem("token");null===a||void 0===a||""===a?e("/login"):p()}),[]);const[a,n]=(0,t.useState)([]),[o,c]=(0,t.useState)([]),r={plan_name:"Plan Name Required",company_id:"Company Required",plan_category_id:"Plan Category Required",nature_of_plan_id:"Nature Of Plan Required",medical_plan_type:"Medical Plan Type Required",medical_plan_condition:"Medical Plan Condition Required",medical_plan_condition_topup:"Medical Plan Condition Topup Required",nationality_name:"Nationality Required",nationality_topup:"Nationality Topup Required",medical_salary_range:"Medical Salary Range Required",salary_range_topup:"Salary Range Topup Required",add_op_con_desc:"Add Option Cond. Description Required",add_op_con_desc_topup:"Add Option Cond. Description Topup Required",jdv_comm:"JDV Commission Required",vat_able:"Vat Able Required",excess:"Excess Required",location:"Location Required"},p=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,n=a.length,t=[];for(let o=0;o<n;o++){const e={label:a[o].location_name,value:a[o]._id};t.push(e)}c(t)}))};return(0,l.jsx)("div",{className:"container mb-5",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)("h4",{className:"card-title",children:"Add Medical Plan"})}),(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)("button",{className:"btn btn-primary",style:{float:"right"},onClick:()=>e("/medicalplan"),children:"Back"})})]})}),(0,l.jsx)("div",{className:"card-body addmotorplans ",style:{overflowX:"scroll"},children:(0,l.jsxs)("table",{className:"table table-bordered table-responsive",style:{width:"7500px"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:(0,l.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={plan_name:"",company_id:"",plan_category_id:"",nature_of_plan_id:"",medical_plan_type:"",medical_plan_condition:"",medical_plan_condition_topup:"",nationality_name:"",nationality_topup:"",medical_salary_range:"",salary_range_topup:"",add_op_con_desc:"",add_op_con_desc_topup:"",jdv_comm:"",vat_able:"",excess:"",location:o};n([...a,e])},children:"+"})}),(0,l.jsx)("th",{className:"text-danger ",children:"Plan Name"}),(0,l.jsx)("th",{className:"text-danger",children:"Company"}),(0,l.jsx)("th",{className:"text-danger",children:"Plan Category"}),(0,l.jsx)("th",{className:"text-danger",children:"Nature Of Plan"}),(0,l.jsx)("th",{className:"text-danger",children:"Medical Plan Type"}),(0,l.jsx)("th",{className:"text-danger",children:"Plan Condition"}),(0,l.jsx)("th",{className:"text-danger",children:"topup"}),(0,l.jsx)("th",{className:"text-danger",children:" Nationality"}),(0,l.jsx)("th",{className:"text-danger",children:"Topup"}),(0,l.jsx)("th",{className:"text-danger",children:"Medical Salary Range"}),(0,l.jsx)("th",{className:"text-danger",children:"Topup"}),(0,l.jsx)("th",{children:"Add Option Cond. Description"}),(0,l.jsx)("th",{children:"Topup"}),(0,l.jsx)("th",{children:"Vat Able"}),(0,l.jsx)("th",{className:"text-danger",children:"JDV Commission"}),(0,l.jsx)("th",{className:"text-danger",children:"Location"})]})}),(0,l.jsx)("tbody",{children:(0,l.jsx)(s,{rowsData:a,deleteTableRows:e=>{const t=[...a];t.splice(e,1),n(t)},handleChange:(e,t)=>{const{name:o,value:l}=t.target,s=[...a];s[e][o]=l,n(s)},handleChange123:(e,t,o)=>{const l=[...a];l[e][o]=t,n(l)}})})]})}),(0,l.jsx)("div",{className:"card-footer",children:(0,l.jsx)("button",{disabled:!a.length,className:"btn btn-outline-success",style:{float:"right"},onClick:async()=>{const n=[];if(a.forEach(((e,a)=>{const t=Object.keys(e).filter((a=>{const n=e[a];return"string"===typeof n&&""===n.trim()?"add_op_con_desc"!=a&&"add_op_con_desc_topup"!=a&&"vat_able"!=a||""!=e.add_op_con_desc&&"add_op_con_desc"!=a:!("plan_name"!=a&&"company_id"!=a&&"plan_category_id"!=a&&"nature_of_plan_id"!=a&&"medical_plan_type"!=a&&"medical_plan_condition"!=a&&"medical_plan_condition_topup"!=a&&"nationality_name"!=a&&"nationality_topup"!=a&&"excess"!=a&&"medical_salary_range"!=a&&"salary_range_topup"!=a&&"location"!=a&&"jdv_comm"!=a||n.length)}));t.length>0&&(console.log(t,">> emptyKeys"),n.push({index:a,emptyKeys:t}))})),n.length>0)n.forEach((e=>{const a=e.emptyKeys[0];d()({title:"warning!",text:`${r[a]}`,type:"warning",icon:"warning"}).then((function(){return!1}))}));else{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rowsData:a})};await fetch("https://insuranceapi-3o5t.onrender.com/api/addmedicalplan",n).then((e=>e.json())).then((a=>{200===a.status?d()({title:"Success!",text:a.message,type:"success",icon:"success"}).then((function(){e("/medicalplan")})):d()({title:"Error!",text:a.message,type:"error",icon:"error"}).then((function(){e("/medicalplan")}))})).catch((e=>console.log(e)))}},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=7459.799b089e.chunk.js.map