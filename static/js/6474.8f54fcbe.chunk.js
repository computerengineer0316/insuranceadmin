"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6474],{76474:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var n=t(65043),i=t(73216),o=t(54168),a=t(30064),l=t.n(a),c=t(70579);const r=()=>{const[e,s]=(0,n.useState)([]),[t,a]=(0,n.useState)(""),[r,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[m,p]=(0,n.useState)([]),f=(0,i.Zp)();(0,n.useEffect)((()=>{if(null==localStorage.getItem("token")||""==localStorage.getItem("token")||void 0==localStorage.getItem("token"))f("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];h(e);fetch(`https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_by_id/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;a(t.line_of_business_name);const n=t.line_of_business_location.split(","),i=n.length,o=[];for(let a=0;a<i;a++){const e={method:"GET",headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_location_by_id/${n[a]}`,e).then((e=>e.json())).then((e=>{o.push(e.data.location_name);if(o.length===i){const e=o.join(",").split(","),t=e.length,i=[];for(let s=0;s<t;s++){const t={label:e[s],value:n[s]};i.push(t)}s(i)}}))}d(t.line_of_business_status)})),_()}}),[]);const _=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const s=e.data,t=s.length,n=[];for(let i=0;i<t;i++){const e={label:s[i].location_name,value:s[i]._id};n.push(e)}p(n)}))},j=e=>{s(e)};return(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsxs)("div",{className:"card",children:[(0,c.jsx)("div",{className:"card-header",children:(0,c.jsx)("h4",{className:"card-title",children:"Edit Line Of Business"})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("form",{action:"/",method:"POST",onSubmit:s=>{s.preventDefault();const t=new FormData(s.target),n=t.get("line_of_business_name"),i=e,o=i.length,a=[];for(let e=0;e<o;e++)a.push(i[e].value);const c=t.get("status"),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({line_of_business_name:n,line_of_business_location:a.toString(),line_of_business_status:c,line_of_business_id:u})};fetch("https://insuranceapi-3o5t.onrender.com/api/update_line_of_business",r).then((e=>e.json())).then((e=>{200===e.status?l().fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"Ok"}).then((e=>{e.isConfirmed&&f("/line-of-business")})):l().fire({title:"Error!",text:e.message,icon:"error",confirmButtonText:"Ok"}).then((e=>{e.isConfirmed&&f("/line-of-business")}))}))},children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Line Of Business Name"}),(0,c.jsx)("input",{type:"text",className:"form-control",name:"line_of_business_name",defaultValue:t,autoComplete:"off",required:!0})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Line Of Business Location"}),(0,c.jsx)(o.default,{options:m,selectedValues:e,onSelect:j,onRemove:j,displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]})})]}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Status"}),(0,c.jsxs)("select",{className:"form-control",name:"status",required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select Status"}),(0,c.jsx)("option",{value:"1",selected:1==r,children:"Active"}),(0,c.jsx)("option",{value:"0",selected:0==r,children:"Inactive"})]})]})})}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:"Update"})})})]})})]})})})})}}}]);
//# sourceMappingURL=6474.8f54fcbe.chunk.js.map