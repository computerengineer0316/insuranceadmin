"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7794],{17794:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var n=s(54168),a=s(65043),l=s(73216),i=s(73023),c=s.n(i),r=s(70579);const o=()=>{const e=(0,l.Zp)(),[t,s]=(0,a.useState)([]),[i,o]=(0,a.useState)({}),[d,h]=(0,a.useState)([]),u=window.location.href,m=new URLSearchParams(u.split("?")[1]),g=m.get("id"),p=m.get("type");(0,a.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("&")[0].split("=")[1];f(e)}}),[]);const f=async e=>{const t={method:"GET",headers:{"Content-Type":"application/json"}};await fetch("https://insuranceapi-3o5t.onrender.com/api/generalWrittingConditions",t).then((e=>e.json())).then((n=>{const a=n.data;fetch(`https://insuranceapi-3o5t.onrender.com/api/single_medical_plan_details/${e}`,t).then((e=>e.json())).then((e=>{const t=e.data.general_condition_arr,n=[];for(let s=0;s<a.length;s++)for(let e=0;e<t.length;e++)t[e].itemId==a[s]._id&&(a[s].value=t[e].value,a[s].status=t[e].status,a[s].checked="checked",n.push(a[s]));console.log(a,">>>>>>>>>>>>>>>>>>>>>>> Generalunderwriting_conditionDetails"),s(a),h(n)}))}))},x=(e,t)=>{const s=new FormData,n=s.get("value"),a=s.get("status"),{name:l,value:i}=e.target;h((e=>{const s=[...e],c=s.findIndex((e=>e._id===t));return-1!==c?s[c]={...s[c],[l]:i}:s.push({itemId:t,status:a,value:n}),s}))};return(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"card ",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("h4",{children:"Health Questionnaire"})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("a",{href:"/medicalplan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,r.jsx)("div",{className:"card-body",children:(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table table-bordered ",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:(0,r.jsx)("strong",{children:"#"})}),(0,r.jsx)("th",{children:(0,r.jsx)("strong",{children:"Condition"})}),(0,r.jsx)("th",{children:(0,r.jsx)("strong",{children:"Status"})}),(0,r.jsx)("th",{children:(0,r.jsx)("strong",{children:"value"})})]})}),(0,r.jsx)("tbody",{children:t.map((e=>{var t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"checkboxs",children:(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",defaultChecked:"checked"===e.checked,onChange:t=>((e,t)=>{const s=[...d];if(o((s=>({...s,[t._id]:e.target.checked}))),!0===e.target.checked)t.checked="checked",s.push(t);else if(!1===e.target.checked){const e=s.indexOf(t);console.log(e),s.splice(e,1)}h(s)})(t,e)})})}),(0,r.jsx)("td",{className:"text-wrap",children:e.condition}),(0,r.jsx)("td",{children:(0,r.jsx)(n.default,{options:[{name:"Yes",id:"true"},{name:"No",id:"false"}],selectedValues:e.status,displayValue:"name",disable:!i[e._id]&&!(null!==e&&void 0!==e&&null!==(t=e.status)&&void 0!==t&&t.length),onSelect:t=>x({target:{name:"status",value:t}},e._id),onRemove:t=>x({target:{name:"status",value:t}},e._id),showArrow:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("input",{type:"text",name:"value",required:!0,className:"form-control",disabled:!e.checked,onChange:t=>x(t,e._id),defaultValue:e.value})})})]},e._id)}))})]})})}),(0,r.jsx)("div",{className:"card-footer",children:(0,r.jsx)("button",{className:"btn btn-primary",onClick:e=>{e.preventDefault(),console.log(g),console.log(p),console.log(d);const t=d.map((e=>null===e||void 0===e?void 0:e.status.length)),s=d.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.split(",").length}));console.log("numberscount "+typeof s+" "+s),console.log("options "+typeof t+" "+t);const n=JSON.stringify(s)===JSON.stringify(t);console.log("isMatch: "+n);const a=d.some((e=>!e.value));if(d.some((e=>!e.status||0===e.status.length)))return c()("Please select the status for all the conditions","","warning"),!1;if(a)return c()("Please fill in all the value fields","","warning"),!1;if(!1===n&&JSON.stringify(t)<JSON.stringify(s))return c()("Please select the values for all the status","","warning"),!1;if(!1===n&&JSON.stringify(t)>JSON.stringify(s))return c()("Please select the status for all the values","","warning"),!1;{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g,type:p,formData:d})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_general_underwriting_conditions",e).then((e=>e.json())).then((e=>{window.location.href="/ViewmedicalGeneralUnderwriting?id="+g}))}},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=7794.43dcbfef.chunk.js.map