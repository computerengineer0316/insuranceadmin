"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4647],{37028:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var n=s(54168),a=s(65043),l=s(73216),o=s(73023),i=s.n(o),c=s(70579);const r=()=>{const e=(0,l.Zp)(),[t,s]=(0,a.useState)([]),[o,r]=(0,a.useState)({}),[d,h]=(0,a.useState)([]),u=window.location.href,m=new URLSearchParams(u.split("?")[1]),g=m.get("id"),f=m.get("type");(0,a.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("&")[0].split("=")[1];p(e)}}),[]);const p=async e=>{const t={method:"GET",headers:{"Content-Type":"application/json"}};await fetch("https://insuranceapi-3o5t.onrender.com/api/get_maternity",t).then((e=>e.json())).then((n=>{const a=n.data;console.log("inside>>>>>>>>>>>>>>>>>>>>>>",a),fetch(`https://insuranceapi-3o5t.onrender.com/api/single_medical_plan_details/${e}`,t).then((e=>e.json())).then((e=>{const t=e.data.maternity_condition_arr;console.log("maternityconditionDetails>>>>>>>>>>>>>>>>>>>>>>",t);const n=[];for(let s=0;s<a.length;s++)for(let e=0;e<t.length;e++)t[e].itemId==a[s]._id&&(a[s].value=t[e].value,a[s].status=t[e].status,a[s].checked="checked",n.push(a[s]));s(a),h(n)}))}))};console.log("outside>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",t),console.log("outside>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",d);const x=(e,t)=>{const s=new FormData,n=s.get("value"),a=s.get("status"),{name:l,value:o}=e.target;h((e=>{const s=[...e];console.log("newData>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",s);const i=s.findIndex((e=>(null===e||void 0===e?void 0:e._id)===t));return-1!==i?s[i]={...s[i],[l]:o}:s.push({itemId:t,status:a,value:n}),console.log("newData>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",s),s}))};console.log(d);return console.log("maternityCondtions>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",t),(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsxs)("div",{className:"card ",children:[(0,c.jsx)("div",{className:"card-header",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("h4",{children:"Maternity Conditions"})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("a",{href:"/medicalplan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("table",{className:"table table-bordered",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"#"})}),(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"Feature"})}),(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"Status"})}),(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"Value"})})]})}),(0,c.jsx)("tbody",{children:t.map((e=>{var t;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"checkboxs",children:(0,c.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",defaultChecked:e.checked,onChange:t=>((e,t)=>{const s=[...d];if(console.log("stateValue>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",s),console.log(e.target.checked),r({...o,[t._id]:e.target.checked}),!0===e.target.checked)t.checked="checked",s.push(t);else if(!1===e.target.checked){const e=s.indexOf(t);console.log(e),s.splice(e,1)}h(s)})(t,e)})})}),(0,c.jsx)("td",{children:e.condition}),(0,c.jsx)("td",{children:(0,c.jsx)(n.default,{options:[{name:"Yes",id:"true"},{name:"No",id:"false"}],selectedValues:e.status,displayValue:"name",disable:!o[e._id]&&!(null!==e&&void 0!==e&&null!==(t=e.status)&&void 0!==t&&t.length),onSelect:t=>x({target:{name:"status",value:t}},e._id),onRemove:t=>x({target:{name:"status",value:t}},e._id),showArrow:!0})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"form-group",children:(0,c.jsx)("input",{type:"text",name:"value",className:"form-control",disabled:!o[e._id]&&!e.value,onChange:t=>x(t,e._id),defaultValue:e.value})})})]},e._id)}))})]})}),(0,c.jsx)("div",{className:"card-footer",children:(0,c.jsx)("button",{className:"btn btn-primary",onClick:e=>{e.preventDefault(),console.log(g),console.log(f),console.log(d);const t=d.map((e=>e.value.split(",").length)),s=d.map((e=>e.status.length));console.log("numberscount "+typeof t+" "+t),console.log("options "+typeof s+" "+s);const n=JSON.stringify(t)===JSON.stringify(s);console.log("isMatch: "+n);const a=d.some((e=>!e.value));if(d.some((e=>!e.status||0===e.status.length)))return i()("Please select the status for all the conditions","","warning"),!1;if(a)return i()("Please fill in all the value fields","","warning"),!1;if(!1===n&&JSON.stringify(s)<JSON.stringify(t))return i()("Please select the status for all the values","","warning"),!1;if(!1===n&&JSON.stringify(s)>JSON.stringify(t))return i()("Please select the values for all the status","","warning"),!1;{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g,type:f,formData:d})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_Maternity_conditionarr",e).then((e=>e.json())).then((e=>{window.location.href="/MaternityConditions?id="+g}))}},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=4647.3c22fab0.chunk.js.map