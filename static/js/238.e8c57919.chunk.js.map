{"version":3,"file":"static/js/238.e8c57919.chunk.js","mappings":"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","sources":["views/body-type/AddBodyType.js"],"sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport Multiselect from \"multiselect-react-dropdown\";\n\nconst AddBodyType = () => {\n    const navigate = useNavigate();\n    const [location, setLocation] = useState([]);\n    const [selectedOption, setSelectedOption] = useState(null);\n\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token === null || token === undefined || token === '') {\n            navigate('/login')\n        }\n        else {\n            locationList();\n        }\n    }, []);\n\n    const locationList = () => {\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        };\n        fetch(`https://insuranceapi-3o5t.onrender.com/api/get_location`, requestOptions)\n            .then(response => response.json())\n            .then(data => {\n                const locationdt = data.data;\n                const location_len = locationdt.length;\n                const location_list = [];\n                for (let i = 0; i < location_len; i++) {\n                    const location_obj = { label: locationdt[i].location_name, value: locationdt[i]._id };\n                    location_list.push(location_obj);\n                }\n                setLocation(location_list);\n            });\n    }\n\n    // const handleSubmit = (e) => {\n    //     e.preventDefault();\n    //     const data = new FormData(e.target);\n    //     const body_type_name = data.get('body_type_name');\n    //     const body_type_location = selectedOption;\n    //     const body_type_location_len = body_type_location.length;\n    //     const body_type_location_str = [];\n    //     for(let i = 0; i < body_type_location_len; i++)\n    //     {\n    //         body_type_location_str.push(body_type_location[i].value);\n    //     }\n    //     const body_type_status = data.get('status');\n    //     const requestOptions = {\n    //         method: 'POST',\n    //         headers: {\n    //             'Content-Type': 'application/json',\n    //         },\n    //         body: JSON.stringify({\n    //             body_type_name: body_type_name,\n    //             body_type_location: body_type_location_str.toString(),\n    //             body_type_status: body_type_status\n    //         })\n    //     };\n    //     fetch(`https://insuranceapi-3o5t.onrender.com/api/add_body_type`, requestOptions)\n    //         .then(response => response.json())\n    //         .then(data => {\n    //             if (data.status === 200)\n    //             {\n    //                 swal({\n    //                     title: \"Success!\",\n    //                     text: data.message,\n    //                     type: \"success\",\n    //                     icon: \"success\"\n    //                 }).then(function() {\n    //                     navigate('/body-type');\n    //                 });\n    //             }\n    //             else\n    //             {\n    //                 swal({\n    //                     title: \"Error!\",\n    //                     text: data.message,\n    //                     type: \"error\",\n    //                     icon: \"error\"\n    //                 }).then(function() {\n    //                     navigate('/body-type');\n    //                 });\n    //             }\n    //         });\n    // }\n\n\n    const [rowsData, setRowsData] = useState([])\n    const [errors, setErrors] = useState({});\n\n\n    const addTableRows = () => {\n        const rowsInput =\n        {\n            body_type_name: '',\n            location: location\n\n        }\n        setRowsData([...rowsData, rowsInput])\n    }\n    const deleteTableRows = (index) => {\n        const rows = [...rowsData]\n        rows.splice(index, 1)\n        setRowsData(rows)\n    }\n\n\n    const handleChange = (index, evnt) => {\n        const { name, value } = evnt.target\n\n        if (value.trim() === '') {\n            setErrors((prevErrors) => ({\n                ...prevErrors,\n                [name]: 'This is required',\n            }));\n        } else {\n            setErrors((prevErrors) => ({\n                ...prevErrors,\n                [name]: '', // Clear the error message if the value is not empty\n            }));\n        }\n        const rowsInput = [...rowsData]\n        rowsInput[index][name] = value\n        setRowsData(rowsInput)\n    }\n    const handleChange1 = (index, value, title) => {\n        console.log(value, \"multiselect value\")\n        const rowsInput = [...rowsData];\n        rowsInput[index][title] = value;\n        setRowsData(rowsInput)\n    }\n\n\n    const handleSubmit = () => {\n\n        try {\n\n            const hasEmptyFields = rowsData.some((row) => {\n                return row.body_type_name === '' || !row.location;\n            });\n            if (hasEmptyFields) {\n                swal({\n                    title: \"Warning!\",\n                    text: \"Please fill in all fields for each row.\",\n                    type: \"warning\",\n                    icon: \"warning\"\n                })\n                return;\n            }\n\n            const requestOptions = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(rowsData)\n            };\n            fetch(`https://insuranceapi-3o5t.onrender.com/api/add_body_type`, requestOptions)\n                .then(response => response.json())\n                .then(data => {\n                    if (data.status == 200) {\n                        swal({\n                            text: data.message,\n                            type: \"success\",\n                            icon: \"success\",\n                            button: false\n\n                        })\n                        navigate('/body-type')\n                        setTimeout(() => {\n                            swal.close()\n                        }, 1000);\n                    }\n                    else {\n                        swal({\n                            title: \"Error!\",\n                            text: data.message,\n                            type: \"error\",\n                            icon: \"error\",\n                            button: false\n                        })\n                        navigate('/body-type')\n                        setTimeout(() => {\n                            swal.close()\n                        }, 1000);\n                    }\n                });\n        }\n        catch (err) {\n            console.log(err)\n        }\n\n    }\n    return (\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col-md-12\">\n                    <div className=\"card\">\n                        <div className=\"card-header\">\n                            <div className=\"row\">\n                                <div className=\"col-md-12\">\n                                    <h4 className=\"card-title\">Add Body Type</h4>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"card-body addmotorplans\" style={{ overflowX: 'scroll' }}>\n                            <table className=\"table table-bordered\" style={{ width: \"auto\" }}>\n                                <thead>\n                                    <tr>\n                                        <th><button className=\"btn btn-outline-success\" onClick={addTableRows}>+</button></th>\n                                        <th> Body Type Name</th>\n                                        <th>Location</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {\n                                        rowsData.map((data, index) => {\n                                            return (\n                                                <tr key={index} >\n                                                    <td>\n                                                        <button className=\"btn btn-outline-danger\" onClick={() => (deleteTableRows(index))}>x</button>\n                                                    </td>\n                                                    <td>\n                                                        <input type=\"text\" onChange={(evnt) => (handleChange(index, evnt))} className=\"form-control\" name=\"body_type_name\" placeholder=\"Add Body Type Name\" autoComplete=\"off\" required />\n\n                                                    </td>\n                                                    <td>\n                                                        <Multiselect\n                                                            options={location}\n                                                            selectedValues={location}\n                                                            displayValue=\"label\"\n                                                            onSelect={(evnt) => (handleChange1(index, evnt, 'location'))}\n                                                            onRemove={(evnt) => (handleChange1(index, evnt, 'location'))}\n                                                            placeholder=\"Select Location\"\n                                                            showCheckbox={true}\n                                                            required\n                                                        />\n                                                    </td>\n\n                                                </tr>\n                                            )\n                                        })\n                                    }\n                                </tbody>\n                            </table>\n                        </div>\n                        <div className=\"card-footer\">\n                            <button className=\"btn btn-outline-success\" onClick={handleSubmit}>Submit</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default AddBodyType\n"],"names":["AddBodyType","navigate","useNavigate","location","setLocation","useState","selectedOption","setSelectedOption","useEffect","token","localStorage","getItem","undefined","locationList","fetch","method","headers","then","response","json","data","locationdt","location_len","length","location_list","i","location_obj","label","location_name","value","_id","push","rowsData","setRowsData","errors","setErrors","handleChange1","index","title","console","log","rowsInput","_jsx","className","children","_jsxs","style","overflowX","width","onClick","addTableRows","body_type_name","map","rows","splice","deleteTableRows","type","onChange","evnt","handleChange","name","target","trim","prevErrors","placeholder","autoComplete","required","Multiselect","options","selectedValues","displayValue","onSelect","onRemove","showCheckbox","handleSubmit","some","row","swal","text","icon","requestOptions","body","JSON","stringify","status","message","button","setTimeout","err"],"sourceRoot":""}