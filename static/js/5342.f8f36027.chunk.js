"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5342,1072,8691,6310],{95342:(e,a,l)=>{l.r(a),l.d(a,{default:()=>p});var s=l(65043),n=l(73216),i=(l(92157),l(73023)),t=l.n(i),o=l(1177),d=l(84217),c=l(53519),r=l(61072),m=l(14282),u=l(93946),h=l(15287),x=l(70579);const p=()=>{var e,a;const l=(0,n.Zp)(),[i,p]=(0,s.useState)([]),[v]=(0,s.useState)(10),[j,g]=(0,s.useState)(0),[b,N]=(0,s.useState)(1),[f,y]=(0,s.useState)(!1),[_,C]=(0,s.useState)(""),[w,A]=(0,s.useState)(""),[S,k]=(0,s.useState)(""),[$,B]=(0,s.useState)(2),[T,E]=(0,s.useState)(!1),[P,M]=(0,s.useState)(""),[I,D]=(0,s.useState)([]),[F,U]=(0,s.useState)([]),[O,R]=(0,s.useState)(""),[V,G]=(0,s.useState)([]),[z,H]=(0,s.useState)([]),[L,Q]=(0,s.useState)(""),[W,J]=(0,s.useState)(""),[K,q]=(0,s.useState)({}),[Z,X]=(0,s.useState)(!1),[Y,ee]=(0,s.useState)();(0,s.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)l("/login");else{var a,s;ae(b,v),ne();const e=JSON.parse(localStorage.getItem("user"));let l=null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.map((e=>e.loc_id)).join(",");J(l);const n=(null===e||void 0===e||null===(s=e.motor_permission)||void 0===s?void 0:s[0])||{};D(n),se()}}),[F,$,O]);const ae=(e,a)=>{p([]);const l={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch(`https://insuranceapi-3o5t.onrender.com/api/getmedicalplans?page=${e}&limit=${a}&name=${F}&status=${$}&company=${O}`,l).then((e=>e.json())).then((e=>{const l=(null===e||void 0===e?void 0:e.total)/a,s=Math.ceil(l);g(s),p(e.data)}))},le=(e,a)=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/updatestatusMedicalPlan/${e}/${a}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?t()({title:"Success!",text:e.message,icon:"success",button:!1}):t()({title:"Error!",text:e.message,icon:"error",button:!1}),ne(),setTimeout((()=>{t().close()}),1e3)}))},se=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getCompany",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{G(e.data)}))},ne=()=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getplansAccordingToCompanies?lob=medical&name=${F}&companyId=${O}&status=${$}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data;H(a),console.log("Companies medical plans >>>>>>>",a)}))};return(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)("h4",{className:"card-title",children:"Medical Plans"})}),(0,x.jsx)("div",{className:"col-md-8",children:(0,x.jsx)("a",{href:"/addmedicalplan",className:"btn btn-primary",style:{float:"right"},children:"Add Medical Plan"})})]})}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsxs)("div",{className:"col-md-12",style:{textAlign:"right"},children:[(0,x.jsx)("a",{className:"btn btn-dark btn-sm btn-icon-text m-r-10",href:h,style:{backgroundColor:"green",marginLeft:"4px"},download:!0,children:"Download Medical Plan Sample File"}),(0,x.jsxs)("button",{className:"btn btn-dark btn-sm btn-icon-text m-r-10",style:{backgroundColor:"green",marginLeft:"4px"},onClick:()=>E(!T),children:[(0,x.jsx)("i",{className:"fa fa-file-excel","aria-hidden":"true"})," Upload Excel"]})]})}),(0,x.jsx)(o.A,{defaultActiveKey:"0",children:(0,x.jsxs)(o.A.Item,{eventKey:"0",children:[(0,x.jsx)(o.A.Header,{className:"modifyaccordian",children:"Filters "}),(0,x.jsx)(o.A.Body,{children:(0,x.jsx)("div",{className:"card-header",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Select Insurance co."})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",value:O,onChange:e=>R(e.target.value),children:[(0,x.jsx)("option",{value:"",children:"-- All --"}),null===V||void 0===V?void 0:V.map(((e,a)=>(0,x.jsx)("option",{value:e._id,children:e.company_name},a)))]})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Plan Name"})}),(0,x.jsx)("br",{}),(0,x.jsx)("input",{type:"text",className:"form-control",placeholder:"Search Plan",onChange:e=>U(e.target.value)})]}),(0,x.jsxs)("div",{className:"col-lg-3",children:[(0,x.jsx)("label",{children:(0,x.jsx)("strong",{children:"Select Status"})}),(0,x.jsx)("br",{}),(0,x.jsxs)("select",{className:"form-control",value:$,onChange:e=>B(e.target.value),children:[(0,x.jsx)("option",{value:2,children:"-- All --"}),(0,x.jsx)("option",{value:1,children:"Active"}),(0,x.jsx)("option",{value:0,children:"Inactive"})]})]})]})})})]})}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsx)("div",{className:"table-responsive",children:null===z||void 0===z?void 0:z.map(((e,a)=>{var l,s,n,i;return(0,x.jsxs)("div",{className:"col-md-12",children:[(0,x.jsxs)("h6",{className:"text-danger",children:[" ",(null===e||void 0===e||null===(l=e._id)||void 0===l?void 0:l._id)!=L?(0,x.jsx)("button",{onClick:()=>{var a;return Q(null===e||void 0===e||null===(a=e._id)||void 0===a?void 0:a._id)},className:"btn btn-success text-light",children:(0,x.jsx)("i",{className:"fa fa-angle-right"})}):(0,x.jsx)("button",{className:"btn btn-success text-light",onClick:()=>Q(""),children:(0,x.jsx)("i",{className:"fa fa-angle-down"})})," ",null===e||void 0===e||null===(s=e._id)||void 0===s?void 0:s.company_name]}),(null===e||void 0===e||null===(n=e._id)||void 0===n?void 0:n._id)==L&&(null===e||void 0===e||null===(i=e.plans)||void 0===i?void 0:i.map(((a,l)=>{var s,n,i,o;return(0,x.jsx)("tr",{children:W.includes(null===a||void 0===a?void 0:a.plan_created_by)||W.includes("64116415591c2f02bcddf51e")?(0,x.jsxs)("div",{className:"d-flex my-1",style:{marginLeft:"30px"},children:[(0,x.jsx)("div",{className:"mx-3",children:(0,x.jsx)("button",{className:"btn btn-success btn-sm text-white",children:(0,x.jsx)("i",{className:"fa fa-check"})})}),"                            ",(0,x.jsxs)("div",{className:" col-md-1 mx-1 my-1",style:{fontWeight:"700",color:"red"},children:[null===a||void 0===a||null===(s=a.plan_name)||void 0===s?void 0:s.slice(0,15),(null===a||void 0===a||null===(n=a.plan_name)||void 0===n?void 0:n.length)>15?"....":""]}),(0,x.jsxs)("div",{className:"table-responsive",children:[(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/EditMedicalPlan?id=${a._id}`,className:"btn btn-primary",children:"Edit"})}),"\xa0\xa0",1===a.status?(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&le(a._id,0)},children:"Deactivate"})}):(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&le(a._id,1)},children:"Activate"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/ViewRatesBasedOnAge?id=${a._id}`,className:"btn btn-info",children:"Rates Based On Age"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/viewBMI?id=${a._id}`,className:"btn btn-warning",children:"Add BMI"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/viewStandardConditions?id=${a._id}`,className:"btn btn-primary",children:"Additional Condition"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/ViewmedicalGeneralUnderwriting?id=${a._id}`,className:"btn btn-dark",children:"Health Questionnaire"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/ViewUnderwritingConditions?id=${a._id}`,className:"btn btn-success",children:"Underwriting Condition"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/MaternityConditions?id=${a._id}`,className:"btn btn-info",children:"Maternity Condition"})}),"\xa0\xa0","\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/ViewStandardCover?id=${a._id}&type=medical`,className:"btn btn-primary",children:"Standard Cover"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("a",{href:`/ViewAdditionalCover?id=${a._id}&type=medical`,className:"btn btn-dark",children:"Additional Cover"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-success",onClick:()=>{return e=a._id,l=a.policywordings_file,y(!0),C(e),void A(l);var e,l},children:"T & C"})}),"\xa0\xa0",(0,x.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:(0,x.jsx)("button",{className:"btn btn-danger",onClick:()=>{var e;window.confirm("Are you sure you wish to delete this item?")&&(e=a._id,fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteMedicalMaster/?id=${e}&type=medicalplan`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(t()({text:e.message,icon:"success",button:!1}),ne(),setTimeout((()=>{t().close()}),1e3)):(t()({title:"Error!",text:e.message,icon:"error",button:!1}),ne(),setTimeout((()=>{t().close()}),1e3))})))},children:"Delete"})})]})]}):(0,x.jsxs)("div",{className:"d-flex col-md-12 my-1",style:{marginLeft:"30px"},children:[(0,x.jsx)("div",{className:"mx-3",children:(0,x.jsx)("button",{className:"btn btn-success btn-sm text-white",children:(0,x.jsx)("i",{className:"fa fa-check"})})}),(0,x.jsxs)("div",{className:" col-md-3 mx-1 my-1",style:{fontWeight:"700",color:"red"},children:[null===a||void 0===a||null===(i=a.plan_name)||void 0===i?void 0:i.slice(0,15),(null===a||void 0===a||null===(o=a.plan_name)||void 0===o?void 0:o.length)>15?"....":""]}),(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsx)("button",{className:"btn btn-primary",onClick:()=>{var l,s,n;return s=null===a||void 0===a?void 0:a._id,n=null===e||void 0===e||null===(l=e._id)||void 0===l?void 0:l.company_name,ee(),fetch(`https://insuranceapi-3o5t.onrender.com/api/getlimitedDataOfMedicalPlan?id=${s}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var a,l;const s=e.data[0];console.log(s," >>>>>>>>>>>>>>>> data.dtaa");const i={insurancecompany:n,plan_name:null===s||void 0===s?void 0:s.plan_name,nature_of_plan:null===s||void 0===s?void 0:s.natureofplans,plan_condition:null===s||void 0===s||null===(a=s.plan_condition)||void 0===a?void 0:a.map((e=>e.medical_plan_condition)),medical_salary_range:null===s||void 0===s||null===(l=s.salary_range)||void 0===l?void 0:l.map((e=>e.medical_salary_range)),ratesBasedOnAge:s.ratesBasedOnAge};q(i)})),void X(!0)},children:"View"})})]})},l)}))),(0,x.jsx)("hr",{})]},a)}))})})]})]})})}),(0,x.jsxs)(d.A,{size:"lg",show:f,onHide:()=>y(!1),children:[(0,x.jsx)(d.A.Header,{closeButton:!0,children:(0,x.jsx)(d.A.Title,{children:"Upload "})}),(0,x.jsx)(d.A.Body,{children:(0,x.jsx)(c.A,{children:(0,x.jsxs)(r.A,{children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"name",children:"Policy Wordings/T&C"}),(0,x.jsx)("input",{type:"file",className:"form-control",id:"file",name:"file",onChange:e=>k(e.target.files[0])})]})}),""==w||null==w||void 0==w||"undefined"==w||0==w.length?"":(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsx)("a",{className:"btn btn-warning",href:`https://insuranceapi-3o5t.onrender.com/uploads/${w}`,style:{position:"relative",top:"23px"},rel:"noreferrer",target:"_blank",children:"view"})})]})})}),(0,x.jsxs)(d.A.Footer,{children:[(0,x.jsx)(m.A,{variant:"primary",onClick:async e=>{e.preventDefault();const a=new FormData;a.append("policywordings_file",S),a.append("id",_);const l={method:"POST",body:a};await fetch("https://insuranceapi-3o5t.onrender.com/api/upload_medical_plan_policywordings_file",l).then((e=>e.text())).then((e=>console.log(e))).catch((e=>console.log("error",e))),y(!1),t()({title:"Success!",text:"Policy Wordings File Uploaded Successfully",icon:"success",button:!1})},children:"Upload"}),(0,x.jsx)(m.A,{variant:"secondary",onClick:()=>y(!1),children:"Close"})]})]}),(0,x.jsxs)(u.zS,{alignment:"center",visible:T,onClose:()=>E(!1),children:[(0,x.jsx)(u.E4,{onClose:()=>E(!1),children:(0,x.jsx)(u.lb,{children:"Upload Excel File"})}),(0,x.jsx)(u.Tc,{children:(0,x.jsx)("div",{children:(0,x.jsx)("input",{type:"file",className:"form-control",id:"DHA",defaultValue:"",required:!0,onChange:e=>M(e.target.files[0])})})}),(0,x.jsxs)(u.If,{children:[(0,x.jsx)(u.Q_,{color:"secondary",onClick:()=>E(!1),children:"Close"}),(0,x.jsx)(u.Q_,{color:"primary",onClick:async e=>{e.preventDefault();const a=new FormData;a.append("xlFile",P);let l=await fetch("https://insuranceapi-3o5t.onrender.com/api/add_bulk_Medical_plan",{method:"post",body:a});l=await l.json(),E(!T),200===l.status?t()({text:l.message,icon:"success",button:!1}):t()({title:"Error!",text:"Failed to upload excel file",icon:"error",button:!1}),ae(b,v),setTimeout((()=>{t().close()}),1e3)},children:"Upload"})]})]}),(0,x.jsxs)(u.zS,{size:"lg",alignment:"center",visible:Z,onClose:()=>X(!1),children:[(0,x.jsx)(u.E4,{onClose:()=>X(!1),children:(0,x.jsx)(u.lb,{children:"Travel Plan Details"})}),(0,x.jsxs)(u.Tc,{children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Insurance Company Name"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===K||void 0===K?void 0:K.insurancecompany})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Plan Name"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===K||void 0===K?void 0:K.plan_name})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Nature of Plan"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===K||void 0===K?void 0:K.nature_of_plan})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Plan Condition"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===K||void 0===K?void 0:K.plan_condition})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Medical Salary Range"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===K||void 0===K?void 0:K.medical_salary_range})]})})]}),(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Rate based on Age"}),(0,x.jsxs)("select",{className:"form-control",onChange:e=>ee(e.target.value),children:[(0,x.jsx)("option",{value:"",hidden:!0,children:"Select rates based on Age"}),null===K||void 0===K||null===(e=K.ratesBasedOnAge)||void 0===e?void 0:e.map(((e,a)=>(0,x.jsx)("option",{value:a,children:e.rate_name},a)))]})]})})}),null===K||void 0===K||null===(a=K.ratesBasedOnAge)||void 0===a?void 0:a.map(((e,a)=>{var l,s,n,i,t,o,d,c,r,m;return(0,x.jsxs)("div",{className:"row",hidden:Y!=a,children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Rate Name"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===e||void 0===e?void 0:e.rate_name})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"TPA"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===e||void 0===e||null===(l=e.tpa)||void 0===l||null===(s=l.map((e=>e.name)))||void 0===s?void 0:s.join(", ")})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Network"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===e||void 0===e||null===(n=e.networks)||void 0===n||null===(i=n.map((e=>e.name)))||void 0===i?void 0:i.join(", ")})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Age"}),(0,x.jsx)("input",{type:"text",className:"form-control",value:null===e||void 0===e||null===(t=e.ageRange)||void 0===t||null===(o=t.map((e=>e.minAge+"-"+e.maxAge)))||void 0===o?void 0:o.join(", ")})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Emirates Issueing Visa"}),(0,x.jsx)("textarea",{rows:2,type:"text",className:"form-control",value:null===e||void 0===e||null===(d=e.emirateId)||void 0===d||null===(c=d.map((e=>e.area_of_registration_name)))||void 0===c?void 0:c.join(", ")})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group mb-3",children:[(0,x.jsx)("label",{className:"text-danger",children:"Co-Payments"}),(0,x.jsx)("textarea",{rows:2,type:"text",className:"form-control",value:null===e||void 0===e||null===(r=e.primiumArray)||void 0===r||null===(m=r.map((e=>e.coPayments)))||void 0===m?void 0:m.join("::")})]})})]},a)}))]}),(0,x.jsx)(u.If,{children:(0,x.jsx)(u.Q_,{color:"secondary",onClick:()=>X(!1),children:"Close"})})]})]})}},61072:(e,a,l)=>{l.d(a,{A:()=>c});var s=l(98139),n=l.n(s),i=l(65043),t=l(67852),o=l(70579);const d=i.forwardRef(((e,a)=>{let{bsPrefix:l,className:s,as:i="div",...d}=e;const c=(0,t.oU)(l,"row"),r=(0,t.gy)(),m=(0,t.Jm)(),u=`${c}-cols`,h=[];return r.forEach((e=>{const a=d[e];let l;delete d[e],null!=a&&"object"===typeof a?({cols:l}=a):l=a;const s=e!==m?`-${e}`:"";null!=l&&h.push(`${u}${s}-${l}`)})),(0,o.jsx)(i,{ref:a,...d,className:n()(s,c,...h)})}));d.displayName="Row";const c=d},15287:(e,a,l)=>{e.exports=l.p+"static/media/Medical-Plan-sample-sheet.be4b40f05faf4166d533.xlsx"}}]);
//# sourceMappingURL=5342.f8f36027.chunk.js.map