"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2298],{52298:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var n=t(65043),o=t(73216),l=t(30064),s=t.n(l),i=t(54168),c=t(70579);const r=()=>{const e=(0,o.Zp)(),[a,t]=(0,n.useState)([]),[l,r]=(0,n.useState)([]),[d,p]=(0,n.useState)([]),[m,u]=(0,n.useState)([]),[h,_]=(0,n.useState)([]),[x,j]=(0,n.useState)([]),[f,v]=(0,n.useState)([]),[g,y]=(0,n.useState)([]),[N,b]=(0,n.useState)([]),[S,T]=(0,n.useState)([]),[C,E]=(0,n.useState)(""),[O,P]=(0,n.useState)(""),[V,w]=(0,n.useState)(""),[k,R]=(0,n.useState)(""),[G,q]=(0,n.useState)(""),[A,B]=(0,n.useState)(""),[D,M]=(0,n.useState)(""),[L,F]=(0,n.useState)(""),[I,J]=(0,n.useState)(""),[Z,$]=(0,n.useState)(""),[z,H]=(0,n.useState)([]),[U,K]=(0,n.useState)([]),[Q,W]=(0,n.useState)([]),[X,Y]=(0,n.useState)({status:!1,name:""});(0,n.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];t(e),re(e),ae(),ne(),ie(),oe(),te(),le(),se(),ce(),ee()}}),[]);const ee=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,t=[];for(let n=0;n<a.length;n++)t.push({label:a[n].location_name,value:a[n]._id});K(t)}))},ae=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getPlanCategory",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{r(e.data)}))},te=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/company_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{H(e.data)}))},ne=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNatureOfPlan",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{p(e.data)}))},oe=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getMedicalPlanTypeList",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{u(e.data),console.log(e.data,"hii")}))},le=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getmedicalVisaCountry",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{j(e.data)}))},se=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getMedicalPlanCondition",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{v(e.data)}))},ie=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNationality",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{y(e.data)}))},ce=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getMedicalSalaryRange",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{b(e.data)}))},re=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/single_medical_plan_details/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var a;_(e.data),console.log(e.data,">>>>>>>>>>>>>>>>>>> data"),console.log(e.data);const t=e.data.medical_visa_country_or_topup,n=t.length;W(null===(a=e.data)||void 0===a?void 0:a.location);const o=[];for(let _=0;_<n;_++){const e=t[_].issuing_visa_topup;o.push(e)}var l=o.join(",");T(t),E(l);const s=e.data.plan_condition_or_topup,i=s.length,c=[];for(let _=0;_<i;_++){const e=s[_].plan_condition_topup;c.push(e)}var r=c.join(",");P(s),w(r);const d=e.data.salary_range_or_topup,p=d.length,m=[];for(let _=0;_<p;_++){const e=d[_].salary_range_topup;m.push(e)}var u=m.join(",");B(d),M(u);const h=e.data.nationality_or_topup,x=h.length,j=[];for(let _=0;_<x;_++){const e=h[_].nationalitytopup;j.push(e)}var f=j.join(",");R(h),q(f);const v=e.data.add_op_con_desc,g=v.length,y=[],N=[],b=[];for(let _=0;_<g;_++){const e=v[_].add_op_con_desc;y.push(e);const a=v[_].add_op_con_desc_topup;N.push(a);const t=v[_].vat;b.push(t)}var S=y.join(","),C=N.join(","),O=b.join(",");F(S),J(C),$(O)}))},de=e=>{P(e)},pe=e=>{R(e)},me=e=>{B(e)},ue=e=>{W(e)},he=e=>{const a=e.target.value;/^[A-Za-z,]*$/.test(a)?Y({status:!1,name:e.target.name}):(Y({status:!0,name:e.target.name}),e.target.value=a.replace(/[^a-zA-Z\s,]/g,""))};return(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsxs)("div",{className:"card",style:{marginTop:"20px"},children:[(0,c.jsx)("div",{className:"card-header",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("h4",{className:"card-title",children:"Edit Medical Plan"})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("button",{onClick:()=>e(-1),className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("form",{action:"/",method:"POST",onSubmit:t=>{t.preventDefault();const n=new FormData(t.target),o=n.get("plan_name"),l=n.get("company_id"),i=n.get("plan_category_id"),c=n.get("nature_of_plan_id"),r=n.get("medical_plan_type_id"),d=n.get("medical_visa_country_topup");console.log(d);const p=n.get("medical_plan_condition_topup"),m=n.get("nationality_topup"),u=n.get("salary_range_topup"),h=n.get("add_op_con_desc"),_=n.get("add_op_con_desc_topup"),x=n.get("vat"),j=n.get("jdv_comm");if(""!=h&&(""==_||""==x)){if(""==_)return s().fire({title:"Error!",text:"Please Enter Topup (Add Option Condition Description)",icon:"error",confirmButtonText:"Ok"}),!1;if(""==x)return s().fire({title:"Error!",text:"Please Enter Vat",icon:"error",confirmButtonText:"Ok"}),!1}if(0==O.length)return s().fire({title:"Error!",text:"Please Select Plan Condition",icon:"error",confirmButtonText:"Ok"}),!1;if(0==k.length)return s().fire({title:"Error!",text:"Nationality Required",icon:"error",confirmButtonText:"Ok"}),!1;if(0==A.length)return s().fire({title:"Error!",text:"Please Select Medical Salary Range",icon:"error",confirmButtonText:"Ok"}),!1;if(0==Q.length)return s().fire({title:"Error!",text:"Please Select Location",icon:"error",confirmButtonText:"Ok"}),!1;const f={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan_name:o,company_id:l,plan_category_id:i,nature_of_plan_id:c,medical_plan_type:r,medical_visa_country:S,medical_visa_country_topup:d,medical_plan_condition:O,medical_plan_condition_topup:p,nationality_name:k,nationality_topup:m,medical_salary_range:A,salary_range_topup:u,add_op_con_desc:h,add_op_con_desc_topup:_,vat:x,jdv_comm:j,excess:n.get("excess"),location:Q})};fetch(`https://insuranceapi-3o5t.onrender.com/api/update_medical_plan/${a}`,f).then((e=>e.json())).then((a=>{200===a.status?s().fire({title:"Success",text:a.message,icon:"success",confirmButtonText:"Ok"}).then((a=>{a.isConfirmed&&e("/medicalplan")})):s().fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Ok"}).then((a=>{a.isConfirmed&&e("/medicalplan")}))}))},children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Plan Name"}),(0,c.jsx)("input",{required:!0,type:"text",className:"form-control",placeholder:"Enter Plan Name",name:"plan_name",autoComplete:"off",defaultValue:h.plan_name})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Company Name"}),(0,c.jsxs)("select",{required:!0,className:"form-control",name:"company_id",children:[(0,c.jsx)("option",{value:"",children:"Select Company"}),z.map(((e,a)=>(0,c.jsx)("option",{value:e._id,selected:h.company_id==e._id,children:e.company_name},a)))]})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Medical Plan Type"}),(0,c.jsxs)("select",{required:!0,className:"form-control",name:"medical_plan_type_id",children:[(0,c.jsx)("option",{value:"",children:"Select Medical Plan Type"}),m.map(((e,a)=>(0,c.jsx)("option",{value:e._id,selected:h.medical_plan_type_id==e._id,children:e.medical_plan_type},a)))]})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Nature Of Plan"}),(0,c.jsxs)("select",{required:!0,className:"form-control",name:"nature_of_plan_id",children:[(0,c.jsx)("option",{value:"",children:"Select Nature Of Plan"}),d.map(((e,a)=>(0,c.jsx)("option",{value:e._id,selected:h.nature_of_plan_id==e._id,children:e.nature_of_plan_name},a)))]})]})})]}),(0,c.jsx)("div",{className:"row"}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Plan Condition"}),(0,c.jsx)(i.default,{className:"form-control",options:f,selectedValues:h.plan_condition_or_topup,onSelect:de,onRemove:de,displayValue:"medical_plan_condition",showCheckbox:!0})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Topup(Plan Condition)"}),(0,c.jsx)("input",{type:"text",name:"medical_plan_condition_topup",className:"form-control",placeholder:"Enter Topup (Plan Condition)",autoComplete:"off",defaultValue:V})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Nationality"}),(0,c.jsx)(i.default,{options:g,selectedValues:h.nationality_or_topup,displayValue:"nationality_name",showCheckbox:!0,onSelect:pe,onRemove:pe})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Topup(Nationality)"}),(0,c.jsx)("input",{type:"text",name:"nationality_topup",className:"form-control",placeholder:"Enter Topup (Nationality)",autoComplete:"off",defaultValue:G})]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Medical Salary Range"}),(0,c.jsx)(i.default,{className:"form-control",options:N,selectedValues:h.salary_range_or_topup,onSelect:me,onRemove:me,displayValue:"medical_salary_range",showCheckbox:!0})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Topup(Salary Range Topup)"}),(0,c.jsx)("input",{type:"text",name:"salary_range_topup",className:"form-control",placeholder:"Enter Topup (Medical Salary Range)",autoComplete:"off",defaultValue:D})]})})]}),(0,c.jsx)("div",{className:"row"}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Add Option Condition Description"}),(0,c.jsx)("input",{required:!0,type:"text",name:"add_op_con_desc",onInput:e=>he(e),className:"form-control",placeholder:"Enter Add Option Condition Description",autoComplete:"off",defaultValue:L}),1==X.status&&"add_op_con_desc"==X.name?(0,c.jsx)("span",{style:{color:"red"},children:"Text Only"}):""]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Topup (Add Option Condition Description)"}),(0,c.jsx)("input",{type:"text",name:"add_op_con_desc_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered (Add Option Condition Description)",autoComplete:"off",defaultValue:I})]})}),(0,c.jsx)("div",{className:"col-md-4",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Vat Able"}),(0,c.jsx)("input",{required:!0,type:"text",name:"vat",onInput:e=>he(e),className:"form-control",placeholder:"Enter Vat Able",autoComplete:"off",defaultValue:Z}),1==X.status&&"vat"==X.name?(0,c.jsx)("span",{style:{color:"red"},children:"Text Only"}):""]})})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"JDV Commission"}),(0,c.jsx)("input",{required:!0,type:"text",name:"jdv_comm",className:"form-control",placeholder:"Enter JDV Commission",autoComplete:"off",defaultValue:h.jdv_comm})]})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{children:"Location"}),(0,c.jsx)(i.default,{options:U,selectedValues:Q,onSelect:e=>ue(e),onRemove:e=>ue(e),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]})})]}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:"Update"})})})]})})]})})})})}}}]);
//# sourceMappingURL=2298.24e5fad3.chunk.js.map