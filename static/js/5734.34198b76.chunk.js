"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5734],{5734:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var a=n(65043),s=n(73216),l=n(73023),o=n.n(l),c=n(54168),i=n(70579);const r=()=>{const e=(0,s.Zp)(),[t,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(null),[d,h]=(0,a.useState)([]),[u,m]=(0,a.useState)({});(0,a.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?e("/login"):p()}),[]);const p=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,s=[];for(let n=0;n<a;n++){const e={label:t[n].location_name,value:t[n]._id};s.push(e)}n(s)}))},g=(e,t,n)=>{const a=[...d];a[e][n]=t,h(a)};return(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("h4",{className:"card-title",children:"Add Yacht Engine"})})})}),(0,i.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll"},children:(0,i.jsxs)("table",{className:"table table-bordered",style:{width:"auto"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:(0,i.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={engine_name:"",location:t};h([...d,e])},children:"+"})}),(0,i.jsx)("th",{children:"Engine Name"}),(0,i.jsx)("th",{children:"engine Logo"}),(0,i.jsx)("th",{children:"Location"})]})}),(0,i.jsx)("tbody",{children:d.map(((e,n)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const t=[...d];t.splice(e,1),h(t)})(n),children:"x"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:e=>((e,t)=>{const{name:n,value:a}=t.target;""===a.trim()?m((e=>({...e,[n]:"This is required"}))):m((e=>({...e,[n]:""})));const s=[...d];s[e][n]=a,h(s)})(n,e),className:"form-control",name:"engine_name",placeholder:"Engine Name",autoComplete:"off",required:!0})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"file",onChange:e=>{return t=n,a=e.target.files[0],void(d[t].logo=a);var t,a},className:"form-control",name:"yacht_engine_logo",placeholder:"yacht engine logo",autoComplete:"off",required:!0})}),(0,i.jsx)("td",{children:(0,i.jsx)(c.default,{options:t,selectedValues:t,displayValue:"label",onSelect:e=>g(n,e,"location"),onRemove:e=>g(n,e,"location"),placeholder:"Select Location",showCheckbox:!0,closeOnSelect:!1,required:!0})})]},n)))})]})}),(0,i.jsx)("div",{className:"card-footer",children:(0,i.jsx)("button",{className:"btn btn-outline-success",onClick:t=>{t.preventDefault();try{if(d.some((e=>""===e.engine_name.trim()||!e.location)))return o()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"}),!1;{let t=d.length-1;for(let n=0;n<d.length;n++){const a=d[n].location,s=[],l=new FormData;for(let e=0;e<a.length;e++)s.push(a[e].value);l.append("file",d[n].logo),l.append("location",s),l.append("engine_name",d[n].engine_name),l.append("index",n),t==n&&l.append("last","last");fetch("https://insuranceapi-3o5t.onrender.com/api/AddYachtEngine",{method:"POST",body:l}).then((e=>e.json())).then((t=>{200==t.status?(o()({text:t.message,type:"success",icon:"success",button:!1}),setTimeout((()=>{o().close(),e("/ViewYachtEngine")}),1e3)):200!=t.status&&(o()({title:"Error!",text:t.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{o().close(),e("/ViewYachtEngine")}),1e3))}))}}}catch(n){console.log(n)}},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=5734.34198b76.chunk.js.map