(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7921],{67921:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(65043),n=a(53519),o=a(84217),l=a(14282),i=a(73216),r=a(92157),c=a.n(r),d=(a(58971),a(93946)),u=(a(72450),a(73023)),h=a.n(u),m=a(54168),p=a(70579);const y=()=>{var e;const t=(0,i.Zp)(),[a,r]=(0,s.useState)([]),[u]=(0,s.useState)(10),[y,j]=(0,s.useState)(0),[x,f]=(0,s.useState)(1),[v,g]=(0,s.useState)(""),[b,S]=(0,s.useState)([]),[_,w]=(0,s.useState)(),[N,C]=(0,s.useState)(""),[k,A]=(0,s.useState)(""),[T,B]=(0,s.useState)(""),[E,L]=(0,s.useState)(!1),[O,R]=(0,s.useState)(!1),[D,V]=(0,s.useState)(!1),[F,M]=(0,s.useState)([]),[U,H]=(0,s.useState)([]),[q,P]=(0,s.useState)([]);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)t("/login");else{var a;z(x,u),Q(),X(),I();const e=JSON.parse(localStorage.getItem("user")),t=(null===e||void 0===e||null===(a=e.medical_permission)||void 0===a?void 0:a[0])||{};M(t)}}),[]);const I=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/get_area_of_registration",e).then((e=>e.json())).then((e=>{const t=e.data;H(t)}))},z=async(e,t)=>{r([]);const a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_actualSalaryBand?page=${e}&limit=${t}`,a).then((e=>e.json())).then((e=>{const a=e.total/t,s=Math.ceil(a);j(s);const n=e.data;console.log("data",n),r(n)}))},[G,J]=(0,s.useState)([]),X=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_actualSalaryBand",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{J(e.data)}))},$=async(e,t)=>{let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/update_actualSalaryBand_status",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,actualSalaryBand_status:t})});a=await a.json(),h()("Success!","Status Updated Successfully!","success"),z(x,u)},Q=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;S(t),K(t)}))},K=e=>{w(e)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.A,{children:(0,p.jsxs)("div",{className:"card mb-4",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsx)("h4",{className:"card-title",children:"Actual Salary Band"})}),(0,p.jsx)("div",{className:"col-md-6",children:null!==(e=F.salary_range)&&void 0!==e&&e.includes("create")?(0,p.jsx)("button",{className:"btn btn-primary",style:{float:"right"},onClick:()=>{t("/AddActualSalaryBand")},children:"Add Salary Band"}):""})]})}),(0,p.jsxs)("div",{className:"card-body",style:{overflowX:"scroll"},children:[(0,p.jsxs)("table",{className:"table table-bordered",children:[(0,p.jsx)("thead",{className:"thead-dark",children:(0,p.jsxs)("tr",{className:"table-info",children:[(0,p.jsx)("th",{scope:"col",children:"#"}),(0,p.jsx)("th",{scope:"col",children:"Salary Band"}),(0,p.jsx)("th",{scope:"col",children:"Emirates Issuing Visa"}),(0,p.jsx)("th",{scope:"col",children:"Location"}),(0,p.jsx)("th",{scope:"col",children:"Action"})]})}),(0,p.jsx)("tbody",{children:(null===a||void 0===a?void 0:a.length)>0?a.map(((e,t)=>{var a,s,n,o;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:t+1}),(0,p.jsx)("td",{children:e.actual_salary_band}),(0,p.jsx)("td",{children:null===(a=e.visa_countries)||void 0===a?void 0:a.map((e=>e.area_of_registration_name)).join(", ")}),(0,p.jsx)("td",{children:null===(s=e.salary_range_location)||void 0===s?void 0:s.map((e=>e.location_name)).join(", ")}),(0,p.jsxs)("td",{children:[(null===(n=F.salary_range)||void 0===n?void 0:n.includes("edit"))&&(0,p.jsx)("button",{className:"btn btn-primary",onClick:()=>(async e=>{var t,a,s,n;B(e);const o={method:"post",body:JSON.stringify({ParamValue:e}),headers:{"Content-Type":"application/json"}};let l=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_actualSalaryBand_detailsbyid",o);l=await l.json(),console.log(l.data,">>>>>>>>> result data"),C(null===(t=l.data[0])||void 0===t?void 0:t.actual_salary_band),A(null===(a=l.data[0])||void 0===a?void 0:a.actual_salary_band_status);const i=null===(s=l.data[0])||void 0===s?void 0:s.salary_range_location,r=null===(n=l.data[0])||void 0===n?void 0:n.visa_countries;console.log("visa_countries",r),P(r),w(i),V(!0)})(e._id),children:"Edit"})," ",(null===(o=F.salary_range)||void 0===o?void 0:o.includes("delete"))&&(0,p.jsxs)(p.Fragment,{children:[1===e.actual_salary_band_status?(0,p.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&$(e._id,0)},children:"Deactivate"}):(0,p.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&$(e._id,1)},children:"Activate"}),(0,p.jsx)("button",{className:"btn btn-warning mx-1",onClick:()=>{var t;window.confirm("Are you sure you wish to delete this item?")&&(t=e._id,fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteMedicalMaster/?id=${t}&type=actualsalaryBand`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200===e.status?(h()({title:"Success!",text:e.message,icon:"success",button:!1}),z(x,u),setTimeout((()=>{h().close()}),1e3)):(h()({title:"Error!",text:e.message,icon:"error",button:!1}),z(x,u),setTimeout((()=>{h().close()}),1e3))})))},children:"Delete"})]})]})]},t)})):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"6",children:"No Data Found"})})})]}),(0,p.jsx)(c(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:y,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;f(t+1),z(t+1,u)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})}),(0,p.jsxs)(d.zS,{alignment:"center",visible:E,onClose:()=>L(!1),children:[(0,p.jsx)(d.E4,{onClose:()=>L(!1),children:(0,p.jsx)(d.lb,{children:"Upload Excel File"})}),(0,p.jsx)(d.Tc,{children:(0,p.jsx)("div",{children:(0,p.jsx)("input",{type:"file",className:"form-control",id:"DHA",defaultValue:"",required:!0,onChange:e=>g(e.target.files[0])})})}),(0,p.jsxs)(d.If,{children:[(0,p.jsx)(d.Q_,{color:"secondary",onClick:()=>L(!1),children:"Close"}),(0,p.jsx)(d.Q_,{color:"primary",onClick:async e=>{e.preventDefault();const t=new FormData;t.append("file",v);let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/read_actualSalaryBand_excel ",{method:"post",body:t});a=await a.json(),200===a.status?(L(!E),h()({text:a.message,type:"success",icon:"success",button:!1}),z(x,u),setTimeout((()=>{h().close()}),1e3)):(L(!E),h()({title:"Error!",text:a.message,type:"error",icon:"error",button:"ok"}),z(x,u),setTimeout((()=>{h().close()}),1e3))},href:"/Viewtraveltype",children:"Upload"})]})]}),(0,p.jsxs)(o.A,{size:"lg",show:O,onHide:()=>R(!1),children:[(0,p.jsx)(o.A.Header,{closeButton:!0,children:(0,p.jsx)(o.A.Title,{children:"Add Salary range"})}),(0,p.jsx)(o.A.Body,{children:(0,p.jsx)("div",{className:"container",children:(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsx)("div",{className:"card",children:(0,p.jsx)("div",{className:"card-body",children:(0,p.jsxs)("form",{action:"/",method:"POST",onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target).get("actualSalaryBand"),a=_,s=a.length,n=[];for(let o=0;o<s;o++)n.push(a[o]._id);await fetch("https://insuranceapi-3o5t.onrender.com/api/add_actualSalaryBand",{method:"post",body:JSON.stringify({actualSalaryBand:t,actualSalaryBand_location:n}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200==e.status?(R(!1),h()({text:e.message,type:"success",icon:"success",button:!1}),z(x,u),setTimeout((()=>{h().close()}),1e3)):(R(!1),h()({title:"Error!",text:e.message,type:"error",icon:"error",button:!1}),z(x,u),setTimeout((()=>{h().close()}),1e3))}))},children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:(0,p.jsx)("strong",{children:"Add Actual Salary Band"})}),(0,p.jsx)("input",{type:"text",className:"form-control",name:"actualSalaryBand",placeholder:"Enter Salary range",defaultValue:"",required:!0})]}),(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("label",{className:"form-label",children:(0,p.jsx)("strong",{children:"Select Location"})}),(0,p.jsx)(m.default,{options:b,selectedValues:b,displayValue:"location_name",onSelect:w,onRemove:w,placeholder:"Select Location",showCheckbox:!0,required:!0})]})]}),(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,p.jsx)(o.A.Footer,{children:(0,p.jsx)(l.A,{variant:"secondary",onClick:()=>R(!1),children:"Close"})})]}),(0,p.jsxs)(o.A,{size:"lg",show:D,onHide:()=>V(!1),children:[(0,p.jsx)(o.A.Header,{closeButton:!0,children:(0,p.jsx)(o.A.Title,{children:"Edit Salary Band"})}),(0,p.jsx)(o.A.Body,{children:(0,p.jsx)("div",{className:"container",children:(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsx)("div",{className:"card",children:(0,p.jsx)("div",{className:"card-body",children:(0,p.jsxs)("form",{action:"/",method:"POST",onSubmit:async e=>{e.preventDefault();const t=new FormData(e.target).get("actualSalaryBand"),a=_,s=a.length,n=[];for(let o=0;o<s;o++)n.push(a[o]._id);await fetch("https://insuranceapi-3o5t.onrender.com/api/update_actualSalaryBand_details",{method:"POST",body:JSON.stringify({ParamValue:T,actualSalaryBand:t,medical_visa_country:q,actualSalaryBand_location:n}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200==e.status?(V(!1),h()({text:e.message,type:"success",icon:"success",button:!1}),z(x,u),setTimeout((()=>{h().close()}),1e3)):(V(!1),h()({title:"Error!",text:e.message,type:"error",icon:"error",button:!1}),z(x,u),setTimeout((()=>{h().close()}),1e3))}))},children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("label",{className:"form-label",children:(0,p.jsx)("strong",{children:"Edit Salary Band"})}),(0,p.jsx)("input",{type:"text",className:"form-control",name:"actualSalaryBand",placeholder:"Enter Salary range",defaultValue:N,required:!0})]}),(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("label",{children:"Medical Visa Country"}),(0,p.jsx)(m.default,{style:{overflow:"visible"},options:U,selectedValues:q,displayValue:"area_of_registration_name",onSelect:e=>P(e),onRemove:e=>P(e),placeholder:"Select Visa Country",showCheckbox:!0,required:!0})]}),(0,p.jsxs)("div",{className:"col-md-4",children:[(0,p.jsx)("label",{className:"form-label",children:(0,p.jsx)("strong",{children:"Select Location"})}),(0,p.jsx)(m.default,{options:b,selectedValues:_,onSelect:K,onRemove:K,displayValue:"location_name",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]})]}),(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,p.jsx)(o.A.Footer,{children:(0,p.jsx)(l.A,{variant:"secondary",onClick:()=>V(!1),children:"Close"})})]})]})}},72450:function(e,t,a){var s,n,o;n=[],void 0===(o="function"===typeof(s=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function s(e,t,a){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){r(s.response,t,a)},s.onerror=function(){console.error("could not download file")},s.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(s){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a.g&&a.g.global===a.g?a.g:void 0,i=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,t,a){var i=l.URL||l.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin===location.origin?o(r):n(r.href)?s(e,t,a):o(r,r.target="_blank")):(r.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(r.href)}),4e4),setTimeout((function(){o(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,l){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,l),a);else if(n(e))s(e,a,l);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){o(i)}))}}:function(e,t,a,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return s(e,t,a);var o="application/octet-stream"===e.type,r=/constructor/i.test(l.HTMLElement)||l.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&r||i)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},d.readAsDataURL(e)}else{var u=l.URL||l.webkitURL,h=u.createObjectURL(e);n?n.location=h:location.href=h,n=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}});l.saveAs=r.saveAs=r,e.exports=r})?s.apply(t,n):s)||(e.exports=o)},58971:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/medical-salary-range.184e728380c481acdc2a.xlsx"}}]);
//# sourceMappingURL=7921.96144828.chunk.js.map