"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3183,3610,5058],{3610:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(65043),l=a(92157),n=a.n(l),o=a(73216),i=a(1177),r=a(5093),c=a(51082),d=a(70579);const u=function(e){let{filterOptions:t,defaultOptions:a}=e;const l=(0,o.Zp)(),[u]=(0,s.useState)(5),[p,h]=(0,s.useState)(0),[m,g]=(0,s.useState)(1),[f,b]=(0,s.useState)([]),[y,x]=(0,s.useState)(0),j=JSON.parse(localStorage.getItem("user"))._id;(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?l("/login"):S(m,u)}),[t]);const v=(m-1)*u,S=async(e,s)=>{let l=t.location,n=t.lob,o=t.businessType,i=t.agent,r=t.dateRange,c=a.startdate,d=a.enddate;l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):a.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):a.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),p=JSON.parse(localStorage.getItem("user")).usertype,m={method:"POST",body:JSON.stringify({page:e,limit:s,agentid:j,location:l,lob:n,business_type:o,newagent:i,dateRange:r,startdate:c,enddate:d}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};"6462250eb201a6f07b2dff3a"!=p&&"646224eab201a6f07b2dff36"!=p&&"646224deb201a6f07b2dff32"!=p&&"64622526b201a6f07b2dff3e"!=p||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?policyIssuer=issuedPolicy&dashboardType=policyIssuerDashbord",m).then((e=>e.json())).then((e=>{const t=e.total;x(t);const a=t/s,l=Math.ceil(a);h(l);const n=e.data;b(n)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?policyIssuer=issuedPolicy&dashboardType=policyIssuerDashbord",m).then((e=>e.json())).then((e=>{const t=e.total;x(t);const a=t/s,l=Math.ceil(a);h(l);const n=e.data;b(n)})).catch((e=>{console.log(e)}))};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(i.A,{defaultActiveKey:"0",flush:!0,children:(0,d.jsxs)(i.A.Item,{eventKey:"0",children:[(0,d.jsx)(i.A.Header,{children:(0,d.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,d.jsx)("strong",{children:"Issued Policies"}),y>0?(0,d.jsx)("div",{className:"dashboardNotify",children:(0,d.jsx)("h6",{children:y})}):""]})}),(0,d.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,d.jsxs)("table",{className:"table table-bordered",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",children:"Sr"}),(0,d.jsx)("th",{scope:"col",children:"Client Name"}),(0,d.jsx)("th",{scope:"col",children:"Contact Number"}),(0,d.jsx)("th",{scope:"col",children:"Email Address"}),(0,d.jsx)("th",{scope:"col",children:"Received From"}),(0,d.jsx)("th",{scope:"col",children:"LOB"}),(0,d.jsx)("th",{scope:"col",children:"Time & Date Issued"}),(0,d.jsx)("th",{scope:"col",children:"PI TAT"}),(0,d.jsx)("th",{scope:"col",children:"Authorities Pending"}),(0,d.jsx)("th",{scope:"col",children:"Action"})]})}),(0,d.jsx)("tbody",{children:f.length>0?f.map(((e,t)=>{const a=(0,r.default)(e.policy_issued_date),s=new Date,l=Math.abs((0,c.A)(a,s));return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:v+t+1}),(0,d.jsx)("td",{children:e.name}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`https://wa.me/${e}`;window.open(t)})(e.phoneno),children:e.phoneno})}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`mailto:${e}`;window.open(t)})(e.email),children:e.email})}),(0,d.jsx)("td",{children:e.dc_recived_from[0].name}),(0,d.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,d.jsx)("td",{children:new Date(e.policy_issued_date).toUTCString()}),(0,d.jsx)("td",{children:l+" Days"}),(0,d.jsx)("td",{children:(0,d.jsx)("input",{type:"checkbox",name:"",id:""})}),(0,d.jsx)("td",{children:(0,d.jsx)("button",{type:"button",className:"small-btn",children:"Update"})})]},t)})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"12",className:"text-center",children:(0,d.jsx)("strong",{children:"No Records Found"})})})})]}),(0,d.jsx)("section",{children:(0,d.jsx)(n(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:p,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const t=e.selected;g(t+1),S(t+1,u,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})})})}},16184:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(65043),l=a(92157),n=a.n(l),o=a(73216),i=a(1177),r=a(84217),c=a(53519),d=a(61072),u=a(14282),p=a(73023),h=a.n(p),m=a(30710),g=a(70579);const f=function(e){let{filterOptions:t,defaultOptions:a,updateSharedData:l}=e;const p=(0,o.Zp)(),[f]=(0,s.useState)(5),[b,y]=(0,s.useState)(0),[x,j]=(0,s.useState)(1),[v,S]=(0,s.useState)([]),[_,N]=(0,s.useState)(!1),[C,A]=(0,s.useState)(""),[w,k]=(0,s.useState)(!1),[O,T]=(0,s.useState)({}),[I,P]=(0,s.useState)({}),[D,F]=(0,s.useState)(""),[L,R]=(0,s.useState)(""),[E,J]=(0,s.useState)(""),[M,B]=(0,s.useState)([]),[V,U]=(0,s.useState)(""),[W,z]=(0,s.useState)(!1),[$,H]=(0,s.useState)([]),[Y,q]=(0,s.useState)(0),G=JSON.parse(localStorage.getItem("user")),K=null===G||void 0===G?void 0:G._id;(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?p("/login"):Q(x,f)}),[t]);const Z=(x-1)*f,Q=async(e,s)=>{k(!0);let l=t.location,n=t.lob,o=t.businessType,i=t.agent,r=t.dateRange,c=a.startdate,d=a.enddate;l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):a.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):a.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),p=JSON.parse(localStorage.getItem("user")).usertype,h={method:"POST",body:JSON.stringify({page:e,limit:s,agentid:K,location:l,lob:n,business_type:o,newagent:i,dateRange:r,startdate:c,enddate:d}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};"6462250eb201a6f07b2dff3a"!=p&&"646224eab201a6f07b2dff36"!=p&&"646224deb201a6f07b2dff32"!=p&&"64622526b201a6f07b2dff3e"!=p||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?policyIssuer=pendingPolicyes&dashboardType=policyIssuerDashbord",h).then((e=>e.json())).then((e=>{const t=e.total;q(t);const a=t/s,l=Math.ceil(a);y(l);const n=e.data;S(n)})).catch((e=>{console.log(e)})).finally((()=>{k(!1)})),"64622470b201a6f07b2dff22"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?policyIssuer=pendingPolicyes&dashboardType=policyIssuerDashbord",h).then((e=>e.json())).then((e=>{const t=e.total;q(t);const a=t/s,l=Math.ceil(a);y(l);const n=e.data;S(n)})).catch((e=>{console.log(e)})).finally((()=>{k(!1)}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.A,{defaultActiveKey:"0",flush:!0,children:(0,g.jsxs)(i.A.Item,{eventKey:"0",children:[(0,g.jsx)(i.A.Header,{children:(0,g.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,g.jsx)("strong",{children:"Pending Policies"}),Y>0?(0,g.jsx)("div",{className:"dashboardNotify",children:(0,g.jsx)("h6",{children:Y})}):""]})}),(0,g.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,g.jsxs)("table",{className:"table table-bordered",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"table-info",children:[(0,g.jsx)("th",{scope:"col",children:"Sr"}),(0,g.jsx)("th",{scope:"col",children:"Client Name"}),(0,g.jsx)("th",{scope:"col",children:"Contact Number"}),(0,g.jsx)("th",{scope:"col",children:"Email Address"}),(0,g.jsx)("th",{scope:"col",children:"Received"}),(0,g.jsx)("th",{scope:"col",children:"LOB"}),(0,g.jsx)("th",{scope:"col",children:"Time & Date Recieved"}),(0,g.jsx)("th",{scope:"col",children:"Final Price"}),(0,g.jsx)("th",{scope:"col",children:"View"}),(0,g.jsx)("th",{scope:"col",children:"Issue Policy"})]})}),(0,g.jsx)("tbody",{children:v.length>0?v.map(((e,t)=>{var a,s;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:Z+t+1}),(0,g.jsx)("td",{children:e.name}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`https://wa.me/${e}`;window.open(t)})(e.phoneno),children:e.phoneno})}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`mailto:${e}`;window.open(t)})(e.email),children:e.email})}),(0,g.jsx)("td",{children:null===(a=e.dc_recived_from[0])||void 0===a?void 0:a.name}),(0,g.jsx)("td",{children:null===(s=e.policy_type[0])||void 0===s?void 0:s.line_of_business_name}),(0,g.jsx)("td",{children:e.assign_policyissuer_timestamp?new Date(e.assign_policyissuer_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{type:"text",placeholder:"Final Price",defaultValue:e.final_price,onChange:t=>{return a=e._id,s=t.target.value,void T((e=>({...e,[a]:s})));var a,s}})}),(0,g.jsx)("td",{children:(0,g.jsx)("button",{className:"small-btn",onClick:()=>{var t,a,s;return a=e._id,"Motor"===(s=null===(t=e.policy_type[0])||void 0===t?void 0:t.line_of_business_name)&&window.open(`/MotorLeaddetails?id=${a}`,"_blank"),"Travel"===s&&window.open(`/TravelLeaddetails?id=${a}`,"_blank"),"Medical"===s&&window.open(`/MedicalLeaddetails?id=${a}`,"_blank"),"Home"===s&&window.open(`/HomeLeaddetails?id=${a}`,"_blank"),"Yacht"===s&&window.open(`/YachtLeaddetails?id=${a}`,"_blank"),void("Other Insurance"===s&&window.open(`/OtherInsuranceLeaddetails?id=${a}`,"_blank"))},children:(0,g.jsx)("i",{className:"fa fa-eye"})})}),(0,g.jsx)("td",{children:(0,g.jsx)("button",{className:"small-btn",onClick:()=>((e,t)=>{console.log(t),A(e),F(t.email),H(t),N(!0)})(e._id,e),children:"Issue Policy"})})]},t)})):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"12",className:"text-center",children:(0,g.jsx)("strong",{children:"No Records Found"})})})})]}),(0,g.jsxs)("section",{children:[(0,g.jsx)("button",{className:"save-btn",onClick:e=>{try{e.preventDefault();const t="{}"===JSON.stringify(O)?null:O;for(const e in t){const a=t[e],s={method:"POST",body:JSON.stringify({id:e,final_price:a}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_final_price",s).then((e=>e.json())).then((e=>{200===e.status&&(h()("Success","Updated Successfully","success"),Q(x,f))})).catch((e=>{console.log(e)}))}}catch(t){console.log(t)}},children:"Save"}),(0,g.jsx)(n(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:b,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const t=e.selected;j(t+1),Q(t+1,f,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,g.jsx)(r.A,{size:"lg",show:_,onHide:()=>N(!1),scrollable:!0,children:w?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.A.Header,{closeButton:!0,style:{backgroundColor:"#0D2F92",color:"#ffff"},children:(0,g.jsx)(r.A.Title,{children:"Issue Policy"})}),(0,g.jsx)(r.A.Body,{children:(0,g.jsx)("div",{className:"loader-container",children:(0,g.jsx)(m.A,{color:"#ED1C24",loading:w,size:50})})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.A.Header,{closeButton:!0,style:{backgroundColor:"#0D2F92",color:"#ffff"},children:(0,g.jsx)(r.A.Title,{children:"Issue Policy"})}),(0,g.jsx)(r.A.Body,{children:(0,g.jsxs)(c.A,{children:[(0,g.jsxs)(d.A,{children:[(0,g.jsx)("label",{children:(0,g.jsx)("strong",{children:"Purchased Policy Number"})}),(0,g.jsx)("input",{type:"text",className:"form-control",name:"purchasedPolicy",id:"purchasedPolicy",onChange:e=>P(e.target.value)})]}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)("label",{children:(0,g.jsxs)("strong",{children:["To ",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]})}),(0,g.jsx)("input",{type:"email",className:"form-control",name:"to",id:"to",defaultValue:D,onChange:e=>F(e.target.value),required:!0})]}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)("label",{children:(0,g.jsx)("strong",{children:"CC"})}),(0,g.jsx)("input",{type:"text",className:"form-control",name:"cc",id:"cc",value:L,onChange:e=>R(e.target.value)})]}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)("label",{children:(0,g.jsxs)("strong",{children:["Message ",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]})}),(0,g.jsx)("textarea",{className:"form-control",name:"message",id:"message",onChange:e=>J(e.target.value),cols:"30",rows:"10",required:!0,children:`\n  Dear ${null===$||void 0===$?void 0:$.name},\n\n  We are pleased to inform you that your insurance policy has been successfully issued. Below is the summary of your policy details:\n\n  Policy Number: [Policy Number]\n  Policy Start Date: [Policy Start Date]\n  Policy End Date: [Policy End Date]\n\n  Please review the policy document attached for a comprehensive understanding of your coverage and terms. If you have any questions or require further assistance, feel free to contact our customer support team at [Customer Support Email] or [Customer Support Phone Number].\n\n  Thank you for choosing [Your Insurance Company Name] for your insurance needs. We look forward to serving you.\n\n  Best regards,\n  [Your Name]\n  [Your Title]\n  [Your Insurance Company Name]\n  [Contact Information]\n  `})]}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)("label",{children:(0,g.jsxs)("strong",{children:["Upload Documents ",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]})}),(0,g.jsx)("input",{type:"file",className:"form-control",name:"emaildocumentfiles",id:"emaildocumentfiles",multiple:!0,required:!0,onChange:e=>{const t=Array.from(e.target.files);B(t)}})]})]})}),(0,g.jsxs)(r.A.Footer,{children:[(0,g.jsx)(u.A,{variant:"primary",onClick:e=>{try{if(""===D)return h()("Warning","Please fill To fields","warning"),!1;if(!D.includes("@")||!D.includes("."))return h()("Warning","Please enter a valid email address","warning"),!1;if(""===E)return h()("Warning","The email body is empty","warning"),!1;if(0===M.length)return h()("Warning","Please upload the document","warning"),!1;{k(!0),e.preventDefault();const t=new FormData;t.append("purchasedPolicy",I),t.append("to",D),t.append("cc",L),t.append("message",E),t.append("id",C),t.append("policy_issued_by",K),t.append("policy_issued_status",1),t.append("lead_status","Closed"),M.forEach(((e,a)=>{t.append("file",e)}));const a=new Date;t.append("policy_issued_date",a.toISOString());const s=new Date;s.setFullYear(s.getFullYear()+1),t.append("policy_expiry_date",s.toISOString()),fetch("https://insuranceapi-3o5t.onrender.com/api/Send_Email",{method:"POST",body:t}).then((e=>e.json())).then((e=>{if(200===e.status){var t;const e=null===$||void 0===$||null===(t=$.policy_type[0])||void 0===t?void 0:t.line_of_business_name;fetch("https://insuranceapi-3o5t.onrender.com/api/addThiredPartyComission",{method:"POST",body:JSON.stringify({leadId:C,lobType:e}),headers:{"Content-Type":"application/json"}}),h()("Success","Email Sent Successfully","success"),Q(x,f),N(!1),l(Q(x,f))}})).catch((e=>{console.error("Error:",e)})).finally((()=>{k(!0)}))}}catch(t){console.log(t)}},children:"Submit"}),(0,g.jsx)(u.A,{variant:"dark",onClick:()=>N(!1),children:"Close"})]})]})})]})}},65058:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(65043),l=a(73216),n=a(12488),o=(a(84596),a(93946)),i=a(70579);const r=function(e){let{filterOptions:t,defaultOptions:a}=e;console.log("filterOptions",t),console.log("defaultOptions",a);const r=(0,l.Zp)(),[c,d]=(0,s.useState)([]);(0,s.useEffect)((()=>{u()}),[]),(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?r("/login"):N()}),[t]);const u=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const t=e,a=t.length,s=[];for(let e=0;e<a;e++){const a={label:t[e].lob_name,value:t[e].lob_id};s.push(a)}d(s)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,s=[];for(let l=0;l<a;l++){const e={label:t[l].line_of_business_name,value:t[l]._id};s.push(e)}d(s)}))}},[p,h]=(0,s.useState)(0),[m,g]=(0,s.useState)(0),[f,b]=(0,s.useState)(0),[y,x]=(0,s.useState)(0),[j,v]=(0,s.useState)(0),[S,_]=(0,s.useState)(0),N=async()=>{console.log("inside filterOptions",t),console.log("inside defaultOptions",a);const e=JSON.parse(localStorage.getItem("user"));let s=t.location,l=t.lob,n=t.businessType,o=t.agent,i=t.dateRange,r=a.startdate,c=a.enddate,d=e.assign_staff,u=a.userType;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultlob.map((e=>e.value)),n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultagent.map((e=>e.value));const p=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",m);const f={method:"POST",body:JSON.stringify({location:s,lob:l,business_type:n,newagent:o,dateRange:i,startdate:r,enddate:c,assign_staff:d,userType:u}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+p}};"64622526b201a6f07b2dff3e"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/topLeagentCount",f).then((e=>e.json())).then((e=>{console.log("data",e.data),h(e.data.motorCount),g(e.data.travelCount),b(e.data.homeCount),x(e.data.yatchCount),v(e.data.medicalCount),_(e.data.ortherInsuranceCount)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/topLeagentCount?dashboardType=policyIssuerDashbord",f).then((e=>e.json())).then((e=>{console.log("data",e.data),h(e.data.motorCount),g(e.data.travelCount),b(e.data.homeCount),x(e.data.yatchCount),v(e.data.medicalCount),_(e.data.ortherInsuranceCount)})).catch((e=>{console.log(e)}))};return console.log("lob",c.map((e=>e.label))),console.log("motorcount",p),console.log("travelcount",m),console.log("homecount",f),console.log("yachtcount",y),console.log("medicalcount",j),console.log("othercount",S),(0,i.jsx)("div",{children:(0,i.jsx)(n.default,{className:"carousel_abcds",margin:30,swipeable:!1,draggable:!0,showDots:!0,responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:6},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:c?c.map(((e,t)=>"Motor"==e.label?(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:e.label,value:null!=p?null===p||void 0===p?void 0:p.toString():"0"})},t):"Travel"==e.label?(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:e.label,value:null!=m?null===m||void 0===m?void 0:m.toString():"0"})},t):"Home"==e.label?(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:e.label,value:null!=f?null===f||void 0===f?void 0:f.toString():"0"})},t):"Yacht"==e.label?(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:e.label,value:null!=y?null===y||void 0===y?void 0:y.toString():"0"})},t):"Medical"==e.label?(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:e.label,value:null!=j?null===j||void 0===j?void 0:j.toString():"0"})},t):"Other Insurance"==e.label?(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:e.label,value:null!=S?null===S||void 0===S?void 0:S.toString():"0"})},t):null)):null})})}},46206:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(65043),l=a(73216),n=a(49456),o=(a(93204),a(66097),a(93946),a(61072)),i=a(78602),r=a(84217),c=a(53519),d=a(14282),u=a(54168),p=a(16184),h=a(3610),m=(a(82768),a(91033),a(98465),a(70218)),g=a(65058),f=a(70579);const b=function(){const e=(0,l.Zp)(),[t,a]=(0,s.useState)([]),[b,y]=(0,s.useState)(),[x,j]=(0,s.useState)([]),[v,S]=(0,s.useState)(),[_,N]=(0,s.useState)([]),[C,A]=(0,s.useState)(),[w,k]=(0,s.useState)([]),[O,T]=(0,s.useState)(),[I,P]=(0,s.useState)("daily"),[D,F]=(0,s.useState)(!1),[L,R]=(0,s.useState)(""),[E,J]=(0,s.useState)(new Date),[M,B]=(0,s.useState)(new Date),[V,U]=(0,s.useState)([]),W=e=>{R(e)};(0,s.useEffect)((()=>{}),[L]),(0,s.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=JSON.parse(localStorage.getItem("user")).admin_business_type;if(e.length>0){const t=e,a=t.length,s=[];for(let e=0;e<a;e++){let a;a=t[e].type,a=a.split(" ");const l={label:t[e].type,value:a[0]};s.push(l)}N(s)}else{N([{label:"New Business",value:"New"},{label:"Renewal Business",value:"Renewal"}])}z(),$(),Y(),Q();const t=JSON.parse(localStorage.getItem("dashboardCounts"));t&&U(t)}}),[]);const z=()=>{const e=JSON.parse(localStorage.getItem("user")).location;if(e.length>0){const t=e,s=t.length,l=[];for(let e=0;e<s;e++){const a={label:t[e].loc_name,value:t[e].loc_id};l.push(a)}a(l)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,s=t.length,l=[];for(let a=0;a<s;a++){const e={label:t[a].location_name,value:t[a]._id};l.push(e)}a(l)}))}},$=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const t=e,a=t.length,s=[];for(let e=0;e<a;e++){const a={label:t[e].lob_name,value:t[e].lob_id};s.push(a)}j(s)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,s=[];for(let l=0;l<a;l++){const e={label:t[l].line_of_business_name,value:t[l]._id};s.push(e)}j(s)}))}},H=JSON.parse(localStorage.getItem("user")).usertype,Y=()=>{const e=JSON.parse(localStorage.getItem("user"));e._id;if("64622526b201a6f07b2dff3e"===H){const t={label:e.name,value:e._id},a=[];a.push(t),k(a)}if("64622470b201a6f07b2dff22"===H){const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=policyIssuer",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const t=e.data,a=null===t||void 0===t?void 0:t.length,s=[];for(let l=0;l<a;l++){const e={label:t[l].name,value:t[l]._id};s.push(e)}k(s)}))}},q=e=>{P(e)},G={defaultlocation:t,defaultlob:x,defaultbusinessType:_,defaultagent:w,defaultdateRange:I,startdate:E,enddate:M},K=(e,t)=>{switch(e){case"location":y(t);break;case"lob":S(t);break;case"businessType":A(t);break;case"agent":T(t)}},Z={location:b,lob:v,businessType:C,agent:O,dateRange:I},Q=()=>{const e=JSON.parse(localStorage.getItem("user")),t=e.usertype,a=e._id,s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usertype:t,userid:a})};fetch("https://insuranceapi-3o5t.onrender.com/api/get_dashboard_count",s).then((e=>e.json())).then((e=>{localStorage.setItem("dashboardCounts",JSON.stringify(e)),U(e)}))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("section",{className:"mb-2",children:(0,f.jsxs)(o.A,{children:[(0,f.jsx)(i.A,{className:"",sm:5,children:(0,f.jsx)("h4",{id:"dashboard",className:"card-title mb-0",children:"Dashboard"})}),(0,f.jsx)(i.A,{sm:7,className:"d-none d-md-block",children:(0,f.jsxs)("div",{className:"float-end me-3",children:[(0,f.jsx)("button",{onClick:()=>q("daily"),className:""+("daily"===I?"btn btn-selected":"btn btn-light"),children:"Daily"}),(0,f.jsx)("button",{onClick:()=>q("weekly"),className:""+("weekly"===I?"btn btn-selected":"btn btn-light"),children:"Weekly"}),(0,f.jsx)("button",{onClick:()=>q("monthly"),className:""+("monthly"===I?"btn btn-selected":"btn btn-light"),children:"Monthly"}),(0,f.jsx)("button",{onClick:()=>q("yearly"),className:""+("yearly"===I?"btn btn-selected":"btn btn-light"),children:"Yearly"}),(0,f.jsx)("button",{onClick:()=>{F(!0),P("customized")},className:""+("customized"===I?"btn btn-selected":"btn btn-light"),children:"Customized"})]})}),(0,f.jsx)(i.A,{className:"mb-3",sm:3,children:(0,f.jsx)("div",{children:G.defaultlocation.length<2?(0,f.jsx)(u.default,{options:G.defaultlocation,displayValue:"label",selectedValues:G.defaultlocation,showArrow:!1}):(0,f.jsx)(u.default,{options:G.defaultlocation,displayValue:"label",onSelect:e=>K("location",e),onRemove:e=>K("location",e),placeholder:"Select location",selectedValues:b,showArrow:!0})})}),(0,f.jsx)(i.A,{className:"mb-3",sm:3,children:(0,f.jsx)("div",{children:G.defaultbusinessType.length<2?(0,f.jsx)(u.default,{options:G.defaultbusinessType,displayValue:"label",selectedValues:G.defaultbusinessType,showArrow:!1}):(0,f.jsx)(u.default,{options:G.defaultbusinessType,displayValue:"label",onSelect:e=>K("businessType",e),onRemove:e=>K("businessType",e),placeholder:"Select business type",selectedValues:C,showArrow:!0})})}),(0,f.jsx)(i.A,{className:"mb-3",sm:3,children:(0,f.jsx)("div",{children:G.defaultlob.length<2?(0,f.jsx)(u.default,{options:G.defaultlob,displayValue:"label",selectedValues:G.defaultlob,showArrow:!1}):(0,f.jsx)(u.default,{options:G.defaultlob,displayValue:"label",onSelect:e=>K("lob",e),onRemove:e=>K("lob",e),placeholder:"Select line of business",selectedValues:v,showArrow:!0})})}),(0,f.jsx)(i.A,{className:"mb-3",sm:3,children:(0,f.jsx)("div",{children:G.defaultagent.length<2?(0,f.jsx)(u.default,{options:G.defaultagent,displayValue:"label",selectedValues:G.defaultagent,showArrow:!1}):(0,f.jsx)(u.default,{options:G.defaultagent,displayValue:"label",onSelect:e=>K("agent",e),onRemove:e=>K("agent",e),placeholder:"Select Agents",selectedValues:O,showArrow:!0})})})]})}),(0,f.jsx)("section",{className:"mb-3",children:(0,f.jsx)(g.default,{defaultOptions:G,filterOptions:Z})}),(0,f.jsx)("section",{className:"tables",children:(0,f.jsxs)(o.A,{children:[(0,f.jsx)(i.A,{className:"",lg:12,children:(0,f.jsx)(p.default,{defaultOptions:G,filterOptions:Z,updateSharedData:W})}),(0,f.jsx)(i.A,{className:"",lg:12,children:(0,f.jsx)(h.default,{defaultOptions:G,filterOptions:Z,updateSharedData:W})}),(0,f.jsx)(i.A,{className:"",lg:12,children:(0,f.jsx)(m.default,{defaultOptions:G,filterOptions:Z,lobdata:x})})]})}),(0,f.jsxs)(r.A,{size:"lg",show:D,onHide:()=>F(!1),children:[(0,f.jsx)(r.A.Header,{closeButton:!0,children:(0,f.jsx)(r.A.Title,{children:"Custom Dates"})}),(0,f.jsx)(r.A.Body,{children:(0,f.jsxs)(c.A,{children:[(0,f.jsxs)(o.A,{children:[(0,f.jsx)("label",{htmlFor:"",children:"From"}),(0,f.jsx)(n.A,{onChange:J,value:E,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]}),(0,f.jsxs)(o.A,{children:[(0,f.jsx)("label",{htmlFor:"",children:"To"}),(0,f.jsx)(n.A,{onChange:B,value:M,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]})]})}),(0,f.jsx)(r.A.Footer,{children:(0,f.jsx)(d.A,{variant:"secondary",onClick:()=>F(!1),children:"Close"})})]})]})}},30710:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(65043),l={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function n(e){var t=function(e){if("number"===typeof e)return{value:e,unit:"px"};var t,a=(e.match(/^[0-9.]*/)||"").toString();t=a.includes(".")?parseFloat(a):parseInt(a,10);var s=(e.match(/[^0-9]*$/)||"").toString();return l[s]?{value:t,unit:s}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}(e);return"".concat(t.value).concat(t.unit)}var o=function(){return o=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},o.apply(this,arguments)},i=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(s=Object.getOwnPropertySymbols(e);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(a[s[l]]=e[s[l]])}return a},r=function(e,t,a){var s="react-spinners-".concat(e,"-").concat(a);if("undefined"==typeof window||!window.document)return s;var l=document.createElement("style");document.head.appendChild(l);var n=l.sheet,o="\n    @keyframes ".concat(s," {\n      ").concat(t,"\n    }\n  ");return n&&n.insertRule(o,0),s}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");const c=function(e){var t=e.loading,a=void 0===t||t,l=e.color,c=void 0===l?"#000000":l,d=e.speedMultiplier,u=void 0===d?1:d,p=e.cssOverride,h=void 0===p?{}:p,m=e.size,g=void 0===m?35:m,f=i(e,["loading","color","speedMultiplier","cssOverride","size"]),b=o({background:"transparent !important",width:n(g),height:n(g),borderRadius:"100%",border:"2px solid",borderTopColor:c,borderBottomColor:"transparent",borderLeftColor:c,borderRightColor:c,display:"inline-block",animation:"".concat(r," ").concat(.75/u,"s 0s infinite linear"),animationFillMode:"both"},h);return a?s.createElement("span",o({style:b},f)):null}}}]);
//# sourceMappingURL=3183.c1e691e6.chunk.js.map