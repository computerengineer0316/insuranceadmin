{"version":3,"file":"static/js/4746.59680792.chunk.js","mappings":"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","sources":["views/pages/login/VerifyOtp.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport { Container, Row } from 'react-bootstrap';\nimport logo from 'src/assets/images/logo.png'\nconst VerifyOtp = () => {\n    const navigate = useNavigate()\n    const token = localStorage.getItem('token')\n    if (token) {\n        window.location.href = '/admin'\n    }\n\n    const [otp, setOtp] = useState(new Array(4).fill(\"\"));\n    const [isCooldown, setIsCooldown] = useState(false);\n    const [cooldownTime, setCooldownTime] = useState(60);\n\n    useEffect(() => {\n        let timer;\n        if (isCooldown) {\n            timer = setInterval(() => {\n                setCooldownTime((prevTime) => {\n                    if (prevTime <= 1) {\n                        clearInterval(timer);\n                        setIsCooldown(false);\n                        setCooldownTime(60);\n                        return 60;\n                    }\n                    return prevTime - 1;\n                });\n            }, 1000);\n        }\n        return () => clearInterval(timer);\n    }, [isCooldown]);\n\n    const handleChange = (element, index) => {\n        if (isNaN(element.value)) return false;\n\n        setOtp([...otp.map((d, idx) => (idx === index ? element.value : d))]);\n\n        // Focus next input\n        if (element.nextSibling) {\n            element.nextSibling.focus();\n        }\n    };\n\n\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n        // const data = new FormData(e.target)\n        const emaildata = localStorage.getItem('email')\n        const otpdata = otp.join('')\n        const user = { email: emaildata, otp: otpdata }\n        console.log(user)\n        const response = await axios.post('https://insuranceapi-3o5t.onrender.com/api/verify_otp_admin', user)\n        if (response.data.status === 200) {\n            console.log(response.data.data)\n            localStorage.setItem('token', response.data.token);\n            localStorage.setItem('user', JSON.stringify(response.data.data));\n            const usertype = response.data.data.usertype;\n            if (usertype === '646224deb201a6f07b2dff32') {\n                window.location.href = '/ManageSupervisorDashboard'\n            }\n            else if (usertype === '646224eab201a6f07b2dff36') {\n                window.location.href = '/salesDashboard'\n            }\n            else if (usertype === '6462250eb201a6f07b2dff3a') {\n                window.location.href = '/documentchaserDashboard'\n            }\n            else if (usertype === '64622526b201a6f07b2dff3e') {\n                window.location.href = '/policyissuerdashboard'\n            }\n            else if (usertype === '650029a2df69a4033408903d') {\n                window.location.href = '/operations'\n            }\n            else if (usertype === '653604248028cba2487f7d2a') {\n                window.location.href = '/insurancecompanydashboard'\n            } else if (usertype === \"66068569e8f96a29286c956e\") {\n                window.location.href = '/ProducerDashboard'\n            }\n            else {\n                window.location.href = '/admin'\n            }\n\n        }\n        else {\n            swal({\n                title: \"Error!\",\n                text: response.data.message,\n                type: \"error\",\n                icon: \"error\"\n            }).then(function () {\n                navigate('/login')\n            });\n        }\n    }\n\n    const handleResendOtp = async () => {\n        try {\n            const requestOptions = {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({\n                    email: localStorage.getItem(\"email\"),\n                }),\n            };\n            await fetch(\"https://insuranceapi-3o5t.onrender.com/api/send_otp_email_admin\", requestOptions)\n                .then((response) => response.json())\n                .then((data) => {\n                    console.log(data)\n                    setIsCooldown(true);\n                })\n        } catch (error) {\n            console.log(error)\n        }\n    };\n\n\n    return (\n        <>\n            <Container>\n                <Link to=\"/Login\"><img style={{ width: '80px', marginTop: '20px', marginBottom: '20px' }} src={logo} /></Link>\n                <div className=\"login-container\">\n                    <div className=\"login-form\">\n                        <div className=\"login-form-inner\">\n                            <h5>Welcome Back</h5>\n                            <h4>Enter OTP to Login to the Dashboard</h4>\n                            <form name=\"signin\" className=\"form\" >\n                                <div className=\"otp-box\">\n                                    {otp.map((data, index) => {\n                                        return (\n                                            <input\n                                                key={index}\n                                                className=\"otp-field\"\n                                                type=\"text\"\n                                                name=\"otp\"\n                                                maxLength=\"1\"\n                                                value={data}\n                                                onChange={(e) => handleChange(e.target, index)}\n                                                onFocus={(e) => e.target.select()}\n                                                style={{\n                                                    width: \"50px\",\n                                                    height: \"50px\",\n                                                    textAlign: \"center\",\n                                                    fontSize: \"1.5rem\",\n                                                    fontWeight: \"bold\",\n                                                    border: \"1px solid #ced4da\",\n                                                    borderRadius: \"4px\",\n                                                    outline: \"none\",\n                                                }}\n                                            />\n                                        )\n                                    })}\n                                </div>\n                                <button type=\"submit\" className=\"rounded-button login-cta\" onClick={handleSubmit}>\n                                    Login via OTP\n                                </button>\n                                <button\n                                    type=\"button\"\n                                    className=\"rounded-button login-cta\"\n                                    style={{ backgroundColor: isCooldown ? '#ccc' : '#ED1C24', cursor: isCooldown ? 'not-allowed' : 'pointer', border: '#ED1C24' }}\n                                    onClick={isCooldown ? null : handleResendOtp}\n                                    disabled={isCooldown}>\n                                    {isCooldown ? `Resend OTP in ${cooldownTime}s` : 'Resend OTP'}\n                                </button>\n\n                                {/* <div className=\"register-div\">Trouble in login? <Link to=\"/Forgetpassword\" className=\"link forgot-link\">Forgot Password ?</Link></div> */}\n                            </form>\n                        </div>\n                    </div>\n                    <div className=\"onboarding\">\n                        <div className=\"swiper-container\">\n                            <div className=\"swiper-wrapper\">\n                                <div className=\"swiper-slide color-1\">\n                                    <div className=\"slide-image\">\n                                        <img src=\"https://media.istockphoto.com/id/1281150061/vector/register-account-submit-access-login-password-username-internet-online-website-concept.jpg?b=1&s=612x612&w=0&k=20&c=9H5N9Jy8BA9yCzL-Wt5uCeZqETmpPYsJKJ2Nh1-SDaw=\" loading=\"lazy\" alt=\"\" />\n                                    </div>\n                                    <div className=\"slide-content\">\n                                        <h2>Last Minute Policy</h2>\n                                        <p>Powered by Joie de Vivre International Insurance Brokerage LLC, regulated by the UAE Insurance Authority</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </Container>\n            <div\n                className=\"row\"\n                style={{\n                    color: \"white\",\n                    textAlign: \"center\",\n                    background: \"#003096\",\n                    paddingTop: 11\n                }}\n            >\n                <div className=\"col-lg-12\">\n                    <p className=\"copyright12\" style={{ fontSize: '14px' }}>\n                        © Company 2024 All Rights Reserved\n                    </p>\n                </div>\n            </div>\n\n\n        </>\n    )\n}\n\nexport default VerifyOtp\n"],"names":["VerifyOtp","navigate","useNavigate","localStorage","getItem","window","location","href","otp","setOtp","useState","Array","fill","isCooldown","setIsCooldown","cooldownTime","setCooldownTime","useEffect","timer","setInterval","prevTime","clearInterval","_jsxs","_Fragment","children","Container","_jsx","Link","to","style","width","marginTop","marginBottom","src","logo","className","name","map","data","index","type","maxLength","value","onChange","e","handleChange","element","isNaN","d","idx","nextSibling","focus","target","onFocus","select","height","textAlign","fontSize","fontWeight","border","borderRadius","outline","onClick","async","preventDefault","user","email","join","console","log","response","axios","post","status","setItem","token","JSON","stringify","usertype","swal","title","text","message","icon","then","backgroundColor","cursor","requestOptions","method","headers","body","fetch","json","error","disabled","loading","alt","color","background","paddingTop"],"sourceRoot":""}