"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2224],{12224:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(65043),o=t(73216),l=t(73023),n=t.n(l),i=t(54168),r=t(70579);const c=()=>{const e=(0,o.Zp)(),[a,t]=(0,s.useState)(""),[l,c]=(0,s.useState)([]),[d,p]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[_,h]=(0,s.useState)([]),[f,x]=(0,s.useState)([]),[v,j]=(0,s.useState)([]),[g,y]=(0,s.useState)([]),[N,b]=(0,s.useState)([]),[S,P]=(0,s.useState)(""),[M,T]=(0,s.useState)([]),[V,w]=(0,s.useState)(null),[C,q]=(0,s.useState)(!1),[E,R]=(0,s.useState)(""),[k,F]=(0,s.useState)(""),[O,G]=(0,s.useState)(""),[D,$]=(0,s.useState)("");(0,s.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];t(e),A(),B(),H(),I(e)}}),[]);const A=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/travelplantype",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{c(e.data)}))},B=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/travelregion",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,t=[];for(let s=0;s<a.length;s++)t.push({value:a[s]._id,label:a[s].travel_region});p(t)}))},H=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/travelcovertype",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{m(e.data)}))},I=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/planpricedetails/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var a;h(e.data[0]);"641d700e2e8acf350eaab204"==e.data[0].plan_type_id&&q(!0),console.log("plan price data>>>>>>>>>>>>>>",e.data[0]);const t=e.data[0].age_or_topup,s=t.length,o=[],l=[];for(let h=0;h<s;h++){let e;e=t[h].ageMin==t[h].ageMax?t[h].ageMin:t[h].ageMin+"-"+t[h].ageMax,o.push(e);const a=t[h].agetopup;l.push(a)}var n=o.join(","),i=l.join(",");x(n),j(i);const r=[],c=[];if(null!==(a=e.data[0])&&void 0!==a&&a.no_of_child){const a=e.data[0].no_of_child;for(let e=0;e<(null===a||void 0===a?void 0:a.length);e++){let t;t=a[e].no_of_childMin==a[e].no_of_childMax?a[e].no_of_childMin:a[e].no_of_childMin+"-"+a[e].no_of_childMax,r.push(t);const s=a[e].no_of_child_topup;c.push(s)}var d=null===r||void 0===r?void 0:r.join(","),p=null===c||void 0===c?void 0:c.join(",");R(d),F(p);const t=[],s=[],o=e.data[0].no_of_spouse;for(let e=0;e<(null===o||void 0===o?void 0:o.length);e++){let a;a=o[e].no_of_spouseMin==o[e].no_of_spouseMax?o[e].no_of_spouseMin:o[e].no_of_spouseMin+"-"+o[e].no_of_spouseMax,t.push(a);const l=o[e].no_of_spouse_topup;s.push(l)}var u=null===t||void 0===t?void 0:t.join(","),m=null===s||void 0===s?void 0:s.join(",");G(u),$(m)}const _=e.data[0].no_of_days_or_topup,f=_.length,v=[],g=[];for(let h=0;h<f;h++){let e;e=_[h].number_of_daysMin==_[h].number_of_daysMax?_[h].number_of_daysMin:_[h].number_of_daysMin+"-"+_[h].number_of_daysMax,v.push(e);const a=_[h].travel_premium;g.push(a)}var N=v.join(","),S=g.join(",");y(N),b(S),P(e.data[0].plan_id);const M=e.data[0].regions,T=[];for(let h=0;h<M.length;h++)T.push({value:M[h]._id,label:M[h].travel_region});w(T)}))};return(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("h4",{className:"card-title",children:"Edit Plan Price"})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("a",{href:`/ViewPlanPrice?id=${S}`,className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("form",{method:"POST",onSubmit:t=>{t.preventDefault();const s=new FormData(t.target),o=s.get("plan_type_id");if(null==V)return n()({title:"Error!",text:"Please Select Region",type:"error",icon:"error"}),!1;const l=V,i=s.get("cover_type_id"),r=s.get("no_of_days"),c=s.get("travel_premium"),d=s.get("age"),p=s.get("price_name"),u=s.get("age_topup"),m=s.get("no_of_child"),_=s.get("no_of_children_topup"),h=s.get("no_of_spouse"),f=s.get("no_of_spouse_topup");let x={};x=1==C?{plan_type_id:o,region_id:l,plan_id:S,cover_type_id:i,no_of_days:r,travel_premium:c,age:d,age_topup:u,price_name:p,no_of_child:m,no_of_children_topup:_,no_of_spouse:h,no_of_spouse_topup:f}:{plan_type_id:o,region_id:l,plan_id:S,cover_type_id:i,no_of_days:r,travel_premium:c,age:d,age_topup:u,price_name:p};const v={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)};fetch(`https://insuranceapi-3o5t.onrender.com/api/updateplanprice/${a}`,v).then((e=>e.json())).then((a=>{200===a.status?(n()({title:"Success!",text:a.message,type:"success",icon:"success",button:!1}),setTimeout((()=>{n().close(),e("/ViewPlanPrice?id="+S)}),1e3)):n()({title:"Error!",text:a.message,type:"error",icon:"error"}).then((function(){e("/ViewPlanPrice?id="+S)}))}))},children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Plan Type"}),(0,r.jsxs)("select",{className:"form-control",onChange:e=>(e=>{"641d700e2e8acf350eaab204"==e.target.value?q(!0):q(!1)})(e),name:"plan_type_id",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Plan Type"}),l.map(((e,a)=>(0,r.jsx)("option",{value:e._id,selected:_.plan_type_id==e._id,children:e.travel_plan_type},a)))]})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Travel Region"}),(0,r.jsx)(i.default,{options:d,selectedValues:V,onSelect:w,onRemove:w,displayValue:"label",placeholder:"Select Region",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}}})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Cover Type"}),(0,r.jsxs)("select",{className:"form-control",name:"cover_type_id",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Cover Type"}),u.map(((e,a)=>(0,r.jsx)("option",{value:e._id,selected:_.cover_type_id==e._id,children:e.travel_cover_type},a)))]})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Price Name"}),(0,r.jsx)("input",{defaultValue:_.price_name,type:"text",name:"price_name",className:"form-control",placeholder:"Enter Price Name",required:!0})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Number Of Days"}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"no_of_days",defaultValue:g,required:!0})]})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Travel Premium"}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"travel_premium",defaultValue:N,required:!0})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Age"}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"age",defaultValue:f,required:!0})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Fixed/Percentage/Reffered"}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"age_topup",defaultValue:v,required:!0})]})}),1==C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Number Of Child"}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"no_of_child",defaultValue:E,required:!0})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Fixed/Percentage/Reffered"}),(0,r.jsx)("input",{defaultValue:k,type:"text",name:"no_of_children_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered",required:!0})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Number Of Spouse"}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"no_of_spouse",defaultValue:O,required:!0})]})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{children:"Fixed/Percentage/Reffered"}),(0,r.jsx)("input",{defaultValue:D,type:"text",name:"no_of_spouse_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered",required:!0})]})})]}):""]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",style:{float:"right"},children:"Update"})})})]})})]})})})})}}}]);
//# sourceMappingURL=2224.3fe16b93.chunk.js.map