"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5737,2676,1452],{41452:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var s=t(65043),n=(t(92157),t(73216)),l=t(84217),o=t(14282),i=(t(86178),t(54168)),d=t(70579);const r=function(e){let{filterOptions:a,defaultOptions:t,updateSharedData:r}=e;const c=localStorage.getItem("token"),[h,m]=(0,s.useState)(""),[p,u]=(0,s.useState)(""),[x,j]=(0,s.useState)(!1),[g,b]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),v=(0,n.Zp)(),[_,N]=(0,s.useState)([]),[S,A]=(0,s.useState)([]),[k,w]=(0,s.useState)([]),[C,T]=(0,s.useState)([]),[L]=(0,s.useState)(10),[O,D]=(0,s.useState)(0),[I,F]=(0,s.useState)(1),[P,B]=(0,s.useState)(!1),[E,J]=(0,s.useState)(""),[$,H]=(0,s.useState)({}),[M,R]=(0,s.useState)({}),[z,U]=(0,s.useState)([]),[V,G]=(0,s.useState)(""),[Y,q]=(0,s.useState)(!1),[W,Z]=(0,s.useState)([]);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?v("/login"):(K(I,L),me())}),[a]),(0,s.useEffect)((()=>{ee()}),[]);const K=async(e,s)=>{try{q(!0);let n=a.location,l=a.lob,o=a.businessType,i=a.agent,d=a.dateRange,r=t.startdate,c=t.enddate;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):t.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):t.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):t.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):t.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),m=(JSON.parse(localStorage.getItem("user")).usertype,{method:"POST",body:JSON.stringify({location:n,lob:l,business_type:o,newagent:i,dateRange:d,startdate:r,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}});await fetch(`https://insuranceapi-3o5t.onrender.com/api/businessEntityLinks?page=${e}&limit=${s}`,m).then((e=>e.json())).then((e=>{console.log("data>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e);const a=e.count;console.log("total>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",a);const t=a/s,n=Math.ceil(t);D(n);const l=e.data;N(l),q(!1)})).catch((e=>{console.log(e)}))}catch(n){console.log(n)}},Q=localStorage.getItem("user"),X=JSON.parse(Q)._id;console.log("userid>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",X);const ee=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const a=e,t=a.length,s=[];for(let e=0;e<t;e++){const t={label:a[e].lob_name,value:a[e].lob_id};s.push(t)}Z(s)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].line_of_business_name,value:a[n]._id};s.push(e)}Z(s)}))}},[ae,te]=(0,s.useState)({phonenumber:"",email:""}),[se,ne]=(0,s.useState)([]),[le,oe]=(0,s.useState)([]);console.log(le);const ie=e=>{console.log(e),ne(e)},de=e=>{const{name:a,value:t}=e.target;te({...ae,[a]:t})},re=JSON.parse(localStorage.getItem("user")).usertype,[ce,he]=(0,s.useState)([]),me=async()=>{try{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=salesAdvisor",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const a=e.data,t=null===a||void 0===a?void 0:a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].name,value:a[n]._id};s.push(e)}he(s)}))}catch(e){console.log(e)}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"row mb-5",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsx)("h4",{className:"card-title",style:{marginBottom:"0px",fontSize:"15px"},children:"Link Generator"})})})}),(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{className:"generated_links",style:{marginTop:"10px",marginLeft:"10px",marginBottom:"5px"},onClick:()=>{B(!0)},children:"Generate Customer Link"}),h&&(0,d.jsxs)("div",{className:"links_generaed",children:[(0,d.jsx)("p",{children:"Generated Customer Link:"}),(0,d.jsx)("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:h})]})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"links_generaed",children:[(0,d.jsx)("p",{children:"Business Entity Link:"}),(0,d.jsx)("a",{href:`https://splendorous-kulfi-bdc583.netlify.app?agentid=${X}&user=BE`,target:"_blank",rel:"noopener noreferrer",children:`https://splendorous-kulfi-bdc583.netlify.app/?agentid=${X}&user=BE`})]})})]})]})})}),(0,d.jsxs)(l.A,{size:"lg",show:P,onHide:()=>B(!1),children:[(0,d.jsx)(l.A.Header,{closeButton:!0,children:(0,d.jsx)(l.A.Title,{children:"Create Link"})}),(0,d.jsx)(l.A.Body,{children:(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsx)("div",{className:"card",children:(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(ae.selectedlob==[])alert("Please select location");else if(""==ae.phonenumber)alert("Please enter phone number");else if(""==ae.email)alert("Please enter email");else if(""==ae.name)alert("Please enter name");else if(ae.email.includes("@")&&ae.email.includes(".")){if("646224eab201a6f07b2dff36"==re){const e={method:"POST",body:JSON.stringify({lob:se.map((e=>e.value)),phoneno:null===ae||void 0===ae?void 0:ae.phonenumber,email:null===ae||void 0===ae?void 0:ae.email,name:null===ae||void 0===ae?void 0:ae.name}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+c}};fetch("https://insuranceapi-3o5t.onrender.com/api/createLeadByCustumerLink",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),te({phonenumber:"",email:""}),ne([]),m(e.data),B(!1),v("/salesDashboard")}))}if("64622470b201a6f07b2dff22"==re){const e={method:"POST",body:JSON.stringify({lob:se.map((e=>e.value)),phoneno:null===ae||void 0===ae?void 0:ae.phonenumber,email:null===ae||void 0===ae?void 0:ae.email,name:null===ae||void 0===ae?void 0:ae.name,salesAdvisorId:le}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+c}};fetch("https://insuranceapi-3o5t.onrender.com/api/createLeadByCustumerLink",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),te({phonenumber:"",email:""}),ne([]),m(e.data),B(!1),v("/salesDashboard")}))}}else alert("Please enter valid email")}catch(a){console.log(a)}},children:[(0,d.jsxs)("div",{className:"row",children:[(0,d.jsxs)("div",{className:"col-md-6",children:[(0,d.jsx)("label",{className:"form-label",children:(0,d.jsx)("strong",{children:"Select line of business "})}),(0,d.jsx)(i.default,{options:W,displayValue:"label",onSelect:e=>ie(e),onRemove:e=>ie(e),placeholder:"Select line of business",selectedValues:se,showArrow:!0})]}),(0,d.jsxs)("div",{className:"col-md-6",children:[(0,d.jsx)("label",{className:"form-label",children:(0,d.jsx)("strong",{children:"Phone Number"})}),(0,d.jsx)("input",{type:"number",className:"form-control",name:"phonenumber",placeholder:"Enter Phone Number",value:ae.phonenumber,onChange:de,required:!0})]}),(0,d.jsxs)("div",{className:"col-md-6",children:[(0,d.jsx)("label",{className:"form-label",children:(0,d.jsx)("strong",{children:"Email"})}),(0,d.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter Email Address",value:ae.email,onChange:de,required:!0})]}),"64622470b201a6f07b2dff22"==re&&(0,d.jsxs)("div",{className:"col-md-6",children:[(0,d.jsx)("label",{className:"form-label",children:(0,d.jsx)("strong",{children:"Sales Advisor List"})}),(0,d.jsxs)("select",{className:"form-control",name:"agent",onChange:e=>oe(e.target.value),required:!0,children:[(0,d.jsx)("option",{value:"",hidden:!0,children:"Select Sales Advisor"}),ce.map(((e,a)=>(0,d.jsx)("option",{value:e.value,children:e.label},a)))]})]}),(0,d.jsxs)("div",{className:"col-md-6",children:[(0,d.jsx)("label",{className:"form-label",children:(0,d.jsx)("strong",{children:"Name"})}),(0,d.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Enter Name",value:ae.name,onChange:de,required:!0})]})]}),(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-md-12",children:(0,d.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,d.jsx)(l.A.Footer,{children:(0,d.jsx)(o.A,{variant:"secondary",onClick:()=>B(!1),children:"Close"})})]})]})}},28603:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var s=t(65043),n=t(92157),l=t.n(n),o=t(73216),i=t(1177),d=t(84217),r=t(53519),c=t(61072),h=t(14282),m=t(86178),p=t.n(m),u=t(30710),x=t(70579);const j=function(e){var a;let{filterOptions:t,defaultOptions:n}=e;const m=(0,o.Zp)(),[j,g]=(0,s.useState)([]),[b,f]=(0,s.useState)([]),[y,v]=(0,s.useState)([]),[_]=(0,s.useState)(5),[N,S]=(0,s.useState)(0),[A,k]=(0,s.useState)(1),[w,C]=(0,s.useState)(!1),[T,L]=(0,s.useState)(!1),[O,D]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?m("/login"):B(A,_)}),[t]);const I=JSON.parse(localStorage.getItem("user")),F=(I.usertype,null===I||void 0===I?void 0:I.location);null===I||void 0===I||null===(a=I.dashboard_permission[0])||void 0===a||a.sa_dashboard;let P="";F&&F.length>0&&F[0].loc_id&&(P=F[0].loc_id);const B=async(e,a)=>{L(!0);let s=t.location,l=t.lob,o=t.businessType,i=t.agent,d=t.dateRange,r=n.startdate,c=n.enddate;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):n.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):n.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):n.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):n.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,p={method:"POST",body:JSON.stringify({page:e,limit:a,location:s,lob:l,business_type:o,newagent:i,dateRange:d,startdate:r,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"6462250eb201a6f07b2dff3a"!=m&&"646224eab201a6f07b2dff36"!=m&&"646224deb201a6f07b2dff32"!=m&&"64622526b201a6f07b2dff3e"!=m||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const t=e.total;D(t);const s=t/a,n=Math.ceil(s);S(n);const l=e.data;g(l)})).catch((e=>{console.log(e)})).finally((()=>{L(!1)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Closed&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const t=e.total;D(t);const s=t/a,n=Math.ceil(s);S(n);const l=e.data;g(l)})).catch((e=>{console.log(e)})).finally((()=>{L(!1)}))},E=(A-1)*_;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(i.A,{children:(0,x.jsxs)(i.A.Item,{eventKey:"1",children:[(0,x.jsx)(i.A.Header,{children:(0,x.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,x.jsx)("strong",{children:"Closed Business"}),O>0?(0,x.jsx)("div",{className:"dashboardNotify",children:(0,x.jsx)("h6",{children:O})}):""]})}),(0,x.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,x.jsxs)("table",{className:"table table-bordered",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"table-info",children:[(0,x.jsx)("th",{scope:"col",children:"Sr"}),(0,x.jsx)("th",{scope:"col",children:"Name"}),(0,x.jsx)("th",{scope:"col",children:"Phone No."}),(0,x.jsx)("th",{scope:"col",children:"Email-ID"}),(0,x.jsx)("th",{scope:"col",children:"Nationality"}),(0,x.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,x.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,x.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,x.jsx)("th",{scope:"col",children:"Business Type"}),"64116415591c2f02bcddf51e"!=P&&(0,x.jsx)("th",{scope:"col",children:"Link"}),(0,x.jsx)("th",{scope:"col",children:"Action"})]})}),(0,x.jsx)("tbody",{children:T?(0,x.jsx)("div",{className:"loader-container",children:(0,x.jsx)(u.A,{color:"#ED1C24",loading:T,size:50})}):(0,x.jsx)(x.Fragment,{children:j.length>0?j.map(((e,a)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:E+a+1}),(0,x.jsx)("td",{children:e.name}),(0,x.jsx)("td",{children:(0,x.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,x.jsx)("td",{children:(0,x.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,x.jsx)("td",{children:e.nationality}),(0,x.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,x.jsx)("td",{children:e.assign_salesadvisor_timestamp?p()(e.assign_salesadvisor_timestamp).fromNow():p()(e.new_lead_timestamp).fromNow()}),(0,x.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,x.jsx)("td",{children:e.business_type}),"64116415591c2f02bcddf51e"!=P&&(0,x.jsx)("td",{children:(0,x.jsx)("a",{href:e.buisnessEntityCostomerLink,target:"_blank",rel:"noopener noreferrer",children:e.buisnessEntityCostomerLink})}),(0,x.jsx)("td",{className:"buttons_icons",children:(0,x.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>{return a=e._id,"Motor"===(t=e.policy_type[0].line_of_business_name)&&window.open(`/MotorLeaddetails?id=${a}`,"_blank"),"Travel"===t&&window.open(`/TravelLeaddetails?id=${a}`,"_blank"),"Medical"===t&&window.open(`/MedicalLeaddetails?id=${a}`,"_blank"),"Home"===t&&window.open(`/HomeLeaddetails?id=${a}`,"_blank"),"Yacht"===t&&window.open(`/YachtLeaddetails?id=${a}`,"_blank"),void("Other Insurance"===t&&window.open(`/OtherInsuranceLeaddetails?id=${a}`,"_blank"));var a,t},children:(0,x.jsx)("i",{className:"fa-solid fa-eye"})})})]},a))):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"12",className:"text-center",children:(0,x.jsx)("strong",{children:"No Records Found"})})})})})]}),(0,x.jsx)("section",{children:(0,x.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:N,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;k(a+1),B(a+1,_,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})}),(0,x.jsxs)(d.A,{size:"lg",show:w,onHide:()=>C(!1),children:[(0,x.jsx)(d.A.Header,{closeButton:!0,children:(0,x.jsx)(d.A.Title,{children:"Lead Detail"})}),(0,x.jsx)(d.A.Body,{children:(0,x.jsxs)(r.A,{children:[(0,x.jsxs)(c.A,{children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"name",children:"Name"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:b.name})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"email",children:"Email"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:b.email})]})})]}),(0,x.jsxs)(c.A,{children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:b.phoneno})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:y})]})})]})]})}),(0,x.jsx)(d.A.Footer,{children:(0,x.jsx)(h.A,{variant:"secondary",onClick:()=>C(!1),children:"Close"})})]})]})}},43096:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(65043),n=t(92157),l=t.n(n),o=t(73216),i=t(1177),d=t(84217),r=t(53519),c=t(61072),h=t(14282),m=t(86178),p=t.n(m),u=t(70579);const x=function(e){var a;let{filterOptions:t,defaultOptions:n,updateSharedData:m}=e;const x=(0,o.Zp)(),[j,g]=(0,s.useState)([]),[b,f]=(0,s.useState)([]),[y,v]=(0,s.useState)([]),[_,N]=(0,s.useState)([]),[S]=(0,s.useState)(5),[A,k]=(0,s.useState)(0),[w,C]=(0,s.useState)(1),[T,L]=(0,s.useState)(!1),[O,D]=(0,s.useState)(""),[I,F]=(0,s.useState)(""),[P,B]=(0,s.useState)(""),[E,J]=(0,s.useState)([]),[$,H]=(0,s.useState)(""),[M,R]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?x("/login"):(G(w,S),Y(),W())}),[t]);const z=JSON.parse(localStorage.getItem("user")),U=(z.usertype,null===z||void 0===z?void 0:z.location);null===z||void 0===z||null===(a=z.dashboard_permission[0])||void 0===a||a.sa_dashboard;let V="";U&&U.length>0&&U[0].loc_id&&(V=U[0].loc_id);const G=async(e,a)=>{let s=t.location,l=t.lob,o=t.businessType,i=t.agent,d=t.dateRange,r=n.startdate,c=n.enddate;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):n.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):n.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):n.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):n.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,p={method:"POST",body:JSON.stringify({page:e,limit:a,location:s,lob:l,business_type:o,newagent:i,dateRange:d,startdate:r,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"6462250eb201a6f07b2dff3a"!=m&&"646224eab201a6f07b2dff36"!=m&&"646224deb201a6f07b2dff32"!=m&&"64622526b201a6f07b2dff3e"!=m||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Cold&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const t=e.total;R(t);const s=t/a,n=Math.ceil(s);k(n);const l=e.data;g(l)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Cold&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const t=e.total;R(t);const s=t/a,n=Math.ceil(s);k(n);const l=e.data;g(l)})).catch((e=>{console.log(e)}))},Y=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});a=await a.json(),f(a.data)},q=(w-1)*S,W=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].name,value:a[n]._id};s.push(e)}J(s)}))},Z=e=>{const a=E.find((a=>a.value===e));return a?a.label:""},[K,Q]=(0,s.useState)({}),[X,ee]=(0,s.useState)(!1),[ae,te]=(0,s.useState)("");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{children:(0,u.jsxs)(i.A.Item,{eventKey:"1",children:[(0,u.jsx)(i.A.Header,{children:(0,u.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,u.jsx)("strong",{children:"Cold Leads"}),M>0?(0,u.jsx)("div",{className:"dashboardNotify",children:(0,u.jsx)("h6",{children:M})}):""]})}),(0,u.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,u.jsxs)("table",{className:"table table-bordered",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"table-info",children:[(0,u.jsx)("th",{scope:"col",children:"Sr"}),(0,u.jsx)("th",{scope:"col",children:"Name"}),(0,u.jsx)("th",{scope:"col",children:"Phone No."}),(0,u.jsx)("th",{scope:"col",children:"Email-ID"}),(0,u.jsx)("th",{scope:"col",children:"Nationality"}),(0,u.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,u.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,u.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,u.jsx)("th",{scope:"col",children:"Link"}),(0,u.jsx)("th",{scope:"col",children:"Direct Payment"}),(0,u.jsx)("th",{scope:"col",children:"Lead Status"}),(0,u.jsx)("th",{scope:"col",children:"Forward To"}),(0,u.jsx)("th",{scope:"col",children:"Action"})]})}),(0,u.jsx)("tbody",{children:j.length>0?j.map(((e,a)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:q+a+1}),(0,u.jsxs)("td",{onClick:()=>(e=>{try{console.log(e),window.open(e,"_blank")}catch(a){console.log(a)}})(e.buisnessEntityCostomerLink),children:[" ",e.name]}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,u.jsx)("td",{children:e.nationality}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?p()(e.assign_salesadvisor_timestamp).fromNow():p()(e.new_lead_timestamp).fromNow()}),(0,u.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,u.jsx)("td",{className:"buttons_icons",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(e=>{console.log(e),te(e),ee(!0)})(e.buisnessEntityCostomerLink),children:(0,u.jsx)("i",{className:"fa-solid fa-link"})})}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:a=>{return t=e._id,s=a.target.checked,void B((e=>({...e,[t]:s})));var t,s},required:!0})}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:a=>((e,a)=>{"Forward"!=a&&(H(""),document.getElementById(e).value="");F((t=>({...t,[e]:a}))),Q((t=>({...t,[e]:a})))})(e._id,a.target.value),children:[(0,u.jsx)("option",{value:"",hidden:!0,children:e.lead_status}),b.map(((e,a)=>(0,u.jsx)("option",{value:e.lead_status,children:e.lead_status},a)))]})}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{name:"lead_status",id:e._id,onChange:a=>{return t=e._id,s=a.target.value,void H((e=>({...e,[t]:s})));var t,s},disabled:"Forward"!==K[e._id],children:[(0,u.jsx)("option",{value:"",hidden:!0,children:void 0==e.forward_to||""==e.forward_to||null==e.forward_to?"Document Chaser":Z(e.forward_to)}),E.map(((e,a)=>(0,u.jsx)("option",{value:e.value,children:e.label},a)))]})}),(0,u.jsx)("td",{className:"buttons_icons",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>((e,a)=>{"Motor"===a&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===a&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===a&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===a&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===a&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===a&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,e.policy_type[0].line_of_business_name),children:(0,u.jsx)("i",{className:"fa-solid fa-eye"})})})]},a))):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"12",className:"text-center",children:(0,u.jsx)("strong",{children:"No Records Found"})})})})]}),(0,u.jsxs)("section",{children:[(0,u.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const a=JSON.parse(localStorage.getItem("user"))._id,t="{}"===JSON.stringify(P)?null:P,s="{}"===JSON.stringify(I)?null:I,n=""===$?null:$,l=new Set(Object.keys(t||{}).concat(Object.keys(s||{}),Object.keys(n||{})));for(const o of l){const e=P[o],t=I[o],s=$[o];if("Forward"===t&&(""===s||null===s||void 0===s))return alert("Please select DC agent"),!1;const n={method:"POST",body:JSON.stringify({id:o,direct_payment:e,lead_status:t,forward_to:s,assigningagent:a}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",n).then((e=>e.json())).then((e=>{G(w,S),m(G(w,S))}))}},children:"Save "}),(0,u.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:A,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;C(a+1),G(a+1,S,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,u.jsxs)(d.A,{size:"lg",show:T,onHide:()=>L(!1),children:[(0,u.jsx)(d.A.Header,{closeButton:!0,children:(0,u.jsx)(d.A.Title,{children:"Lead Detail"})}),(0,u.jsx)(d.A.Body,{children:(0,u.jsxs)(r.A,{children:[(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name",children:"Name"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:y.name})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"email",children:"Email"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:y.email})]})})]}),(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:y.phoneno})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:_})]})})]})]})}),(0,u.jsx)(d.A.Footer,{children:(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>L(!1),children:"Close"})})]}),(0,u.jsxs)(d.A,{size:"lg",show:X,onHide:()=>ee(!1),children:[(0,u.jsx)(d.A.Header,{closeButton:!0,children:(0,u.jsx)(d.A.Title,{children:"Link"})}),(0,u.jsx)(d.A.Body,{children:(0,u.jsx)(r.A,{children:(0,u.jsx)(c.A,{children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name"}),(0,u.jsx)("textarea",{className:"form-control",id:"address",name:"address",value:ae,readOnly:!0,children:ae&&(0,u.jsx)("a",{href:ae,target:"_blank",rel:"noopener noreferrer",children:ae})})]})})})})}),(0,u.jsxs)(d.A.Footer,{children:[(0,u.jsx)(h.A,{variant:"primary",onClick:()=>{const e=document.createElement("textarea");e.value=ae,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Link copied to clipboard!")},children:"Copy Link"}),(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>ee(!1),children:"Close"})]})]})]})}},70211:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var s=t(65043),n=t(92157),l=t.n(n),o=t(73216),i=t(1177),d=t(84217),r=t(53519),c=t(61072),h=t(14282),m=t(86178),p=t.n(m),u=t(30710),x=t(70579);const j=function(e){var a;let{filterOptions:t,defaultOptions:n,updateSharedData:m}=e;const j=(0,o.Zp)(),[g,b]=(0,s.useState)([]),[f,y]=(0,s.useState)([]),[v,_]=(0,s.useState)([]),[N,S]=(0,s.useState)([]),[A]=(0,s.useState)(5),[k,w]=(0,s.useState)(0),[C,T]=(0,s.useState)(1),[L,O]=(0,s.useState)(!1),[D,I]=(0,s.useState)(""),[F,P]=(0,s.useState)(""),[B,E]=(0,s.useState)(""),[J,$]=(0,s.useState)([]),[H,M]=(0,s.useState)(""),[R,z]=(0,s.useState)(!1),[U,V]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?j("/login"):(W(C,A),Z(),Q())}),[t]);const G=JSON.parse(localStorage.getItem("user")),Y=(G.usertype,null===G||void 0===G?void 0:G.location);null===G||void 0===G||null===(a=G.dashboard_permission[0])||void 0===a||a.sa_dashboard;let q="";Y&&Y.length>0&&Y[0].loc_id&&(q=Y[0].loc_id);const W=async(e,a)=>{try{z(!0);let s=t.location,l=t.lob,o=t.businessType,i=t.agent,d=t.dateRange,r=n.startdate,c=n.enddate;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):n.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):n.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):n.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):n.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,p={method:"POST",body:JSON.stringify({page:e,limit:a,location:s,lob:l,business_type:o,newagent:i,dateRange:d,startdate:r,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"6462250eb201a6f07b2dff3a"!=m&&"646224eab201a6f07b2dff36"!=m&&"646224deb201a6f07b2dff32"!=m&&"64622526b201a6f07b2dff3e"!=m||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Hot&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const t=e.total;V(t);const s=t/a,n=Math.ceil(s);w(n);const l=e.data;b(l)})).catch((e=>{console.log(e)})).finally((()=>{z(!1)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Hot&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const t=e.total;V(t);const s=t/a,n=Math.ceil(s);w(n);const l=e.data;b(l)})).catch((e=>{console.log(e)})).finally((()=>{z(!1)}))}catch(s){console.log(s)}},Z=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});a=await a.json(),y(a.data)},K=(C-1)*A,Q=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].name,value:a[n]._id};s.push(e)}$(s)}))},X=e=>{const a=J.find((a=>a.value===e));return a?a.label:""},[ee,ae]=(0,s.useState)({}),[te,se]=(0,s.useState)(!1),[ne,le]=(0,s.useState)("");return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(i.A,{children:(0,x.jsxs)(i.A.Item,{eventKey:"1",children:[(0,x.jsx)(i.A.Header,{children:(0,x.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,x.jsx)("strong",{children:"Hot Leads"}),U>0?(0,x.jsx)("div",{className:"dashboardNotify",children:(0,x.jsx)("h6",{children:U})}):""]})}),(0,x.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,x.jsxs)("table",{className:"table table-bordered",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"table-info",children:[(0,x.jsx)("th",{scope:"col",children:"Sr"}),(0,x.jsx)("th",{scope:"col",children:"Name"}),(0,x.jsx)("th",{scope:"col",children:"Phone No."}),(0,x.jsx)("th",{scope:"col",children:"Email-ID"}),(0,x.jsx)("th",{scope:"col",children:"Nationality"}),(0,x.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,x.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,x.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,x.jsx)("th",{scope:"col",children:"Link"}),(0,x.jsx)("th",{scope:"col",children:"DP"}),(0,x.jsx)("th",{scope:"col",children:"Lead Status"}),(0,x.jsx)("th",{scope:"col",children:"Forward To"}),(0,x.jsx)("th",{scope:"col",children:"Action"})]})}),(0,x.jsx)("tbody",{children:R?(0,x.jsx)("div",{className:"loader-container",children:(0,x.jsx)(u.A,{color:"#000000",loading:R,size:50})}):(0,x.jsx)(x.Fragment,{children:g.length>0?g.map(((e,a)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:K+a+1}),(0,x.jsxs)("td",{onClick:()=>(e=>{try{console.log(e),window.open(e,"_blank")}catch(a){console.log(a)}})(e.buisnessEntityCostomerLink),children:[" ",e.name]}),(0,x.jsx)("td",{children:(0,x.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,x.jsx)("td",{children:(0,x.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,x.jsx)("td",{children:e.nationality}),(0,x.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,x.jsx)("td",{children:e.assign_salesadvisor_timestamp?p()(e.assign_salesadvisor_timestamp).fromNow():p()(e.new_lead_timestamp).fromNow()}),(0,x.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,x.jsx)("td",{className:"buttons_icons",children:(0,x.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(e=>{console.log(e),le(e),se(!0)})(e.buisnessEntityCostomerLink),children:(0,x.jsx)("i",{className:"fa-solid fa-link"})})}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:a=>{return t=e._id,s=a.target.checked,void E((e=>({...e,[t]:s})));var t,s},required:!0})}),(0,x.jsx)("td",{children:(0,x.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:a=>((e,a)=>{"Forward"!=a&&(M(""),document.getElementById(e).value="");P((t=>({...t,[e]:a}))),ae((t=>({...t,[e]:a})))})(e._id,a.target.value),children:[(0,x.jsx)("option",{value:"",hidden:!0,children:e.lead_status}),f.map(((e,a)=>(0,x.jsx)("option",{value:e.lead_status,children:e.lead_status},a)))]})}),(0,x.jsx)("td",{children:(0,x.jsxs)("select",{name:"lead_status",id:e._id,onChange:a=>{return t=e._id,s=a.target.value,void M((e=>({...e,[t]:s})));var t,s},disabled:"Forward"!==ee[e._id],children:[(0,x.jsx)("option",{value:"",hidden:!0,children:void 0==e.forward_to||""==e.forward_to||null==e.forward_to?"Document Chaser":X(e.forward_to)}),J.map(((e,a)=>(0,x.jsx)("option",{value:e.value,children:e.label},a)))]})}),(0,x.jsx)("td",{className:"buttons_icons",children:(0,x.jsx)("button",{className:"btn btn-primary btn-sm ",onClick:()=>{var a;return((e,a)=>{"Motor"===a&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===a&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===a&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===a&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===a&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===a&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,null===(a=e.policy_type[0])||void 0===a?void 0:a.line_of_business_name)},children:(0,x.jsx)("i",{className:"fa fa-eye"})})})]},a))):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"12",className:"text-center",children:(0,x.jsx)("strong",{children:"No Records Found"})})})})})]}),(0,x.jsxs)("section",{children:[(0,x.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const a=JSON.parse(localStorage.getItem("user"))._id,t="{}"===JSON.stringify(B)?null:B,s="{}"===JSON.stringify(F)?null:F,n=""===H?null:H,l=new Set(Object.keys(t||{}).concat(Object.keys(s||{}),Object.keys(n||{})));for(const o of l){const e=B[o],t=F[o],s=H[o];if("Forward"===t&&(""===s||null===s||void 0===s))return alert("Please select DC agent"),!1;const n={method:"POST",body:JSON.stringify({id:o,direct_payment:e,lead_status:t,forward_to:s,assigningagent:a}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",n).then((e=>e.json())).then((e=>{W(C,A),m(W(C,A))}))}},children:"Save "}),(0,x.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:k,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;T(a+1),W(a+1,A,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,x.jsxs)(d.A,{size:"lg",show:L,onHide:()=>O(!1),children:[(0,x.jsx)(d.A.Header,{closeButton:!0,children:(0,x.jsx)(d.A.Title,{children:"Lead Detail"})}),(0,x.jsx)(d.A.Body,{children:(0,x.jsxs)(r.A,{children:[(0,x.jsxs)(c.A,{children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"name",children:"Name"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:v.name})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"email",children:"Email"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:v.email})]})})]}),(0,x.jsxs)(c.A,{children:[(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:v.phoneno})]})}),(0,x.jsx)("div",{className:"col-md-6",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,x.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:N})]})})]})]})}),(0,x.jsx)(d.A.Footer,{children:(0,x.jsx)(h.A,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]}),(0,x.jsxs)(d.A,{size:"lg",show:te,onHide:()=>se(!1),children:[(0,x.jsx)(d.A.Header,{closeButton:!0,children:(0,x.jsx)(d.A.Title,{children:"Link"})}),(0,x.jsx)(d.A.Body,{children:(0,x.jsx)(r.A,{children:(0,x.jsx)(c.A,{children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"name"}),(0,x.jsx)("textarea",{className:"form-control",id:"address",name:"address",value:ne,readOnly:!0,children:ne&&(0,x.jsx)("a",{href:ne,target:"_blank",rel:"noopener noreferrer",children:ne})})]})})})})}),(0,x.jsxs)(d.A.Footer,{children:[(0,x.jsx)(h.A,{variant:"primary",onClick:()=>{const e=document.createElement("textarea");e.value=ne,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Link copied to clipboard!")},children:"Copy Link"}),(0,x.jsx)(h.A,{variant:"secondary",onClick:()=>se(!1),children:"Close"})]})]})]})}},15326:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(65043),n=t(92157),l=t.n(n),o=t(73216),i=t(1177),d=t(84217),r=t(53519),c=t(61072),h=t(14282),m=t(86178),p=t.n(m),u=t(70579);const x=function(e){let{filterOptions:a,defaultOptions:t,updateSharedData:n}=e;const m=(0,o.Zp)(),[x,j]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),[f,y]=(0,s.useState)([]),[v,_]=(0,s.useState)([]),[N]=(0,s.useState)(5),[S,A]=(0,s.useState)(0),[k,w]=(0,s.useState)(1),[C,T]=(0,s.useState)(!1),[L,O]=(0,s.useState)(""),[D,I]=(0,s.useState)(""),[F,P]=(0,s.useState)(""),[B,E]=(0,s.useState)([]),[J,$]=(0,s.useState)(""),[H,M]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?m("/login"):(V(k,N),G(),q())}),[a]);const R=JSON.parse(localStorage.getItem("user")),z=(R.usertype,null===R||void 0===R?void 0:R.location);let U="";z&&z.length>0&&z[0].loc_id&&(U=z[0].loc_id);const V=async(e,s)=>{let n=a.location,l=a.lob,o=a.businessType,i=a.agent,d=a.dateRange,r=t.startdate,c=t.enddate;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):t.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):t.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):t.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):t.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,p={method:"POST",body:JSON.stringify({page:e,limit:s,location:n,lob:l,business_type:o,newagent:i,dateRange:d,startdate:r,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"6462250eb201a6f07b2dff3a"!=m&&"646224eab201a6f07b2dff36"!=m&&"646224deb201a6f07b2dff32"!=m&&"64622526b201a6f07b2dff3e"!=m||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=LostDropped&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const a=e.total;M(a);const t=a/s,n=Math.ceil(t);A(n);const l=e.data;j(l)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=LostDropped&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const a=e.total;M(a);const t=a/s,n=Math.ceil(t);A(n);const l=e.data;j(l)})).catch((e=>{console.log(e)}))},G=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});a=await a.json(),b(a.data)},Y=(k-1)*N,q=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].name,value:a[n]._id};s.push(e)}E(s)}))},W=e=>{const a=B.find((a=>a.value===e));return a?a.label:""},[Z,K]=(0,s.useState)({}),[Q,X]=(0,s.useState)(!1),[ee,ae]=(0,s.useState)("");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{children:(0,u.jsxs)(i.A.Item,{eventKey:"1",children:[(0,u.jsx)(i.A.Header,{children:(0,u.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,u.jsx)("strong",{children:"Lost & Dropped Leads"}),H>0?(0,u.jsx)("div",{className:"dashboardNotify",children:(0,u.jsx)("h6",{children:H})}):""]})}),(0,u.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,u.jsxs)("table",{className:"table table-bordered",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"table-info",children:[(0,u.jsx)("th",{scope:"col",children:"Sr"}),(0,u.jsx)("th",{scope:"col",children:"Name"}),(0,u.jsx)("th",{scope:"col",children:"Phone No."}),(0,u.jsx)("th",{scope:"col",children:"Email-ID"}),(0,u.jsx)("th",{scope:"col",children:"Nationality"}),(0,u.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,u.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,u.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,u.jsx)("th",{scope:"col",children:"Link"}),(0,u.jsx)("th",{scope:"col",children:"Direct Payment"}),(0,u.jsx)("th",{scope:"col",children:"Lead Status"}),(0,u.jsx)("th",{scope:"col",children:"Forward To"}),(0,u.jsx)("th",{scope:"col",children:"Action"})]})}),(0,u.jsx)("tbody",{children:x.length>0?x.map(((e,a)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:Y+a+1}),(0,u.jsxs)("td",{onClick:()=>(e=>{try{console.log(e),window.open(e,"_blank")}catch(a){console.log(a)}})(e.buisnessEntityCostomerLink),children:[" ",e.name]}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,u.jsx)("td",{children:e.nationality}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?p()(e.assign_salesadvisor_timestamp).fromNow():p()(e.new_lead_timestamp).fromNow()}),(0,u.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,u.jsx)("td",{className:"buttons_icons",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(e=>{console.log(e),ae(e),X(!0)})(e.buisnessEntityCostomerLink),children:(0,u.jsx)("i",{className:"fa-solid fa-link"})})}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:a=>{return t=e._id,s=a.target.checked,void P((e=>({...e,[t]:s})));var t,s},required:!0})}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:a=>((e,a)=>{"Forward"!=a&&($(""),document.getElementById(e).value="");I((t=>({...t,[e]:a}))),K((t=>({...t,[e]:a})))})(e._id,a.target.value),children:[(0,u.jsx)("option",{value:"",hidden:!0,children:e.lead_status}),g.map(((e,a)=>(0,u.jsx)("option",{value:e.lead_status,children:e.lead_status},a)))]})}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{name:"lead_status",id:e._id,onChange:a=>{return t=e._id,s=a.target.value,void $((e=>({...e,[t]:s})));var t,s},disabled:"Forward"!==Z[e._id],children:[(0,u.jsx)("option",{value:"",hidden:!0,children:void 0==e.forward_to||""==e.forward_to||null==e.forward_to?"Document Chaser":W(e.forward_to)}),B.map(((e,a)=>(0,u.jsx)("option",{value:e.value,children:e.label},a)))]})}),(0,u.jsx)("td",{className:"buttons_icons",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>((e,a)=>{"Motor"===a&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===a&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===a&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===a&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===a&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===a&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,e.policy_type[0].line_of_business_name),children:(0,u.jsx)("i",{className:"fa-solid fa-eye"})})})]},a))):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"12",className:"text-center",children:(0,u.jsx)("strong",{children:"No Records Found"})})})})]}),(0,u.jsxs)("section",{children:[(0,u.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const a=JSON.parse(localStorage.getItem("user"))._id,t="{}"===JSON.stringify(F)?null:F,s="{}"===JSON.stringify(D)?null:D,l=""===J?null:J,o=new Set(Object.keys(t||{}).concat(Object.keys(s||{}),Object.keys(l||{})));for(const i of o){const e=F[i],t=D[i],s=J[i];if("Forward"===t&&(""===s||null===s||void 0===s))return alert("Please select DC agent"),!1;const l={method:"POST",body:JSON.stringify({id:i,direct_payment:e,lead_status:t,forward_to:s,assigningagent:a}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",l).then((e=>e.json())).then((e=>{V(k,N),n(V(k,N))}))}},children:"Save "}),(0,u.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:S,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;w(a+1),V(a+1,N,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,u.jsxs)(d.A,{size:"lg",show:C,onHide:()=>T(!1),children:[(0,u.jsx)(d.A.Header,{closeButton:!0,children:(0,u.jsx)(d.A.Title,{children:"Lead Detail"})}),(0,u.jsx)(d.A.Body,{children:(0,u.jsxs)(r.A,{children:[(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name",children:"Name"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:f.name})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"email",children:"Email"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:f.email})]})})]}),(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:f.phoneno})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:v})]})})]})]})}),(0,u.jsx)(d.A.Footer,{children:(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>T(!1),children:"Close"})})]}),(0,u.jsxs)(d.A,{size:"lg",show:Q,onHide:()=>X(!1),children:[(0,u.jsx)(d.A.Header,{closeButton:!0,children:(0,u.jsx)(d.A.Title,{children:"Link"})}),(0,u.jsx)(d.A.Body,{children:(0,u.jsx)(r.A,{children:(0,u.jsx)(c.A,{children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name"}),(0,u.jsx)("textarea",{className:"form-control",id:"address",name:"address",value:ee,readOnly:!0,children:ee&&(0,u.jsx)("a",{href:ee,target:"_blank",rel:"noopener noreferrer",children:ee})})]})})})})}),(0,u.jsxs)(d.A.Footer,{children:[(0,u.jsx)(h.A,{variant:"primary",onClick:()=>{const e=document.createElement("textarea");e.value=ee,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Link copied to clipboard!")},children:"Copy Link"}),(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>X(!1),children:"Close"})]})]})]})}},58571:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(65043),n=t(92157),l=t.n(n),o=t(73216),i=t(1177),d=t(84217),r=t(53519),c=t(61072),h=t(14282),m=t(86178),p=t.n(m),u=t(70579);const x=function(e){let{filterOptions:a,defaultOptions:t,updateSharedData:n}=e;const m=(0,o.Zp)(),[x,j]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),[f,y]=(0,s.useState)([]),[v,_]=(0,s.useState)([]),[N]=(0,s.useState)(5),[S,A]=(0,s.useState)(0),[k,w]=(0,s.useState)(1),[C,T]=(0,s.useState)(!1),[L,O]=(0,s.useState)(""),[D,I]=(0,s.useState)({}),[F,P]=(0,s.useState)({}),[B,E]=(0,s.useState)([]),[J,$]=(0,s.useState)(""),[H,M]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?m("/login"):(V(k,N),G(),q())}),[a]);const R=JSON.parse(localStorage.getItem("user")),z=(R.usertype,null===R||void 0===R?void 0:R.location);let U="";z&&z.length>0&&z[0].loc_id&&(U=z[0].loc_id);const V=async(e,s)=>{let n=a.location,l=a.lob,o=a.businessType,i=a.agent,d=a.dateRange,r=t.startdate,c=t.enddate;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):t.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):t.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):t.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):t.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,p={method:"POST",body:JSON.stringify({page:e,limit:s,location:n,lob:l,business_type:o,newagent:i,dateRange:d,startdate:r,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"6462250eb201a6f07b2dff3a"!=m&&"646224eab201a6f07b2dff36"!=m&&"646224deb201a6f07b2dff32"!=m&&"64622526b201a6f07b2dff3e"!=m||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=pendingPolicues&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const a=e.total;M(a);const t=a/s,n=Math.ceil(t);A(n);const l=e.data;j(l)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=pendingPolicues&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const a=e.total;M(a);const t=a/s,n=Math.ceil(t);A(n);const l=e.data;j(l)})).catch((e=>{console.log(e)}))},G=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});a=await a.json(),b(a.data)},Y=(k-1)*N,q=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].name,value:a[n]._id};s.push(e)}E(s)}))};return console.log("pending policy ...........................................",x),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{children:(0,u.jsxs)(i.A.Item,{eventKey:"1",children:[(0,u.jsx)(i.A.Header,{children:(0,u.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,u.jsx)("strong",{children:"Pending Policies"}),H>0?(0,u.jsx)("div",{className:"dashboardNotify",children:(0,u.jsx)("h6",{children:H})}):""]})}),(0,u.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,u.jsxs)("table",{className:"table table-bordered",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"table-info",children:[(0,u.jsx)("th",{scope:"col",children:"Sr#"}),(0,u.jsx)("th",{scope:"col",children:"Name"}),(0,u.jsx)("th",{scope:"col",children:"Phone No."}),(0,u.jsx)("th",{scope:"col",children:"Email-ID"}),(0,u.jsx)("th",{scope:"col",children:"Nationality"}),(0,u.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,u.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,u.jsx)("th",{scope:"col",children:"Type of Policy"}),"64116415591c2f02bcddf51e"!=U&&(0,u.jsx)("th",{scope:"col",children:"Link"}),(0,u.jsx)("th",{scope:"col",children:"DP"}),(0,u.jsx)("th",{scope:"col",children:"Assigned Stage"}),(0,u.jsx)("th",{scope:"col",children:"Assigned To"}),(0,u.jsx)("th",{scope:"col",children:"Action"})]})}),(0,u.jsx)("tbody",{children:x.length>0?x.map(((e,a)=>{var t,s,n,l,o,i;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:Y+a+1}),(0,u.jsx)("td",{children:e.name}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,u.jsx)("td",{children:e.nationality}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,u.jsx)("td",{children:e.assign_salesadvisor_timestamp?p()(e.assign_salesadvisor_timestamp).fromNow():p()(e.new_lead_timestamp).fromNow()}),(0,u.jsx)("td",{children:e.policy_type[0].line_of_business_name}),"64116415591c2f02bcddf51e"!=U&&(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:e.buisnessEntityCostomerLink,target:"_blank",rel:"noopener noreferrer",children:e.buisnessEntityCostomerLink})}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:a=>{return t=e._id,s=a.target.checked,void P((e=>({...e,[t]:s})));var t,s},required:!0,readOnly:!0})}),(0,u.jsx)("td",{children:""!=e.assigned_agent_info?""!=e.forward_to_info?""!=e.dc_forward_to_info?(null===(t=e.dcforward_to_type_info[0])||void 0===t?void 0:t.usertype)||"-":(null===(s=e.forward_to_type_info[0])||void 0===s?void 0:s.usertype)||"-":(null===(n=e.assigned_type_info[0])||void 0===n?void 0:n.usertype)||"-":"-"}),(0,u.jsx)("td",{children:""!=e.assigned_agent_info?""!=e.forward_to_info?""!=e.dc_forward_to_info?(null===(l=e.dc_forward_to_info[0])||void 0===l?void 0:l.name)||"-":(null===(o=e.forward_to_info[0])||void 0===o?void 0:o.name)||"-":(null===(i=e.assigned_agent_info[0])||void 0===i?void 0:i.name)||"-":"-"}),(0,u.jsx)("td",{className:"buttons_icons",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>((e,a)=>{"Motor"===a&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===a&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===a&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===a&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===a&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===a&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,e.policy_type[0].line_of_business_name),children:(0,u.jsx)("i",{className:"fa-solid fa-eye"})})})]},a)})):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"12",className:"text-center",children:(0,u.jsx)("strong",{children:"No Records Found"})})})})]}),(0,u.jsx)("section",{children:(0,u.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:S,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;w(a+1),V(a+1,N,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})}),(0,u.jsxs)(d.A,{size:"lg",show:C,onHide:()=>T(!1),children:[(0,u.jsx)(d.A.Header,{closeButton:!0,children:(0,u.jsx)(d.A.Title,{children:"Lead Detail"})}),(0,u.jsx)(d.A.Body,{children:(0,u.jsxs)(r.A,{children:[(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name",children:"Name"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:f.name})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"email",children:"Email"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:f.email})]})})]}),(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:f.phoneno})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:v})]})})]})]})}),(0,u.jsx)(d.A.Footer,{children:(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>T(!1),children:"Close"})})]})]})}},72676:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(65043),n=t(73216),l=t(12488),o=(t(84596),t(93946)),i=t(70579);const d=function(e){let{filterOptions:a,defaultOptions:t}=e;const d=(0,n.Zp)(),[r,c]=(0,s.useState)(0),[h,m]=(0,s.useState)(0),[p,u]=(0,s.useState)(0),[x,j]=(0,s.useState)(0),[g,b]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?d("/login"):f()}),[a]);const f=async()=>{const e=JSON.parse(localStorage.getItem("user"));let s=a.location,n=a.lob,l=a.businessType,o=a.agent,i=a.dateRange,d=t.startdate,r=t.enddate,h=e.assign_staff,p=t.userType;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):t.defaultlocation.map((e=>e.value)),n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):t.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):t.defaultbusinessType.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):t.defaultagent.map((e=>e.value));const x=localStorage.getItem("token"),g=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",g);const f={method:"POST",body:JSON.stringify({location:s,lob:n,business_type:l,newagent:o,dateRange:i,startdate:d,enddate:r,assign_staff:h,userType:p}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+x}};"646224eab201a6f07b2dff36"==g&&await fetch("https://insuranceapi-3o5t.onrender.com/api/topLeagentCount",f).then((e=>e.json())).then((e=>{console.log("data",e.data),c(e.data.totalCount),m(e.data.closeLeadCount),u(e.data.totalPremiumEarned),b(e.data.lostCount),j(e.data.saleAdvisorPendingCount)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==g&&await fetch("https://insuranceapi-3o5t.onrender.com/api/topLeagentCount?dashboardType=salesAdvisorDashboard",f).then((e=>e.json())).then((e=>{console.log("data",e.data),c(e.data.totalCount),m(e.data.closeLeadCount),u(e.data.totalPremiumEarned),b(e.data.lostCount),j(e.data.saleAdvisorPendingCount)})).catch((e=>{console.log(e)}))};return console.log("totalcount",r),console.log("closeLeadCount",h),console.log("totalPremiumEarned",p),console.log("lost",g),console.log("pending",x),(0,i.jsx)("div",{children:(0,i.jsxs)(l.default,{className:"carousel_abcds",margin:30,swipeable:!1,draggable:!0,showDots:!0,responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:6},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:[(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Assigned Leads",value:null!=r?r.toString():"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Closed",value:null!=h?h.toString():"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Premium earned",value:function(e){if(null!==e){const a=parseFloat(e.toString().replace(/,/g,""));return isNaN(a)?"":a.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:!0})}}(null!=p?p:"0")})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Pending",value:null!=x?x.toString():"0"})}),(0,i.jsx)(o.UF,{xs:2,class:"item",children:(0,i.jsx)(o.U0,{width:36,className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Lost",value:null!=g?g.toString():"0"})})]})})}},45200:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var s=t(65043),n=(t(93946),t(54168)),l=t(49456),o=(t(93204),t(66097),t(42618)),i=t(61072),d=t(78602),r=t(84217),c=t(53519),h=t(14282),m=(t(82768),t(91033),t(98465),t(73216)),p=t(70211),u=t(43096),x=t(87999),j=t(15326),g=t(58571),b=t(28603),f=t(77572),y=t(72676),v=t(41452),_=t(70579);const N=()=>{const e=(0,m.Zp)(),[a,t]=(0,s.useState)(""),[N,S]=(0,s.useState)([]),[A,k]=(0,s.useState)(),[w,C]=(0,s.useState)([]),[T,L]=(0,s.useState)(),[O,D]=(0,s.useState)([]),[I,F]=(0,s.useState)(),[P,B]=(0,s.useState)([]),[E,J]=(0,s.useState)(),[$,H]=(0,s.useState)("daily"),[M,R]=(0,s.useState)(!1),[z,U]=(0,s.useState)(new Date),[V,G]=(0,s.useState)(new Date),[Y,q]=(0,s.useState)([]),W=e=>{t(e)};(0,s.useEffect)((()=>{}),[a]),(0,s.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{const e=JSON.parse(localStorage.getItem("user"));console.log(e);const a=e.admin_business_type;if(a.length>0){const e=a,t=e.length,s=[];for(let a=0;a<t;a++){let t;t=e[a].type,t=t.split(" ");const n={label:e[a].type,value:t[0]};s.push(n)}D(s)}else{D([{label:"New Business",value:"New"},{label:"Renewal Business",value:"Renewal"}])}Z(),K(),te(),se();const t=JSON.parse(localStorage.getItem("dashboardCounts"));t&&q(t)}}),[]);const Z=()=>{const e=JSON.parse(localStorage.getItem("user")).location;if(e.length>0){const a=e,t=a.length,s=[];for(let e=0;e<t;e++){const t={label:a[e].loc_name,value:a[e].loc_id};s.push(t)}S(s)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].location_name,value:a[n]._id};s.push(e)}S(s)}))}},K=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const a=e,t=a.length,s=[];for(let e=0;e<t;e++){const t={label:a[e].lob_name,value:a[e].lob_id};s.push(t)}C(s)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].line_of_business_name,value:a[n]._id};s.push(e)}C(s)}))}},Q=JSON.parse(localStorage.getItem("user")),X=Q.usertype,ee=null===Q||void 0===Q?void 0:Q.location;let ae="";ee&&ee.length>0&&ee[0].loc_id&&(ae=ee[0].loc_id);const te=()=>{const e=JSON.parse(localStorage.getItem("user"));e._id;if("646224eab201a6f07b2dff36"===X){const a={label:e.name,value:e._id},t=[];t.push(a),B(t)}if("64622470b201a6f07b2dff22"===X){const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=salesAdvisor",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const a=e.data,t=null===a||void 0===a?void 0:a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].name,value:a[n]._id};s.push(e)}B(s)}))}},se=()=>{const e=JSON.parse(localStorage.getItem("user")),a=e.usertype,t=e._id,s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usertype:a,userid:t})};fetch("https://insuranceapi-3o5t.onrender.com/api/get_dashboard_count",s).then((e=>e.json())).then((e=>{localStorage.setItem("dashboardCounts",JSON.stringify(e)),q(e)}))},ne=e=>{H(e)},le={defaultlocation:N,defaultlob:w,defaultbusinessType:O,defaultagent:P,defaultdateRange:$,startdate:z,enddate:V},oe=(e,a)=>{switch(e){case"location":k(a);break;case"lob":L(a);break;case"businessType":F(a);break;case"agent":J(a)}},ie={location:A,lob:T,businessType:I,agent:E,dateRange:$};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("section",{className:"mb-2",children:(0,_.jsxs)(i.A,{children:[(0,_.jsx)(d.A,{className:"",sm:5,children:(0,_.jsx)("h4",{id:"dashboard",className:"card-title mb-0",children:"Dashboard"})}),(0,_.jsx)(d.A,{sm:7,className:"d-none d-md-block",children:(0,_.jsxs)("div",{className:"float-end me-3",children:[(0,_.jsx)("button",{onClick:()=>ne("daily"),className:""+("daily"===$?"btn btn-selected":"btn btn-light"),children:"Daily"}),(0,_.jsx)("button",{onClick:()=>ne("weekly"),className:""+("weekly"===$?"btn btn-selected":"btn btn-light"),children:"Weekly"}),(0,_.jsx)("button",{onClick:()=>ne("monthly"),className:""+("monthly"===$?"btn btn-selected":"btn btn-light"),children:"Monthly"}),(0,_.jsx)("button",{onClick:()=>ne("yearly"),className:""+("yearly"===$?"btn btn-selected":"btn btn-light"),children:"Yearly"}),(0,_.jsx)("button",{onClick:()=>{R(!0),H("customized")},className:""+("customized"===$?"btn btn-selected":"btn btn-light"),children:"Customized"})]})}),(0,_.jsx)(d.A,{className:"mb-3",sm:3,children:(0,_.jsx)("div",{children:le.defaultlocation.length<2?(0,_.jsx)(n.default,{options:le.defaultlocation,displayValue:"label",selectedValues:le.defaultlocation,showArrow:!1}):(0,_.jsx)(n.default,{options:le.defaultlocation,displayValue:"label",onSelect:e=>oe("location",e),onRemove:e=>oe("location",e),placeholder:"Select location",selectedValues:A,showArrow:!0})})}),(0,_.jsx)(d.A,{className:"mb-3",sm:3,children:(0,_.jsx)("div",{children:le.defaultbusinessType.length<2?(0,_.jsx)(n.default,{options:le.defaultbusinessType,displayValue:"label",selectedValues:le.defaultbusinessType,showArrow:!1}):(0,_.jsx)(n.default,{options:le.defaultbusinessType,displayValue:"label",onSelect:e=>oe("businessType",e),onRemove:e=>oe("businessType",e),placeholder:"Select business type",selectedValues:I,showArrow:!0})})}),(0,_.jsx)(d.A,{className:"mb-3",sm:3,children:(0,_.jsx)("div",{children:le.defaultlob.length<2?(0,_.jsx)(n.default,{options:le.defaultlob,displayValue:"label",selectedValues:le.defaultlob,showArrow:!1}):(0,_.jsx)(n.default,{options:le.defaultlob,displayValue:"label",onSelect:e=>oe("lob",e),onRemove:e=>oe("lob",e),placeholder:"Select line of business",selectedValues:T,showArrow:!0})})}),(0,_.jsx)(d.A,{className:"mb-3",sm:3,children:(0,_.jsx)("div",{children:le.defaultagent.length<2?(0,_.jsx)(n.default,{options:le.defaultagent,displayValue:"label",selectedValues:le.defaultagent,showArrow:!1}):(0,_.jsx)(n.default,{options:le.defaultagent,displayValue:"label",onSelect:e=>oe("agent",e),onRemove:e=>oe("agent",e),placeholder:"Select Agents",selectedValues:E,showArrow:!0})})})]})}),(0,_.jsx)("section",{className:"mb-3",children:(0,_.jsx)(i.A,{children:(0,_.jsx)(y.default,{defaultOptions:le,filterOptions:ie})})}),(0,_.jsx)("section",{className:"mb-3",children:(0,_.jsx)(v.default,{defaultOptions:le,filterOptions:ie})}),(0,_.jsx)("section",{className:"tables",children:(0,_.jsx)(i.A,{children:(0,_.jsxs)(d.A,{className:"",lg:12,id:"newlead",children:[(0,_.jsx)(o.default,{defaultOptions:le,filterOptions:ie,updateSharedData:W}),(0,_.jsx)(p.default,{defaultOptions:le,filterOptions:ie,updateSharedData:W}),(0,_.jsx)(x.default,{defaultOptions:le,filterOptions:ie,updateSharedData:W}),(0,_.jsx)(u.default,{defaultOptions:le,filterOptions:ie,updateSharedData:W}),(0,_.jsx)(g.default,{defaultOptions:le,filterOptions:ie,updateSharedData:W}),(0,_.jsx)(b.default,{defaultOptions:le,filterOptions:ie,updateSharedData:W}),(0,_.jsx)(j.default,{defaultOptions:le,filterOptions:ie,updateSharedData:W}),(0,_.jsx)(f.default,{defaultOptions:le,filterOptions:ie,lobdata:w})]})})}),(0,_.jsxs)(r.A,{size:"lg",show:M,onHide:()=>R(!1),children:[(0,_.jsx)(r.A.Header,{closeButton:!0,children:(0,_.jsx)(r.A.Title,{children:"Custom Dates"})}),(0,_.jsx)(r.A.Body,{children:(0,_.jsxs)(c.A,{children:[(0,_.jsxs)(i.A,{children:[(0,_.jsx)("label",{htmlFor:"",children:"From"}),(0,_.jsx)(l.A,{onChange:U,value:z,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]}),(0,_.jsxs)(i.A,{children:[(0,_.jsx)("label",{htmlFor:"",children:"To"}),(0,_.jsx)(l.A,{onChange:G,value:V,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]})]})}),(0,_.jsx)(r.A.Footer,{children:(0,_.jsx)(h.A,{variant:"secondary",onClick:()=>R(!1),children:"Close"})})]})]})}},87999:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(65043),n=t(92157),l=t.n(n),o=t(73216),i=t(1177),d=t(84217),r=t(53519),c=t(61072),h=t(14282),m=t(86178),p=t.n(m),u=t(70579);const x=function(e){let{filterOptions:a,defaultOptions:t,updateSharedData:n}=e;const m=(0,o.Zp)(),[x,j]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),[f,y]=(0,s.useState)([]),[v,_]=(0,s.useState)([]),[N]=(0,s.useState)(5),[S,A]=(0,s.useState)(0),[k,w]=(0,s.useState)(1),[C,T]=(0,s.useState)(!1),[L,O]=(0,s.useState)(""),[D,I]=(0,s.useState)(""),[F,P]=(0,s.useState)(""),[B,E]=(0,s.useState)([]),[J,$]=(0,s.useState)(""),[H,M]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?m("/login"):(V(k,N),G(),q())}),[a]);const R=JSON.parse(localStorage.getItem("user")),z=(R.usertype,null===R||void 0===R?void 0:R.location);let U="";z&&z.length>0&&z[0].loc_id&&(U=z[0].loc_id);const V=async(e,s)=>{let n=a.location,l=a.lob,o=a.businessType,i=a.agent,d=a.dateRange,r=t.startdate,c=t.enddate;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):t.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):t.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):t.defaultbusinessType.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):t.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,p={method:"POST",body:JSON.stringify({page:e,limit:s,location:n,lob:l,business_type:o,newagent:i,dateRange:d,startdate:r,enddate:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"646224eab201a6f07b2dff36"!=m&&"6462250eb201a6f07b2dff3a"!=m&&"646224deb201a6f07b2dff32"!=m&&"64622526b201a6f07b2dff3e"!=m||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Warm&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const a=e.total;M(a);const t=a/s,n=Math.ceil(t);A(n);const l=e.data;j(l)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?leadType=Warm&dashboardType=salesAdvisorDashboard",p).then((e=>e.json())).then((e=>{const a=e.total;M(a);const t=a/s,n=Math.ceil(t);A(n);const l=e.data;j(l)})).catch((e=>{console.log(e)}))},G=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let a=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});a=await a.json(),b(a.data)},Y=(k-1)*N,q=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].name,value:a[n]._id};s.push(e)}E(s)}))},W=e=>{const a=B.find((a=>a.value===e));return a?a.label:""},[Z,K]=(0,s.useState)({}),[Q,X]=(0,s.useState)(!1),[ee,ae]=(0,s.useState)("");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{children:(0,u.jsxs)(i.A.Item,{eventKey:"1",children:[(0,u.jsx)(i.A.Header,{children:(0,u.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,u.jsx)("strong",{children:"Warm Leads"}),H>0?(0,u.jsx)("div",{className:"dashboardNotify",children:(0,u.jsx)("h6",{children:H})}):""]})}),(0,u.jsxs)(i.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,u.jsxs)("table",{className:"table table-bordered",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"table-info",children:[(0,u.jsx)("th",{scope:"col",children:"Sr"}),(0,u.jsx)("th",{scope:"col",children:"Name"}),(0,u.jsx)("th",{scope:"col",children:"Phone No."}),(0,u.jsx)("th",{scope:"col",children:"Email-ID"}),(0,u.jsx)("th",{scope:"col",children:"Nationality"}),(0,u.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,u.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,u.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,u.jsx)("th",{scope:"col",children:"Link"}),(0,u.jsx)("th",{scope:"col",children:"DP"}),(0,u.jsx)("th",{scope:"col",children:"Lead Status"}),(0,u.jsx)("th",{scope:"col",children:"Forward To"}),(0,u.jsx)("th",{scope:"col",children:"Action"})]})}),(0,u.jsx)("tbody",{children:x.length>0?x.map(((e,a)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:Y+a+1}),(0,u.jsxs)("td",{onClick:()=>(e=>{try{console.log(e),window.open(e,"_blank")}catch(a){console.log(a)}})(e.buisnessEntityCostomerLink),children:[" ",e.name]}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,u.jsx)("td",{children:(0,u.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,u.jsx)("td",{children:e.nationality}),(0,u.jsx)("td",{children:new Date(e.new_lead_timestamp).toUTCString()}),(0,u.jsx)("td",{children:p()(e.new_lead_timestamp).fromNow()}),(0,u.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,u.jsx)("td",{className:"buttons_icons",children:(0,u.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(e=>{console.log(e),ae(e),X(!0)})(e.buisnessEntityCostomerLink),children:(0,u.jsx)("i",{className:"fa-solid fa-link"})})}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{type:"checkbox",name:"direct_payment",id:"direct_payment",defaultChecked:"true"==e.direct_payment,onChange:a=>{return t=e._id,s=a.target.checked,void P((e=>({...e,[t]:s})));var t,s},required:!0})}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{name:"lead_status",id:"lead_status",onChange:a=>((e,a)=>{"Forward"!=a&&($(""),document.getElementById(e).value="");I((t=>({...t,[e]:a}))),K((t=>({...t,[e]:a})))})(e._id,a.target.value),children:[(0,u.jsx)("option",{value:"",hidden:!0,children:e.lead_status}),g.map(((e,a)=>(0,u.jsx)("option",{value:e.lead_status,children:e.lead_status},a)))]})}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{name:"lead_status",id:e._id,onChange:a=>{return t=e._id,s=a.target.value,void $((e=>({...e,[t]:s})));var t,s},disabled:"Forward"!==Z[e._id],children:[(0,u.jsx)("option",{value:"",hidden:!0,children:void 0==e.forward_to||""==e.forward_to||null==e.forward_to?"Document Chaser":W(e.forward_to)}),B.map(((e,a)=>(0,u.jsx)("option",{value:e.value,children:e.label},a)))]})}),(0,u.jsx)("td",{className:"buttons_icons",children:(0,u.jsx)("button",{className:"btn btn-primary btn-sm ",onClick:()=>{var a;return((e,a)=>{"Motor"===a&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===a&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===a&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===a&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===a&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===a&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,null===(a=e.policy_type[0])||void 0===a?void 0:a.line_of_business_name)},children:(0,u.jsx)("i",{className:"fa fa-eye"})})})]},a))):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"12",className:"text-center",children:(0,u.jsx)("strong",{children:"No Records Found"})})})})]}),(0,u.jsxs)("section",{children:[(0,u.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const a=JSON.parse(localStorage.getItem("user"))._id,t="{}"===JSON.stringify(F)?null:F,s="{}"===JSON.stringify(D)?null:D,l=""===J?null:J,o=new Set(Object.keys(t||{}).concat(Object.keys(s||{}),Object.keys(l||{})));for(const i of o){const e=F[i],t=D[i],s=J[i];if("Forward"===t&&(""===s||null===s||void 0===s))return alert("Please select DC agent"),!1;const l={method:"POST",body:JSON.stringify({id:i,direct_payment:e,lead_status:t,forward_to:s,assigningagent:a}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",l).then((e=>e.json())).then((e=>{console.log(e),V(k,N),n(V(k,N))}))}},children:"Save "}),(0,u.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:S,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;w(a+1),V(a+1,N,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,u.jsxs)(d.A,{size:"lg",show:C,onHide:()=>T(!1),children:[(0,u.jsx)(d.A.Header,{closeButton:!0,children:(0,u.jsx)(d.A.Title,{children:"Lead Detail"})}),(0,u.jsx)(d.A.Body,{children:(0,u.jsxs)(r.A,{children:[(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name",children:"Name"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:f.name})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"email",children:"Email"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:f.email})]})})]}),(0,u.jsxs)(c.A,{children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:f.phoneno})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,u.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:v})]})})]})]})}),(0,u.jsx)(d.A.Footer,{children:(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>T(!1),children:"Close"})})]}),(0,u.jsxs)(d.A,{size:"lg",show:Q,onHide:()=>X(!1),children:[(0,u.jsx)(d.A.Header,{closeButton:!0,children:(0,u.jsx)(d.A.Title,{children:"Link"})}),(0,u.jsx)(d.A.Body,{children:(0,u.jsx)(r.A,{children:(0,u.jsx)(c.A,{children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"name"}),(0,u.jsx)("textarea",{className:"form-control",id:"address",name:"address",value:ee,readOnly:!0,children:ee&&(0,u.jsx)("a",{href:ee,target:"_blank",rel:"noopener noreferrer",children:ee})})]})})})})}),(0,u.jsxs)(d.A.Footer,{children:[(0,u.jsx)(h.A,{variant:"primary",onClick:()=>{const e=document.createElement("textarea");e.value=ee,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Link copied to clipboard!")},children:"Copy Link"}),(0,u.jsx)(h.A,{variant:"secondary",onClick:()=>X(!1),children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=5737.ba9acf5b.chunk.js.map