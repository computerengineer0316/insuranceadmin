"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2122],{22122:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(65043),n=a(73216),l=a(73023),c=a.n(l),i=a(92157),o=a.n(i),r=(a(54168),a(70579));const d=()=>{const e=(0,n.Zp)(),[t,a]=(0,s.useState)([]),[l]=(0,s.useState)(10),[i,d]=(0,s.useState)(0),[h,m]=(0,s.useState)(1),[p,u]=(0,s.useState)(!1),[x,g]=(0,s.useState)(""),[j,v]=(0,s.useState)([]),[k,b]=(0,s.useState)([]),[y,N]=(0,s.useState)([]),[f,S]=(0,s.useState)([]),[_,C]=(0,s.useState)(""),[L,Y]=(0,s.useState)([]),[T,w]=(0,s.useState)(""),[F,M]=(0,s.useState)(""),[B,O]=(0,s.useState)(""),[A,E]=(0,s.useState)([]),[I,P]=(0,s.useState)([]);(0,s.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];g(e),$(e),D()}}),[]),(0,s.useEffect)((()=>{$(x)}),[B,T]);const $=e=>{try{fetch(`https://insuranceapi-3o5t.onrender.com/api/getCompanyDetailsbyid/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data;C(t.company_name),console.log(t.blackListYatch,">>>>>>>>>>>>>>>>>>>>>>>>blackListVehicle"),a(t.blackListYatch),z(t.blackListYatch,h,l)}))}catch(t){console.log(t)}},D=()=>{const e={method:"Get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getYachtMake",e).then((e=>e.json())).then((e=>{const t=e.data;console.log(t,"list"),v(t)}))},z=(e,t,a)=>{Y([]);const s={method:"POST",body:JSON.stringify({MakeId:B}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_all_Yacht_Model?page=${t}&limit=${a}&name=${T}`,s).then((e=>e.json())).then((e=>{console.log(e);const t=e.total/a,s=Math.ceil(t);d(s);const n=e.data;Y(n)}))};return console.log(j,"make_motor"),console.log(B,"make_motor_filter_id"),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-md-4",children:[(0,r.jsx)("h4",{className:"card-title",children:"Black Listed Yacht"}),(0,r.jsx)("span",{style:{border:"2px solid gray",borderRadius:"8px",backgroundColor:"gray",color:"#FFFFFF",fontSize:"20px",padding:"4px"},children:_})]}),(0,r.jsxs)("div",{className:"col-md-8",style:{textAlign:"right"},children:[(0,r.jsx)("a",{href:"/insurance-company",className:"btn btn-primary",children:"Back"}),"\xa0\xa0"]})]})}),(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-lg-3",children:[(0,r.jsx)("label",{children:(0,r.jsx)("strong",{children:"Select Make"})}),(0,r.jsx)("br",{}),(0,r.jsxs)("select",{className:"form-control",defaultValue:B,onChange:e=>O(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"-- All --"}),null===j||void 0===j?void 0:j.map(((e,t)=>(0,r.jsx)("option",{value:e._id,children:e.name},t)))]})]}),(0,r.jsxs)("div",{className:"col-lg-3",children:[(0,r.jsx)("label",{children:(0,r.jsx)("strong",{children:"Search"})}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"text",className:"form-control",placeholder:"Search",onChange:e=>w(e.target.value)})]}),(0,r.jsx)("div",{className:"col-md-3",style:{textAlign:"right"},children:(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>(()=>{const e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/addBlacklistYatch?companyId=${x}`,e).then((e=>e.json())).then((e=>{200==e.status?(u(!1),c()({title:"Success!",text:e.message,type:"success",icon:"success"}).then((function(){P([])}))):(u(!1),c()({title:"Error!",text:e.message,type:"error",icon:"error"}).then((function(){})))}))})(),children:"Submit"})})]})}),(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"table-responsive",children:[(0,r.jsxs)("table",{className:"table table-bordered",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"#"}),(0,r.jsx)("th",{children:"Start Year"}),(0,r.jsx)("th",{children:"Make Yacht"}),(0,r.jsx)("th",{children:"Model Yacht"}),(0,r.jsx)("th",{children:"Body Type"}),(0,r.jsx)("th",{children:"Engine"})]})}),(0,r.jsx)("tbody",{children:null===L||void 0===L?void 0:L.map(((e,s)=>{var n,l;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"checkboxs",children:(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",id:e._id,defaultChecked:null===t||void 0===t?void 0:t.includes(e._id),onChange:s=>((e,s)=>{const n=[...A],l=[...I],c=[...t];if(!0===e.target.checked)c.push(s._id),a(c);else if(!1===e.target.checked){const e=n.indexOf(s);n.splice(e,1);let t=c.indexOf(s._id);c.splice(t,1),a(c)}E(n),P(l),console.log(l,"inputData")})(s,e)})})}),(0,r.jsx)("td",{children:e.start_year}),(0,r.jsx)("td",{children:null===e||void 0===e||null===(n=e.yachtmakes[0])||void 0===n?void 0:n.name}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:null===(l=e.Yacht_body_type[0])||void 0===l?void 0:l.yacht_body_type}),(0,r.jsx)("td",{children:e.engine})]},e._id)}))})]}),(0,r.jsx)(o(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:i,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const t=e.selected;m(t+1),$(x),z(t+1,l)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})}),(0,r.jsx)("div",{className:"card-footer"})]})})})})})}}}]);
//# sourceMappingURL=2122.7f6450b9.chunk.js.map