"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[218],{70218:(t,a,e)=>{e.r(a),e.d(a,{default:()=>c});var o=e(93946),n=e(90504),u=e(65043),s=e(73216),r=e(1177),d=e(78602),l=e(70579);const c=function(t){let{filterOptions:a,defaultOptions:e,lobdata:c}=t;const m=(0,s.Zp)();(0,u.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?m("/login"):C()}),[c]);const[h,i]=(0,u.useState)(),C=async()=>{let t=c.map((t=>t.value));const a={method:"POST",body:JSON.stringify({lob:t}),headers:{"Content-Type":"application/json"}};await fetch("https://insuranceapi-3o5t.onrender.com/api/get_new_leads_count",a).then((t=>t.json())).then((t=>{i(t)}))};let p={labels:[],datasets:[]};h&&Array.isArray(h.data)&&(p={labels:h.data.map((t=>t.line_of_business_name)),datasets:h.data.map((t=>({label:t.line_of_business_name,data:[t.total],backgroundColor:"Motor"===t.line_of_business_name?"#0D2F92":"#f87979",hoverBackgroundColor:"Motor"===t.line_of_business_name?"#0D2F92":"#f87979"})))});const[y,S]=(0,u.useState)([]);(0,u.useEffect)((()=>{b()}),[]),(0,u.useEffect)((()=>{const t=localStorage.getItem("token");null===t||void 0===t||""===t?m("/login"):(N(),ye())}),[a]);const b=()=>{const t=JSON.parse(localStorage.getItem("user")).line_of_business;if(t.length>0){const a=t,e=a.length,o=[];for(let t=0;t<e;t++){const e={label:a[t].lob_name,value:a[t].lob_id};o.push(e)}S(o)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>t.json())).then((t=>{const a=t.data,e=a.length,o=[];for(let n=0;n<e;n++){const t={label:a[n].line_of_business_name,value:a[n]._id};o.push(t)}S(o)}))}},[g,f]=(0,u.useState)(0),[_,v]=(0,u.useState)(0),[j,A]=(0,u.useState)(0),[J,O]=(0,u.useState)(0),[F,M]=(0,u.useState)(0),[T,x]=(0,u.useState)(0),N=async()=>{console.log("inside filterOptions",a),console.log("inside defaultOptions",e);const t=JSON.parse(localStorage.getItem("user"));let o=a.location,n=a.lob,u=a.businessType,s=a.agent,r=a.dateRange,d=e.startdate,l=e.enddate,c=t.assign_staff,m=e.userType;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((t=>t.value)):e.defaultlocation.map((t=>t.value)),n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((t=>t.value)):e.defaultlob.map((t=>t.value)),u=null!=u&&void 0!=u&&Array.isArray(u)&&0!==u.length?u.map((t=>t.value)):e.defaultbusinessType.map((t=>t.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((t=>t.value)):e.defaultagent.map((t=>t.value));const h=localStorage.getItem("token"),i=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",i);const C={method:"POST",body:JSON.stringify({location:o,lob:n,business_type:u,newagent:s,dateRange:r,startdate:d,enddate:l,assign_staff:c,userType:m}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"64622526b201a6f07b2dff3e"==i&&await fetch("https://insuranceapi-3o5t.onrender.com/api/topLeagentCount",C).then((t=>t.json())).then((t=>{console.log("data",t.data),f(t.data.motorCount),v(t.data.travelCount),A(t.data.homeCount),O(t.data.yatchCount),M(t.data.medicalCount),x(t.data.ortherInsuranceCount)})).catch((t=>{console.log(t)})),"64622470b201a6f07b2dff22"==i&&await fetch("https://insuranceapi-3o5t.onrender.com/api/topLeagentCount?dashboardType=policyIssuerDashbord",C).then((t=>t.json())).then((t=>{console.log("data",t.data),f(t.data.motorCount),v(t.data.travelCount),A(t.data.homeCount),O(t.data.yatchCount),M(t.data.medicalCount),x(t.data.ortherInsuranceCount)})).catch((t=>{console.log(t)}))},[I,k]=(0,u.useState)([]),[w,E]=(0,u.useState)(0),[B,D]=(0,u.useState)(0),[G,H]=(0,u.useState)(0),[L,R]=(0,u.useState)(0),[P,V]=(0,u.useState)(0),[Y,$]=(0,u.useState)(0),[z,K]=(0,u.useState)(0),[W,U]=(0,u.useState)(0),[Z,q]=(0,u.useState)(0),[Q,X]=(0,u.useState)(0),[tt,at]=(0,u.useState)(0),[et,ot]=(0,u.useState)(0),[nt,ut]=(0,u.useState)(0),[st,rt]=(0,u.useState)(0),[dt,lt]=(0,u.useState)(0),[ct,mt]=(0,u.useState)(0),[ht,it]=(0,u.useState)(0),[Ct,pt]=(0,u.useState)(0),[yt,St]=(0,u.useState)(0),[bt,gt]=(0,u.useState)(0),[ft,_t]=(0,u.useState)(0),[vt,jt]=(0,u.useState)(0),[At,Jt]=(0,u.useState)(0),[Ot,Ft]=(0,u.useState)(0),[Mt,Tt]=(0,u.useState)(0),[xt,Nt]=(0,u.useState)(0),[It,kt]=(0,u.useState)(0),[wt,Et]=(0,u.useState)(0),[Bt,Dt]=(0,u.useState)(0),[Gt,Ht]=(0,u.useState)(0),[Lt,Rt]=(0,u.useState)(0),[Pt,Vt]=(0,u.useState)(0),[Yt,$t]=(0,u.useState)(0),[zt,Kt]=(0,u.useState)(0),[Wt,Ut]=(0,u.useState)(0),[Zt,qt]=(0,u.useState)(0),[Qt,Xt]=(0,u.useState)(0),[ta,aa]=(0,u.useState)(0),[ea,oa]=(0,u.useState)(0),[na,ua]=(0,u.useState)(0),[sa,ra]=(0,u.useState)(0),[da,la]=(0,u.useState)(0),[ca,ma]=(0,u.useState)(0),[ha,ia]=(0,u.useState)(0),[Ca,pa]=(0,u.useState)(0),[ya,Sa]=(0,u.useState)(0),[ba,ga]=(0,u.useState)(0),[fa,_a]=(0,u.useState)(0),[va,ja]=(0,u.useState)(0),[Aa,Ja]=(0,u.useState)(0),[Oa,Fa]=(0,u.useState)(0),[Ma,Ta]=(0,u.useState)(0),[xa,Na]=(0,u.useState)(0),[Ia,ka]=(0,u.useState)(0),[wa,Ea]=(0,u.useState)(0),[Ba,Da]=(0,u.useState)(0),[Ga,Ha]=(0,u.useState)(0),[La,Ra]=(0,u.useState)(0),[Pa,Va]=(0,u.useState)(0),[Ya,$a]=(0,u.useState)(0),[za,Ka]=(0,u.useState)(0),[Wa,Ua]=(0,u.useState)(0),[Za,qa]=(0,u.useState)(0),[Qa,Xa]=(0,u.useState)(0),[te,ae]=(0,u.useState)(0),[ee,oe]=(0,u.useState)(0),[ne,ue]=(0,u.useState)(0),[se,re]=(0,u.useState)(0),[de,le]=(0,u.useState)(0),[ce,me]=(0,u.useState)(0),[he,ie]=(0,u.useState)(0),[Ce,pe]=(0,u.useState)(0),ye=async()=>{console.log("inside filterOptions",a),console.log("inside defaultOptions",e);const t=JSON.parse(localStorage.getItem("user"));let o=a.location,n=a.lob,u=a.businessType,s=a.agent,r=a.dateRange,d=e.startdate,l=e.enddate,c=t.assign_staff,m=e.userType;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((t=>t.value)):[],n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((t=>t.value)):[],u=null!=u&&void 0!=u&&Array.isArray(u)&&0!==u.length?u.map((t=>t.value)):[],s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((t=>t.value)):e.defaultagent.map((t=>t.value));const h=localStorage.getItem("token"),i=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",i);const C={method:"POST",body:JSON.stringify({location:o,lob:n,business_type:u,newagent:s,dateRange:r,startdate:d,enddate:l,assign_staff:c,userType:m}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"64622526b201a6f07b2dff3e"==i&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getAllGraphCount",C).then((t=>t.json())).then((t=>{E(t.data.janmotorCount),D(t.data.febmotorCount),H(t.data.marmotorCount),R(t.data.aprmotorCount),V(t.data.maymotorCount),$(t.data.junmotorCount),K(t.data.julmotorCount),U(t.data.augmotorCount),q(t.data.sepmotorCount),X(t.data.octmotorCount),at(t.data.novmotorCount),ot(t.data.decmotorCount),ut(t.data.jantravelCount),rt(t.data.febtravelCount),lt(t.data.martravelCount),mt(t.data.aprtravelCount),it(t.data.maytravelCount),pt(t.data.juntravelCount),St(t.data.jultravelCount),gt(t.data.augtravelCount),_t(t.data.septravelCount),jt(t.data.octtravelCount),Jt(t.data.novtravelCount),Ft(t.data.dectravelCount),Tt(t.data.janhomeCount),Nt(t.data.febhomeCount),kt(t.data.marhomeCount),Et(t.data.aprhomeCount),Dt(t.data.mayhomeCount),Ht(t.data.junhomeCount),Rt(t.data.julhomeCount),Vt(t.data.aughomeCount),$t(t.data.sephomeCount),Kt(t.data.octhomeCount),Ut(t.data.novhomeCount),qt(t.data.dechomeCount),Xt(t.data.janmedicalCount),aa(t.data.febmedicalCount),oa(t.data.marmedicalCount),ua(t.data.aprmedicalCount),ra(t.data.maymedicalCount),la(t.data.junmedicalCount),ma(t.data.julmedicalCount),ia(t.data.augmedicalCount),pa(t.data.sepmedicalCount),Sa(t.data.octmedicalCount),ga(t.data.novmedicalCount),_a(t.data.decmedicalCount),ja(t.data.janyachtCount),Ja(t.data.febyachtCount),Fa(t.data.maryachtCount),Ta(t.data.apryachtCount),Na(t.data.mayyachtCount),ka(t.data.junyachtCount),Ea(t.data.julyachtCount),Da(t.data.augyachtCount),Ha(t.data.sepyachtCount),Ra(t.data.octyachtCount),Va(t.data.novyachtCount),$a(t.data.decyachtCount),Ka(t.data.janotherCount),Ua(t.data.febotherCount),qa(t.data.marotherCount),Xa(t.data.aprotherCount),ae(t.data.mayotherCount),oe(t.data.junotherCount),ue(t.data.julotherCount),re(t.data.augotherCount),le(t.data.sepotherCount),me(t.data.octotherCount),ie(t.data.novotherCount),pe(t.data.decotherCount)})).catch((t=>{console.log(t)})),"64622470b201a6f07b2dff22"==i&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getAllGraphCount?dashboardType=policyIssuerDashbord",C).then((t=>t.json())).then((t=>{E(t.data.janmotorCount),D(t.data.febmotorCount),H(t.data.marmotorCount),R(t.data.aprmotorCount),V(t.data.maymotorCount),$(t.data.junmotorCount),K(t.data.julmotorCount),U(t.data.augmotorCount),q(t.data.sepmotorCount),X(t.data.octmotorCount),at(t.data.novmotorCount),ot(t.data.decmotorCount),ut(t.data.jantravelCount),rt(t.data.febtravelCount),lt(t.data.martravelCount),mt(t.data.aprtravelCount),it(t.data.maytravelCount),pt(t.data.juntravelCount),St(t.data.jultravelCount),gt(t.data.augtravelCount),_t(t.data.septravelCount),jt(t.data.octtravelCount),Jt(t.data.novtravelCount),Ft(t.data.dectravelCount),Tt(t.data.janhomeCount),Nt(t.data.febhomeCount),kt(t.data.marhomeCount),Et(t.data.aprhomeCount),Dt(t.data.mayhomeCount),Ht(t.data.junhomeCount),Rt(t.data.julhomeCount),Vt(t.data.aughomeCount),$t(t.data.sephomeCount),Kt(t.data.octhomeCount),Ut(t.data.novhomeCount),qt(t.data.dechomeCount),Xt(t.data.janmedicalCount),aa(t.data.febmedicalCount),oa(t.data.marmedicalCount),ua(t.data.aprmedicalCount),ra(t.data.maymedicalCount),la(t.data.junmedicalCount),ma(t.data.julmedicalCount),ia(t.data.augmedicalCount),pa(t.data.sepmedicalCount),Sa(t.data.octmedicalCount),ga(t.data.novmedicalCount),_a(t.data.decmedicalCount),ja(t.data.janyachtCount),Ja(t.data.febyachtCount),Fa(t.data.maryachtCount),Ta(t.data.apryachtCount),Na(t.data.mayyachtCount),ka(t.data.junyachtCount),Ea(t.data.julyachtCount),Da(t.data.augyachtCount),Ha(t.data.sepyachtCount),Ra(t.data.octyachtCount),Va(t.data.novyachtCount),$a(t.data.decyachtCount),Ka(t.data.janotherCount),Ua(t.data.febotherCount),qa(t.data.marotherCount),Xa(t.data.aprotherCount),ae(t.data.mayotherCount),oe(t.data.junotherCount),ue(t.data.julotherCount),re(t.data.augotherCount),le(t.data.sepotherCount),me(t.data.octotherCount),ie(t.data.novotherCount),pe(t.data.decotherCount)})).catch((t=>{console.log(t)}))};console.log("totaldata",I);const Se=[{line_of_business_name:"Motor",monthlydata:[{month:"January",count:w},{month:"February",count:B},{month:"March",count:G},{month:"April",count:L},{month:"May",count:P},{month:"June",count:Y},{month:"July",count:z},{month:"August",count:W},{month:"September",count:Z},{month:"October",count:Q},{month:"November",count:tt},{month:"December",count:et}]},{line_of_business_name:"Travel",monthlydata:[{month:"January",count:nt},{month:"February",count:st},{month:"March",count:dt},{month:"April",count:ct},{month:"May",count:ht},{month:"June",count:Ct},{month:"July",count:yt},{month:"August",count:bt},{month:"September",count:ft},{month:"October",count:vt},{month:"November",count:At},{month:"December",count:Ot}]},{line_of_business_name:"Home",monthlydata:[{month:"January",count:Mt},{month:"February",count:xt},{month:"March",count:It},{month:"April",count:wt},{month:"May",count:Bt},{month:"June",count:Gt},{month:"July",count:Lt},{month:"August",count:Pt},{month:"September",count:Yt},{month:"October",count:zt},{month:"November",count:Wt},{month:"December",count:Zt}]},{line_of_business_name:"Medical",monthlydata:[{month:"January",count:Qt},{month:"February",count:ta},{month:"March",count:ea},{month:"April",count:na},{month:"May",count:sa},{month:"June",count:da},{month:"July",count:ca},{month:"August",count:ha},{month:"September",count:Ca},{month:"October",count:ya},{month:"November",count:ba},{month:"December",count:fa}]},{line_of_business_name:"Yacht",monthlydata:[{month:"January",count:va},{month:"February",count:Aa},{month:"March",count:Oa},{month:"April",count:Ma},{month:"May",count:xa},{month:"June",count:Ia},{month:"July",count:wa},{month:"August",count:Ba},{month:"September",count:Ga},{month:"October",count:La},{month:"November",count:Pa},{month:"December",count:Ya}]},{line_of_business_name:"Other Insurance",monthlydata:[{month:"January",count:za},{month:"February",count:Wa},{month:"March",count:Za},{month:"April",count:Qa},{month:"May",count:te},{month:"June",count:ee},{month:"July",count:ne},{month:"August",count:se},{month:"September",count:de},{month:"October",count:ce},{month:"November",count:he},{month:"December",count:Ce}]}];let be={labels:[],datasets:[]};return be={labels:Array.from(new Set(Se.flatMap((t=>t.monthlydata.map((t=>t.month)))))),datasets:Se.map((t=>({label:t.line_of_business_name,backgroundColor:"Motor"===t.line_of_business_name?"#FF6384":"Travel"===t.line_of_business_name?"#007500":"Home"===t.line_of_business_name?"#FFCE56":"Medical"===t.line_of_business_name?"#36A2EB":"Yacht"===t.line_of_business_name?"#5742f5":"#da42f5",data:t.monthlydata.map((t=>t.count))})))},(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.A,{children:(0,l.jsxs)(r.A.Item,{eventKey:"1",children:[(0,l.jsx)(r.A.Header,{children:(0,l.jsx)("div",{className:"card-header new_leads",children:(0,l.jsx)("strong",{children:"Graphical View "})})}),(0,l.jsx)(r.A.Body,{style:{padding:"2px"},children:(0,l.jsx)(o.E$,{className:"mb-4",children:(0,l.jsxs)(o.sK,{children:[(0,l.jsx)(o.UF,{lg:8,children:(0,l.jsxs)(o.E$,{className:"mb-4",children:[(0,l.jsx)(o.V0,{children:"Bar Chart"}),(0,l.jsx)(o.W6,{children:(0,l.jsx)(n.BB,{data:be})})]})}),(0,l.jsx)(d.A,{className:"",lg:4,children:(0,l.jsxs)(o.E$,{className:"mb-4",children:[(0,l.jsx)(o.V0,{children:"Total Leads"}),(0,l.jsx)(o.W6,{children:(0,l.jsx)(n.kp,{data:{labels:["Motor","Travel","Home","Medical","Yacht","Other LOB"],datasets:[{data:[g,_,j,F,J,T],backgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"],hoverBackgroundColor:["#FF6384","#007500","#FFCE56","#36A2EB","#5742f5","#da42f5"]}]}})})]})})]})})})]})})})}}}]);
//# sourceMappingURL=218.80bdb118.chunk.js.map