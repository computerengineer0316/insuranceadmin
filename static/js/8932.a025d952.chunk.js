"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8932],{38932:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(65043),s=a(73216),i=a(73023),l=a.n(i),o=a(70579);const r=()=>{var e;const t=(0,s.Zp)(),[a,i]=(0,n.useState)({}),[r,c]=(0,n.useState)({}),[d,m]=(0,n.useState)(""),[u,p]=(0,n.useState)([]),[h,f]=(0,n.useState)([]),[v,j]=(0,n.useState)([]),[x,g]=(0,n.useState)(""),[N,b]=(0,n.useState)(""),[y,_]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=localStorage.getItem("token");if(null===e||void 0===e||""===e)t("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];S(e),m(e)}}),[]),(0,n.useEffect)((()=>{T()}),[x]);const S=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/getGroupMedicalClaimById?id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{var t,a;i(e.data[0]),g(null===(t=e.data[0])||void 0===t||null===(a=t.member_data)||void 0===a?void 0:a.firstName)}))},T=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};fetch("https://insuranceapi-3o5t.onrender.com/api/getAllPrincepleOfHr",e).then((e=>e.json())).then((e=>{const t=e.data,a=null===t||void 0===t?void 0:t.find((e=>e.firstName==x));w(null===a||void 0===a?void 0:a.employeeNumber),a&&console.log(a,"><><found Member"),p(e.data)}))},w=e=>{const t={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};fetch(`https://insuranceapi-3o5t.onrender.com/api/getAllmemberOfHr?employeeId=${e}`,t).then((e=>e.json())).then((e=>{f(e.data)}))};return(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-md-12",children:(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"card-header",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("h4",{children:"Edit Claim Request Member Details"})}),(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsx)("button",{className:"btn btn-primary",onClick:()=>t(-1),style:{float:"right"},children:"Back"})})]})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("form",{method:"POST",onSubmit:e=>{e.preventDefault();const a=new FormData(e.target),n=a.get("member_name"),s=a.get("relation"),i=a.get("employeeId"),o=a.get("claim_description"),r=a.get("claim_amount"),c=a.get("dateOfTreatment");if(""==o||""==r||""==c)return l()({type:"warning",icon:"warning",text:"Please fill all the fields"}),!1;let m={principleName:y,member_name:n,relation:s,employeeId:i,claim_description:o,claim_amount:r,dateOfTreatment:c};const u={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)};fetch(`https://insuranceapi-3o5t.onrender.com/api/updateGroupMedicalClaimByHr?id=${d}`,u).then((e=>e.json())).then((e=>{200===e.status?(l()({text:"Updated Successfully",icon:"success",type:"success",buttons:!1}),setTimeout((()=>{l().close(),t(-1)}),2e3)):(l()({text:"Something went wrong",icon:"error",buttons:!1}),setTimeout((()=>{l().close(),t(-1)}),2e3))}))},children:[(0,o.jsx)("div",{className:"row"}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"",children:"Date Of Treatement"}),(0,o.jsx)("input",{name:"dateOfTreatment",defaultValue:null===a||void 0===a||null===(e=a.dateOfTreatment)||void 0===e?void 0:e.slice(0,10),type:"date",className:"form-control"})]})}),(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"",children:"Brief Description of Claim"}),(0,o.jsx)("input",{name:"claim_description",defaultValue:null===a||void 0===a?void 0:a.claimDscription,type:"text",className:"form-control"})]})}),(0,o.jsx)("div",{className:"col-md-4",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"",children:"Claim Amount (AED)"}),(0,o.jsx)("input",{name:"claim_amount",defaultValue:null===a||void 0===a?void 0:a.claimAmountFromHr,type:"text",className:"form-control"})]})})]}),(0,o.jsx)("button",{className:"btn btn-primary",children:"Update"})]})})]})})})})}}}]);
//# sourceMappingURL=8932.a025d952.chunk.js.map