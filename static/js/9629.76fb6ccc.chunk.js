"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9629,5067],{79629:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l});var a=t(65043),o=t(45067),r=t(73216),s=t(73023),i=t.n(s),c=t(70579);const l=function(){const e=(0,r.Zp)(),n={company_id:"Insurance Company Name",plan_name:"Plan Name ",plan_category_id:"Plan Category",plan_label:"Plan Label",nature_of_plan_id:"Nature Of Plan",electric_vehicle:"Vehicle Type",car_value:"Car Value",car_value_topup:"Car Value Topup",min_premium:"Minimum Premium",age:"Driver Age",agetopup:"Driver Age Topup",drivingexp:"Driving Experience",drivingexptopup:"Driving Experience Topup",homedrivingexp:"Home Country Driving Experience",homedrivingexptopup:"Home Country Driving Experience Topup",claimyear:"Claim Years",claimyeardisc:"Claim Years Discount",gccspecstopup:"GCC Specs Topup",nationalitytopup:"Nationality Topup",age_of_the_car:"Age Of The Car",age_of_the_car_topup:"Age Of The Car Topup",add_op_con_desc:"Add Option Condition Description",add_op_con_desc_topup:"Add Option Condition Description Topup",vat:"Vat",jdv_comm:"JDV Commission",location:"Location required",body_type_name:"Body Type",cylinders:"Cylinder",repair_type_name:"Repair Type",business_type_name:"Buisness Type",plan_for:"Plan For"};(0,a.useEffect)((()=>{const n=localStorage.getItem("token");null===n||void 0===n||""===n?e("/login"):p()}),[]);const[t,s]=(0,a.useState)([]),[l,d]=(0,a.useState)([]),p=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const n=e.data,t=n.length,a=[];for(let o=0;o<t;o++){const e={label:n[o].location_name,value:n[o]._id};a.push(e)}d(a)}))};return(0,c.jsx)("div",{className:"container mb-5",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsxs)("div",{className:"card",children:[(0,c.jsx)("div",{className:"card-header",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("h4",{className:"card-title",children:"Add Third Party Motor Plan"})}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("a",{href:"/motor-plan",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,c.jsx)("div",{className:"card-body addmotorplans",style:{overflowX:"scroll",height:"450px"},children:(0,c.jsxs)("table",{className:"table table-bordered",style:{width:"12000px"},children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:(0,c.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={company_id:"",policy_type:"Third Party Liability (TPL)",plan_name:"",body_type_name:"",cylinders:"",min_premium:"",car_value:"",car_value_topup:"",plan_for:"",business_type_name:"",electric_vehicle:"",age:"",agetopup:"",drivingexp:"",drivingexptopup:"",homedrivingexp:"",homedrivingexptopup:"",claimyear:"",claimyeardisc:"",gccspecstopup:"",age_of_the_car:"",age_of_the_car_topup:"",add_op_con_desc:"",add_op_con_desc_topup:"",vat:"",jdv_comm:"",nature_of_plan_id:"",location:l};s([...t,e])},children:"+"})}),(0,c.jsx)("th",{className:"text-danger",children:"Company Name"}),(0,c.jsx)("th",{className:"text-danger",children:"Plan Name"}),(0,c.jsx)("th",{className:"text-danger",children:"Nature Of Plan"}),(0,c.jsx)("th",{className:"text-danger",children:"Body Type"}),(0,c.jsx)("th",{className:"text-danger",children:"Cylinder"}),(0,c.jsx)("th",{className:"text-danger",children:"Min Premium"}),(0,c.jsx)("th",{className:"text-danger",children:"Premium"}),(0,c.jsx)("th",{children:"Car Value"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered (Car Value)"}),(0,c.jsx)("th",{children:"Electric Vehicle"}),(0,c.jsx)("th",{className:"text-danger",children:"Plan For"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered(Plan For)"}),(0,c.jsx)("th",{children:"Business Type"}),(0,c.jsx)("th",{className:"text-danger",children:"Driver Age"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered (Driver Age)"}),(0,c.jsx)("th",{className:"text-danger",children:"Driving Experiance"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered (Driving Experiance)"}),(0,c.jsx)("th",{children:"Home Country Driving Experiance"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered (Home Country Driving Experiance)"}),(0,c.jsx)("th",{children:"No Claim Year"}),(0,c.jsx)("th",{children:"No Claim Discount"}),(0,c.jsx)("th",{children:"GCC / No-GCC"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered (GCC / No-GCC)"}),(0,c.jsx)("th",{children:"Nationality"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered (Nationality)"}),(0,c.jsx)("th",{children:"Car Model"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered(Car Model)"}),(0,c.jsx)("th",{children:"Age Of The Car"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered (Age Of The Car)"}),(0,c.jsx)("th",{children:"Add Option Condition Description"}),(0,c.jsx)("th",{children:"Fixed/Percentage/Reffered (Add Option Condition Description)"}),(0,c.jsx)("th",{children:"Vat Able"}),(0,c.jsx)("th",{children:"JDV Commission"}),(0,c.jsx)("th",{children:"Location"})]})}),(0,c.jsx)("tbody",{children:(0,c.jsx)(o.default,{rowsData:t,deleteTableRows:e=>{const n=[...t];n.splice(e,1),s(n)},handleChange:(e,n)=>{const{name:a,value:o}=n.target,r=[...t];r[e][a]=o,s(r)},handleChange123:(e,n,a)=>{const o=[...t];o[e][a]=n,s(o)}})})]})}),(0,c.jsx)("div",{className:"card-footer",children:(0,c.jsx)("button",{className:"btn btn-outline-success",style:{float:"right"},onClick:async()=>{const a=[];if(t.forEach(((e,n)=>{const t=Object.keys(e).filter((n=>{const t=e[n];return"string"===typeof t&&""===t.trim()?"plan_label"!=n&&"car_value_topup"!=n&&"agetopup"!=n&&"drivingexptopup"!=n&&"electric_vehicle"!=n&&"homedrivingexp"!=n&&"homedrivingexptopup"!=n&&"nationality"!=n&&"claimyear"!=n&&"claimyeardisc"!=n&&"gccspecstopup"!=n&&"NationalTopup"!=n&&"age_of_the_car_topup"!=n&&"add_op_con_desc"!=n&&"add_op_con_desc_topup"!=n&&"vat"!=n&&"jdv_comm"!=n&&"car_value"!=n&&"business_type_name"!=n:!("body_type_name"!=n&&"plan_for_name"!=n&&"business_type_name"!=n&&"cylinder"!=n||t.length)}));t.length>0&&a.push({index:n,emptyKeys:t})})),a.length>0)a.forEach((e=>{const t=e.emptyKeys[0];i()({title:"warning!",text:`${n[t]} is required`,type:"warning",icon:"warning"}).then((function(){return!1}))}));else{const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({rowsData:t})};await fetch("https://insuranceapi-3o5t.onrender.com/api/addMotorPlan",n).then((e=>e.json())).then((n=>{200===n.status?(i()({text:n.message,type:"success",icon:"success",button:!1}),e("/motor-plan"),setTimeout((()=>{i().close()}),1e3)):(i()({title:"Error!",text:n.message,type:"error",icon:"error",button:!1}),e("/motor-plan"),setTimeout((()=>{i().close()}),1e3))})).catch((e=>console.log(e)))}},children:"Submit"})})]})})})})}},45067:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(65043),o=t(54168),r=t(70579);const s=function(e){let{rowsData:n,deleteTableRows:t,handleChange:s,handleChange123:i}=e;const[c,l]=(0,a.useState)([]),[d,p]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[x,u]=(0,a.useState)([]),[_,g]=(0,a.useState)([]),[j,f]=(0,a.useState)([]),[y,C]=(0,a.useState)([]),[v,N]=(0,a.useState)(),[b,T]=(0,a.useState)([]),[P,E]=(0,a.useState)([]),[S,R]=(0,a.useState)({status:!1,name:"",index:""});(0,a.useEffect)((()=>{A(),O(),D(),F(),k(),w(),V(),G(),B();N([{id:2,name:"2"},{id:4,name:"4"},{id:6,name:"6"},{id:8,name:"8"},{id:10,name:"10"},{id:12,name:"12"}])}),[]);const O=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getBodyType",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{l(e.data)}))},D=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getPlanFor",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{p(e.data)}))},F=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getBusinessType",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const n=e.data,t=null===n||void 0===n?void 0:n.length,a=[];for(let o=0;o<t;o++){const e={_id:n[o]._id,business_type_name:n[o].business_type_name};a.push(e)}m(a)}))},k=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getGccSpecs",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{u(e.data)}))},w=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNationality",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{g(e.data)}))},V=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getModelMotor",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{f(e.data)}))},A=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/company_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{C(e.data)}))},G=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const n=e.data,t=n.length,a=[];for(let o=0;o<t;o++){const e={label:n[o].location_name,value:n[o]._id};a.push(e)}T(a)}))},M=(e,n,t)=>{i(e,n,t)},B=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNatureOfPlan",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{E(e.data)}))},H=(e,n)=>{const t=e.target.value;/^[A-Za-z,]*$/.test(t)?R({status:!1,name:e.target.name,index:n}):(R({status:!0,name:e.target.name,index:n}),e.target.value=t.replace(/[^a-zA-Z\s,]/g,""))};return n.map(((e,n)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>t(n),children:"x"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("select",{className:"form-control",name:"company_id",onChange:e=>s(n,e),children:[(0,r.jsx)("option",{value:"",children:"Select Company"}),y.map(((e,n)=>(0,r.jsx)("option",{value:e._id,children:e.company_name},n)))]})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"plan_name",className:"form-control",placeholder:"Enter Plan Name"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("select",{className:"form-control",name:"nature_of_plan_id",onChange:e=>s(n,e),children:[(0,r.jsx)("option",{value:"",hidden:!0,children:"Select Nature Of Plan"}),P.map(((e,n)=>(0,r.jsx)("option",{value:e._id,children:e.nature_of_plan_name},n)))]})}),(0,r.jsx)("td",{children:(0,r.jsx)(o.default,{className:"form-control",options:c,onSelect:e=>M(n,e,"body_type_name"),onRemove:e=>M(n,e,"body_type_name"),displayValue:"body_type_name",showCheckbox:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)(o.default,{className:"form-control",options:v,onSelect:e=>M(n,e,"cylinders"),onRemove:e=>M(n,e,"cylinders"),displayValue:"name",showCheckbox:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"min_premium",className:"form-control",placeholder:"Enter Min Premium"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"premium",className:"form-control",placeholder:"Enter Premium"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"car_value",className:"form-control",placeholder:"One or more ranges e.g. 0-50000,50001-10000"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"car_value_topup",className:"form-control",placeholder:"Enter Car Value Fixed/Percentage/Reffered"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("select",{className:"form-control",name:"electric_vehicle",onChange:e=>s(n,e),children:[(0,r.jsx)("option",{value:"0",children:"Select"}),(0,r.jsx)("option",{value:"1",children:"Yes"}),(0,r.jsx)("option",{value:"0",children:"No"})]})}),(0,r.jsx)("td",{children:(0,r.jsx)(o.default,{className:"form-control",options:d,onSelect:e=>M(n,e,"plan_for"),onRemove:e=>M(n,e,"plan_for"),displayValue:"plan_for_name",showCheckbox:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"plan_for_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered (Plan For)"})}),(0,r.jsx)("td",{children:(0,r.jsx)(o.default,{className:"form-control",options:h,onSelect:e=>M(n,e,"business_type_name"),onRemove:e=>M(n,e,"business_type_name"),displayValue:"business_type_name",showCheckbox:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"age",className:"form-control",placeholder:"One or more ranges e.g. 21-24,25-60,60-70 years"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"agetopup",className:"form-control",placeholder:"Enter Age Fixed/Percentage/Reffered"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"drivingexp",className:"form-control",placeholder:"One or more ranges e.g. 0-11,12-6000 months"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"drivingexptopup",className:"form-control",placeholder:"Enter Driving Experience Fixed/Percentage/Reffered"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"homedrivingexp",className:"form-control",placeholder:"One or more ranges e.g. 0-11,12-6000 months"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"homedrivingexptopup",className:"form-control",placeholder:"Enter Home Country Driving Experience Fixed/Percentage/Reffered"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"claimyears",className:"form-control",placeholder:"One or more ranges e.g. 1,2,3,4,5 years"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"claimyeardisc",className:"form-control",placeholder:"One or more ranges e.g. 30%,20%,30%,40%,50%"})}),(0,r.jsx)("td",{children:(0,r.jsx)(o.default,{className:"form-control",options:x,onSelect:e=>M(n,e,"gcc_spec"),onRemove:e=>M(n,e,"gcc_spec"),displayValue:"plan_for_gcc_spec_name",showCheckbox:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"gccspecstopup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered (GCC / No-GCC)"})}),(0,r.jsx)("td",{children:(0,r.jsx)(o.default,{className:"form-control",options:_,onSelect:e=>M(n,e,"nationality"),onRemove:e=>M(n,e,"nationality"),displayValue:"nationality_name",showCheckbox:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"NationalTopup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered (Nationality)"})}),(0,r.jsx)("td",{children:(0,r.jsx)(o.default,{className:"form-control",options:j,onSelect:e=>M(n,e,"make_motor"),onRemove:e=>M(n,e,"make_motor"),displayValue:"make_motor_name",showCheckbox:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"car_model_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered (Car Model Topup)"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"age_of_the_car",className:"form-control",placeholder:"One or more ranges e.g. 0-2,0-5,0-10 years from the date of first registration"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"age_of_the_car_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered (Age Of The Car)"})}),(0,r.jsxs)("td",{children:[(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"add_op_con_desc",onInput:e=>H(e,n),className:"form-control",placeholder:"One or more ranges e.g. Policy fee,EVG charges"}),1==S.status&&"add_op_con_desc"==S.name&&S.index==n?(0,r.jsx)("span",{style:{color:"red"},children:"Text Only"}):""]}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"add_op_con_desc_topup",className:"form-control",placeholder:"Enter Fixed/Percentage/Reffered (Add Option Condition Description)"})}),(0,r.jsxs)("td",{children:[(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"vat",onInput:e=>H(e,n),className:"form-control",placeholder:"Enter Vat Able"}),1==S.status&&"vat"==S.name&&S.index==n?(0,r.jsx)("span",{style:{color:"red"},children:"Text Only"}):""]}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>s(n,e),name:"jdv_comm",className:"form-control",placeholder:"Enter JDV Commission"})}),(0,r.jsx)("td",{children:(0,r.jsx)(o.default,{options:b,selectedValues:b,onSelect:e=>M(n,e,"location"),onRemove:e=>M(n,e,"location"),displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})})]},n)))}}}]);
//# sourceMappingURL=9629.76fb6ccc.chunk.js.map