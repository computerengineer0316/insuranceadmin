"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3610],{3610:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var t=s(65043),n=s(92157),l=s.n(n),i=s(73216),o=s(1177),c=s(5093),r=s(51082),d=s(70579);const h=function(e){let{filterOptions:a,defaultOptions:s}=e;const n=(0,i.Zp)(),[h]=(0,t.useState)(5),[p,u]=(0,t.useState)(0),[m,g]=(0,t.useState)(1),[x,j]=(0,t.useState)([]),[b,f]=(0,t.useState)(0),y=JSON.parse(localStorage.getItem("user"))._id;(0,t.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?n("/login"):_(m,h)}),[a]);const v=(m-1)*h,_=async(e,t)=>{let n=a.location,l=a.lob,i=a.businessType,o=a.agent,c=a.dateRange,r=s.startdate,d=s.enddate;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):s.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):s.defaultlob.map((e=>e.value)),i=null!=i&&void 0!=i&&Array.isArray(i)&&0!==i.length?i.map((e=>e.value)):s.defaultbusinessType.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):s.defaultagent.map((e=>e.value));const h=localStorage.getItem("token"),p=JSON.parse(localStorage.getItem("user")).usertype,m={method:"POST",body:JSON.stringify({page:e,limit:t,agentid:y,location:n,lob:l,business_type:i,newagent:o,dateRange:c,startdate:r,enddate:d}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+h}};"6462250eb201a6f07b2dff3a"!=p&&"646224eab201a6f07b2dff36"!=p&&"646224deb201a6f07b2dff32"!=p&&"64622526b201a6f07b2dff3e"!=p||await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?policyIssuer=issuedPolicy&dashboardType=policyIssuerDashbord",m).then((e=>e.json())).then((e=>{const a=e.total;f(a);const s=a/t,n=Math.ceil(s);u(n);const l=e.data;j(l)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==p&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?policyIssuer=issuedPolicy&dashboardType=policyIssuerDashbord",m).then((e=>e.json())).then((e=>{const a=e.total;f(a);const s=a/t,n=Math.ceil(s);u(n);const l=e.data;j(l)})).catch((e=>{console.log(e)}))};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(o.A,{defaultActiveKey:"0",flush:!0,children:(0,d.jsxs)(o.A.Item,{eventKey:"0",children:[(0,d.jsx)(o.A.Header,{children:(0,d.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,d.jsx)("strong",{children:"Issued Policies"}),b>0?(0,d.jsx)("div",{className:"dashboardNotify",children:(0,d.jsx)("h6",{children:b})}):""]})}),(0,d.jsxs)(o.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,d.jsxs)("table",{className:"table table-bordered",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{scope:"col",children:"Sr"}),(0,d.jsx)("th",{scope:"col",children:"Client Name"}),(0,d.jsx)("th",{scope:"col",children:"Contact Number"}),(0,d.jsx)("th",{scope:"col",children:"Email Address"}),(0,d.jsx)("th",{scope:"col",children:"Received From"}),(0,d.jsx)("th",{scope:"col",children:"LOB"}),(0,d.jsx)("th",{scope:"col",children:"Time & Date Issued"}),(0,d.jsx)("th",{scope:"col",children:"PI TAT"}),(0,d.jsx)("th",{scope:"col",children:"Authorities Pending"}),(0,d.jsx)("th",{scope:"col",children:"Action"})]})}),(0,d.jsx)("tbody",{children:x.length>0?x.map(((e,a)=>{const s=(0,c.default)(e.policy_issued_date),t=new Date,n=Math.abs((0,r.A)(s,t));return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:v+a+1}),(0,d.jsx)("td",{children:e.name}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`https://wa.me/${e}`;window.open(a)})(e.phoneno),children:e.phoneno})}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{href:"#",onClick:()=>(e=>{const a=`mailto:${e}`;window.open(a)})(e.email),children:e.email})}),(0,d.jsx)("td",{children:e.dc_recived_from[0].name}),(0,d.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,d.jsx)("td",{children:new Date(e.policy_issued_date).toUTCString()}),(0,d.jsx)("td",{children:n+" Days"}),(0,d.jsx)("td",{children:(0,d.jsx)("input",{type:"checkbox",name:"",id:""})}),(0,d.jsx)("td",{children:(0,d.jsx)("button",{type:"button",className:"small-btn",children:"Update"})})]},a)})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"12",className:"text-center",children:(0,d.jsx)("strong",{children:"No Records Found"})})})})]}),(0,d.jsx)("section",{children:(0,d.jsx)(l(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:p,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const a=e.selected;g(a+1),_(a+1,h,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})})})}}}]);
//# sourceMappingURL=3610.f8ef1a71.chunk.js.map