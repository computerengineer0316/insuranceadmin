"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1452],{41452:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var l=s(65043),t=(s(92157),s(73216)),n=s(84217),o=s(14282),r=(s(86178),s(54168)),i=s(70579);const c=function(e){let{filterOptions:a,defaultOptions:s,updateSharedData:c}=e;const d=localStorage.getItem("token"),[u,m]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[g,f]=(0,l.useState)(!1),[v,b]=(0,l.useState)(""),[j,x]=(0,l.useState)(""),S=(0,t.Zp)(),[y,N]=(0,l.useState)([]),[_,k]=(0,l.useState)([]),[A,C]=(0,l.useState)([]),[T,L]=(0,l.useState)([]),[B]=(0,l.useState)(10),[E,w]=(0,l.useState)(0),[O,P]=(0,l.useState)(1),[I,G]=(0,l.useState)(!1),[J,z]=(0,l.useState)(""),[q,D]=(0,l.useState)({}),[$,R]=(0,l.useState)({}),[F,H]=(0,l.useState)([]),[U,V]=(0,l.useState)(""),[M,Z]=(0,l.useState)(!1),[K,Q]=(0,l.useState)([]);(0,l.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?S("/login"):(W(O,B),me())}),[a]),(0,l.useEffect)((()=>{ee()}),[]);const W=async(e,l)=>{try{Z(!0);let t=a.location,n=a.lob,o=a.businessType,r=a.agent,i=a.dateRange,c=s.startdate,d=s.enddate;t=null!=t&&void 0!=t&&Array.isArray(t)&&0!==t.length?t.map((e=>e.value)):s.defaultlocation.map((e=>e.value)),n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):s.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):s.defaultbusinessType.map((e=>e.value)),r=null!=r&&void 0!=r&&Array.isArray(r)&&0!==r.length?r.map((e=>e.value)):s.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),m=(JSON.parse(localStorage.getItem("user")).usertype,{method:"POST",body:JSON.stringify({location:t,lob:n,business_type:o,newagent:r,dateRange:i,startdate:c,enddate:d}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}});await fetch(`https://insuranceapi-3o5t.onrender.com/api/businessEntityLinks?page=${e}&limit=${l}`,m).then((e=>e.json())).then((e=>{console.log("data>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e);const a=e.count;console.log("total>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",a);const s=a/l,t=Math.ceil(s);w(t);const n=e.data;N(n),Z(!1)})).catch((e=>{console.log(e)}))}catch(t){console.log(t)}},X=localStorage.getItem("user"),Y=JSON.parse(X)._id;console.log("userid>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",Y);const ee=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const a=e,s=a.length,l=[];for(let e=0;e<s;e++){const s={label:a[e].lob_name,value:a[e].lob_id};l.push(s)}Q(l)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,s=a.length,l=[];for(let t=0;t<s;t++){const e={label:a[t].line_of_business_name,value:a[t]._id};l.push(e)}Q(l)}))}},[ae,se]=(0,l.useState)({phonenumber:"",email:""}),[le,te]=(0,l.useState)([]),[ne,oe]=(0,l.useState)([]);console.log(ne);const re=e=>{console.log(e),te(e)},ie=e=>{const{name:a,value:s}=e.target;se({...ae,[a]:s})},ce=JSON.parse(localStorage.getItem("user")).usertype,[de,ue]=(0,l.useState)([]),me=async()=>{try{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=salesAdvisor",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const a=e.data,s=null===a||void 0===a?void 0:a.length,l=[];for(let t=0;t<s;t++){const e={label:a[t].name,value:a[t]._id};l.push(e)}ue(l)}))}catch(e){console.log(e)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"row mb-5",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("h4",{className:"card-title",style:{marginBottom:"0px",fontSize:"15px"},children:"Link Generator"})})})}),(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{className:"generated_links",style:{marginTop:"10px",marginLeft:"10px",marginBottom:"5px"},onClick:()=>{G(!0)},children:"Generate Customer Link"}),u&&(0,i.jsxs)("div",{className:"links_generaed",children:[(0,i.jsx)("p",{children:"Generated Customer Link:"}),(0,i.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:u})]})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"links_generaed",children:[(0,i.jsx)("p",{children:"Business Entity Link:"}),(0,i.jsx)("a",{href:`https://splendorous-kulfi-bdc583.netlify.app?agentid=${Y}&user=BE`,target:"_blank",rel:"noopener noreferrer",children:`https://splendorous-kulfi-bdc583.netlify.app/?agentid=${Y}&user=BE`})]})})]})]})})}),(0,i.jsxs)(n.A,{size:"lg",show:I,onHide:()=>G(!1),children:[(0,i.jsx)(n.A.Header,{closeButton:!0,children:(0,i.jsx)(n.A.Title,{children:"Create Link"})}),(0,i.jsx)(n.A.Body,{children:(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("div",{className:"card-body",children:(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(ae.selectedlob==[])alert("Please select location");else if(""==ae.phonenumber)alert("Please enter phone number");else if(""==ae.email)alert("Please enter email");else if(""==ae.name)alert("Please enter name");else if(ae.email.includes("@")&&ae.email.includes(".")){if("646224eab201a6f07b2dff36"==ce){const e={method:"POST",body:JSON.stringify({lob:le.map((e=>e.value)),phoneno:null===ae||void 0===ae?void 0:ae.phonenumber,email:null===ae||void 0===ae?void 0:ae.email,name:null===ae||void 0===ae?void 0:ae.name}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+d}};fetch("https://insuranceapi-3o5t.onrender.com/api/createLeadByCustumerLink",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),se({phonenumber:"",email:""}),te([]),m(e.data),G(!1),S("/salesDashboard")}))}if("64622470b201a6f07b2dff22"==ce){const e={method:"POST",body:JSON.stringify({lob:le.map((e=>e.value)),phoneno:null===ae||void 0===ae?void 0:ae.phonenumber,email:null===ae||void 0===ae?void 0:ae.email,name:null===ae||void 0===ae?void 0:ae.name,salesAdvisorId:ne}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+d}};fetch("https://insuranceapi-3o5t.onrender.com/api/createLeadByCustumerLink",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),se({phonenumber:"",email:""}),te([]),m(e.data),G(!1),S("/salesDashboard")}))}}else alert("Please enter valid email")}catch(a){console.log(a)}},children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Select line of business "})}),(0,i.jsx)(r.default,{options:K,displayValue:"label",onSelect:e=>re(e),onRemove:e=>re(e),placeholder:"Select line of business",selectedValues:le,showArrow:!0})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Phone Number"})}),(0,i.jsx)("input",{type:"number",className:"form-control",name:"phonenumber",placeholder:"Enter Phone Number",value:ae.phonenumber,onChange:ie,required:!0})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Email"})}),(0,i.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter Email Address",value:ae.email,onChange:ie,required:!0})]}),"64622470b201a6f07b2dff22"==ce&&(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Sales Advisor List"})}),(0,i.jsxs)("select",{className:"form-control",name:"agent",onChange:e=>oe(e.target.value),required:!0,children:[(0,i.jsx)("option",{value:"",hidden:!0,children:"Select Sales Advisor"}),de.map(((e,a)=>(0,i.jsx)("option",{value:e.value,children:e.label},a)))]})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Name"})}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Enter Name",value:ae.name,onChange:ie,required:!0})]})]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,i.jsx)(n.A.Footer,{children:(0,i.jsx)(o.A,{variant:"secondary",onClick:()=>G(!1),children:"Close"})})]})]})}}}]);
//# sourceMappingURL=1452.384924b9.chunk.js.map