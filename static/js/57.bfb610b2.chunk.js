"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[57],{20057:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var s=t(65043),n=t(53519),i=t(84217),l=t(14282),c=t(73216),o=t(92157),d=t.n(o),r=t(73023),h=t.n(r),m=t(54168),u=t(70579);const p=()=>{const e=(0,c.Zp)(),[a,t]=(0,s.useState)([]),[o,r]=(0,s.useState)([]),[p,j]=(0,s.useState)([]),[x]=(0,s.useState)(10),[y,g]=(0,s.useState)(0),[b,v]=(0,s.useState)(1),[N,f]=(0,s.useState)(""),[C,w]=(0,s.useState)(!1),[T,k]=(0,s.useState)("");(0,s.useEffect)((()=>{const a=localStorage.getItem("token");null===a||void 0===a||""===a?e("/login"):(S(b,x),_())}),[]);const _=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,t=a.length,s=[];for(let n=0;n<t;n++){const e={label:a[n].location_name,value:a[n]._id};s.push(e)}r(s)}))};console.log(o);const S=async(e,a)=>{try{await fetch(`https://insuranceapi-3o5t.onrender.com/api/getTatDays?page=${e}&limit=${a}`).then((e=>e.json())).then((e=>{const s=e.total/a,n=Math.ceil(s);g(n);const i=e.data;t(i)}))}catch(s){console.log(s)}};console.log(a);const D=(b-1)*x,A=e=>{j(e)},L=async(e,a)=>{try{const t=await fetch(`https://insuranceapi-3o5t.onrender.com/api/updatetatdaysstatus?id=${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})}),s=await t.json();200==s.status&&(h()({text:s.message,icon:"success",button:!1}),setTimeout((()=>{h().close()}),1e3),S(b,x))}catch(t){console.log(t)}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n.A,{children:(0,u.jsxs)("div",{className:"card mb-4",children:[(0,u.jsx)("div",{className:"card-header",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsx)("h4",{className:"card-title",children:"Tat Days"})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsx)("button",{className:"btn btn-primary",style:{float:"right"},onClick:()=>e("/AddTatDays"),children:"Add Tat Days"})})]})}),(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsxs)("table",{className:"table table-bordered",children:[(0,u.jsx)("thead",{className:"thead-dark",children:(0,u.jsxs)("tr",{className:"table-info",children:[(0,u.jsx)("th",{scope:"col",children:"#"}),(0,u.jsx)("th",{scope:"col",children:"Tat Days"}),(0,u.jsx)("th",{scope:"col",children:"Location"}),(0,u.jsx)("th",{scope:"col",children:"Claim Type"}),(0,u.jsx)("th",{scope:"col",children:"Action"})]})}),(0,u.jsx)("tbody",{children:(null===a||void 0===a?void 0:a.length)>0?null===a||void 0===a?void 0:a.map(((e,a)=>{var t;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:D+a+1}),(0,u.jsx)("td",{children:e.tatdays}),(0,u.jsx)("td",{children:null===(t=e.location)||void 0===t?void 0:t.map((e=>e.location_name)).join(", ")}),(0,u.jsx)("td",{children:e.claimtype}),(0,u.jsxs)("td",{children:[(0,u.jsx)("button",{className:"btn btn-primary",onClick:()=>(async e=>{console.log(e),console.log("i was clicked"),f(e);let a=await fetch(`https://insuranceapi-3o5t.onrender.com/api/getTatDaysById?id=${e}`,{method:"get",headers:{"Content-Type":"application/json"}});a=await a.json(),k(a.data[0].tatdays);const t=a.data[0].location.map((e=>({label:e.location_name,value:e._id})));j(t),A(t),w(!0)})(e._id),children:"Edit"})," ",1==e.status?(0,u.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&L(e._id,0)},children:"Deactivate"}):(0,u.jsx)("button",{className:"btn btn-success",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&L(e._id,1)},children:"Activate"})," ",(0,u.jsx)("button",{className:"btn btn-warning",onClick:()=>{window.confirm("Are you sure you wish to delete this item?")&&(async e=>{try{const a=await fetch(`https://insuranceapi-3o5t.onrender.com/api/deleteTatDays?id=${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),t=await a.json();200==t.status&&(h()({text:t.message,icon:"success",button:!1}),setTimeout((()=>{h().close()}),1e3),S(b,x))}catch(a){console.log(a)}})(e._id)},children:"Delete"})]})]},a)})):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"6",children:"No Data Found"})})})]}),(0,u.jsx)(d(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:y,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:e=>{const a=e.selected;v(a+1),S(a+1,x)},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})}),(0,u.jsxs)(i.A,{size:"lg",show:C,onHide:()=>w(!1),children:[(0,u.jsx)(i.A.Header,{closeButton:!0,children:(0,u.jsx)(i.A.Title,{children:"Edit Tat Days"})}),(0,u.jsx)(i.A.Body,{children:(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("div",{className:"card-body",children:(0,u.jsxs)("form",{action:"/",method:"POST",onSubmit:async e=>{e.preventDefault();try{const a=e.target.tatdays.value,t=p.map((e=>e.value)),s=e.target.claimtype.value;if(""===a)return void h()({text:"Please enter Tat Days",icon:"warning"});if(0===t.length)return void h()({text:"Please select Location",icon:"warning"});if(""===s)return void h()({text:"Please select Claim Type",icon:"warning"});const n=await fetch(`https://insuranceapi-3o5t.onrender.com/api/updateTatDays?id=${N}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tatdays:a,location:t,claimtype:s})}),i=await n.json();200==i.status&&(h()({text:i.message,icon:"success",button:!1}),setTimeout((()=>{h().close()}),1e3),w(!1),S(b,x))}catch(a){console.log(a)}},children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{className:"form-label",children:(0,u.jsx)("strong",{children:"Edit Tat Days"})}),(0,u.jsx)("input",{type:"text",className:"form-control",name:"tatdays",placeholder:"Tat Days",defaultValue:T,autoComplete:"off",required:!0})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{className:"form-label",children:(0,u.jsx)("strong",{children:"Location"})}),(0,u.jsx)(m.default,{options:o,selectedValues:p,onSelect:A,onRemove:A,displayValue:"label",placeholder:"Select Location",closeOnSelect:!1,avoidHighlightFirstOption:!0,showCheckbox:!0,style:{chips:{background:"#007bff"}},required:!0})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{className:"form-label",children:(0,u.jsx)("strong",{children:"Claim Type"})}),(0,u.jsxs)("select",{className:"form-control",name:"claimtype",required:!0,children:[(0,u.jsx)("option",{value:"",hidden:!0,children:"Select Claim Type"}),(0,u.jsx)("option",{value:"cashless",children:"Cashless"}),(0,u.jsx)("option",{value:"reimbursement",children:"Reimbursement"})]})]})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-12"}),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})]})]})})})})})})}),(0,u.jsx)(i.A.Footer,{children:(0,u.jsx)(l.A,{variant:"secondary",onClick:()=>w(!1),children:"Close"})})]})]})}}}]);
//# sourceMappingURL=57.bfb610b2.chunk.js.map