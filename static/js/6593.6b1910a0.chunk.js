"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6593],{46593:(e,a,o)=>{o.r(a),o.d(a,{default:()=>c});var n=o(65043),l=o(73216),s=o(73023),t=o.n(s),r=o(54168),i=o(70579);const c=()=>{const e=(0,l.Zp)(),[a,o]=(0,n.useState)([]),[s,c]=(0,n.useState)(),[d,m]=(0,n.useState)([]),[u,p]=(0,n.useState)(),[h,_]=(0,n.useState)([]),[v,f]=(0,n.useState)([]),[x,j]=(0,n.useState)(),[N,g]=(0,n.useState)(),[b,y]=(0,n.useState)(),[S,E]=(0,n.useState)(),[C,w]=(0,n.useState)(),[T,V]=(0,n.useState)(),[A,q]=(0,n.useState)(),[P,k]=(0,n.useState)(),[B,L]=(0,n.useState)(),[M,O]=(0,n.useState)();(0,n.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{G(),R();const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];p(e),D(e)}}),[]);const G=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=null===e||void 0===e?void 0:e.data,n=null===a||void 0===a?void 0:a.length,l=[];for(let o=0;o<n;o++){var s,t;const e={label:null===(s=a[o])||void 0===s?void 0:s.line_of_business_name,value:null===(t=a[o])||void 0===t?void 0:t._id};l.push(e)}o(l)}))},R=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNationality",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=null===e||void 0===e?void 0:e.data,o=null===a||void 0===a?void 0:a.length,n=[];for(let t=0;t<o;t++){var l,s;const e={label:null===(l=a[t])||void 0===l?void 0:l.nationality_name,value:null===(s=a[t])||void 0===s?void 0:s._id};n.push(e)}m(n)}))},D=e=>{fetch(`https://insuranceapi-3o5t.onrender.com/api/businessEntity?id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=null===e||void 0===e?void 0:e.data[0],o=null===a||void 0===a?void 0:a.country[0],n=null===o||void 0===o?void 0:o._id,l=null===a||void 0===a?void 0:a.technical_person[0],s=null===l||void 0===l?void 0:l.technical_person_name,t=null===l||void 0===l?void 0:l.technical_person_email,r=null===l||void 0===l?void 0:l.technical_person_contact,i=null===a||void 0===a?void 0:a.account_or_admin[0],c=null===i||void 0===i?void 0:i.account_or_admin_name,d=null===i||void 0===i?void 0:i.account_or_admin_email,m=null===i||void 0===i?void 0:i.account_or_admin_contact,u=null===a||void 0===a?void 0:a.supervisor_or_manager[0],p=null===u||void 0===u?void 0:u.supervisor_or_manager_name,h=null===u||void 0===u?void 0:u.supervisor_or_manager_email,v=null===u||void 0===u?void 0:u.supervisor_or_manager_contact;_(a),f(null===a||void 0===a?void 0:a.lob),j(n),g(s),y(t),E(r),w(c),V(d),q(m),k(p),L(h),O(v)}))};return console.log(v,"check"),(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("div",{className:"card",style:{marginTop:"20px"},children:(0,i.jsx)("div",{className:"card-header",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)("h4",{className:"card-title",children:"Edit Location"})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)("a",{href:"/ViewBusinessEntity",className:"btn btn-primary",style:{float:"right"},children:"Back"})}),(0,i.jsx)("div",{className:"card-body",children:(0,i.jsxs)("form",{method:"POST",onSubmit:a=>{a.preventDefault();const o=new FormData(a.target),n=o.get("name"),l=o.get("ref_number"),r=o.get("technical_person_name"),i=o.get("technical_person_email"),c=o.get("technical_person_contact"),d=o.get("account_or_admin_name"),m=o.get("account_or_admin_email"),p=o.get("account_or_admin_contact"),h=o.get("supervisor_or_manager_name"),_=o.get("supervisor_or_manager_email"),f=o.get("supervisor_or_manager_contact"),x=o.get("country");if(""==s)return t()({title:"Error!",text:"Please Select LOB",type:"error",icon:"error"}),!1;const j={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({location_name:n,ref_number:l,lob:void 0==s?v:s,country:x,technical_person_name:r,technical_person_email:i,technical_person_contact:c,account_or_admin_name:d,account_or_admin_email:m,account_or_admin_contact:p,supervisor_or_manager_name:h,supervisor_or_manager_email:_,supervisor_or_manager_contact:f})};fetch(`https://insuranceapi-3o5t.onrender.com/api/businessEntity?id=${u}`,j).then((e=>e.json())).then((a=>{200===a.status?t()({title:"Success!",text:a.message,type:"success",icon:"success"}).then((function(){e("/ViewBusinessEntity")})):t()({title:"Error!",text:a.message,type:"error",icon:"error"}).then((function(){e("/ViewBusinessEntity")}))}))},children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Location Name"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Enter Location Name",autoComplete:"off",defaultValue:h.location_name,required:!0})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Reference Number"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"ref_number",placeholder:"Enter Reference Number",autoComplete:"off",defaultValue:h.ref_number,required:!0})]})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Line Of Business"}),(0,i.jsx)(r.default,{options:a,displayValue:"label",selectedValues:v,onSelect:c,onRemove:c,placeholder:"Select LOB",showCheckbox:!0})]})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Country"}),(0,i.jsxs)("select",{className:"form-control",name:"country",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select Country"}),d.map(((e,a)=>(0,i.jsx)("option",{value:e.value,selected:e.value==x,children:e.label},a)))]})]})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Technical Person Name"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"technical_person_name",placeholder:"Enter Technical Person Name",autoComplete:"off",defaultValue:N,required:!0})]})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Technical Person Email"}),(0,i.jsx)("input",{type:"email",className:"form-control",name:"technical_person_email",placeholder:"Enter Technical Person Email",autoComplete:"off",defaultValue:b,required:!0})]})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Technical Person Contact No"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"technical_person_contact",placeholder:"Enter Technical Person Contact No",autoComplete:"off",defaultValue:S,required:!0})]})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Account / Admin Name"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"account_or_admin_name",placeholder:"Enter Account / Admin Name",autoComplete:"off",defaultValue:C,required:!0})]})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Account / Admin Email"}),(0,i.jsx)("input",{type:"email",className:"form-control",name:"account_or_admin_email",placeholder:"Enter Account / Admin Email",autoComplete:"off",defaultValue:T,required:!0})]})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Account / Admin Contact No"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"account_or_admin_contact",placeholder:"Enter Account / Admin Contact No",autoComplete:"off",defaultValue:A,required:!0})]})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Supervisor / Manager Name"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"supervisor_or_manager_name",placeholder:"Enter Supervisor / Manager Name",autoComplete:"off",defaultValue:P,required:!0})]})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Supervisor / Manager Email"}),(0,i.jsx)("input",{type:"email",className:"form-control",name:"supervisor_or_manager_email",placeholder:"Enter Supervisor / Manager name",autoComplete:"off",defaultValue:B,required:!0})]})}),(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsxs)("div",{className:"form-group mb-3",children:[(0,i.jsx)("label",{children:"Supervisor / Manager Contact No"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"supervisor_or_manager_contact",placeholder:"Enter Supervisor / Manager name",autoComplete:"off",defaultValue:M,required:!0})]})})]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",style:{textAlign:"right"},children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update"})})})]})})]})})})})})})}}}]);
//# sourceMappingURL=6593.6b1910a0.chunk.js.map