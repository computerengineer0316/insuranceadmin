"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5487],{5487:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var n=t(65043),a=t(73216),o=t(73023),c=t.n(o),r=t(35475),l=t(54168),i=t(70579);const d=()=>{const e=(0,a.Zp)(),[s,t]=(0,n.useState)([]),[o,d]=(0,n.useState)([]),[h,p]=(0,n.useState)({});(0,n.useEffect)((()=>{m()}),[]);const m=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location").then((e=>e.json())).then((e=>{const s=e.data.map((e=>({label:e.location_name,value:e._id})));d(s)})).catch((e=>console.error("Error fetching locations:",e)))},u=(e,n,a)=>{console.log(n,"multiselect value");const o=[...s];o[e][a]=n,t(o)};return(0,i.jsx)("div",{className:"container mb-5",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)("h4",{className:"card-title",children:"Add Sponsor Type "})}),(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsx)(r.N_,{to:"/SponsortypeView",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,i.jsx)("div",{className:"card-body addmotorplans",children:(0,i.jsxs)("table",{className:"table table-bordered",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:(0,i.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={sponsortype:"",location:o};t([...s,e])},children:"+"})}),(0,i.jsx)("th",{children:"Sponsor Type"}),(0,i.jsx)("th",{children:"Location"})]})}),(0,i.jsx)("tbody",{children:s.map(((e,n)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const n=[...s];n.splice(e,1),t(n)})(n),children:"x"})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",className:"form-control",name:"sponsortype",placeholder:"Enter Sponsor Type",required:!0,onChange:e=>((e,n)=>{const{name:a,value:o}=n.target;""===o.trim()?p((e=>({...e,[a]:"This is required"}))):p((e=>({...e,[a]:""})));const c=[...s];c[e][a]=o,t(c)})(n,e)})}),(0,i.jsx)("td",{children:(0,i.jsx)(l.default,{options:o,selectedValues:o,displayValue:"label",onSelect:e=>u(n,e,"location"),onRemove:e=>u(n,e,"location"),placeholder:"Select Location",showCheckbox:!0,required:!0})})]},n)))})]})}),(0,i.jsx)("div",{className:"card-footer",children:(0,i.jsx)("button",{className:"btn btn-outline-success",style:{float:"right"},onClick:async t=>{t.preventDefault(),console.log("rowsData:",s);if(s.some((e=>""===e.sponsortype.trim()||0===e.location.length)))c()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"});else try{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},n=await fetch("https://insuranceapi-3o5t.onrender.com/api/addSponsorType",t),a=await n.json();200==a.status?(c()({text:a.message,icon:"success"}),e("/SponsortypeView")):403==a.status?c()({text:a.message,icon:"warning"}):c()({text:a.message,icon:"error"})}catch(n){console.error("Error:",n)}},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=5487.b3a0b8b0.chunk.js.map