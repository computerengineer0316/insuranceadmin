"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4746],{14746:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var n=t(65043),s=t(86213),o=t(73216),i=t(35475),r=t(73023),l=t.n(r),c=t(53519),d=t(82806),m=t(70579);const h=()=>{const e=(0,o.Zp)();localStorage.getItem("token")&&(window.location.href="/admin");const[a,t]=(0,n.useState)(new Array(4).fill("")),[r,h]=(0,n.useState)(!1),[p,u]=(0,n.useState)(60);(0,n.useEffect)((()=>{let e;return r&&(e=setInterval((()=>{u((a=>a<=1?(clearInterval(e),h(!1),u(60),60):a-1))}),1e3)),()=>clearInterval(e)}),[r]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(c.A,{children:[(0,m.jsx)(i.N_,{to:"/Login",children:(0,m.jsx)("img",{style:{width:"80px",marginTop:"20px",marginBottom:"20px"},src:d})}),(0,m.jsxs)("div",{className:"login-container",children:[(0,m.jsx)("div",{className:"login-form",children:(0,m.jsxs)("div",{className:"login-form-inner",children:[(0,m.jsx)("h5",{children:"Welcome Back"}),(0,m.jsx)("h4",{children:"Enter OTP to Login to the Dashboard"}),(0,m.jsxs)("form",{name:"signin",className:"form",children:[(0,m.jsx)("div",{className:"otp-box",children:a.map(((e,n)=>(0,m.jsx)("input",{className:"otp-field",type:"text",name:"otp",maxLength:"1",value:e,onChange:e=>((e,n)=>{if(isNaN(e.value))return!1;t([...a.map(((a,t)=>t===n?e.value:a))]),e.nextSibling&&e.nextSibling.focus()})(e.target,n),onFocus:e=>e.target.select(),style:{width:"50px",height:"50px",textAlign:"center",fontSize:"1.5rem",fontWeight:"bold",border:"1px solid #ced4da",borderRadius:"4px",outline:"none"}},n)))}),(0,m.jsx)("button",{type:"submit",className:"rounded-button login-cta",onClick:async t=>{t.preventDefault();const n={email:localStorage.getItem("email"),otp:a.join("")};console.log(n);const o=await s.A.post("https://insuranceapi-3o5t.onrender.com/api/verify_otp_admin",n);if(200===o.data.status){console.log(o.data.data),localStorage.setItem("token",o.data.token),localStorage.setItem("user",JSON.stringify(o.data.data));const e=o.data.data.usertype;window.location.href="646224deb201a6f07b2dff32"===e?"/ManageSupervisorDashboard":"646224eab201a6f07b2dff36"===e?"/salesDashboard":"6462250eb201a6f07b2dff3a"===e?"/documentchaserDashboard":"64622526b201a6f07b2dff3e"===e?"/policyissuerdashboard":"650029a2df69a4033408903d"===e?"/operations":"653604248028cba2487f7d2a"===e?"/insurancecompanydashboard":"66068569e8f96a29286c956e"===e?"/ProducerDashboard":"/admin"}else l()({title:"Error!",text:o.data.message,type:"error",icon:"error"}).then((function(){e("/login")}))},children:"Login via OTP"}),(0,m.jsx)("button",{type:"button",className:"rounded-button login-cta",style:{backgroundColor:r?"#ccc":"#ED1C24",cursor:r?"not-allowed":"pointer",border:"#ED1C24"},onClick:r?null:async()=>{try{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:localStorage.getItem("email")})};await fetch("https://insuranceapi-3o5t.onrender.com/api/send_otp_email_admin",e).then((e=>e.json())).then((e=>{console.log(e),h(!0)}))}catch(e){console.log(e)}},disabled:r,children:r?`Resend OTP in ${p}s`:"Resend OTP"})]})]})}),(0,m.jsx)("div",{className:"onboarding",children:(0,m.jsx)("div",{className:"swiper-container",children:(0,m.jsx)("div",{className:"swiper-wrapper",children:(0,m.jsxs)("div",{className:"swiper-slide color-1",children:[(0,m.jsx)("div",{className:"slide-image",children:(0,m.jsx)("img",{src:"https://media.istockphoto.com/id/1281150061/vector/register-account-submit-access-login-password-username-internet-online-website-concept.jpg?b=1&s=612x612&w=0&k=20&c=9H5N9Jy8BA9yCzL-Wt5uCeZqETmpPYsJKJ2Nh1-SDaw=",loading:"lazy",alt:""})}),(0,m.jsxs)("div",{className:"slide-content",children:[(0,m.jsx)("h2",{children:"Last Minute Policy"}),(0,m.jsx)("p",{children:"Powered by Joie de Vivre International Insurance Brokerage LLC, regulated by the UAE Insurance Authority"})]})]})})})})]})]}),(0,m.jsx)("div",{className:"row",style:{color:"white",textAlign:"center",background:"#003096",paddingTop:11},children:(0,m.jsx)("div",{className:"col-lg-12",children:(0,m.jsx)("p",{className:"copyright12",style:{fontSize:"14px"},children:"\xa9 Company 2024 All Rights Reserved"})})})]})}}}]);
//# sourceMappingURL=4746.59680792.chunk.js.map