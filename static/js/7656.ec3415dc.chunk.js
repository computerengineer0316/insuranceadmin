"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7656],{97656:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var n=s(65043),a=s(73216),o=s(73023),l=s.n(o),c=s(54168),r=s(70579);const i=function(){const e=(0,a.Zp)();(0,n.useEffect)((()=>{_(),S()}),[]);const[t,s]=(0,n.useState)(""),[o,i]=(0,n.useState)([]),[d,h]=(0,n.useState)(),[u,m]=(0,n.useState)(),[p,x]=(0,n.useState)([]),[j,b]=(0,n.useState)({}),[f,g]=(0,n.useState)([]),[v,y]=(0,n.useState)(!1);(0,n.useEffect)((()=>{}),[v]);const _=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,s=t.length,n=[];for(let a=0;a<s;a++){const e={label:t[a].location_name,value:t[a]._id};n.push(e)}i(n)}))},N=(e,t,s)=>{console.log(t,"multiselect value");const n=[...p];n[e][s]=t,x(n)},S=()=>{fetch("https://insuranceapi-3o5t.onrender.com/api/getNationality",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{200==e.status&&(console.log(e.data,"countrylist"),g(e.data))}))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("h4",{className:"card-title",children:"Add Travel Region "})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("a",{href:"/Viewtravelregionlist",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,r.jsx)("div",{className:"card-body",children:(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:" table table-bordered addmotorplans",style:{marginBottom:"100px"},children:[(0,r.jsx)("thead",{className:"thead-dark",children:(0,r.jsxs)("tr",{className:"table-info",children:[(0,r.jsx)("th",{children:(0,r.jsx)("button",{className:"btn btn-outline-success",onClick:()=>{const e={travel_region:"",location:o,country:[]};x([...p,e])},children:"+"})}),(0,r.jsx)("th",{children:"Travel Region "}),(0,r.jsx)("th",{children:"Location"}),(0,r.jsx)("th",{children:"Country"})]})}),(0,r.jsx)("tbody",{children:p.map(((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(e=>{const t=[...p];t.splice(e,1),x(t)})(t),children:"x"})}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{type:"text",onChange:e=>((e,t)=>{const{name:s,value:n}=t.target;""===n.trim()?b((e=>({...e,[s]:"This is required"}))):b((e=>({...e,[s]:""})));const a=[...p];"travel_region"==s&&"worldwide"==n?(y(!0),N(e,f,"country"),a[e][s]=n):(a[e][s]=n,x(a))})(t,e),className:"form-control",name:"travel_region",placeholder:"Travel Region",autoComplete:"off",required:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)(c.default,{options:o,selectedValues:o,displayValue:"label",onSelect:e=>N(t,e,"location"),onRemove:e=>N(t,e,"location"),placeholder:"Select Location",showCheckbox:!0,closeOnSelect:!1,required:!0})}),(0,r.jsx)("td",{children:(0,r.jsx)(c.default,{options:f,selectedValues:!0===v?f:[],displayValue:"nationality_name",onSelect:e=>N(t,e,"country"),onRemove:e=>N(t,e,"country"),placeholder:"Select Country",showCheckbox:!0,closeOnSelect:!1,required:!0,searchable:!0,showArrow:!0})})]},t)))})]})})}),(0,r.jsx)("div",{className:"card-footer",children:(0,r.jsx)("button",{className:"btn btn-outline-success",onClick:t=>{t.preventDefault();try{if(p.some((e=>""===e.travel_region.trim()||0==e.location||0==e.country)))return l()({title:"Warning!",text:"Please fill in all fields for each row.",type:"warning",icon:"warning"}),!1;{console.log(p,"rowsData");const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)};fetch("https://insuranceapi-3o5t.onrender.com/api/add_travel_region_list",t).then((e=>e.json())).then((t=>{200==t.status?(l()({text:t.message,type:"success",icon:"success",button:!1}),setTimeout((()=>{l().close(),e("/Viewtravelregionlist")}),1e3)):200!=t.status&&(l()({title:"Error!",text:t.message,type:"error",icon:"error",button:!1}),setTimeout((()=>{l().close()}),1e3))}))}}catch(s){console.log(s)}},children:"Submit"})})]})})})})})}}}]);
//# sourceMappingURL=7656.ec3415dc.chunk.js.map