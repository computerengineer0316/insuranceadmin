"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1383],{31383:(e,a,l)=>{l.r(a),l.d(a,{default:()=>c});var t=l(65043),s=(l(92157),l(73216)),n=l(84217),o=l(14282),r=(l(86178),l(54168)),i=l(70579);const c=function(e){let{filterOptions:a,defaultOptions:l,updateSharedData:c}=e;const d=localStorage.getItem("token"),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[g,v]=(0,t.useState)(!1),[b,f]=(0,t.useState)(""),[j,x]=(0,t.useState)(""),S=(0,s.Zp)(),[y,N]=(0,t.useState)([]),[_,A]=(0,t.useState)([]),[k,C]=(0,t.useState)([]),[T,P]=(0,t.useState)([]),[w]=(0,t.useState)(10),[O,E]=(0,t.useState)(0),[I,L]=(0,t.useState)(1),[B,J]=(0,t.useState)(!1),[z,G]=(0,t.useState)(""),[q,D]=(0,t.useState)({}),[R,F]=(0,t.useState)({}),[H,U]=(0,t.useState)([]),[V,$]=(0,t.useState)(""),[M,Z]=(0,t.useState)(!1),[K,Q]=(0,t.useState)([]);(0,t.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?S("/login"):(W(I,w),me())}),[a]),(0,t.useEffect)((()=>{ee()}),[]);const W=async(e,t)=>{try{Z(!0);let s=a.location,n=a.lob,o=a.businessType,r=a.agent,i=a.dateRange,c=l.startdate,d=l.enddate;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):l.defaultlocation.map((e=>e.value)),n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):l.defaultlob.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):l.defaultbusinessType.map((e=>e.value)),r=null!=r&&void 0!=r&&Array.isArray(r)&&0!==r.length?r.map((e=>e.value)):l.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),m=(JSON.parse(localStorage.getItem("user")).usertype,{method:"POST",body:JSON.stringify({location:s,lob:n,business_type:o,newagent:r,dateRange:i,startdate:c,enddate:d}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}});await fetch(`https://insuranceapi-3o5t.onrender.com/api/businessEntityLinks?page=${e}&limit=${t}`,m).then((e=>e.json())).then((e=>{console.log("data>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e);const a=e.count;console.log("total>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",a);const l=a/t,s=Math.ceil(l);E(s);const n=e.data;N(n),Z(!1)})).catch((e=>{console.log(e)}))}catch(s){console.log(s)}};console.log("newleaddata>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",y);const X=localStorage.getItem("user"),Y=JSON.parse(X)._id;console.log("userid>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",Y);const ee=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const a=e,l=a.length,t=[];for(let e=0;e<l;e++){const l={label:a[e].lob_name,value:a[e].lob_id};t.push(l)}Q(t)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data,l=a.length,t=[];for(let s=0;s<l;s++){const e={label:a[s].line_of_business_name,value:a[s]._id};t.push(e)}Q(t)}))}},[ae,le]=(0,t.useState)({phonenumber:"",email:""}),[te,se]=(0,t.useState)([]),[ne,oe]=(0,t.useState)(""),re=e=>{console.log(e),se(e)},ie=e=>{const{name:a,value:l}=e.target;le({...ae,[a]:l})},ce=JSON.parse(localStorage.getItem("user")).usertype,[de,ue]=(0,t.useState)([]),me=async()=>{try{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=producer",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const a=e.data,l=null===a||void 0===a?void 0:a.length,t=[];for(let s=0;s<l;s++){const e={label:a[s].name,value:a[s]._id};t.push(e)}ue(t)}))}catch(e){console.log(e)}};return console.log("agent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",de),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"row mb-5",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("h4",{className:"card-title",style:{marginBottom:"0px",fontSize:"15px"},children:"Link Generator"})})})}),(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:"generated_links",style:{marginTop:"10px",marginLeft:"10px",marginBottom:"5px"},onClick:()=>{J(!0)},children:"Generate Customer Link"})}),(0,i.jsx)("div",{})]})]})})}),(0,i.jsxs)(n.A,{size:"lg",show:B,onHide:()=>J(!1),children:[(0,i.jsx)(n.A.Header,{closeButton:!0,children:(0,i.jsx)(n.A.Title,{children:"Create Link"})}),(0,i.jsx)(n.A.Body,{children:(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsx)("div",{className:"card-body",children:(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(ae.selectedlob==[])alert("Please select location");else if(""==ae.phonenumber)alert("Please enter phone number");else if(""==ae.email)alert("Please enter email");else if(""==ae.name)alert("Please enter name");else if(ae.email.includes("@")&&ae.email.includes("."))if(""==ne&&"64622470b201a6f07b2dff22"==ce)alert("Agent Required");else{if("66068569e8f96a29286c956e"==ce){const e={method:"POST",body:JSON.stringify({lob:te.map((e=>e.value)),phoneno:null===ae||void 0===ae?void 0:ae.phonenumber,email:null===ae||void 0===ae?void 0:ae.email,name:null===ae||void 0===ae?void 0:ae.name}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+d}};fetch("https://insuranceapi-3o5t.onrender.com/api/createProducerLeads",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),le({phonenumber:"",email:""}),se([]),m(e.data),J(!1),S("/ProducerDashboard")}))}if("64622470b201a6f07b2dff22"==ce){const e={method:"POST",body:JSON.stringify({lob:te.map((e=>e.value)),phoneno:null===ae||void 0===ae?void 0:ae.phonenumber,email:null===ae||void 0===ae?void 0:ae.email,name:null===ae||void 0===ae?void 0:ae.name,producerId:ne}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+d}};fetch("https://insuranceapi-3o5t.onrender.com/api/createProducerLeads",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),le({phonenumber:"",email:""}),se([]),m(e.data),J(!1),S("/ProducerDashboard")}))}}else alert("Please enter valid email")}catch(a){console.log(a)}},children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Select line of business "})}),(0,i.jsx)(r.default,{options:K,displayValue:"label",onSelect:e=>re(e),onRemove:e=>re(e),placeholder:"Select line of business",selectedValues:te,showArrow:!0})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Name"})}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Enter Name",value:ae.name,onChange:ie,required:!0})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Phone Number"})}),(0,i.jsx)("input",{type:"number",className:"form-control",name:"phonenumber",placeholder:"Enter Phone Number",value:ae.phonenumber,onChange:ie,required:!0})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Email"})}),(0,i.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter Email Address",value:ae.email,onChange:ie,required:!0})]}),"64622470b201a6f07b2dff22"==ce&&(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{className:"form-label",children:(0,i.jsx)("strong",{children:"Agent"})}),(0,i.jsxs)("select",{className:"form-control",onChange:e=>oe(e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Select Agent"}),null===de||void 0===de?void 0:de.map(((e,a)=>(0,i.jsx)("option",{value:e.value,children:e.label},a)))]})]})]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,i.jsx)(n.A.Footer,{children:(0,i.jsx)(o.A,{variant:"secondary",onClick:()=>J(!1),children:"Close"})})]})]})}}}]);
//# sourceMappingURL=1383.c80e5b23.chunk.js.map