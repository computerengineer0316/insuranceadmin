"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9054],{39054:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var s=i(65043),n=i(73216),a=i(70579);const c=()=>{const e=(0,n.Zp)(),[t,i]=(0,s.useState)(""),[c,o]=(0,s.useState)([]);(0,s.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("=")[1];i(e),d(e)}}),[]);const d=e=>{o([]);fetch(`https://insuranceapi-3o5t.onrender.com/api/getCompanyDetailsbyid/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{if(200===t.status){const i=t.data.company_line_of_business_id.split(","),s=i.length;for(let t=0;t<s;t++){const s={method:"GET",headers:{"Content-Type":"application/json"}};fetch(`https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_by_id/${i[t]}`,s).then((e=>e.json())).then((t=>{if(200===t.status){const i=t.data._id,s=t.data.line_of_business_name,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:e,line_of_business_id:i})};fetch("https://insuranceapi-3o5t.onrender.com/api/getapiintegrate",n).then((e=>e.json())).then((e=>{if(200===e.status){const t=e.data[0].api_integrate>0,n={line_of_business_id:i,line_of_business_name:s,isCheck:t,api_int_id:e.data[0]._id,api_status:e.data[0].api_status,credit_limit:e.data[0].credit_limit};o((e=>[...e,n]))}else{const e={line_of_business_id:i,line_of_business_name:s,isCheck:!1,api_int_id:0,api_status:0,credit_limit:0};o((t=>[...t,e]))}}))}}))}}}))},r=(e,i,s)=>{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:t,line_of_business_id:e,isChecked:i,api_int_id:s})};fetch("https://insuranceapi-3o5t.onrender.com/api/apiintegrate",n).then((e=>e.json())).then((e=>{console.log(e),d(t)}))},l=(e,i)=>{const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:i})};fetch("https://insuranceapi-3o5t.onrender.com/api/updateapistatus",s).then((e=>e.json())).then((e=>{d(t)}))};return(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-md-12",children:(0,a.jsxs)("div",{className:"card mt-5",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-md-6",children:(0,a.jsx)("h4",{children:"Line of Business"})}),(0,a.jsx)("div",{className:"col-md-6",children:(0,a.jsx)("a",{href:"/insurance-company",className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("table",{className:"table table-bordered table-striped",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Line of Business"}),(0,a.jsx)("th",{children:"API Integrated"}),(0,a.jsx)("th",{children:"Credit Limit"}),(0,a.jsx)("th",{children:"Status"})]})}),(0,a.jsx)("tbody",{children:c.map(((e,i)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.line_of_business_name}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"checkboxs",children:(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",checked:e.isCheck,onClick:t=>((e,t,i)=>{const s=e.target.checked;r(t,s,i)})(t,e.line_of_business_id,e.api_int_id)})})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"text",className:"form-control",defaultValue:e.credit_limit,onBlur:i=>((e,i)=>{const s=e.target.value,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i,credit_limit:s})};fetch("https://insuranceapi-3o5t.onrender.com/api/updatecreditlimit",n).then((e=>e.json())).then((e=>{d(t)}))})(i,e.api_int_id)})})}),(0,a.jsx)("td",{children:""==e.api_int_id?"":1===e.api_status?(0,a.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>{window.confirm("Are you sure you wish to deactivate this item?")&&l(e.api_int_id,0)},children:"Deactivate"}):(0,a.jsx)("button",{className:"btn btn-success btn-sm",onClick:()=>{window.confirm("Are you sure you wish to activate this item?")&&l(e.api_int_id,1)},children:"Activate"})})]},i)))})]})})]})})})})}}}]);
//# sourceMappingURL=9054.ee7b1ed5.chunk.js.map