"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6979,1452,3148,2238,1383,8064],{41452:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(65043),o=(a(92157),a(73216)),s=a(84217),l=a(14282),d=(a(86178),a(54168)),r=a(70579);const c=function(e){let{filterOptions:t,defaultOptions:a,updateSharedData:c}=e;const i=localStorage.getItem("token"),[u,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[g,j]=(0,n.useState)(!1),[b,y]=(0,n.useState)(""),[x,v]=(0,n.useState)(""),f=(0,o.Zp)(),[S,C]=(0,n.useState)([]),[N,_]=(0,n.useState)([]),[A,w]=(0,n.useState)([]),[k,I]=(0,n.useState)([]),[T]=(0,n.useState)(10),[O,L]=(0,n.useState)(0),[J,P]=(0,n.useState)(1),[D,F]=(0,n.useState)(!1),[M,E]=(0,n.useState)(""),[B,R]=(0,n.useState)({}),[$,H]=(0,n.useState)({}),[z,U]=(0,n.useState)([]),[G,V]=(0,n.useState)(""),[Y,W]=(0,n.useState)(!1),[Z,q]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?f("/login"):(K(J,T),me())}),[t]),(0,n.useEffect)((()=>{ee()}),[]);const K=async(e,n)=>{try{W(!0);let o=t.location,s=t.lob,l=t.businessType,d=t.agent,r=t.dateRange,c=a.startdate,i=a.enddate;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((e=>e.value)):a.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),m=(JSON.parse(localStorage.getItem("user")).usertype,{method:"POST",body:JSON.stringify({location:o,lob:s,business_type:l,newagent:d,dateRange:r,startdate:c,enddate:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}});await fetch(`https://insuranceapi-3o5t.onrender.com/api/businessEntityLinks?page=${e}&limit=${n}`,m).then((e=>e.json())).then((e=>{console.log("data>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e);const t=e.count;console.log("total>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",t);const a=t/n,o=Math.ceil(a);L(o);const s=e.data;C(s),W(!1)})).catch((e=>{console.log(e)}))}catch(o){console.log(o)}},Q=localStorage.getItem("user"),X=JSON.parse(Q)._id;console.log("userid>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",X);const ee=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const t=e,a=t.length,n=[];for(let e=0;e<a;e++){const a={label:t[e].lob_name,value:t[e].lob_id};n.push(a)}q(n)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].line_of_business_name,value:t[o]._id};n.push(e)}q(n)}))}},[te,ae]=(0,n.useState)({phonenumber:"",email:""}),[ne,oe]=(0,n.useState)([]),[se,le]=(0,n.useState)([]);console.log(se);const de=e=>{console.log(e),oe(e)},re=e=>{const{name:t,value:a}=e.target;ae({...te,[t]:a})},ce=JSON.parse(localStorage.getItem("user")).usertype,[ie,ue]=(0,n.useState)([]),me=async()=>{try{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=salesAdvisor",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const t=e.data,a=null===t||void 0===t?void 0:t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].name,value:t[o]._id};n.push(e)}ue(n)}))}catch(e){console.log(e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"row mb-5",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("h4",{className:"card-title",style:{marginBottom:"0px",fontSize:"15px"},children:"Link Generator"})})})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:"generated_links",style:{marginTop:"10px",marginLeft:"10px",marginBottom:"5px"},onClick:()=>{F(!0)},children:"Generate Customer Link"}),u&&(0,r.jsxs)("div",{className:"links_generaed",children:[(0,r.jsx)("p",{children:"Generated Customer Link:"}),(0,r.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:u})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"links_generaed",children:[(0,r.jsx)("p",{children:"Business Entity Link:"}),(0,r.jsx)("a",{href:`https://splendorous-kulfi-bdc583.netlify.app?agentid=${X}&user=BE`,target:"_blank",rel:"noopener noreferrer",children:`https://splendorous-kulfi-bdc583.netlify.app/?agentid=${X}&user=BE`})]})})]})]})})}),(0,r.jsxs)(s.A,{size:"lg",show:D,onHide:()=>F(!1),children:[(0,r.jsx)(s.A.Header,{closeButton:!0,children:(0,r.jsx)(s.A.Title,{children:"Create Link"})}),(0,r.jsx)(s.A.Body,{children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(te.selectedlob==[])alert("Please select location");else if(""==te.phonenumber)alert("Please enter phone number");else if(""==te.email)alert("Please enter email");else if(""==te.name)alert("Please enter name");else if(te.email.includes("@")&&te.email.includes(".")){if("646224eab201a6f07b2dff36"==ce){const e={method:"POST",body:JSON.stringify({lob:ne.map((e=>e.value)),phoneno:null===te||void 0===te?void 0:te.phonenumber,email:null===te||void 0===te?void 0:te.email,name:null===te||void 0===te?void 0:te.name}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}};fetch("https://insuranceapi-3o5t.onrender.com/api/createLeadByCustumerLink",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),ae({phonenumber:"",email:""}),oe([]),m(e.data),F(!1),f("/salesDashboard")}))}if("64622470b201a6f07b2dff22"==ce){const e={method:"POST",body:JSON.stringify({lob:ne.map((e=>e.value)),phoneno:null===te||void 0===te?void 0:te.phonenumber,email:null===te||void 0===te?void 0:te.email,name:null===te||void 0===te?void 0:te.name,salesAdvisorId:se}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}};fetch("https://insuranceapi-3o5t.onrender.com/api/createLeadByCustumerLink",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),ae({phonenumber:"",email:""}),oe([]),m(e.data),F(!1),f("/salesDashboard")}))}}else alert("Please enter valid email")}catch(t){console.log(t)}},children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Select line of business "})}),(0,r.jsx)(d.default,{options:Z,displayValue:"label",onSelect:e=>de(e),onRemove:e=>de(e),placeholder:"Select line of business",selectedValues:ne,showArrow:!0})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Phone Number"})}),(0,r.jsx)("input",{type:"number",className:"form-control",name:"phonenumber",placeholder:"Enter Phone Number",value:te.phonenumber,onChange:re,required:!0})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Email"})}),(0,r.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter Email Address",value:te.email,onChange:re,required:!0})]}),"64622470b201a6f07b2dff22"==ce&&(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Sales Advisor List"})}),(0,r.jsxs)("select",{className:"form-control",name:"agent",onChange:e=>le(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",hidden:!0,children:"Select Sales Advisor"}),ie.map(((e,t)=>(0,r.jsx)("option",{value:e.value,children:e.label},t)))]})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Name"})}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Enter Name",value:te.name,onChange:re,required:!0})]})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,r.jsx)(s.A.Footer,{children:(0,r.jsx)(l.A,{variant:"secondary",onClick:()=>F(!1),children:"Close"})})]})]})}},90322:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(65043),o=(a(93946),a(54168)),s=a(49456),l=(a(93204),a(66097),a(61072)),d=a(78602),r=a(84217),c=a(53519),i=a(14282),u=(a(82768),a(91033),a(98465),a(73216)),m=a(2),h=a(84822),p=a(89553),g=a(13148),j=a(12238),b=(a(41452),a(31383)),y=a(8064),x=a(49686),v=a(70579);const f=()=>{const e=(0,u.Zp)(),[t,a]=(0,n.useState)(""),[f,S]=(0,n.useState)([]),[C,N]=(0,n.useState)(),[_,A]=(0,n.useState)([]),[w,k]=(0,n.useState)(),[I,T]=(0,n.useState)([]),[O,L]=(0,n.useState)(),[J,P]=(0,n.useState)([]),[D,F]=(0,n.useState)(),[M,E]=(0,n.useState)("daily"),[B,R]=(0,n.useState)(!1),[$,H]=(0,n.useState)(new Date),[z,U]=(0,n.useState)(new Date),[G,V]=(0,n.useState)([]),Y=e=>{a(e)};(0,n.useEffect)((()=>{}),[t]),(0,n.useEffect)((()=>{const t=localStorage.getItem("token");if(null===t||void 0===t||""===t)e("/login");else{const e=JSON.parse(localStorage.getItem("user"));console.log(e);const t=e.admin_business_type;if(t.length>0){const e=t,a=e.length,n=[];for(let t=0;t<a;t++){let a;a=e[t].type,a=a.split(" ");const o={label:e[t].type,value:a[0]};n.push(o)}T(n)}else{T([{label:"New Business",value:"New"},{label:"Renewal Business",value:"Renewal"}])}W(),Z(),ee(),te();const a=JSON.parse(localStorage.getItem("dashboardCounts"));a&&V(a)}}),[]);const W=()=>{const e=JSON.parse(localStorage.getItem("user")).location;if(e.length>0){const t=e,a=t.length,n=[];for(let e=0;e<a;e++){const a={label:t[e].loc_name,value:t[e].loc_id};n.push(a)}S(n)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_location",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].location_name,value:t[o]._id};n.push(e)}S(n)}))}},Z=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const t=e,a=t.length,n=[];for(let e=0;e<a;e++){const a={label:t[e].lob_name,value:t[e].lob_id};n.push(a)}A(n)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].line_of_business_name,value:t[o]._id};n.push(e)}A(n)}))}},q=JSON.parse(localStorage.getItem("user")),K=q.usertype,Q=null===q||void 0===q?void 0:q.location;let X="";Q&&Q.length>0&&Q[0].loc_id&&(X=Q[0].loc_id);const ee=()=>{const e=JSON.parse(localStorage.getItem("user"));e._id;if("66068569e8f96a29286c956e"===K){const t={label:e.name,value:e._id},a=[];a.push(t),P(a)}if("64622470b201a6f07b2dff22"===K){const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=producer",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const t=e.data,a=null===t||void 0===t?void 0:t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].name,value:t[o]._id};n.push(e)}P(n)}))}},te=()=>{const e=JSON.parse(localStorage.getItem("user")),t=e.usertype,a=e._id,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usertype:t,userid:a})};fetch("https://insuranceapi-3o5t.onrender.com/api/get_dashboard_count",n).then((e=>e.json())).then((e=>{localStorage.setItem("dashboardCounts",JSON.stringify(e)),V(e)}))},ae=e=>{E(e)},ne={defaultlocation:f,defaultlob:_,defaultbusinessType:I,defaultagent:J,defaultdateRange:M,startdate:$,enddate:z},oe=(e,t)=>{switch(e){case"location":N(t);break;case"lob":k(t);break;case"businessType":L(t);break;case"agent":F(t)}},se={location:C,lob:w,businessType:O,agent:D,dateRange:M};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("section",{className:"mb-2",children:(0,v.jsxs)(l.A,{children:[(0,v.jsx)(d.A,{className:"",sm:5,children:(0,v.jsx)("h4",{id:"dashboard",className:"card-title mb-0",children:"Dashboard"})}),(0,v.jsx)(d.A,{sm:7,className:"d-none d-md-block",children:(0,v.jsxs)("div",{className:"float-end me-3",children:[(0,v.jsx)("button",{onClick:()=>ae("daily"),className:""+("daily"===M?"btn btn-selected":"btn btn-light"),children:"Daily"}),(0,v.jsx)("button",{onClick:()=>ae("weekly"),className:""+("weekly"===M?"btn btn-selected":"btn btn-light"),children:"Weekly"}),(0,v.jsx)("button",{onClick:()=>ae("monthly"),className:""+("monthly"===M?"btn btn-selected":"btn btn-light"),children:"Monthly"}),(0,v.jsx)("button",{onClick:()=>ae("yearly"),className:""+("yearly"===M?"btn btn-selected":"btn btn-light"),children:"Yearly"}),(0,v.jsx)("button",{onClick:()=>{R(!0),E("customized")},className:""+("customized"===M?"btn btn-selected":"btn btn-light"),children:"Customized"})]})}),(0,v.jsx)(d.A,{className:"mb-3",sm:3,children:(0,v.jsx)("div",{children:ne.defaultlocation.length<2?(0,v.jsx)(o.default,{options:ne.defaultlocation,displayValue:"label",selectedValues:ne.defaultlocation,showArrow:!1}):(0,v.jsx)(o.default,{options:ne.defaultlocation,displayValue:"label",onSelect:e=>oe("location",e),onRemove:e=>oe("location",e),placeholder:"Select location",selectedValues:C,showArrow:!0})})}),(0,v.jsx)(d.A,{className:"mb-3",sm:3,children:(0,v.jsx)("div",{children:ne.defaultbusinessType.length<2?(0,v.jsx)(o.default,{options:ne.defaultbusinessType,displayValue:"label",selectedValues:ne.defaultbusinessType,showArrow:!1}):(0,v.jsx)(o.default,{options:ne.defaultbusinessType,displayValue:"label",onSelect:e=>oe("businessType",e),onRemove:e=>oe("businessType",e),placeholder:"Select business type",selectedValues:O,showArrow:!0})})}),(0,v.jsx)(d.A,{className:"mb-3",sm:3,children:(0,v.jsx)("div",{children:ne.defaultlob.length<2?(0,v.jsx)(o.default,{options:ne.defaultlob,displayValue:"label",selectedValues:ne.defaultlob,showArrow:!1}):(0,v.jsx)(o.default,{options:ne.defaultlob,displayValue:"label",onSelect:e=>oe("lob",e),onRemove:e=>oe("lob",e),placeholder:"Select line of business",selectedValues:w,showArrow:!0})})}),(0,v.jsx)(d.A,{className:"mb-3",sm:3,children:(0,v.jsx)("div",{children:ne.defaultagent.length<2?(0,v.jsx)(o.default,{options:ne.defaultagent,displayValue:"label",selectedValues:ne.defaultagent,showArrow:!1}):(0,v.jsx)(o.default,{options:ne.defaultagent,displayValue:"label",onSelect:e=>oe("agent",e),onRemove:e=>oe("agent",e),placeholder:"Select Agents",selectedValues:D,showArrow:!0})})})]})}),(0,v.jsx)("section",{className:"mb-3",children:(0,v.jsx)(l.A,{children:(0,v.jsx)(g.default,{defaultOptions:ne,filterOptions:se})})}),(0,v.jsx)("section",{className:"mb-3",children:(0,v.jsx)(b.default,{defaultOptions:ne,filterOptions:se})}),(0,v.jsx)("section",{className:"tables",children:(0,v.jsx)(l.A,{children:(0,v.jsxs)(d.A,{className:"",lg:12,id:"newlead",children:[(0,v.jsx)(m.default,{defaultOptions:ne,filterOptions:se,updateSharedData:Y}),(0,v.jsx)(h.default,{defaultOptions:ne,filterOptions:se,updateSharedData:Y}),(0,v.jsx)(y.default,{defaultOptions:ne,filterOptions:se,updateSharedData:Y}),(0,v.jsx)(p.default,{defaultOptions:ne,filterOptions:se,updateSharedData:Y}),(0,v.jsx)(x.default,{defaultOptions:ne,filterOptions:se,updateSharedData:Y}),(0,v.jsx)(j.default,{defaultOptions:ne,filterOptions:se,lobdata:_})]})})}),(0,v.jsxs)(r.A,{size:"lg",show:B,onHide:()=>R(!1),children:[(0,v.jsx)(r.A.Header,{closeButton:!0,children:(0,v.jsx)(r.A.Title,{children:"Custom Dates"})}),(0,v.jsx)(r.A.Body,{children:(0,v.jsxs)(c.A,{children:[(0,v.jsxs)(l.A,{children:[(0,v.jsx)("label",{htmlFor:"",children:"From"}),(0,v.jsx)(s.A,{onChange:H,value:$,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]}),(0,v.jsxs)(l.A,{children:[(0,v.jsx)("label",{htmlFor:"",children:"To"}),(0,v.jsx)(s.A,{onChange:U,value:z,format:"dd/MM/yyyy",autoFocus:!0,inline:!0,calendarClassName:"custom-datepicker",closeCalendar:!1})]})]})}),(0,v.jsx)(r.A.Footer,{children:(0,v.jsx)(i.A,{variant:"secondary",onClick:()=>R(!1),children:"Close"})})]})]})}},31383:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(65043),o=(a(92157),a(73216)),s=a(84217),l=a(14282),d=(a(86178),a(54168)),r=a(70579);const c=function(e){let{filterOptions:t,defaultOptions:a,updateSharedData:c}=e;const i=localStorage.getItem("token"),[u,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[g,j]=(0,n.useState)(!1),[b,y]=(0,n.useState)(""),[x,v]=(0,n.useState)(""),f=(0,o.Zp)(),[S,C]=(0,n.useState)([]),[N,_]=(0,n.useState)([]),[A,w]=(0,n.useState)([]),[k,I]=(0,n.useState)([]),[T]=(0,n.useState)(10),[O,L]=(0,n.useState)(0),[J,P]=(0,n.useState)(1),[D,F]=(0,n.useState)(!1),[M,E]=(0,n.useState)(""),[B,R]=(0,n.useState)({}),[$,H]=(0,n.useState)({}),[z,U]=(0,n.useState)([]),[G,V]=(0,n.useState)(""),[Y,W]=(0,n.useState)(!1),[Z,q]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?f("/login"):(K(J,T),me())}),[t]),(0,n.useEffect)((()=>{ee()}),[]);const K=async(e,n)=>{try{W(!0);let o=t.location,s=t.lob,l=t.businessType,d=t.agent,r=t.dateRange,c=a.startdate,i=a.enddate;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((e=>e.value)):a.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),m=(JSON.parse(localStorage.getItem("user")).usertype,{method:"POST",body:JSON.stringify({location:o,lob:s,business_type:l,newagent:d,dateRange:r,startdate:c,enddate:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}});await fetch(`https://insuranceapi-3o5t.onrender.com/api/businessEntityLinks?page=${e}&limit=${n}`,m).then((e=>e.json())).then((e=>{console.log("data>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e);const t=e.count;console.log("total>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",t);const a=t/n,o=Math.ceil(a);L(o);const s=e.data;C(s),W(!1)})).catch((e=>{console.log(e)}))}catch(o){console.log(o)}};console.log("newleaddata>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",S);const Q=localStorage.getItem("user"),X=JSON.parse(Q)._id;console.log("userid>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",X);const ee=()=>{const e=JSON.parse(localStorage.getItem("user")).line_of_business;if(e.length>0){const t=e,a=t.length,n=[];for(let e=0;e<a;e++){const a={label:t[e].lob_name,value:t[e].lob_id};n.push(a)}q(n)}else{fetch("https://insuranceapi-3o5t.onrender.com/api/get_line_of_business_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].line_of_business_name,value:t[o]._id};n.push(e)}q(n)}))}},[te,ae]=(0,n.useState)({phonenumber:"",email:""}),[ne,oe]=(0,n.useState)([]),[se,le]=(0,n.useState)(""),de=e=>{console.log(e),oe(e)},re=e=>{const{name:t,value:a}=e.target;ae({...te,[t]:a})},ce=JSON.parse(localStorage.getItem("user")).usertype,[ie,ue]=(0,n.useState)([]),me=async()=>{try{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=producer",e).then((e=>e.json())).then((e=>{console.log("adminagent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",e.data);const t=e.data,a=null===t||void 0===t?void 0:t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].name,value:t[o]._id};n.push(e)}ue(n)}))}catch(e){console.log(e)}};return console.log("agent>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",ie),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"row mb-5",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("h4",{className:"card-title",style:{marginBottom:"0px",fontSize:"15px"},children:"Link Generator"})})})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"generated_links",style:{marginTop:"10px",marginLeft:"10px",marginBottom:"5px"},onClick:()=>{F(!0)},children:"Generate Customer Link"})}),(0,r.jsx)("div",{})]})]})})}),(0,r.jsxs)(s.A,{size:"lg",show:D,onHide:()=>F(!1),children:[(0,r.jsx)(s.A.Header,{closeButton:!0,children:(0,r.jsx)(s.A.Title,{children:"Create Link"})}),(0,r.jsx)(s.A.Body,{children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(te.selectedlob==[])alert("Please select location");else if(""==te.phonenumber)alert("Please enter phone number");else if(""==te.email)alert("Please enter email");else if(""==te.name)alert("Please enter name");else if(te.email.includes("@")&&te.email.includes("."))if(""==se&&"64622470b201a6f07b2dff22"==ce)alert("Agent Required");else{if("66068569e8f96a29286c956e"==ce){const e={method:"POST",body:JSON.stringify({lob:ne.map((e=>e.value)),phoneno:null===te||void 0===te?void 0:te.phonenumber,email:null===te||void 0===te?void 0:te.email,name:null===te||void 0===te?void 0:te.name}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}};fetch("https://insuranceapi-3o5t.onrender.com/api/createProducerLeads",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),ae({phonenumber:"",email:""}),oe([]),m(e.data),F(!1),f("/ProducerDashboard")}))}if("64622470b201a6f07b2dff22"==ce){const e={method:"POST",body:JSON.stringify({lob:ne.map((e=>e.value)),phoneno:null===te||void 0===te?void 0:te.phonenumber,email:null===te||void 0===te?void 0:te.email,name:null===te||void 0===te?void 0:te.name,producerId:se}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+i}};fetch("https://insuranceapi-3o5t.onrender.com/api/createProducerLeads",e).then((e=>e.json())).then((e=>{console.log(e.data),alert("Link Generated Successfully"),ae({phonenumber:"",email:""}),oe([]),m(e.data),F(!1),f("/ProducerDashboard")}))}}else alert("Please enter valid email")}catch(t){console.log(t)}},children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Select line of business "})}),(0,r.jsx)(d.default,{options:Z,displayValue:"label",onSelect:e=>de(e),onRemove:e=>de(e),placeholder:"Select line of business",selectedValues:ne,showArrow:!0})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Name"})}),(0,r.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Enter Name",value:te.name,onChange:re,required:!0})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Phone Number"})}),(0,r.jsx)("input",{type:"number",className:"form-control",name:"phonenumber",placeholder:"Enter Phone Number",value:te.phonenumber,onChange:re,required:!0})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Email"})}),(0,r.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter Email Address",value:te.email,onChange:re,required:!0})]}),"64622470b201a6f07b2dff22"==ce&&(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{className:"form-label",children:(0,r.jsx)("strong",{children:"Agent"})}),(0,r.jsxs)("select",{className:"form-control",onChange:e=>le(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Select Agent"}),null===ie||void 0===ie?void 0:ie.map(((e,t)=>(0,r.jsx)("option",{value:e.value,children:e.label},t)))]})]})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 submit_all",style:{float:"right"},children:"Submit"})})})]})})})})})})}),(0,r.jsx)(s.A.Footer,{children:(0,r.jsx)(l.A,{variant:"secondary",onClick:()=>F(!1),children:"Close"})})]})]})}},12238:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(93946),o=a(90504),s=a(65043),l=a(73216),d=a(1177),r=(a(54168),a(70579));const c=function(e){let{filterOptions:t,defaultOptions:a,lobdata:c}=e;const i=(0,l.Zp)();let[u,m]=(0,s.useState)([]);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?i("/login"):g()}),[c]);const[h,p]=(0,s.useState)(),g=async()=>{let e=c.map((e=>e.value));const t={method:"POST",body:JSON.stringify({lob:e}),headers:{"Content-Type":"application/json"}};await fetch("https://insuranceapi-3o5t.onrender.com/api/get_new_leads_count",t).then((e=>e.json())).then((e=>{p(e)}))};let j={labels:[],datasets:[]};h&&Array.isArray(h.data)&&(j={labels:h.data.map((e=>e.line_of_business_name)),datasets:h.data.map((e=>({label:e.line_of_business_name,data:[e.total],backgroundColor:"Motor"===e.line_of_business_name?"#0D2F92":"#f87979",hoverBackgroundColor:"Motor"===e.line_of_business_name?"#0D2F92":"#f87979"})))});const[b,y]=(0,s.useState)(0),[x,v]=(0,s.useState)(0),[f,S]=(0,s.useState)(0),[C,N]=(0,s.useState)(0),[_,A]=(0,s.useState)(0),[w,k]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?i("/login"):Ko()}),[t,u]),console.log("i m down",u);const[I,T]=(0,s.useState)("daily"),[O,L]=(0,s.useState)(0),[J,P]=(0,s.useState)(0),[D,F]=(0,s.useState)(0),[M,E]=(0,s.useState)(0),[B,R]=(0,s.useState)(0),[$,H]=(0,s.useState)(0),[z,U]=(0,s.useState)(0),[G,V]=(0,s.useState)(0),[Y,W]=(0,s.useState)(0),[Z,q]=(0,s.useState)(0),[K,Q]=(0,s.useState)(0),[X,ee]=(0,s.useState)(0),[te,ae]=(0,s.useState)(0),[ne,oe]=(0,s.useState)(0),[se,le]=(0,s.useState)(0),[de,re]=(0,s.useState)(0),[ce,ie]=(0,s.useState)(0),[ue,me]=(0,s.useState)(0),[he,pe]=(0,s.useState)(0),[ge,je]=(0,s.useState)(0),[be,ye]=(0,s.useState)(0),[xe,ve]=(0,s.useState)(0),[fe,Se]=(0,s.useState)(0),[Ce,Ne]=(0,s.useState)(0),[_e,Ae]=(0,s.useState)(0),[we,ke]=(0,s.useState)(0),[Ie,Te]=(0,s.useState)(0),[Oe,Le]=(0,s.useState)(0),[Je,Pe]=(0,s.useState)(0),[De,Fe]=(0,s.useState)(0),[Me,Ee]=(0,s.useState)(0),[Be,Re]=(0,s.useState)(0),[$e,He]=(0,s.useState)(0),[ze,Ue]=(0,s.useState)(0),[Ge,Ve]=(0,s.useState)(0),[Ye,We]=(0,s.useState)(0),[Ze,qe]=(0,s.useState)(0),[Ke,Qe]=(0,s.useState)(0),[Xe,et]=(0,s.useState)(0),[tt,at]=(0,s.useState)(0),[nt,ot]=(0,s.useState)(0),[st,lt]=(0,s.useState)(0),[dt,rt]=(0,s.useState)(0),[ct,it]=(0,s.useState)(0),[ut,mt]=(0,s.useState)(0),[ht,pt]=(0,s.useState)(0),[gt,jt]=(0,s.useState)(0),[bt,yt]=(0,s.useState)(0),[xt,vt]=(0,s.useState)(0),[ft,St]=(0,s.useState)(0),[Ct,Nt]=(0,s.useState)(0),[_t,At]=(0,s.useState)(0),[wt,kt]=(0,s.useState)(0),[It,Tt]=(0,s.useState)(0),[Ot,Lt]=(0,s.useState)(0),[Jt,Pt]=(0,s.useState)(0),[Dt,Ft]=(0,s.useState)(0),[Mt,Et]=(0,s.useState)(0),[Bt,Rt]=(0,s.useState)(0),[$t,Ht]=(0,s.useState)(0),[zt,Ut]=(0,s.useState)(0),[Gt,Vt]=(0,s.useState)(0),[Yt,Wt]=(0,s.useState)(0),[Zt,qt]=(0,s.useState)(0),[Kt,Qt]=(0,s.useState)(0),[Xt,ea]=(0,s.useState)(0),[ta,aa]=(0,s.useState)(0),[na,oa]=(0,s.useState)(0),[sa,la]=(0,s.useState)(0),[da,ra]=(0,s.useState)(0),[ca,ia]=(0,s.useState)(0),[ua,ma]=(0,s.useState)(0),[ha,pa]=(0,s.useState)(0),[ga,ja]=(0,s.useState)(0),[ba,ya]=(0,s.useState)(0),[xa,va]=(0,s.useState)(0),[fa,Sa]=(0,s.useState)(0),[Ca,Na]=(0,s.useState)(0),[_a,Aa]=(0,s.useState)(0),[wa,ka]=(0,s.useState)(0),[Ia,Ta]=(0,s.useState)(0),[Oa,La]=(0,s.useState)(0),[Ja,Pa]=(0,s.useState)(0),[Da,Fa]=(0,s.useState)(0),[Ma,Ea]=(0,s.useState)(0),[Ba,Ra]=(0,s.useState)(0),[$a,Ha]=(0,s.useState)(0),[za,Ua]=(0,s.useState)(0),[Ga,Va]=(0,s.useState)(0),[Ya,Wa]=(0,s.useState)(0),[Za,qa]=(0,s.useState)(0),[Ka,Qa]=(0,s.useState)(0),[Xa,en]=(0,s.useState)(0),[tn,an]=(0,s.useState)(0),[nn,on]=(0,s.useState)(0),[sn,ln]=(0,s.useState)(0),[dn,rn]=(0,s.useState)(0),[cn,un]=(0,s.useState)(0),[mn,hn]=(0,s.useState)(0),[pn,gn]=(0,s.useState)(0),[jn,bn]=(0,s.useState)(0),[yn,xn]=(0,s.useState)(0),[vn,fn]=(0,s.useState)(0),[Sn,Cn]=(0,s.useState)(0),[Nn,_n]=(0,s.useState)(0),[An,wn]=(0,s.useState)(0),[kn,In]=(0,s.useState)(0),[Tn,On]=(0,s.useState)(0),[Ln,Jn]=(0,s.useState)(0),[Pn,Dn]=(0,s.useState)(0),[Fn,Mn]=(0,s.useState)(0),[En,Bn]=(0,s.useState)(0),[Rn,$n]=(0,s.useState)(0),[Hn,zn]=(0,s.useState)(0),[Un,Gn]=(0,s.useState)(0),[Vn,Yn]=(0,s.useState)(0),[Wn,Zn]=(0,s.useState)(0),[qn,Kn]=(0,s.useState)(0),[Qn,Xn]=(0,s.useState)(0),[eo,to]=(0,s.useState)(0),[ao,no]=(0,s.useState)(0),[oo,so]=(0,s.useState)(0),[lo,ro]=(0,s.useState)(0),[co,io]=(0,s.useState)(0),[uo,mo]=(0,s.useState)(0),[ho,po]=(0,s.useState)(0),[go,jo]=(0,s.useState)(0),[bo,yo]=(0,s.useState)(0),[xo,vo]=(0,s.useState)(0),[fo,So]=(0,s.useState)(0),[Co,No]=(0,s.useState)(0),[_o,Ao]=(0,s.useState)(0),[wo,ko]=(0,s.useState)(0),[Io,To]=(0,s.useState)(0),[Oo,Lo]=(0,s.useState)(0),[Jo,Po]=(0,s.useState)(0),[Do,Fo]=(0,s.useState)(0),[Mo,Eo]=(0,s.useState)(0),[Bo,Ro]=(0,s.useState)(0),[$o,Ho]=(0,s.useState)(0),[zo,Uo]=(0,s.useState)(0),[Go,Vo]=(0,s.useState)(0),[Yo,Wo]=(0,s.useState)(0),[Zo,qo]=(0,s.useState)(0),Ko=async()=>{const e=JSON.parse(localStorage.getItem("user"));let n=t.location,o=t.lob,s=t.businessType,l=t.agent,d=t.dateRange,r=a.startdate,c=a.enddate,i=e.assign_staff,u=a.userType;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlob.map((e=>e.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultagent.map((e=>e.value));const m=localStorage.getItem("token"),h=JSON.parse(localStorage.getItem("user")).usertype;T(d);const p={method:"POST",body:JSON.stringify({location:n,lob:o,business_type:s,newagent:l,dateRange:d,startdate:r,enddate:c,assign_staff:i,userType:u}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+m}};"66068569e8f96a29286c956e"==h&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getAllGraphCount",p).then((e=>e.json())).then((e=>{console.log("data",e.data.sepmotorCount),L(e.data.janmotorCount),P(e.data.febmotorCount),F(e.data.marmotorCount),E(e.data.aprimotorCount),R(e.data.maymotorCount),H(e.data.junmotorCount),U(e.data.julmotorCount),V(e.data.agumotorCount),W(e.data.sepmotorCount),q(e.data.octmotorCount),Q(e.data.novmotorCount),ee(e.data.despmotorCount),ae(e.data.jantravelCount),oe(e.data.beftravelCount),le(e.data.martravelCount),re(e.data.apritravelCount),ie(e.data.maytravelCount),me(e.data.juntravelCount),pe(e.data.jultravelCount),je(e.data.agutravelCount),ye(e.data.septravelCount),ve(e.data.octtravelCount),Se(e.data.novtravelCount),Ne(e.data.desptravelCount),Ae(e.data.janhomeCount),ke(e.data.febhomeCount),Te(e.data.marhomeCount),Le(e.data.aprihomeCount),Pe(e.data.mayhomeCount),Fe(e.data.junhomeCount),Ee(e.data.julhomeCount),Re(e.data.aguhomeCount),He(e.data.sephomeCount),Ue(e.data.octhomeCount),Ve(e.data.novhomeCount),We(e.data.desphomeCount),qe(e.data.janmedicalCount),Qe(e.data.febmedicalCount),et(e.data.marmedicalCount),at(e.data.aprimedicalCount),ot(e.data.maymedicalCount),lt(e.data.junmedicalCount),rt(e.data.julmedicalCount),it(e.data.agumedicalCount),mt(e.data.sepmedicalCount),pt(e.data.octmedicalCount),jt(e.data.novmedicalCount),yt(e.data.despmedicalCount),vt(e.data.janyatchCount),St(e.data.febyatchCount),Nt(e.data.maryatchCount),At(e.data.apriyatchCount),kt(e.data.mayyatchCount),Tt(e.data.junyatchCount),Lt(e.data.julyatchCount),Pt(e.data.aguyatchCount),Ft(e.data.sepyatchCount),Et(e.data.octyatchCount),Rt(e.data.novyatchCount),Ht(e.data.despyatchCount),Ut(e.data.janortherInsuranceCount),Vt(e.data.febortherInsuranceCount),Wt(e.data.marortherInsuranceCount),qt(e.data.apriortherInsuranceCount),Qt(e.data.mayortherInsuranceCount),ea(e.data.junortherInsuranceCount),aa(e.data.julortherInsuranceCount),oa(e.data.aguortherInsuranceCount),la(e.data.seportherInsuranceCount),ra(e.data.octortherInsuranceCount),ia(e.data.novortherInsuranceCount),ma(e.data.desportherInsuranceCount),pa(e.data.janmotorclosedCount),ja(e.data.febmotorclosedCount),ya(e.data.marmotorclosedCount),va(e.data.aprimotorclosedCount),Sa(e.data.maymotorclosedCount),Na(e.data.junmotorclosedCount),Aa(e.data.julmotorclosedCount),ka(e.data.agumotorclosedCount),Ta(e.data.sepmotorclosedCount),La(e.data.octmotorclosedCount),Pa(e.data.novmotorclosedCount),Fa(e.data.despmotorclosedCount),Ea(e.data.jantravelclosedCount),Ra(e.data.beftravelclosedCount),Ha(e.data.martravelclosedCount),Ua(e.data.apritravelclosedCount),Va(e.data.maytravelclosedCount),Wa(e.data.juntravelclosedCount),qa(e.data.jultravelclosedCount),Qa(e.data.agutravelclosedCount),en(e.data.septravelclosedCount),an(e.data.octtravelclosedCount),on(e.data.novtravelclosedCount),ln(e.data.desptravelclosedCount),rn(e.data.janhomeclosedCount),un(e.data.febhomeclosedCount),hn(e.data.marhomeclosedCount),gn(e.data.aprihomeclosedCount),bn(e.data.mayhomeclosedCount),xn(e.data.junhomeclosedCount),fn(e.data.julhomeclosedCount),Cn(e.data.aguhomeclosedCount),_n(e.data.sephomeclosedCount),wn(e.data.octhomeclosedCount),In(e.data.novhomeclosedCount),On(e.data.desphomeclosedCount),Jn(e.data.janmedicalclosedCount),Dn(e.data.febmedicalclosedCount),Mn(e.data.marmedicalclosedCount),Bn(e.data.aprimedicalclosedCount),$n(e.data.maymedicalclosedCount),zn(e.data.junmedicalclosedCount),Gn(e.data.julmedicalclosedCount),Yn(e.data.agumedicalclosedCount),Zn(e.data.sepmedicalclosedCount),Kn(e.data.octmedicalclosedCount),Xn(e.data.novmedicalclosedCount),to(e.data.despmedicalclosedCount),no(e.data.janyatchclosedCount),so(e.data.febyatchclosedCount),ro(e.data.maryatchclosedCount),io(e.data.apriyatchclosedCount),mo(e.data.mayyatchclosedCount),po(e.data.junyatchclosedCount),jo(e.data.julyatchclosedCount),yo(e.data.aguyatchclosedCount),vo(e.data.sepyatchclosedCount),So(e.data.octyatchclosedCount),No(e.data.novyatchclosedCount),Ao(e.data.despyatchclosedCount),ko(e.data.janortherInsuranceclosedCount),To(e.data.febortherInsuranceclosedCount),Lo(e.data.marortherInsuranceclosedCount),Po(e.data.apriortherInsuranceclosedCount),Fo(e.data.mayortherInsuranceclosedCount),Eo(e.data.junortherInsuranceclosedCount),Ro(e.data.julortherInsuranceclosedCount),Ho(e.data.aguortherInsuranceclosedCount),Uo(e.data.seportherInsuranceclosedCount),Vo(e.data.octortherInsuranceclosedCount),Wo(e.data.novortherInsuranceclosedCount),qo(e.data.desportherInsuranceclosedCount)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==h&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getAllGraphCount?dashboardType=producerDashboard",p).then((e=>e.json())).then((e=>{console.log("data",e.data),L(e.data.janmotorCount),P(e.data.febmotorCount),F(e.data.marmotorCount),E(e.data.aprimotorCount),R(e.data.maymotorCount),H(e.data.junmotorCount),U(e.data.julmotorCount),V(e.data.agumotorCount),W(e.data.sepmotorCount),q(e.data.octmotorCount),Q(e.data.novmotorCount),ee(e.data.despmotorCount),ae(e.data.jantravelCount),oe(e.data.beftravelCount),le(e.data.martravelCount),re(e.data.apritravelCount),ie(e.data.maytravelCount),me(e.data.juntravelCount),pe(e.data.jultravelCount),je(e.data.agutravelCount),ye(e.data.septravelCount),ve(e.data.octtravelCount),Se(e.data.novtravelCount),Ne(e.data.desptravelCount),Ae(e.data.janhomeCount),ke(e.data.febhomeCount),Te(e.data.marhomeCount),Le(e.data.aprihomeCount),Pe(e.data.mayhomeCount),Fe(e.data.junhomeCount),Ee(e.data.julhomeCount),Re(e.data.aguhomeCount),He(e.data.sephomeCount),Ue(e.data.octhomeCount),Ve(e.data.novhomeCount),We(e.data.desphomeCount),qe(e.data.janmedicalCount),Qe(e.data.febmedicalCount),et(e.data.marmedicalCount),at(e.data.aprimedicalCount),ot(e.data.maymedicalCount),lt(e.data.junmedicalCount),rt(e.data.julmedicalCount),it(e.data.agumedicalCount),mt(e.data.sepmedicalCount),pt(e.data.octmedicalCount),jt(e.data.novmedicalCount),yt(e.data.despmedicalCount),vt(e.data.janyatchCount),St(e.data.febyatchCount),Nt(e.data.maryatchCount),At(e.data.apriyatchCount),kt(e.data.mayyatchCount),Tt(e.data.junyatchCount),Lt(e.data.julyatchCount),Pt(e.data.aguyatchCount),Ft(e.data.sepyatchCount),Et(e.data.octyatchCount),Rt(e.data.novyatchCount),Ht(e.data.despyatchCount),Ut(e.data.janortherInsuranceCount),Vt(e.data.febortherInsuranceCount),Wt(e.data.marortherInsuranceCount),qt(e.data.apriortherInsuranceCount),Qt(e.data.mayortherInsuranceCount),ea(e.data.junortherInsuranceCount),aa(e.data.julortherInsuranceCount),oa(e.data.aguortherInsuranceCount),la(e.data.seportherInsuranceCount),ra(e.data.octortherInsuranceCount),ia(e.data.novortherInsuranceCount),ma(e.data.desportherInsuranceCount),pa(e.data.janmotorclosedCount),ja(e.data.febmotorclosedCount),ya(e.data.marmotorclosedCount),va(e.data.aprimotorclosedCount),Sa(e.data.maymotorclosedCount),Na(e.data.junmotorclosedCount),Aa(e.data.julmotorclosedCount),ka(e.data.agumotorclosedCount),Ta(e.data.sepmotorclosedCount),La(e.data.octmotorclosedCount),Pa(e.data.novmotorclosedCount),Fa(e.data.despmotorclosedCount),Ea(e.data.jantravelclosedCount),Ra(e.data.beftravelclosedCount),Ha(e.data.martravelclosedCount),Ua(e.data.apritravelclosedCount),Va(e.data.maytravelclosedCount),Wa(e.data.juntravelclosedCount),qa(e.data.jultravelclosedCount),Qa(e.data.agutravelclosedCount),en(e.data.septravelclosedCount),an(e.data.octtravelclosedCount),on(e.data.novtravelclosedCount),ln(e.data.desptravelclosedCount),rn(e.data.janhomeclosedCount),un(e.data.febhomeclosedCount),hn(e.data.marhomeclosedCount),gn(e.data.aprihomeclosedCount),bn(e.data.mayhomeclosedCount),xn(e.data.junhomeclosedCount),fn(e.data.julhomeclosedCount),Cn(e.data.aguhomeclosedCount),_n(e.data.sephomeclosedCount),wn(e.data.octhomeclosedCount),In(e.data.novhomeclosedCount),On(e.data.desphomeclosedCount),Jn(e.data.janmedicalclosedCount),Dn(e.data.febmedicalclosedCount),Mn(e.data.marmedicalclosedCount),Bn(e.data.aprimedicalclosedCount),$n(e.data.maymedicalclosedCount),zn(e.data.junmedicalclosedCount),Gn(e.data.julmedicalclosedCount),Yn(e.data.agumedicalclosedCount),Zn(e.data.sepmedicalclosedCount),Kn(e.data.octmedicalclosedCount),Xn(e.data.novmedicalclosedCount),to(e.data.despmedicalclosedCount),no(e.data.janyatchclosedCount),so(e.data.febyatchclosedCount),ro(e.data.maryatchclosedCount),io(e.data.apriyatchclosedCount),mo(e.data.mayyatchclosedCount),po(e.data.junyatchclosedCount),jo(e.data.julyatchclosedCount),yo(e.data.aguyatchclosedCount),vo(e.data.sepyatchclosedCount),So(e.data.octyatchclosedCount),No(e.data.novyatchclosedCount),Ao(e.data.despyatchclosedCount),ko(e.data.janortherInsuranceclosedCount),To(e.data.febortherInsuranceclosedCount),Lo(e.data.marortherInsuranceclosedCount),Po(e.data.apriortherInsuranceclosedCount),Fo(e.data.mayortherInsuranceclosedCount),Eo(e.data.junortherInsuranceclosedCount),Ro(e.data.julortherInsuranceclosedCount),Ho(e.data.aguortherInsuranceclosedCount),Uo(e.data.seportherInsuranceclosedCount),Vo(e.data.octortherInsuranceclosedCount),Wo(e.data.novortherInsuranceclosedCount),qo(e.data.desportherInsuranceclosedCount)})).catch((e=>{console.log(e)}))},Qo=[{line_of_business_name:"Motor New Leads",monthlydata:[{month:"January",count:O},{month:"February",count:J},{month:"March",count:D},{month:"April",count:M},{month:"May",count:B},{month:"June",count:$},{month:"July",count:z},{month:"August",count:G},{month:"September",count:Y},{month:"October",count:Z},{month:"November",count:K},{month:"December",count:X}]},{line_of_business_name:"Motor Issued Policies",monthlydata:[{month:"January",count:ha},{month:"February",count:ga},{month:"March",count:ba},{month:"April",count:xa},{month:"May",count:fa},{month:"June",count:Ca},{month:"July",count:_a},{month:"August",count:wa},{month:"September",count:Ia},{month:"October",count:Oa},{month:"November",count:Ja},{month:"December",count:Da}]},{line_of_business_name:"Travel New Leads",monthlydata:[{month:"January",count:te},{month:"February",count:ne},{month:"March",count:se},{month:"April",count:de},{month:"May",count:ce},{month:"June",count:ue},{month:"July",count:he},{month:"August",count:ge},{month:"September",count:be},{month:"October",count:xe},{month:"November",count:fe},{month:"December",count:Ce}]},{line_of_business_name:"Travel Issued Policies",monthlydata:[{month:"January",count:Ma},{month:"February",count:Ba},{month:"March",count:$a},{month:"April",count:za},{month:"May",count:Ga},{month:"June",count:Ya},{month:"July",count:Za},{month:"August",count:Ka},{month:"September",count:Xa},{month:"October",count:tn},{month:"November",count:nn},{month:"December",count:sn}]},{line_of_business_name:"Home New Leads",monthlydata:[{month:"January",count:_e},{month:"February",count:we},{month:"March",count:Ie},{month:"April",count:Oe},{month:"May",count:Je},{month:"June",count:De},{month:"July",count:Me},{month:"August",count:Be},{month:"September",count:$e},{month:"October",count:ze},{month:"November",count:Ge},{month:"December",count:Ye}]},{line_of_business_name:"Home Issued Policies",monthlydata:[{month:"January",count:dn},{month:"February",count:cn},{month:"March",count:mn},{month:"April",count:pn},{month:"May",count:jn},{month:"June",count:yn},{month:"July",count:vn},{month:"August",count:Sn},{month:"September",count:Nn},{month:"October",count:An},{month:"November",count:kn},{month:"December",count:Tn}]},{line_of_business_name:"Medical New Leads",monthlydata:[{month:"January",count:Ze},{month:"February",count:Ke},{month:"March",count:Xe},{month:"April",count:tt},{month:"May",count:nt},{month:"June",count:st},{month:"July",count:dt},{month:"August",count:ct},{month:"September",count:ut},{month:"October",count:ht},{month:"November",count:gt},{month:"December",count:bt}]},{line_of_business_name:"Medical Issued Policies",monthlydata:[{month:"January",count:Ln},{month:"February",count:Pn},{month:"March",count:Fn},{month:"April",count:En},{month:"May",count:Rn},{month:"June",count:Hn},{month:"July",count:Un},{month:"August",count:Vn},{month:"September",count:Wn},{month:"October",count:qn},{month:"November",count:Qn},{month:"December",count:eo}]},{line_of_business_name:"Yacht New Leads",monthlydata:[{month:"January",count:xt},{month:"February",count:ft},{month:"March",count:Ct},{month:"April",count:_t},{month:"May",count:wt},{month:"June",count:It},{month:"July",count:Ot},{month:"August",count:Jt},{month:"September",count:Dt},{month:"October",count:Mt},{month:"November",count:Bt},{month:"December",count:$t}]},{line_of_business_name:"Yacht Issued Policies",monthlydata:[{month:"January",count:ao},{month:"February",count:oo},{month:"March",count:lo},{month:"April",count:co},{month:"May",count:uo},{month:"June",count:ho},{month:"July",count:go},{month:"August",count:bo},{month:"September",count:xo},{month:"October",count:fo},{month:"November",count:Co},{month:"December",count:_o}]},{line_of_business_name:"Other Insurance New Leads",monthlydata:[{month:"January",count:zt},{month:"February",count:Gt},{month:"March",count:Yt},{month:"April",count:Zt},{month:"May",count:Kt},{month:"June",count:Xt},{month:"July",count:ta},{month:"August",count:na},{month:"September",count:sa},{month:"October",count:da},{month:"November",count:ca},{month:"December",count:ua}]},{line_of_business_name:"Other Insurance Issued Policies",monthlydata:[{month:"January",count:wo},{month:"February",count:Io},{month:"March",count:Oo},{month:"April",count:Jo},{month:"May",count:Do},{month:"June",count:Mo},{month:"July",count:Bo},{month:"August",count:$o},{month:"September",count:zo},{month:"October",count:Go},{month:"November",count:Yo},{month:"December",count:Zo}]}];let Xo={labels:[],datasets:[]};return Xo={labels:Array.from(new Set(Qo.flatMap((e=>e.monthlydata.map((e=>e.month)))))),datasets:Qo.map((e=>({label:e.line_of_business_name,backgroundColor:"Motor New Leads"===e.line_of_business_name?"#FF6384":"Motor Issued Policies"===e.line_of_business_name?"#b82544":"Travel New Leads"===e.line_of_business_name?"#007500":"Travel Issued Policies"===e.line_of_business_name?"#0a400a":"Home New Leads"===e.line_of_business_name?"#FFCE56":"Home Issued Policies"===e.line_of_business_name?"#80621b":"Medical New Leads"===e.line_of_business_name?"#36A2EB":"Medical Issued Policies"===e.line_of_business_name?"#144566":"Yacht New Leads"===e.line_of_business_name?"#5742f5":"Yacht Issued Policies"===e.line_of_business_name?"#191154":"Other Insurance New Leads"===e.line_of_business_name?"#e02828":"Other Insurance Issued Policies"===e.line_of_business_name?"#780b0b":"#da42f5",data:e.monthlydata.map((e=>e.count))})))},(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d.A,{children:(0,r.jsxs)(d.A.Item,{eventKey:"1",children:[(0,r.jsx)(d.A.Header,{children:(0,r.jsx)("div",{className:"card-header new_leads",children:(0,r.jsx)("strong",{children:"Graphical View "})})}),(0,r.jsx)(d.A.Body,{style:{padding:"2px"},children:(0,r.jsx)(n.E$,{className:"mb-4",children:(0,r.jsx)(n.sK,{children:(0,r.jsx)(n.UF,{lg:12,children:(0,r.jsxs)(n.E$,{className:"mb-4",children:[(0,r.jsx)(n.V0,{children:"Bar Chart"}),(0,r.jsx)(n.W6,{children:(0,r.jsx)(o.BB,{data:Xo,options:{scales:{x:{grid:{drawBorder:!1,drawTicks:!1},ticks:{padding:5}},y:{beginAtZero:!0,grid:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:5}}}}})})]})})})})})]})})})}},49686:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(65043),o=a(92157),s=a.n(o),l=a(73216),d=a(1177),r=a(84217),c=a(53519),i=a(61072),u=a(14282),m=a(86178),h=a.n(m),p=a(70579);const g=function(e){let{filterOptions:t,defaultOptions:a,updateSharedData:o}=e;const m=(0,l.Zp)(),[g,j]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[x,v]=(0,n.useState)([]),[f,S]=(0,n.useState)([]),[C]=(0,n.useState)(5),[N,_]=(0,n.useState)(0),[A,w]=(0,n.useState)(1),[k,I]=(0,n.useState)(!1),[T,O]=(0,n.useState)(""),[L,J]=(0,n.useState)(""),[P,D]=(0,n.useState)(""),[F,M]=(0,n.useState)([]),[E,B]=(0,n.useState)(""),[R,$]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?m("/login"):(G(A,C),V(),W())}),[t]);const H=JSON.parse(localStorage.getItem("user")),z=(H.usertype,null===H||void 0===H?void 0:H.location);let U="";z&&z.length>0&&z[0].loc_id&&(U=z[0].loc_id);const G=async(e,n)=>{let o=t.location,s=t.lob,l=t.businessType,d=t.agent,r=t.dateRange,c=a.startdate,i=a.enddate;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((e=>e.value)):a.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,h={method:"POST",body:JSON.stringify({page:e,limit:n,location:o,lob:s,business_type:l,newagent:d,dateRange:r,startdate:c,enddate:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};"66068569e8f96a29286c956e"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=LostDropped",h).then((e=>e.json())).then((e=>{const t=e.total;$(t);const a=t/n,o=Math.ceil(a);_(o);const s=e.data;j(s)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=LostDropped&dashboardType=producerDashbord",h).then((e=>e.json())).then((e=>{const t=e.total;$(t);const a=t/n,o=Math.ceil(a);_(o);const s=e.data;j(s)})).catch((e=>{console.log(e)}))},V=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let t=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});t=await t.json(),y(t.data)},Y=(A-1)*C,W=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].name,value:t[o]._id};n.push(e)}M(n)}))},[Z,q]=(0,n.useState)({}),[K,Q]=(0,n.useState)(!1),[X,ee]=(0,n.useState)("");return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.A,{children:(0,p.jsxs)(d.A.Item,{eventKey:"1",children:[(0,p.jsx)(d.A.Header,{children:(0,p.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,p.jsx)("strong",{children:"Dropped & Lost"}),R>0?(0,p.jsx)("div",{className:"dashboardNotify",children:(0,p.jsx)("h6",{children:R})}):""]})}),(0,p.jsxs)(d.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,p.jsxs)("table",{className:"table table-bordered",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{className:"table-info",children:[(0,p.jsx)("th",{scope:"col",children:"Sr"}),(0,p.jsx)("th",{scope:"col",children:"Name"}),(0,p.jsx)("th",{scope:"col",children:"Phone No."}),(0,p.jsx)("th",{scope:"col",children:"Email-ID"}),(0,p.jsx)("th",{scope:"col",children:"Nationality"}),(0,p.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,p.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,p.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,p.jsx)("th",{scope:"col",children:"Sales Advisor"}),(0,p.jsx)("th",{scope:"col",children:"Producer"}),(0,p.jsx)("th",{scope:"col",children:"Link"}),(0,p.jsx)("th",{scope:"col",children:"Action"})]})}),(0,p.jsx)("tbody",{children:g.length>0?g.map(((e,t)=>{var a,n;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:Y+t+1}),(0,p.jsxs)("td",{onClick:()=>(e=>{try{console.log(e),window.open(e,"_blank")}catch(t){console.log(t)}})(e.buisnessEntityCostomerLink),children:[" ",e.name]}),(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`https://wa.me/${e}`;window.open(t)})(e.phoneno),children:e.phoneno})}),(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`mailto:${e}`;window.open(t)})(e.email),children:e.email})}),(0,p.jsx)("td",{children:e.nationality}),(0,p.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,p.jsx)("td",{children:e.assign_salesadvisor_timestamp?h()(e.assign_salesadvisor_timestamp).fromNow():h()(e.new_lead_timestamp).fromNow()}),(0,p.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,p.jsx)("td",{children:""!=e.assigned_agent_info?null===(a=e.assigned_agent_info[0])||void 0===a?void 0:a.name:"-"}),(0,p.jsx)("td",{children:""!=e.producerdetail?null===(n=e.producerdetail[0])||void 0===n?void 0:n.name:"-"}),(0,p.jsx)("td",{className:"buttons_icons1",children:(0,p.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>(e=>{console.log(e),ee(e),Q(!0)})(e.buisnessEntityCostomerLink),children:(0,p.jsx)("i",{className:"fa-solid fa-link"})})}),(0,p.jsx)("td",{className:"buttons_icons1",children:(0,p.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>((e,t)=>{"Motor"===t&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===t&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===t&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===t&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===t&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===t&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,e.policy_type[0].line_of_business_name),children:(0,p.jsx)("i",{className:"fa-solid fa-eye"})})})]},t)})):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"12",className:"text-center",children:(0,p.jsx)("strong",{children:"No Records Found"})})})})]}),(0,p.jsxs)("section",{children:[(0,p.jsx)("button",{className:"save-btn",onClick:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user"))._id,a="{}"===JSON.stringify(P)?null:P,n="{}"===JSON.stringify(L)?null:L,s=""===E?null:E,l=new Set(Object.keys(a||{}).concat(Object.keys(n||{}),Object.keys(s||{})));for(const d of l){const e=P[d],a=L[d],n=E[d];if("Forward"===a&&(""===n||null===n||void 0===n))return alert("Please select DC agent"),!1;const s={method:"POST",body:JSON.stringify({id:d,direct_payment:e,lead_status:a,forward_to:n,assigningagent:t}),headers:{"Content-Type":"application/json"}};fetch("https://insuranceapi-3o5t.onrender.com/api/update_new_lead_details",s).then((e=>e.json())).then((e=>{G(A,C),o(G(A,C))}))}},children:"Save "}),(0,p.jsx)(s(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:N,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const t=e.selected;w(t+1),G(t+1,C,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})]})]})]})}),(0,p.jsxs)(r.A,{size:"lg",show:k,onHide:()=>I(!1),children:[(0,p.jsx)(r.A.Header,{closeButton:!0,children:(0,p.jsx)(r.A.Title,{children:"Lead Detail"})}),(0,p.jsx)(r.A.Body,{children:(0,p.jsxs)(c.A,{children:[(0,p.jsxs)(i.A,{children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"name",children:"Name"}),(0,p.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:x.name})]})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"email",children:"Email"}),(0,p.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:x.email})]})})]}),(0,p.jsxs)(i.A,{children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,p.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:x.phoneno})]})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,p.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:f})]})})]})]})}),(0,p.jsx)(r.A.Footer,{children:(0,p.jsx)(u.A,{variant:"secondary",onClick:()=>I(!1),children:"Close"})})]}),(0,p.jsxs)(r.A,{size:"lg",show:K,onHide:()=>Q(!1),children:[(0,p.jsx)(r.A.Header,{closeButton:!0,children:(0,p.jsx)(r.A.Title,{children:"Link"})}),(0,p.jsx)(r.A.Body,{children:(0,p.jsx)(c.A,{children:(0,p.jsx)(i.A,{children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"name"}),(0,p.jsx)("textarea",{className:"form-control",id:"address",name:"address",value:X,readOnly:!0,children:X&&(0,p.jsx)("a",{href:X,target:"_blank",rel:"noopener noreferrer",children:X})})]})})})})}),(0,p.jsxs)(r.A.Footer,{children:[(0,p.jsx)(u.A,{variant:"primary",onClick:()=>{const e=document.createElement("textarea");e.value=X,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Link copied to clipboard!")},children:"Copy Link"}),(0,p.jsx)(u.A,{variant:"secondary",onClick:()=>Q(!1),children:"Close"})]})]})]})}},84822:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(65043),o=a(92157),s=a.n(o),l=a(73216),d=a(1177),r=a(84217),c=a(53519),i=a(61072),u=a(14282),m=a(86178),h=a.n(m),p=a(70579);const g=function(e){let{filterOptions:t,defaultOptions:a,updateSharedData:o}=e;const m=(0,l.Zp)(),[g,j]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[x,v]=(0,n.useState)([]),[f,S]=(0,n.useState)([]),[C]=(0,n.useState)(5),[N,_]=(0,n.useState)(0),[A,w]=(0,n.useState)(1),[k,I]=(0,n.useState)(!1),[T,O]=(0,n.useState)(""),[L,J]=(0,n.useState)({}),[P,D]=(0,n.useState)({}),[F,M]=(0,n.useState)([]),[E,B]=(0,n.useState)(""),[R,$]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?m("/login"):(G(A,C),V(),W())}),[t]);const H=JSON.parse(localStorage.getItem("user")),z=(H.usertype,null===H||void 0===H?void 0:H.location);let U="";z&&z.length>0&&z[0].loc_id&&(U=z[0].loc_id);const G=async(e,n)=>{let o=t.location,s=t.lob,l=t.businessType,d=t.agent,r=t.dateRange,c=a.startdate,i=a.enddate;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((e=>e.value)):a.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,h={method:"POST",body:JSON.stringify({page:e,limit:n,location:o,lob:s,business_type:l,newagent:d,dateRange:r,startdate:c,enddate:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};"66068569e8f96a29286c956e"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=pending",h).then((e=>e.json())).then((e=>{const t=e.total;$(t);const a=t/n,o=Math.ceil(a);_(o);const s=e.data;j(s)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=pending&dashboardType=producerDashbord",h).then((e=>e.json())).then((e=>{const t=e.total;$(t);const a=t/n,o=Math.ceil(a);_(o);const s=e.data;j(s)})).catch((e=>{console.log(e)}))},V=async()=>{const e=JSON.parse(localStorage.getItem("user")).usertype;let t=await fetch("https://insuranceapi-3o5t.onrender.com/api/get_lead_status_name?type=salesAdvisor",{method:"post",body:JSON.stringify({usertype:e}),headers:{"Content-Type":"application/json"}});t=await t.json(),y(t.data)},Y=(A-1)*C,W=()=>{const e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};fetch("https://insuranceapi-3o5t.onrender.com/api/getUserAccordingUserType?userType=dacumentsChaser",e).then((e=>e.json())).then((e=>{const t=e.data,a=t.length,n=[];for(let o=0;o<a;o++){const e={label:t[o].name,value:t[o]._id};n.push(e)}M(n)}))};return console.log("pending policy ...........................................",g),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.A,{children:(0,p.jsxs)(d.A.Item,{eventKey:"1",children:[(0,p.jsx)(d.A.Header,{children:(0,p.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,p.jsx)("strong",{children:"Pending Leads"}),R>0?(0,p.jsx)("div",{className:"dashboardNotify",children:(0,p.jsx)("h6",{children:R})}):""]})}),(0,p.jsxs)(d.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,p.jsxs)("table",{className:"table table-bordered",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{className:"table-info",children:[(0,p.jsx)("th",{scope:"col",children:"Sr#"}),(0,p.jsx)("th",{scope:"col",children:"Name"}),(0,p.jsx)("th",{scope:"col",children:"Phone No."}),(0,p.jsx)("th",{scope:"col",children:"Email-ID"}),(0,p.jsx)("th",{scope:"col",children:"Nationality"}),(0,p.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,p.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,p.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,p.jsx)("th",{scope:"col",children:"Sales Advisor"}),(0,p.jsx)("th",{scope:"col",children:"Producer"}),"64116415591c2f02bcddf51e"!=U&&(0,p.jsx)("th",{scope:"col",children:"Link"}),(0,p.jsx)("th",{scope:"col",children:"Action"})]})}),(0,p.jsx)("tbody",{children:g.length>0?g.map(((e,t)=>{var a,n;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:Y+t+1}),(0,p.jsx)("td",{children:e.name}),(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`https://wa.me/${e}`;window.open(t)})(e.phoneno),children:e.phoneno})}),(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`mailto:${e}`;window.open(t)})(e.email),children:e.email})}),(0,p.jsx)("td",{children:e.nationality}),(0,p.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,p.jsx)("td",{children:e.assign_salesadvisor_timestamp?h()(e.assign_salesadvisor_timestamp).fromNow():h()(e.new_lead_timestamp).fromNow()}),(0,p.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,p.jsx)("td",{children:""!=e.assigned_agent_info?null===(a=e.assigned_agent_info[0])||void 0===a?void 0:a.name:"-"}),(0,p.jsx)("td",{children:""!=e.producerdetail?null===(n=e.producerdetail[0])||void 0===n?void 0:n.name:"-"}),(0,p.jsx)("td",{className:"buttons_icons1",children:(0,p.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>((e,t)=>{"Motor"===t&&window.open(`/MotorLeaddetails?id=${e}`,"_blank"),"Travel"===t&&window.open(`/TravelLeaddetails?id=${e}`,"_blank"),"Medical"===t&&window.open(`/MedicalLeaddetails?id=${e}`,"_blank"),"Home"===t&&window.open(`/HomeLeaddetails?id=${e}`,"_blank"),"Yacht"===t&&window.open(`/YachtLeaddetails?id=${e}`,"_blank"),"Other Insurance"===t&&window.open(`/OtherInsuranceLeaddetails?id=${e}`,"_blank")})(e._id,e.policy_type[0].line_of_business_name),children:(0,p.jsx)("i",{className:"fa-solid fa-eye"})})})]},t)})):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"12",className:"text-center",children:(0,p.jsx)("strong",{children:"No Records Found"})})})})]}),(0,p.jsx)("section",{children:(0,p.jsx)(s(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:N,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const t=e.selected;w(t+1),G(t+1,C,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})}),(0,p.jsxs)(r.A,{size:"lg",show:k,onHide:()=>I(!1),children:[(0,p.jsx)(r.A.Header,{closeButton:!0,children:(0,p.jsx)(r.A.Title,{children:"Lead Detail"})}),(0,p.jsx)(r.A.Body,{children:(0,p.jsxs)(c.A,{children:[(0,p.jsxs)(i.A,{children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"name",children:"Name"}),(0,p.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:x.name})]})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"email",children:"Email"}),(0,p.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:x.email})]})})]}),(0,p.jsxs)(i.A,{children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,p.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:x.phoneno})]})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,p.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:f})]})})]})]})}),(0,p.jsx)(r.A.Footer,{children:(0,p.jsx)(u.A,{variant:"secondary",onClick:()=>I(!1),children:"Close"})})]})]})}},13148:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(65043),o=a(73216),s=a(12488),l=(a(84596),a(93946)),d=a(70579);const r=function(e){let{filterOptions:t,defaultOptions:a}=e;const r=(0,o.Zp)(),[c,i]=(0,n.useState)(0),[u,m]=(0,n.useState)(0),[h,p]=(0,n.useState)(0),[g,j]=(0,n.useState)(0),[b,y]=(0,n.useState)(0),[x,v]=(0,n.useState)(0),[f,S]=(0,n.useState)(0),[C,N]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?r("/login"):_()}),[t]);const _=async()=>{const e=JSON.parse(localStorage.getItem("user"));let n=t.location,o=t.lob,s=t.businessType,l=t.agent,d=t.dateRange,r=a.startdate,c=a.enddate,u=e.assign_staff,h=a.userType;n=null!=n&&void 0!=n&&Array.isArray(n)&&0!==n.length?n.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlob.map((e=>e.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultagent.map((e=>e.value));const g=localStorage.getItem("token"),b=JSON.parse(localStorage.getItem("user")).usertype;console.log("loginusertype",b);const x={method:"POST",body:JSON.stringify({location:n,lob:o,business_type:s,newagent:l,dateRange:d,startdate:r,enddate:c,assign_staff:u,userType:h}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+g}};"66068569e8f96a29286c956e"==b&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getProducerTopLeagentCount",x).then((e=>e.json())).then((e=>{console.log("data",e.data),i(e.data.newLead),m(e.data.closeLeadCount),p(e.data.closingRation),j(e.data.premiumEarened),y(e.data.incomeEarened),v(e.data.lostCount),S(e.data.pendingCount),N(e.data.topAgent)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==b&&await fetch("https://insuranceapi-3o5t.onrender.com/api/getProducerTopLeagentCount?dashboardType=producerDashbord",x).then((e=>e.json())).then((e=>{console.log("data",e),i(e.data.newLead),m(e.data.closeLeadCount),p(e.data.closingRation),j(e.data.premiumEarened),y(e.data.incomeEarened),v(e.data.lostCount),S(e.data.pendingCount),N(e.data.topAgent)})).catch((e=>{console.log(e)}))};function A(e){if(null!==e){const t=parseFloat(e.toString().replace(/,/g,""));return isNaN(t)?"":t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:!0})}}return(0,d.jsx)("div",{children:(0,d.jsxs)(s.default,{className:"carousel_abcds",margin:30,swipeable:!1,draggable:!0,showDots:!0,responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:6},desktop:{breakpoint:{max:3e3,min:1024},items:6},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}},children:[(0,d.jsx)(l.UF,{xs:2,class:"item",children:(0,d.jsx)(l.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"New Leads",value:null!=c?null===c||void 0===c?void 0:c.toString():"0"})}),(0,d.jsx)(l.UF,{xs:2,class:"item",children:(0,d.jsx)(l.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Pending Leads",value:null!=f?null===f||void 0===f?void 0:f.toString():"0"})}),(0,d.jsx)(l.UF,{xs:2,class:"item",children:(0,d.jsx)(l.U0,{className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Closed",value:null!=u?null===u||void 0===u?void 0:u.toString():"0"})}),(0,d.jsx)(l.UF,{xs:2,class:"item",children:(0,d.jsx)(l.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Premium earned",value:A(null!=g?null===g||void 0===g?void 0:g.toString():"0")})}),(0,d.jsx)(l.UF,{xs:2,class:"item",children:(0,d.jsx)(l.U0,{width:36,className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"IncomeEarned",value:A(null!=b?null===b||void 0===b?void 0:b.toString():"0")})}),(0,d.jsx)(l.UF,{xs:2,class:"item",children:(0,d.jsx)(l.U0,{className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Top Agent/Team",value:null!=C?null===C||void 0===C?void 0:C.toString():""})}),(0,d.jsx)(l.UF,{xs:2,class:"item",children:(0,d.jsx)(l.U0,{width:36,className:"mb-3",progress:{color:"primary",value:100},text:"Widget helper text",title:"Closing Ratio",value:null!=h?h.toFixed(3):"0"})}),(0,d.jsx)(l.UF,{xs:2,class:"item",children:(0,d.jsx)(l.U0,{width:36,className:"mb-3",progress:{color:"danger",value:100},text:"Widget helper text",title:"Lost",value:null!=x?null===x||void 0===x?void 0:x.toString():"0"})})]})})}},8064:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(65043),o=a(92157),s=a.n(o),l=a(73216),d=a(1177),r=(a(86178),a(73023),a(70579));const c=function(e){let{filterOptions:t,defaultOptions:a}=e;const o=(0,l.Zp)(),[c,i]=(0,n.useState)([]),[u,m]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[g,j]=(0,n.useState)([]),[b]=(0,n.useState)(5),[y,x]=(0,n.useState)(0),[v,f]=(0,n.useState)(1),[S,C]=(0,n.useState)(!1),[N,_]=(0,n.useState)([]),[A,w]=(0,n.useState)(""),[k,I]=(0,n.useState)(""),[T,O]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?o("/login"):L(v,b)}),[t]);const L=async(e,n)=>{const o=JSON.parse(localStorage.getItem("user"));let s=t.location,l=t.lob,d=t.businessType,r=t.agent,c=t.dateRange,u=a.startdate,m=a.enddate,h=o.assign_staff,p=a.userType,g=a.selectedSupervisor;s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultlob.map((e=>e.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),r=null!=r&&void 0!=r&&Array.isArray(r)&&0!==r.length?r.map((e=>e.value)):a.defaultagent.map((e=>e.value));const j=localStorage.getItem("token"),b=JSON.parse(localStorage.getItem("user")).usertype,y={method:"POST",body:JSON.stringify({page:e,limit:n,location:s,lob:l,business_type:d,newagent:r,dateRange:c,startdate:u,enddate:m,assign_staff:h,userType:p,selectedSupervisor:g}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+j}};"66068569e8f96a29286c956e"==b&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=Renewal",y).then((e=>e.json())).then((e=>{const t=e.total;O(t);const a=t/n,o=Math.ceil(a);x(o);const s=e.data;i(s)})).catch((e=>{console.log(e)})),"64622470b201a6f07b2dff22"==b&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=Renewal&dashboardType=producerDashbord",y).then((e=>e.json())).then((e=>{const t=e.total;O(t);const a=t/n,o=Math.ceil(a);x(o);const s=e.data;i(s)})).catch((e=>{console.log(e)}))};console.log(c);const J=(v-1)*b;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d.A,{children:(0,r.jsxs)(d.A.Item,{eventKey:"1",children:[(0,r.jsx)(d.A.Header,{children:(0,r.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,r.jsx)("strong",{children:"Upcoming Renewals"}),T>0?(0,r.jsx)("div",{className:"dashboardNotify",children:(0,r.jsx)("h6",{children:T})}):""]})}),(0,r.jsxs)(d.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,r.jsxs)("table",{className:"table table-bordered",children:[(0,r.jsx)("thead",{className:"thead-dark",children:(0,r.jsxs)("tr",{className:"table-info",children:[(0,r.jsx)("th",{scope:"col",children:"Sr#"}),(0,r.jsx)("th",{scope:"col",children:"Name"}),(0,r.jsx)("th",{scope:"col",children:"Phone No."}),(0,r.jsx)("th",{scope:"col",children:"Email-ID"}),(0,r.jsx)("th",{scope:"col",children:"Nationality"}),(0,r.jsx)("th",{scope:"col",children:"Policy Type"}),(0,r.jsx)("th",{scope:"col",children:"LMP Pol.No."}),(0,r.jsx)("th",{scope:"col",children:"Policy No."}),(0,r.jsx)("th",{scope:"col",children:"Premium"}),(0,r.jsx)("th",{scope:"col",children:"Sales Advisor"}),(0,r.jsx)("th",{scope:"col",children:"Producer"}),(0,r.jsx)("th",{scope:"col",children:"Action"})]})}),(0,r.jsx)("tbody",{children:c.length>0?c.map(((e,t)=>{var a,n;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:J+t+1}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`https://wa.me/${e}`;window.open(t)})(e.phoneno),children:e.phoneno})}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`mailto:${e}`;window.open(t)})(e.email),children:e.email})}),(0,r.jsx)("td",{children:e.nationality}),(0,r.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,r.jsx)("td",{children:e.lead_id}),(0,r.jsx)("td",{children:"#5678"}),(0,r.jsx)("td",{children:"Rs. 1000"}),(0,r.jsx)("td",{children:""!=e.assigned_agent_info?null===(a=e.assigned_agent_info[0])||void 0===a?void 0:a.name:"-"}),(0,r.jsx)("td",{children:""!=e.producerdetail?null===(n=e.producerdetail[0])||void 0===n?void 0:n.name:"-"}),(0,r.jsx)("td",{className:"buttons_icons1",children:(0,r.jsx)("button",{className:"btn btn-primary btn-sm ",onClick:()=>{var t,a,n;return a=e._id,"Motor"===(n=null===(t=e.policy_type[0])||void 0===t?void 0:t.line_of_business_name)&&window.open(`/MotorLeaddetails?id=${a}`,"_blank"),"Travel"===n&&window.open(`/TravelLeaddetails?id=${a}`,"_blank"),"Medical"===n&&window.open(`/MedicalLeaddetails?id=${a}`,"_blank"),"Home"===n&&window.open(`/HomeLeaddetails?id=${a}`,"_blank"),"Yacht"===n&&window.open(`/YachtLeaddetails?id=${a}`,"_blank"),void("Other Insurance"===n&&window.open(`/OtherInsuranceLeaddetails?id=${a}`,"_blank"))},children:(0,r.jsx)("i",{className:"fa fa-eye"})})})]},t)})):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"12",className:"text-center",children:(0,r.jsx)("strong",{children:"No Records Found"})})})})]}),(0,r.jsx)("section",{children:(0,r.jsx)(s(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:y,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const t=e.selected;f(t+1),L(t+1,b,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})})})}},89553:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var n=a(65043),o=a(92157),s=a.n(o),l=a(73216),d=a(1177),r=a(84217),c=a(53519),i=a(61072),u=a(14282),m=a(86178),h=a.n(m),p=a(30710),g=a(70579);const j=function(e){let{filterOptions:t,defaultOptions:a}=e;const o=(0,l.Zp)(),[m,j]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[x,v]=(0,n.useState)([]),[f]=(0,n.useState)(5),[S,C]=(0,n.useState)(0),[N,_]=(0,n.useState)(1),[A,w]=(0,n.useState)(!1),[k,I]=(0,n.useState)(!1),[T,O]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=localStorage.getItem("token");null===e||void 0===e||""===e?o("/login"):D(N,f)}),[t]);const L=JSON.parse(localStorage.getItem("user")),J=(L.usertype,null===L||void 0===L?void 0:L.location);let P="";J&&J.length>0&&J[0].loc_id&&(P=J[0].loc_id);const D=async(e,n)=>{I(!0);let o=t.location,s=t.lob,l=t.businessType,d=t.agent,r=t.dateRange,c=a.startdate,i=a.enddate;o=null!=o&&void 0!=o&&Array.isArray(o)&&0!==o.length?o.map((e=>e.value)):a.defaultlocation.map((e=>e.value)),s=null!=s&&void 0!=s&&Array.isArray(s)&&0!==s.length?s.map((e=>e.value)):a.defaultlob.map((e=>e.value)),l=null!=l&&void 0!=l&&Array.isArray(l)&&0!==l.length?l.map((e=>e.value)):a.defaultbusinessType.map((e=>e.value)),d=null!=d&&void 0!=d&&Array.isArray(d)&&0!==d.length?d.map((e=>e.value)):a.defaultagent.map((e=>e.value));const u=localStorage.getItem("token"),m=JSON.parse(localStorage.getItem("user")).usertype,h={method:"POST",body:JSON.stringify({page:e,limit:n,location:o,lob:s,business_type:l,newagent:d,dateRange:r,startdate:c,enddate:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+u}};"66068569e8f96a29286c956e"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=issuedPolicy",h).then((e=>e.json())).then((e=>{const t=e.total;O(t);const a=t/n,o=Math.ceil(a);C(o);const s=e.data;j(s)})).catch((e=>{console.log(e)})).finally((()=>{I(!1)})),"64622470b201a6f07b2dff22"==m&&await fetch("https://insuranceapi-3o5t.onrender.com/api/get_supervisor_leads?producer=issuedPolicy&dashboardType=producerDashbord",h).then((e=>e.json())).then((e=>{const t=e.total;O(t);const a=t/n,o=Math.ceil(a);C(o);const s=e.data;j(s)})).catch((e=>{console.log(e)})).finally((()=>{I(!1)}))},F=(N-1)*f;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.A,{children:(0,g.jsxs)(d.A.Item,{eventKey:"1",children:[(0,g.jsx)(d.A.Header,{children:(0,g.jsxs)("div",{style:{position:"relative"},className:"card-header new_leads",children:[(0,g.jsx)("strong",{children:"Issued Policies"}),T>0?(0,g.jsx)("div",{className:"dashboardNotify",children:(0,g.jsx)("h6",{children:T})}):""]})}),(0,g.jsxs)(d.A.Body,{className:"scrollavcds",style:{padding:"2px"},children:[(0,g.jsxs)("table",{className:"table table-bordered",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"table-info",children:[(0,g.jsx)("th",{scope:"col",children:"Sr"}),(0,g.jsx)("th",{scope:"col",children:"Name"}),(0,g.jsx)("th",{scope:"col",children:"Phone No."}),(0,g.jsx)("th",{scope:"col",children:"Email-ID"}),(0,g.jsx)("th",{scope:"col",children:"Nationality"}),(0,g.jsx)("th",{scope:"col",children:"Assigned Date & Time"}),(0,g.jsx)("th",{scope:"col",children:"Aging (as of today)"}),(0,g.jsx)("th",{scope:"col",children:"Type of Policy"}),(0,g.jsx)("th",{scope:"col",children:"Business Type"}),(0,g.jsx)("th",{scope:"col",children:"Sales Advisor"}),(0,g.jsx)("th",{scope:"col",children:"Producer"}),"64116415591c2f02bcddf51e"!=P&&(0,g.jsx)("th",{scope:"col",children:"Link"}),(0,g.jsx)("th",{scope:"col",children:"Action"})]})}),(0,g.jsx)("tbody",{children:k?(0,g.jsx)("div",{className:"loader-container",children:(0,g.jsx)(p.A,{color:"#ED1C24",loading:k,size:50})}):(0,g.jsx)(g.Fragment,{children:m.length>0?m.map(((e,t)=>{var a,n;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:F+t+1}),(0,g.jsx)("td",{children:e.name}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`https://wa.me/${e}`;window.open(t)})(e.phoneno),children:e.phoneno})}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",onClick:()=>(e=>{const t=`mailto:${e}`;window.open(t)})(e.email),children:e.email})}),(0,g.jsx)("td",{children:e.nationality}),(0,g.jsx)("td",{children:e.assign_salesadvisor_timestamp?new Date(e.assign_salesadvisor_timestamp).toString():new Date(e.new_lead_timestamp).toString()}),(0,g.jsx)("td",{children:e.assign_salesadvisor_timestamp?h()(e.assign_salesadvisor_timestamp).fromNow():h()(e.new_lead_timestamp).fromNow()}),(0,g.jsx)("td",{children:e.policy_type[0].line_of_business_name}),(0,g.jsx)("td",{children:e.business_type}),(0,g.jsx)("td",{children:""!=e.assigned_agent_info?null===(a=e.assigned_agent_info[0])||void 0===a?void 0:a.name:"-"}),(0,g.jsx)("td",{children:""!=e.producerdetail?null===(n=e.producerdetail[0])||void 0===n?void 0:n.name:"-"}),"64116415591c2f02bcddf51e"!=P&&(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:e.buisnessEntityCostomerLink,target:"_blank",rel:"noopener noreferrer",children:e.buisnessEntityCostomerLink})}),(0,g.jsx)("td",{className:"buttons_icons",children:(0,g.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ",onClick:()=>{return t=e._id,"Motor"===(a=e.policy_type[0].line_of_business_name)&&window.open(`/MotorLeaddetails?id=${t}`,"_blank"),"Travel"===a&&window.open(`/TravelLeaddetails?id=${t}`,"_blank"),"Medical"===a&&window.open(`/MedicalLeaddetails?id=${t}`,"_blank"),"Home"===a&&window.open(`/HomeLeaddetails?id=${t}`,"_blank"),"Yacht"===a&&window.open(`/YachtLeaddetails?id=${t}`,"_blank"),void("Other Insurance"===a&&window.open(`/OtherInsuranceLeaddetails?id=${t}`,"_blank"));var t,a},children:(0,g.jsx)("i",{className:"fa-solid fa-eye"})})})]},t)})):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"12",className:"text-center",children:(0,g.jsx)("strong",{children:"No Records Found"})})})})})]}),(0,g.jsx)("section",{children:(0,g.jsx)(s(),{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:S,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:e=>{const t=e.selected;_(t+1),D(t+1,f,localStorage.getItem("lob"))},containerClassName:"pagination justify-content-end",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})]})}),(0,g.jsxs)(r.A,{size:"lg",show:A,onHide:()=>w(!1),children:[(0,g.jsx)(r.A.Header,{closeButton:!0,children:(0,g.jsx)(r.A.Title,{children:"Lead Detail"})}),(0,g.jsx)(r.A.Body,{children:(0,g.jsxs)(c.A,{children:[(0,g.jsxs)(i.A,{children:[(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"name",children:"Name"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:b.name})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"email",children:"Email"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:b.email})]})})]}),(0,g.jsxs)(i.A,{children:[(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"phoneno",children:"Phone No."}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"phoneno",name:"phoneno",value:b.phoneno})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"dob",children:"Line Of Business"}),(0,g.jsx)("input",{type:"text",className:"form-control",id:"lob",name:"lob",value:x})]})})]})]})}),(0,g.jsx)(r.A.Footer,{children:(0,g.jsx)(u.A,{variant:"secondary",onClick:()=>w(!1),children:"Close"})})]})]})}}}]);
//# sourceMappingURL=6979.b0c1c914.chunk.js.map