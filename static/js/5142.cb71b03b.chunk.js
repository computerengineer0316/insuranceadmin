"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5142],{35142:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var n=t(65043),s=t(73216),c=t(70579);const d=()=>{const e=(0,s.Zp)(),[a,t]=(0,n.useState)([]),[d,r]=(0,n.useState)({}),[i,o]=(0,n.useState)([]),[l,h]=(0,n.useState)([]),[p,m]=(0,n.useState)(""),[_,u]=(0,n.useState)(""),[x,j]=(0,n.useState)(""),v=window.location.href,f=new URLSearchParams(v.split("?")[1]),g=f.get("id"),y=f.get("type");f.get("companyid"),f.get("policytype");(0,n.useEffect)((()=>{const a=localStorage.getItem("token");if(null===a||void 0===a||""===a)e("/login");else{const e=window.location.href.split("/")[3].split("?")[1].split("&"),a=e[0].split("=")[1],t=e[1].split("=")[1];b(a,t),u(t)}}),[]);const b=async(e,a)=>{await fetch(`https://insuranceapi-3o5t.onrender.com/api/get_standard_cover/${e}/${a}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((n=>{const s=n.data;console.log(s,">>>>>>>>>> matched standard covers");const c=s.length;let d="";"motor"==a&&(d=`https://insuranceapi-3o5t.onrender.com/api/motor_plan_details/${e}`),"travel"==a&&(d=`https://insuranceapi-3o5t.onrender.com/api/travel_plan_details/${e}`),"home"==a&&(d=`https://insuranceapi-3o5t.onrender.com/api/home_plan_details/${e}`),"yacht"==a&&(d=`https://insuranceapi-3o5t.onrender.com/api/yacht_plan_details/${e}`),"medical"==a&&(d=`https://insuranceapi-3o5t.onrender.com/api/single_medical_plan_details/${e}`),fetch(d,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{const a=e.data.standard_cover_arr;m(e.data.plan_name),j(e.company_name),console.log(e.data,">>>>>>>>>> plan data");const n=[];for(let t=0;t<c;t++)for(let e=0;e<a.length;e++)s[t]._id==a[e].standard_cover_id&&(n.push(s[t]),s[t].checked="checked",s[t].value=a[e].standard_cover_value,s[t].standard_cover_description=a[e].standard_cover_desc);t(s),o(n)}))}))},k=(e,a)=>{const t=new FormData,n=t.get("standard_cover_description"),s=t.get("value"),{name:c,value:d}=e.target;o((e=>{const t=[...e],r=t.findIndex((e=>e._id===a));return-1!==r?t[r]={...t[r],[c]:d}:t.push({itemId:a,standard_cover_description:n,value:s}),t}))};return(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-md-12",children:(0,c.jsxs)("div",{className:"card ",children:[(0,c.jsx)("div",{className:"card-header",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-md-6",children:[(0,c.jsx)("h4",{children:"Standard Covers"}),"travel"==_?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h5",{children:["Plan Name : ",p]}),(0,c.jsxs)("h5",{children:["Company Name : ",x]})]}):""]}),(0,c.jsx)("div",{className:"col-md-6",children:(0,c.jsx)("button",{onClick:()=>e(-1),className:"btn btn-primary",style:{float:"right"},children:"Back"})})]})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("table",{className:"table table-bordered",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"#"})}),(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"Standard Cover Label"})}),(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"Description"})}),(0,c.jsx)("th",{children:(0,c.jsx)("strong",{children:"Fixed/Percentage/Reffered"})})]})}),(0,c.jsx)("tbody",{children:a.map(((e,a)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"checkboxs",children:(0,c.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",defaultChecked:e.checked,onChange:a=>((e,a)=>{const t=[...i];if(!0===e.target.checked)a.checked="checked",t.push(a);else if(!1===e.target.checked){const e=t.indexOf(a);console.log(e),t.splice(e,1)}o(t)})(a,e)})})}),(0,c.jsx)("td",{children:e.standard_cover_label}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"form-group",children:(0,c.jsx)("input",{type:"text",name:"standard_cover_description",className:"form-control",disabled:!e.checked,onChange:a=>k(a,e._id),defaultValue:e.standard_cover_description})})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"form-group",children:(0,c.jsx)("input",{type:"text",name:"value",className:"form-control",disabled:!e.checked,onChange:a=>k(a,e._id),defaultValue:e.value})})})]},a)))})]})}),(0,c.jsx)("div",{className:"card-footer",children:(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>{console.log(i,"submit data");const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g,type:y,formData:i})};fetch("https://insuranceapi-3o5t.onrender.com/api/add_plan_standard_cover",e).then((e=>e.json())).then((e=>{window.location.href="/ViewStandardCover?id="+g+"&type="+y}))},style:{float:"right"},children:"Submit"})})]})})})})}}}]);
//# sourceMappingURL=5142.cb71b03b.chunk.js.map